<template name="bubblePage">

  <div class="visible-{{isLoading}}">
    {{> gifLoaderToParent}}
  </div>
    
  {{#with getCurrentBubble}}

    {{> bubbleCover}}
    {{> bubbleSectionSelector}}
    
    <div class="bubble-page-content">
        {{#if compressedUpdates _id '1'}}
          <div class="bubble-list">
            <div class="bubble-list-heading">
              <h3 class="section-name pull-left">{{compressedUpdatesCount this._id}} updates</h3>

              <button class="std-btn-light pull-right clear-updates">clear all</button> 
              
              {{#if showMoreUpdates compressedUpdatesCount}}
                <button class="std-btn-light pull-right more-updates">see all</button>
              {{/if}}
              
            </div>
            {{> updatesList}}
          </div>
        {{/if}}
  
        <div class="bubble-list">
          {{#with postProperties.event}}
            <div></div>
            {{> listHeading}}
            {{#each posts}}
              {{> listItem}}
            {{else}}
              <div class="post-item">
                <div class="v-middle">
                  <div class="v-inner">
                    No events yet. Schedule meetings and other members-only events here!
                  </div>
                </div>
              </div>
            {{/each}}
            <a class="visible" href="{{bubbleEventPagePath getCurrentBubble._id}}">
              <button class="pull-left btn-tiny more-posts">+ view more events</button>
            </a>
          {{/with}}
        </div>

        <div class="bubble-list">
          {{#with postProperties.discussion}}
            <div></div>
            {{> listHeading}}
            {{#each posts}}
              {{> listItem}}
            {{else}}
              <div class="post-item">
                <div class="v-middle">
                  <div class="v-inner">
                    No discussions? Start discussions for any topic here!
                  </div>
                </div>
              </div>
            {{/each}}
            <a class="visible" href="{{bubbleDiscussionPagePath getCurrentBubble._id}}">
              <button class="pull-left btn-tiny more-posts">+ view more discussions</button>
            </a>
          {{/with}}
        </div>
  
        <div class="bubble-list">
          {{#with postProperties.file}}
            <div></div>
            {{> listHeading}}
            {{#each posts}}
              {{> listItem}}
            {{else}}
              <div class="post-item">
                <div class="v-middle">
                  <div class="v-inner">
                    No files? Add some here!
                  </div>
                </div>
              </div>
            {{/each}}
            <a class="visible" href="{{bubbleFilePagePath getCurrentBubble._id}}">
              <button class="pull-left btn-tiny more-posts">+ view more files</button>
            </a>
          {{/with}}
        </div>




    </div>


  {{/with}}
</template>
