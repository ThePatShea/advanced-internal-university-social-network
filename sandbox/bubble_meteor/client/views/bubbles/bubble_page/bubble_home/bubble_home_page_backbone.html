<template name="bubblePageBackbone">

  <div class="visible-{{isLoading}}">
    {{> gifLoaderToParent}}
  </div>

  {{#with getCurrentBubbleBackbone}}

    {{> bubbleCoverBackbone}}
    {{> bubbleSectionSelectorBackbone}}

    <div class="bubble-page-content">
        {{#if showUpdates}}
        <div>
          <div class="bubble-list">
            <div class="bubble-list-heading">
              <h3 class="section-name pull-left">{{pluralize numUpdates 'update' ""}}</h3>
                  <button class="std-btn-light pull-right clear-updates">clear all</button>
                </div>
                <div class="dashboard-updates">
              {{#each getUpdates}}
                {{>updateItem}}
              {{/each}}
              {{#if haveMoreUpdates}}
              <button class="pull-left btn-tiny more-updates" style="margin: 15px 0 0 25px">+ see all</button>
              {{/if}}
            </div>
          </div>
        </div>
        {{/if}}

        <div class="bubble-list">
          {{#with postPropertiesBackboneEvent}}
            <div></div>
            {{> listHeading}}
            {{#each posts}}
              {{> listItemEventPostBB}}
            {{else}}
              <div class="post-item">
                <div class="v-middle">
                  <div class="v-inner">
                    No events yet. Schedule meetings and other members-only events here!
                  </div>
                </div>
              </div>
            {{/each}}
            {{#if hasMoreEvents}}
            <a class="visible" href="{{bubbleEventPageBackbonePath getCurrentBubbleBackbone.id}}">
              <button class="pull-left btn-tiny more-posts">+ view more events</button>
            </a>
            {{/if}}
          {{/with}}
        </div>

        <div class="bubble-list">
          {{#with postPropertiesBackboneDiscussion}}
            <div></div>
            {{> listHeading}}
            {{#each posts}}
              {{> listItemDiscussionPostBB}}
            {{else}}
              <div class="post-item">
                <div class="v-middle">
                  <div class="v-inner">
                    No discussions? Start discussions for any topic here!
                  </div>
                </div>
              </div>
            {{/each}}
            {{#if hasMoreDiscussions}}
            <a class="visible" href="{{bubbleDiscussionPageBackbonePath getCurrentBubbleBackbone.id}}">
              <button class="pull-left btn-tiny more-posts">+ view more discussions</button>
            </a>
            {{/if}}
          {{/with}}
        </div>

        <div class="bubble-list">
          {{#with postPropertiesBackboneFile}}
            <div></div>
            {{> listHeading}}
            {{#each posts}}
              {{> listItemFilePostBB}}
            {{else}}
              <div class="post-item">
                <div class="v-middle">
                  <div class="v-inner">
                    No files? Add some here!
                  </div>
                </div>
              </div>
            {{/each}}
            {{#if hasMoreFiles}}
            <a class="visible" href="{{bubbleFilePageBackbonePath getCurrentBubbleBackbone.id}}">
              <button class="pull-left btn-tiny more-posts">+ view more files</button>
            </a>
            {{/if}}
          {{/with}}
        </div>
    </div>
  {{/with}}
</template>
