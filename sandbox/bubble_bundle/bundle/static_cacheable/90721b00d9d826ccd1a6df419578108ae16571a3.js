(function(){(function(){var e=this,t=e._,n={},i=Array.prototype,o=Object.prototype,s=Function.prototype,r=i.push,a=i.slice,l=i.concat,c=(i.unshift,o.toString),u=o.hasOwnProperty,d=i.forEach,p=i.map,h=i.reduce,f=i.reduceRight,m=i.filter,g=i.every,v=i.some,b=i.indexOf,_=i.lastIndexOf,y=Array.isArray,w=Object.keys,x=s.bind,C=function(e){return e instanceof C?e:this instanceof C?(this._wrapped=e,void 0):new C(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=C),exports._=C):e._=C,C.VERSION="1.4.2";var k=C.each=C.forEach=function(e,t,i){if(null!=e)if(d&&e.forEach===d)e.forEach(t,i);else if(e.length===+e.length){for(var o=0,s=e.length;s>o;o++)if(t.call(i,e[o],o,e)===n)return}else for(var r in e)if(C.has(e,r)&&t.call(i,e[r],r,e)===n)return};C.map=C.collect=function(e,t,n){var i=[];return null==e?i:p&&e.map===p?e.map(t,n):(k(e,function(e,o,s){i[i.length]=t.call(n,e,o,s)}),i)},C.reduce=C.foldl=C.inject=function(e,t,n,i){var o=arguments.length>2;if(null==e&&(e=[]),h&&e.reduce===h)return i&&(t=C.bind(t,i)),o?e.reduce(t,n):e.reduce(t);if(k(e,function(e,s,r){o?n=t.call(i,n,e,s,r):(n=e,o=!0)}),!o)throw new TypeError("Reduce of empty array with no initial value");return n},C.reduceRight=C.foldr=function(e,t,n,i){var o=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return i&&(t=C.bind(t,i)),arguments.length>2?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var r=C.keys(e);s=r.length}if(k(e,function(a,l,c){l=r?r[--s]:--s,o?n=t.call(i,n,e[l],l,c):(n=e[l],o=!0)}),!o)throw new TypeError("Reduce of empty array with no initial value");return n},C.find=C.detect=function(e,t,n){var i;return T(e,function(e,o,s){return t.call(n,e,o,s)?(i=e,!0):void 0}),i},C.filter=C.select=function(e,t,n){var i=[];return null==e?i:m&&e.filter===m?e.filter(t,n):(k(e,function(e,o,s){t.call(n,e,o,s)&&(i[i.length]=e)}),i)},C.reject=function(e,t,n){var i=[];return null==e?i:(k(e,function(e,o,s){t.call(n,e,o,s)||(i[i.length]=e)}),i)},C.every=C.all=function(e,t,i){t||(t=C.identity);var o=!0;return null==e?o:g&&e.every===g?e.every(t,i):(k(e,function(e,s,r){return(o=o&&t.call(i,e,s,r))?void 0:n}),!!o)};var T=C.some=C.any=function(e,t,i){t||(t=C.identity);var o=!1;return null==e?o:v&&e.some===v?e.some(t,i):(k(e,function(e,s,r){return o||(o=t.call(i,e,s,r))?n:void 0}),!!o)};C.contains=C.include=function(e,t){var n=!1;return null==e?n:b&&e.indexOf===b?-1!=e.indexOf(t):n=T(e,function(e){return e===t})},C.invoke=function(e,t){var n=a.call(arguments,2);return C.map(e,function(e){return(C.isFunction(t)?t:e[t]).apply(e,n)})},C.pluck=function(e,t){return C.map(e,function(e){return e[t]})},C.where=function(e,t){return C.isEmpty(t)?[]:C.filter(e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},C.max=function(e,t,n){if(!t&&C.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);if(!t&&C.isEmpty(e))return-1/0;var i={computed:-1/0};return k(e,function(e,o,s){var r=t?t.call(n,e,o,s):e;r>=i.computed&&(i={value:e,computed:r})}),i.value},C.min=function(e,t,n){if(!t&&C.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);if(!t&&C.isEmpty(e))return 1/0;var i={computed:1/0};return k(e,function(e,o,s){var r=t?t.call(n,e,o,s):e;i.computed>r&&(i={value:e,computed:r})}),i.value},C.shuffle=function(e){var t,n=0,i=[];return k(e,function(e){t=C.random(n++),i[n-1]=i[t],i[t]=e}),i};var M=function(e){return C.isFunction(e)?e:function(t){return t[e]}};C.sortBy=function(e,t,n){var i=M(t);return C.pluck(C.map(e,function(e,t,o){return{value:e,index:t,criteria:i.call(n,e,t,o)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index<t.index?-1:1}),"value")};var S=function(e,t,n,i){var o={},s=M(t);return k(e,function(t,r){var a=s.call(n,t,r,e);i(o,a,t)}),o};C.groupBy=function(e,t,n){return S(e,t,n,function(e,t,n){(C.has(e,t)?e[t]:e[t]=[]).push(n)})},C.countBy=function(e,t,n){return S(e,t,n,function(e,t){C.has(e,t)||(e[t]=0),e[t]++})},C.sortedIndex=function(e,t,n,i){n=null==n?C.identity:M(n);for(var o=n.call(i,t),s=0,r=e.length;r>s;){var a=s+r>>>1;o>n.call(i,e[a])?s=a+1:r=a}return s},C.toArray=function(e){return e?e.length===+e.length?a.call(e):C.values(e):[]},C.size=function(e){return e.length===+e.length?e.length:C.keys(e).length},C.first=C.head=C.take=function(e,t,n){return null==t||n?e[0]:a.call(e,0,t)},C.initial=function(e,t,n){return a.call(e,0,e.length-(null==t||n?1:t))},C.last=function(e,t,n){return null==t||n?e[e.length-1]:a.call(e,Math.max(e.length-t,0))},C.rest=C.tail=C.drop=function(e,t,n){return a.call(e,null==t||n?1:t)},C.compact=function(e){return C.filter(e,function(e){return!!e})};var I=function(e,t,n){return k(e,function(e){C.isArray(e)?t?r.apply(n,e):I(e,t,n):n.push(e)}),n};C.flatten=function(e,t){return I(e,t,[])},C.without=function(e){return C.difference(e,a.call(arguments,1))},C.uniq=C.unique=function(e,t,n,i){var o=n?C.map(e,n,i):e,s=[],r=[];return k(o,function(n,i){(t?i&&r[r.length-1]===n:C.contains(r,n))||(r.push(n),s.push(e[i]))}),s},C.union=function(){return C.uniq(l.apply(i,arguments))},C.intersection=function(e){var t=a.call(arguments,1);return C.filter(C.uniq(e),function(e){return C.every(t,function(t){return C.indexOf(t,e)>=0})})},C.difference=function(e){var t=l.apply(i,a.call(arguments,1));return C.filter(e,function(e){return!C.contains(t,e)})},C.zip=function(){for(var e=a.call(arguments),t=C.max(C.pluck(e,"length")),n=Array(t),i=0;t>i;i++)n[i]=C.pluck(e,""+i);return n},C.object=function(e,t){for(var n={},i=0,o=e.length;o>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},C.indexOf=function(e,t,n){if(null==e)return-1;var i=0,o=e.length;if(n){if("number"!=typeof n)return i=C.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,o+n):n}if(b&&e.indexOf===b)return e.indexOf(t,n);for(;o>i;i++)if(e[i]===t)return i;return-1},C.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(_&&e.lastIndexOf===_)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var o=i?n:e.length;o--;)if(e[o]===t)return o;return-1},C.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),o=0,s=Array(i);i>o;)s[o++]=e,e+=n;return s};var D=function(){};C.bind=function(e,t){var n,i;if(e.bind===x&&x)return x.apply(e,a.call(arguments,1));if(!C.isFunction(e))throw new TypeError;return i=a.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(a.call(arguments)));D.prototype=e.prototype;var o=new D,s=e.apply(o,i.concat(a.call(arguments)));return Object(s)===s?s:o}},C.bindAll=function(e){var t=a.call(arguments,1);return 0==t.length&&(t=C.functions(e)),k(t,function(t){e[t]=C.bind(e[t],e)}),e},C.memoize=function(e,t){var n={};return t||(t=C.identity),function(){var i=t.apply(this,arguments);return C.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},C.delay=function(e,t){var n=a.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},C.defer=function(e){return C.delay.apply(C,[e,1].concat(a.call(arguments,1)))},C.throttle=function(e,t){var n,i,o,s,r,a,l=C.debounce(function(){r=s=!1},t);return function(){n=this,i=arguments;var c=function(){o=null,r&&(a=e.apply(n,i)),l()};return o||(o=setTimeout(c,t)),s?r=!0:(s=!0,a=e.apply(n,i)),l(),a}},C.debounce=function(e,t,n){var i,o;return function(){var s=this,r=arguments,a=function(){i=null,n||(o=e.apply(s,r))},l=n&&!i;return clearTimeout(i),i=setTimeout(a,t),l&&(o=e.apply(s,r)),o}},C.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},C.wrap=function(e,t){return function(){var n=[e];return r.apply(n,arguments),t.apply(this,n)}},C.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},C.after=function(e,t){return 0>=e?t():function(){return 1>--e?t.apply(this,arguments):void 0}},C.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)C.has(e,n)&&(t[t.length]=n);return t},C.values=function(e){var t=[];for(var n in e)C.has(e,n)&&t.push(e[n]);return t},C.pairs=function(e){var t=[];for(var n in e)C.has(e,n)&&t.push([n,e[n]]);return t},C.invert=function(e){var t={};for(var n in e)C.has(e,n)&&(t[e[n]]=n);return t},C.functions=C.methods=function(e){var t=[];for(var n in e)C.isFunction(e[n])&&t.push(n);return t.sort()},C.extend=function(e){return k(a.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},C.pick=function(e){var t={},n=l.apply(i,a.call(arguments,1));return k(n,function(n){n in e&&(t[n]=e[n])}),t},C.omit=function(e){var t={},n=l.apply(i,a.call(arguments,1));for(var o in e)C.contains(n,o)||(t[o]=e[o]);return t},C.defaults=function(e){return k(a.call(arguments,1),function(t){for(var n in t)null==e[n]&&(e[n]=t[n])}),e},C.clone=function(e){return C.isObject(e)?C.isArray(e)?e.slice():C.extend({},e):e},C.tap=function(e,t){return t(e),e};var A=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof C&&(e=e._wrapped),t instanceof C&&(t=t._wrapped);var o=c.call(e);if(o!=c.call(t))return!1;switch(o){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return i[s]==t;n.push(e),i.push(t);var r=0,a=!0;if("[object Array]"==o){if(r=e.length,a=r==t.length)for(;r--&&(a=A(e[r],t[r],n,i)););}else{var l=e.constructor,u=t.constructor;if(l!==u&&!(C.isFunction(l)&&l instanceof l&&C.isFunction(u)&&u instanceof u))return!1;for(var d in e)if(C.has(e,d)&&(r++,!(a=C.has(t,d)&&A(e[d],t[d],n,i))))break;if(a){for(d in t)if(C.has(t,d)&&!r--)break;a=!r}}return n.pop(),i.pop(),a};C.isEqual=function(e,t){return A(e,t,[],[])},C.isEmpty=function(e){if(null==e)return!0;if(C.isArray(e)||C.isString(e))return 0===e.length;for(var t in e)if(C.has(e,t))return!1;return!0},C.isElement=function(e){return!(!e||1!==e.nodeType)},C.isArray=y||function(e){return"[object Array]"==c.call(e)},C.isObject=function(e){return e===Object(e)},k(["Arguments","Function","String","Number","Date","RegExp"],function(e){C["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),C.isArguments(arguments)||(C.isArguments=function(e){return!(!e||!C.has(e,"callee"))}),C.isFunction=function(e){return"function"==typeof e},C.isFinite=function(e){return C.isNumber(e)&&isFinite(e)},C.isNaN=function(e){return C.isNumber(e)&&e!=+e},C.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},C.isNull=function(e){return null===e},C.isUndefined=function(e){return void 0===e},C.has=function(e,t){return u.call(e,t)},C.noConflict=function(){return e._=t,this},C.identity=function(e){return e},C.times=function(e,t,n){for(var i=0;e>i;i++)t.call(n,i)},C.random=function(e,t){return null==t&&(t=e,e=0),e+(0|Math.random()*(t-e+1))};var E={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};E.unescape=C.invert(E.escape);var P={escape:RegExp("["+C.keys(E.escape).join("")+"]","g"),unescape:RegExp("("+C.keys(E.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(e){C[e]=function(t){return null==t?"":(""+t).replace(P[e],function(t){return E[e][t]})}}),C.result=function(e,t){if(null==e)return null;var n=e[t];return C.isFunction(n)?n.call(e):n},C.mixin=function(e){k(C.functions(e),function(t){var n=C[t]=e[t];C.prototype[t]=function(){var e=[this._wrapped];return r.apply(e,arguments),B.call(this,n.apply(C,e))}})};var $=0;C.uniqueId=function(e){var t=$++;return e?e+t:t},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(e,t,n){n=C.defaults({},n,C.templateSettings);var i=RegExp([(n.escape||L).source,(n.interpolate||L).source,(n.evaluate||L).source].join("|")+"|$","g"),o=0,s="__p+='";e.replace(i,function(t,n,i,r,a){s+=e.slice(o,a).replace(O,function(e){return"\\"+N[e]}),s+=n?"'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?"'+\n((__t=("+i+"))==null?'':__t)+\n'":r?"';\n"+r+"\n__p+='":"",o=a+t.length}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var r=Function(n.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(t)return r(t,C);var l=function(e){return r.call(this,e,C)};return l.source="function("+(n.variable||"obj")+"){\n"+s+"}",l},C.chain=function(e){return C(e).chain()};var B=function(e){return this._chain?C(e).chain():e};C.mixin(C),k(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];C.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],B.call(this,n)}}),k(["concat","join","slice"],function(e){var t=i[e];C.prototype[e]=function(){return B.call(this,t.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)})(),function(){Meteor={isClient:!0,isServer:!1},"undefined"!=typeof __meteor_runtime_config__&&__meteor_runtime_config__&&__meteor_runtime_config__.PUBLIC_SETTINGS&&(Meteor.settings={"public":__meteor_runtime_config__.PUBLIC_SETTINGS})}(),function(){__meteor_runtime_config__.meteorRelease&&(Meteor.release=__meteor_runtime_config__.meteorRelease),_.extend(Meteor,{_get:function(e){for(var t=1;arguments.length>t;t++){if(!(arguments[t]in e))return void 0;e=e[arguments[t]]}return e},_ensure:function(e){for(var t=1;arguments.length>t;t++){var n=arguments[t];n in e||(e[n]={}),e=e[n]}return e},_delete:function(e){for(var t=[e],n=!0,i=1;arguments.length-1>i;i++){var o=arguments[i];if(!(o in e)){n=!1;break}if(e=e[o],"object"!=typeof e)break;t.push(e)}for(var i=t.length-1;i>=0;i--){var o=arguments[i+1];if(n)n=!1;else for(var s in t[i][o])return;delete t[i][o]}}})}(),function(){_.extend(Meteor,{setTimeout:function(e,t){if(Meteor._CurrentInvocation){if(Meteor._CurrentInvocation.get()&&Meteor._CurrentInvocation.get().isSimulation)throw Error("Can't set timers inside simulations");var n=e;e=function(){Meteor._CurrentInvocation.withValue(null,n)}}return setTimeout(Meteor.bindEnvironment(e,function(e){Meteor._debug("Exception from setTimeout callback:",e.stack)}),t)},setInterval:function(e,t){if(Meteor._CurrentInvocation){if(Meteor._CurrentInvocation.get()&&Meteor._CurrentInvocation.get().isSimulation)throw Error("Can't set timers inside simulations");var n=e;e=function(){Meteor._CurrentInvocation.withValue(null,n)}}return setInterval(Meteor.bindEnvironment(e,function(e){Meteor._debug("Exception from setInterval callback:",e)}),t)},clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)},defer:function(e){Meteor.setTimeout(function(){e()},0)}})}(),function(){var e=0,t=[];Meteor.EnvironmentVariable=function(){this.slot=e++},_.extend(Meteor.EnvironmentVariable.prototype,{get:function(){return t[this.slot]},withValue:function(e,n){var i=t[this.slot];try{t[this.slot]=e;var o=n()}finally{t[this.slot]=i}return o}}),Meteor.bindEnvironment=function(e,n,i){var o=_.clone(t);if(!n)throw Error("onException must be supplied");return function(){var s=t;try{t=o;var r=e.apply(i,_.toArray(arguments))}catch(a){n(a)}finally{t=s}return r}}}(),function(){Meteor.absoluteUrl=function(e,t){t||"object"!=typeof e||(t=e,e=void 0),t=_.extend({},Meteor.absoluteUrl.defaultOptions,t||{});var n=t.rootUrl;if(!n)throw Error("Must pass options.rootUrl or set ROOT_URL in the server environment");return/\/$/.test(n)||(n+="/"),e&&(n+=e),t.secure&&/^http:/.test(n)&&!/http:\/\/localhost[:\/]/.test(n)&&!/http:\/\/127\.0\.0\.1[:\/]/.test(n)&&(n=n.replace(/^http:/,"https:")),t.replaceLocalhost&&(n=n.replace(/^http:\/\/localhost([:\/].*)/,"http://127.0.0.1$1")),n},Meteor.absoluteUrl.defaultOptions={},__meteor_runtime_config__&&__meteor_runtime_config__.ROOT_URL&&(Meteor.absoluteUrl.defaultOptions.rootUrl=__meteor_runtime_config__.ROOT_URL)}(),function(){Deps={},Deps.active=!1,Deps.currentComputation=null;var e=function(e){Deps.currentComputation=e,Deps.active=!!e},t=function(){return"undefined"!=typeof Meteor?Meteor._debug:"undefined"!=typeof console&&console.log?console.log:function(){}},n=1,i=[],o=!1,s=!1,r=!1,a=[],l=function(){o||(setTimeout(Deps.flush,0),o=!0)},c=!1;Deps.Computation=function(e,t){if(!c)throw Error("Deps.Computation constructor is private; use Deps.autorun");c=!1;var i=this;i.stopped=!1,i.invalidated=!1,i.firstRun=!0,i._id=n++,i._onInvalidateCallbacks=[],i._parent=t,i._func=e,i._recomputing=!1;var o=!0;try{i._compute(),o=!1}finally{i.firstRun=!1,o&&i.stop()}},_.extend(Deps.Computation.prototype,{onInvalidate:function(e){var t=this;if("function"!=typeof e)throw Error("onInvalidate requires a function");var n=function(){Deps.nonreactive(function(){e(t)})};t.invalidated?n():t._onInvalidateCallbacks.push(n)},invalidate:function(){var e=this;if(!e.invalidated){e._recomputing||e.stopped||(l(),i.push(this)),e.invalidated=!0;for(var t,n=0;t=e._onInvalidateCallbacks[n];n++)t();e._onInvalidateCallbacks=[]}},stop:function(){this.stopped||(this.stopped=!0,this.invalidate())},_compute:function(){var t=this;t.invalidated=!1;var n=Deps.currentComputation;e(t),r=!0;try{t._func(t)}finally{e(n),r=!1}},_recompute:function(){var e=this;for(e._recomputing=!0;e.invalidated&&!e.stopped;)try{e._compute()}catch(n){t()("Exception from Deps recompute:",n.stack||n.message)}e._recomputing=!1}}),Deps.Dependency=function(){this._dependentsById={}},_.extend(Deps.Dependency.prototype,{depend:function(e){if(!e){if(!Deps.active)return!1;e=Deps.currentComputation}var t=this,n=e._id;return n in t._dependentsById?!1:(t._dependentsById[n]=e,e.onInvalidate(function(){delete t._dependentsById[n]}),!0)},changed:function(){var e=this;for(var t in e._dependentsById)e._dependentsById[t].invalidate()},hasDependents:function(){var e=this;for(var t in e._dependentsById)return!0;return!1}}),_.extend(Deps,{flush:function(){if(s)throw Error("Can't call Deps.flush while flushing");if(r)throw Error("Can't flush inside Deps.autorun");for(s=!0,o=!0;i.length||a.length;){var e=i;i=[];for(var n,l=0;n=e[l];l++)n._recompute();if(a.length){var c=a.shift();try{c()}catch(u){t()("Exception from Deps afterFlush function:",u.stack||u.message)}}}s=!1,o=!1},autorun:function(e){if("function"!=typeof e)throw Error("Deps.autorun requires a function argument");c=!0;var t=new Deps.Computation(e,Deps.currentComputation);return Deps.active&&Deps.onInvalidate(function(){t.stop()}),t},nonreactive:function(t){var n=Deps.currentComputation;e(null);try{return t()}finally{e(n)}},_makeNonreactive:function(e){if(e.$isNonreactive)return e;var t=function(){var t,n=this,i=_.toArray(arguments);return Deps.nonreactive(function(){t=e.apply(n,i)}),t};return t.$isNonreactive=!0,t},onInvalidate:function(e){if(!Deps.active)throw Error("Deps.onInvalidate requires a currentComputation");Deps.currentComputation.onInvalidate(e)},afterFlush:function(e){a.push(e),l()}})}(),function(){var e=function(e){return void 0===e?"undefined":EJSON.stringify(e)},t=function(e){return void 0===e||"undefined"===e?void 0:EJSON.parse(e)};ReactiveDict=function(e){this.keys=e||{},this.keyDeps={},this.keyValueDeps={}},_.extend(ReactiveDict.prototype,{set:function(t,n){var i=this;n=e(n);var o="undefined";if(_.has(i.keys,t)&&(o=i.keys[t]),n!==o){i.keys[t]=n;var s=function(e){e&&e.changed()};s(i.keyDeps[t]),i.keyValueDeps[t]&&(s(i.keyValueDeps[t][o]),s(i.keyValueDeps[t][n]))}},setDefault:function(e,t){var n=this;void 0===n.keys[e]&&n.set(e,t)},get:function(e){var n=this;return n._ensureKey(e),n.keyDeps[e].depend(),t(n.keys[e])},equals:function(n,i){var o=this;if(!("string"==typeof i||"number"==typeof i||"boolean"==typeof i||void 0===i||i instanceof Date||Meteor.Collection!==void 0&&i instanceof Meteor.Collection.ObjectID||null===i))throw Error("ReactiveDict.equals: value must be scalar");var s=e(i);if(Deps.active){o._ensureKey(n),_.has(o.keyValueDeps[n],s)||(o.keyValueDeps[n][s]=new Deps.Dependency);var r=o.keyValueDeps[n][s].depend();r&&Deps.onInvalidate(function(){o.keyValueDeps[n][s].hasDependents()||delete o.keyValueDeps[n][s]})}var a=void 0;return _.has(o.keys,n)&&(a=t(o.keys[n])),EJSON.equals(a,i)},_ensureKey:function(e){var t=this;e in t.keyDeps||(t.keyDeps[e]=new Deps.Dependency,t.keyValueDeps[e]={})},getMigrationData:function(){return this.keys}})}(),function(){var e=0;Meteor._debug=function(){if(e)return e--,void 0;if("undefined"!=typeof console&&console.log!==void 0)if(0==arguments.length)console.log("");else if("function"==typeof console.log.apply){for(var t=!0,n=0;arguments.length>n;n++)"string"!=typeof arguments[n]&&(t=!1);t?console.log.apply(console,[Array.prototype.join.call(arguments," ")]):console.log.apply(console,arguments)}else if("function"==typeof Function.prototype.bind){var i=Function.prototype.bind.call(console.log,console);i.apply(console,arguments)}else Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))},Meteor._suppress_log=function(t){e+=t}}(),function(){"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,o,s,r,a=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?l+"":"null";case"boolean":case"null":return l+"";case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(s=l.length,n=0;s>n;n+=1)r[n]=str(n,l)||"null";return o=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+a+"]":"["+r.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(s=rep.length,n=0;s>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],o=str(i,l),o&&r.push(quote(i)+(gap?": ":":")+o));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(o=str(i,l),o&&r.push(quote(i)+(gap?": ":":")+o));return o=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+a+"}":"{"+r.join(",")+"}",gap=a,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(e,t,o)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()}(),function(){Meteor._reload={};var e,t="Meteor_Reload",n=3e4,i={};"undefined"!=typeof sessionStorage&&sessionStorage&&(e=sessionStorage.getItem(t),sessionStorage.removeItem(t)),e||(e="{}");var o={};try{o=JSON.parse(e),"object"!=typeof o&&(Meteor._debug("Got bad data on reload. Ignoring."),o={})}catch(s){Meteor._debug("Got invalid JSON on reload. Ignoring.")}o.reload&&"object"==typeof o.data&&o.time+n>(new Date).getTime()&&(i=o.data);var r=[];Meteor._reload.onMigrate=function(e,t){t||(t=e,e=void 0),r.push({name:e,callback:t})},Meteor._reload.migrationData=function(e){return i[e]};var a=!1;Meteor._reload.reload=function(){if(!a){a=!0;var e=function(){_.defer(function(){for(var n={},i=_.clone(r);i.length;){var o=i.shift(),s=o.callback(e);if(!s[0])return;s.length>1&&o.name&&(n[o.name]=s[1])}try{var a=JSON.stringify({time:(new Date).getTime(),data:n,reload:!0})}catch(l){throw Meteor._debug("Couldn't serialize data for migration",n),l}"undefined"!=typeof sessionStorage&&sessionStorage?sessionStorage.setItem(t,a):Meteor._debug("Browser does not support sessionStorage. Not saving migration state."),window.location.reload()})};e()}}}(),function(){var e={};if(Meteor._reload){var t=Meteor._reload.migrationData("session");t&&t.keys&&(e=t.keys)}Session=new ReactiveDict(e),Meteor._reload&&Meteor._reload.onMigrate("session",function(){return[!0,{keys:Session.keys}]})}(),function(){Random={},Random._Alea=function(){function e(){var e=4022871197,t=function(t){t=""+t;for(var n=0;t.length>n;n++){e+=t.charCodeAt(n);var i=.02519603282416938*e;e=i>>>0,i-=e,i*=e,e=i>>>0,i-=e,e+=4294967296*i}return 2.3283064365386963e-10*(e>>>0)};return t.version="Mash 0.9",t}return function(t){var n=0,i=0,o=0,s=1;0==t.length&&(t=[+new Date]);var r=e();n=r(" "),i=r(" "),o=r(" ");for(var a=0;t.length>a;a++)n-=r(t[a]),0>n&&(n+=1),i-=r(t[a]),0>i&&(i+=1),o-=r(t[a]),0>o&&(o+=1);r=null;var l=function(){var e=2091639*n+2.3283064365386963e-10*s;return n=i,i=o,o=e-(s=0|e)};return l.uint32=function(){return 4294967296*l()},l.fract53=function(){return l()+1.1102230246251565e-16*(0|2097152*l())},l.version="Alea 0.9",l.args=t,l}(Array.prototype.slice.call(arguments))};var e="undefined"!=typeof window&&window.innerHeight||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientHeight||"undefined"!=typeof document&&document.body&&document.body.clientHeight||1,t="undefined"!=typeof window&&window.innerWidth||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientWidth||"undefined"!=typeof document&&document.body&&document.body.clientWidth||1,n="undefined"!=typeof navigator&&navigator.userAgent||"",i="undefined"!=typeof process&&process.pid||1;Random.fraction=new Random._Alea([new Date,e,t,n,i,Math.random()]),Random.choice=function(e){var t=Math.floor(Random.fraction()*e.length);return"string"==typeof e?e.substr(t,1):e[t]};var o="23456789ABCDEFGHJKLMNPQRSTWXYZabcdefghijkmnopqrstuvwxyz";Random.id=function(){for(var e=[],t=0;17>t;t++)e[t]=Random.choice(o);return e.join("")},Random.hexString=function(e){for(var t=[],n=0;e>n;++n)t.push(Random.choice("0123456789abcdef"));return t.join("")}}(),function(){var JSON;JSON||(JSON={}),function(){function str(e,t){var n,i,o,s,r,a=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?l+"":"null";case"boolean":case"null":return l+"";case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(s=l.length,n=0;s>n;n+=1)r[n]=str(n,l)||"null";return o=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+a+"]":"["+r.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(s=rep.length,n=0;s>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],o=str(i,l),o&&r.push(quote(i)+(gap?": ":":")+o));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(o=str(i,l),o&&r.push(quote(i)+(gap?": ":":")+o));return o=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+a+"}":"{"+r.join(",")+"}",gap=a,o}}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function f(e){return 10>e?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(e,t,o)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),SockJS=function(){var e=document,t=window,n={},i=function(){};i.prototype.addEventListener=function(e,t){this._listeners||(this._listeners={}),e in this._listeners||(this._listeners[e]=[]);var i=this._listeners[e];-1===n.arrIndexOf(i,t)&&i.push(t)},i.prototype.removeEventListener=function(e,t){if(this._listeners&&e in this._listeners){var i=this._listeners[e],o=n.arrIndexOf(i,t);return-1!==o?(i.length>1?this._listeners[e]=i.slice(0,o).concat(i.slice(o+1)):delete this._listeners[e],void 0):void 0}},i.prototype.dispatchEvent=function(e){var t=e.type,n=Array.prototype.slice.call(arguments,0);if(this["on"+t]&&this["on"+t].apply(this,n),this._listeners&&t in this._listeners)for(var i=0;this._listeners[t].length>i;i++)this._listeners[t][i].apply(this,n)};var o=function(e,t){if(this.type=e,t!==void 0)for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])};o.prototype.toString=function(){var e=[];for(var t in this)if(this.hasOwnProperty(t)){var n=this[t];"function"==typeof n&&(n="[function]"),e.push(t+"="+n)}return"SimpleEvent("+e.join(", ")+")"};var s=function(e){var t=this;t._events=e||[],t._listeners={}};s.prototype.emit=function(e){var t=this;if(t._verifyType(e),!t._nuked){var n=Array.prototype.slice.call(arguments,1);if(t["on"+e]&&t["on"+e].apply(t,n),e in t._listeners)for(var i=0;t._listeners[e].length>i;i++)t._listeners[e][i].apply(t,n)}},s.prototype.on=function(e,t){var n=this;n._verifyType(e),n._nuked||(e in n._listeners||(n._listeners[e]=[]),n._listeners[e].push(t))},s.prototype._verifyType=function(e){var t=this;-1===n.arrIndexOf(t._events,e)&&n.log("Event "+JSON.stringify(e)+" not listed "+JSON.stringify(t._events)+" in "+t)
},s.prototype.nuke=function(){var e=this;e._nuked=!0;for(var t=0;e._events.length>t;t++)delete e[e._events[t]];e._listeners={}};var r="abcdefghijklmnopqrstuvwxyz0123456789_";n.random_string=function(e,t){t=t||r.length;var n,i=[];for(n=0;e>n;n++)i.push(r.substr(Math.floor(Math.random()*t),1));return i.join("")},n.random_number=function(e){return Math.floor(Math.random()*e)},n.random_number_string=function(e){var t=(""+(e-1)).length,i=Array(t+1).join("0");return(i+n.random_number(e)).slice(-t)},n.getOrigin=function(e){e+="/";var t=e.split("/").slice(0,3);return t.join("/")},n.isSameOriginUrl=function(e,n){return n||(n=t.location.href),e.split("/").slice(0,3).join("/")===n.split("/").slice(0,3).join("/")},n.isSameOriginScheme=function(e,n){return n||(n=t.location.href),e.split(":")[0]===n.split(":")[0]},n.getParentDomain=function(e){if(/^[0-9.]*$/.test(e))return e;if(/^\[/.test(e))return e;if(!/[.]/.test(e))return e;var t=e.split(".").slice(1);return t.join(".")},n.objectExtend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e};var a="_jp";n.polluteGlobalNamespace=function(){a in t||(t[a]={})},n.closeFrame=function(e,t){return"c"+JSON.stringify([e,t])},n.userSetCode=function(e){return 1e3===e||e>=3e3&&4999>=e},n.countRTO=function(e){var t;return t=e>100?3*e:e+200},n.log=function(){t.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},n.bind=function(e,t){return e.bind?e.bind(t):function(){return e.apply(t,arguments)}},n.flatUrl=function(e){return-1===e.indexOf("?")&&-1===e.indexOf("#")},n.amendUrl=function(t){var i=e.location;if(!t)throw Error("Wrong url for SockJS");if(!n.flatUrl(t))throw Error("Only basic urls are supported in SockJS");return 0===t.indexOf("//")&&(t=i.protocol+t),0===t.indexOf("/")&&(t=i.protocol+"//"+i.host+t),t=t.replace(/[/]+$/,"")},n.arrIndexOf=function(e,t){for(var n=0;e.length>n;n++)if(e[n]===t)return n;return-1},n.arrSkip=function(e,t){var i=n.arrIndexOf(e,t);if(-1===i)return e.slice();var o=e.slice(0,i);return o.concat(e.slice(i+1))},n.isArray=Array.isArray||function(e){return{}.toString.call(e).indexOf("Array")>=0},n.delay=function(e,t){return"function"==typeof e&&(t=e,e=0),setTimeout(t,e)};var l,c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u={"\0":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","	":"\\t","\n":"\\n","":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","Â€":"\\u0080","Â":"\\u0081","Â‚":"\\u0082","Âƒ":"\\u0083","Â„":"\\u0084","Â…":"\\u0085","Â†":"\\u0086","Â‡":"\\u0087","Âˆ":"\\u0088","Â‰":"\\u0089","ÂŠ":"\\u008a","Â‹":"\\u008b","ÂŒ":"\\u008c","Â":"\\u008d","ÂŽ":"\\u008e","Â":"\\u008f","Â":"\\u0090","Â‘":"\\u0091","Â’":"\\u0092","Â“":"\\u0093","Â”":"\\u0094","Â•":"\\u0095","Â–":"\\u0096","Â—":"\\u0097","Â˜":"\\u0098","Â™":"\\u0099","Âš":"\\u009a","Â›":"\\u009b","Âœ":"\\u009c","Â":"\\u009d","Âž":"\\u009e","ÂŸ":"\\u009f","Â­":"\\u00ad","Ø€":"\\u0600","Ø":"\\u0601","Ø‚":"\\u0602","Øƒ":"\\u0603","Ø„":"\\u0604","Ü":"\\u070f","áž´":"\\u17b4","ážµ":"\\u17b5","â€Œ":"\\u200c","â€":"\\u200d","â€Ž":"\\u200e","â€":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","â€ª":"\\u202a","â€«":"\\u202b","â€¬":"\\u202c","â€­":"\\u202d","â€®":"\\u202e","â€¯":"\\u202f","â ":"\\u2060","â¡":"\\u2061","â¢":"\\u2062","â£":"\\u2063","â¤":"\\u2064","â¥":"\\u2065","â¦":"\\u2066","â§":"\\u2067","â¨":"\\u2068","â©":"\\u2069","âª":"\\u206a","â«":"\\u206b","â¬":"\\u206c","â­":"\\u206d","â®":"\\u206e","â¯":"\\u206f","ï»¿":"\\ufeff","ï¿°":"\\ufff0","ï¿±":"\\ufff1","ï¿²":"\\ufff2","ï¿³":"\\ufff3","ï¿´":"\\ufff4","ï¿µ":"\\ufff5","ï¿¶":"\\ufff6","ï¿·":"\\ufff7","ï¿¸":"\\ufff8","ï¿¹":"\\ufff9","ï¿º":"\\ufffa","ï¿»":"\\ufffb","ï¿¼":"\\ufffc","ï¿½":"\\ufffd","ï¿¾":"\\ufffe","ï¿¿":"\\uffff"},d=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,p=JSON&&JSON.stringify||function(e){return c.lastIndex=0,c.test(e)&&(e=e.replace(c,function(e){return u[e]})),'"'+e+'"'},h=function(e){var t,n={},i=[];for(t=0;65536>t;t++)i.push(String.fromCharCode(t));return e.lastIndex=0,i.join("").replace(e,function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n};n.quote=function(e){var t=p(e);return d.lastIndex=0,d.test(t)?(l||(l=h(d)),t.replace(d,function(e){return l[e]})):t};var f=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];n.probeProtocols=function(){for(var e={},t=0;f.length>t;t++){var n=f[t];e[n]=k[n]&&k[n].enabled()}return e},n.detectProtocols=function(e,t,n){var i={},o=[];t||(t=f);for(var s=0;t.length>s;s++){var r=t[s];i[r]=e[r]}var a=function(e){var t=e.shift();i[t]?o.push(t):e.length>0&&a(e)};return n.websocket!==!1&&a(["websocket"]),i["xhr-streaming"]&&!n.null_origin?o.push("xhr-streaming"):!i["xdr-streaming"]||n.cookie_needed||n.null_origin?a(["iframe-eventsource","iframe-htmlfile"]):o.push("xdr-streaming"),i["xhr-polling"]&&!n.null_origin?o.push("xhr-polling"):!i["xdr-polling"]||n.cookie_needed||n.null_origin?a(["iframe-xhr-polling","jsonp-polling"]):o.push("xdr-polling"),o};var m="_sockjs_global";n.createHook=function(){var e="a"+n.random_string(8);if(!(m in t)){var i={};t[m]=function(e){return e in i||(i[e]={id:e,del:function(){delete i[e]}}),i[e]}}return t[m](e)},n.attachMessage=function(e){n.attachEvent("message",e)},n.attachEvent=function(n,i){t.addEventListener!==void 0?t.addEventListener(n,i,!1):(e.attachEvent("on"+n,i),t.attachEvent("on"+n,i))},n.detachMessage=function(e){n.detachEvent("message",e)},n.detachEvent=function(n,i){t.addEventListener!==void 0?t.removeEventListener(n,i,!1):(e.detachEvent("on"+n,i),t.detachEvent("on"+n,i))};var g={},v=!1,b=function(){for(var e in g)g[e](),delete g[e]},_=function(){v||(v=!0,b())};n.attachEvent("unload",_),n.unload_add=function(e){var t=n.random_string(8);return g[t]=e,v&&n.delay(b),t},n.unload_del=function(e){e in g&&delete g[e]},n.createIframe=function(t,i){var o,s,r=e.createElement("iframe"),a=function(){clearTimeout(o);try{r.onload=null}catch(e){}r.onerror=null},l=function(){r&&(a(),setTimeout(function(){r&&r.parentNode.removeChild(r),r=null},0),n.unload_del(s))},c=function(e){r&&(l(),i(e))},u=function(e,t){try{r&&r.contentWindow&&r.contentWindow.postMessage(e,t)}catch(n){}};return r.src=t,r.style.display="none",r.style.position="absolute",r.onerror=function(){c("onerror")},r.onload=function(){clearTimeout(o),o=setTimeout(function(){c("onload timeout")},2e3)},e.body.appendChild(r),o=setTimeout(function(){c("timeout")},15e3),s=n.unload_add(l),{post:u,cleanup:l,loaded:a}},n.createHtmlfile=function(e,i){var o,s,r,l=new ActiveXObject("htmlfile"),c=function(){clearTimeout(o)},u=function(){l&&(c(),n.unload_del(s),r.parentNode.removeChild(r),r=l=null,CollectGarbage())},d=function(e){l&&(u(),i(e))},p=function(e,t){try{r&&r.contentWindow&&r.contentWindow.postMessage(e,t)}catch(n){}};l.open(),l.write('<html><script>document.domain="'+document.domain+'";'+"</s"+"cript></html>"),l.close(),l.parentWindow[a]=t[a];var h=l.createElement("div");return l.body.appendChild(h),r=l.createElement("iframe"),h.appendChild(r),r.src=e,o=setTimeout(function(){d("timeout")},15e3),s=n.unload_add(u),{post:p,cleanup:u,loaded:c}};var y=function(){};y.prototype=new s(["chunk","finish"]),y.prototype._start=function(e,i,o,s){var r=this;try{r.xhr=new XMLHttpRequest}catch(a){}if(!r.xhr)try{r.xhr=new t.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}(t.ActiveXObject||t.XDomainRequest)&&(i+=(-1===i.indexOf("?")?"?":"&")+"t="+ +new Date),r.unload_ref=n.unload_add(function(){r._cleanup(!0)});try{r.xhr.open(e,i,!0)}catch(l){return r.emit("finish",0,""),r._cleanup(),void 0}if(s&&s.no_credentials||(r.xhr.withCredentials="true"),s&&s.headers)for(var c in s.headers)r.xhr.setRequestHeader(c,s.headers[c]);r.xhr.onreadystatechange=function(){if(r.xhr){var e=r.xhr;switch(e.readyState){case 3:try{var t=e.status,n=e.responseText}catch(e){}1223===t&&(t=204),n&&n.length>0&&r.emit("chunk",t,n);break;case 4:var t=e.status;1223===t&&(t=204),r.emit("finish",t,e.responseText),r._cleanup(!1)}}},r.xhr.send(o)},y.prototype._cleanup=function(e){var t=this;if(t.xhr){if(n.unload_del(t.unload_ref),t.xhr.onreadystatechange=function(){},e)try{t.xhr.abort()}catch(i){}t.unload_ref=t.xhr=null}},y.prototype.close=function(){var e=this;e.nuke(),e._cleanup(!0)};var w=n.XHRCorsObject=function(){var e=this,t=arguments;n.delay(function(){e._start.apply(e,t)})};w.prototype=new y;var x=n.XHRLocalObject=function(e,t,i){var o=this;n.delay(function(){o._start(e,t,i,{no_credentials:!0})})};x.prototype=new y;var C=n.XDRObject=function(e,t,i){var o=this;n.delay(function(){o._start(e,t,i)})};C.prototype=new s(["chunk","finish"]),C.prototype._start=function(e,t,i){var o=this,s=new XDomainRequest;t+=(-1===t.indexOf("?")?"?":"&")+"t="+ +new Date;var r=s.ontimeout=s.onerror=function(){o.emit("finish",0,""),o._cleanup(!1)};s.onprogress=function(){o.emit("chunk",200,s.responseText)},s.onload=function(){o.emit("finish",200,s.responseText),o._cleanup(!1)},o.xdr=s,o.unload_ref=n.unload_add(function(){o._cleanup(!0)});try{o.xdr.open(e,t),o.xdr.send(i)}catch(a){r()}},C.prototype._cleanup=function(e){var t=this;if(t.xdr){if(n.unload_del(t.unload_ref),t.xdr.ontimeout=t.xdr.onerror=t.xdr.onprogress=t.xdr.onload=null,e)try{t.xdr.abort()}catch(i){}t.unload_ref=t.xdr=null}},C.prototype.close=function(){var e=this;e.nuke(),e._cleanup(!0)},n.isXHRCorsCapable=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:t.XDomainRequest&&e.domain?2:B.enabled()?3:4};var k=function(e,i,o){if(this===t)return new k(e,i,o);var s,r=this;r._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0},o&&n.objectExtend(r._options,o),r._base_url=n.amendUrl(e),r._server=r._options.server||n.random_number_string(1e3),r._options.protocols_whitelist&&r._options.protocols_whitelist.length?s=r._options.protocols_whitelist:(s="string"==typeof i&&i.length>0?[i]:n.isArray(i)?i:null,s&&r._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.')),r._protocols=[],r.protocol=null,r.readyState=k.CONNECTING,r._ir=W(r._base_url),r._ir.onfinish=function(e,t){r._ir=null,e?(r._options.info&&(e=n.objectExtend(e,r._options.info)),r._options.rtt&&(t=r._options.rtt),r._applyInfo(e,t,s),r._didClose()):r._didClose(1002,"Can't connect to server",!0)}};k.prototype=new i,k.version="0.3.4",k.CONNECTING=0,k.OPEN=1,k.CLOSING=2,k.CLOSED=3,k.prototype._debug=function(){this._options.debug&&n.log.apply(n,arguments)},k.prototype._dispatchOpen=function(){var e=this;e.readyState===k.CONNECTING?(e._transport_tref&&(clearTimeout(e._transport_tref),e._transport_tref=null),e.readyState=k.OPEN,e.dispatchEvent(new o("open"))):e._didClose(1006,"Server lost session")},k.prototype._dispatchMessage=function(e){var t=this;t.readyState===k.OPEN&&t.dispatchEvent(new o("message",{data:e}))},k.prototype._dispatchHeartbeat=function(){var e=this;e.readyState===k.OPEN&&e.dispatchEvent(new o("heartbeat",{}))},k.prototype._didClose=function(e,t,i){var s=this;if(s.readyState!==k.CONNECTING&&s.readyState!==k.OPEN&&s.readyState!==k.CLOSING)throw Error("INVALID_STATE_ERR");s._ir&&(s._ir.nuke(),s._ir=null),s._transport&&(s._transport.doCleanup(),s._transport=null);var r=new o("close",{code:e,reason:t,wasClean:n.userSetCode(e)});if(!n.userSetCode(e)&&s.readyState===k.CONNECTING&&!i){if(s._try_next_protocol(r))return;r=new o("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:r})}s.readyState=k.CLOSED,n.delay(function(){s.dispatchEvent(r)})},k.prototype._didMessage=function(e){var t=this,n=e.slice(0,1);switch(n){case"o":t._dispatchOpen();break;case"a":for(var i=JSON.parse(e.slice(1)||"[]"),o=0;i.length>o;o++)t._dispatchMessage(i[o]);break;case"m":var i=JSON.parse(e.slice(1)||"null");t._dispatchMessage(i);break;case"c":var i=JSON.parse(e.slice(1)||"[]");t._didClose(i[0],i[1]);break;case"h":t._dispatchHeartbeat()}},k.prototype._try_next_protocol=function(t){var i=this;for(i.protocol&&(i._debug("Closed transport:",i.protocol,""+t),i.protocol=null),i._transport_tref&&(clearTimeout(i._transport_tref),i._transport_tref=null);;){var o=i.protocol=i._protocols.shift();if(!o)return!1;if(k[o]&&k[o].need_body===!0&&(!e.body||e.readyState!==void 0&&"complete"!==e.readyState))return i._protocols.unshift(o),i.protocol="waiting-for-load",n.attachEvent("load",function(){i._try_next_protocol()}),!0;if(k[o]&&k[o].enabled(i._options)){var s=k[o].roundTrips||1,r=(i._options.rto||0)*s||5e3;i._transport_tref=n.delay(r,function(){i.readyState===k.CONNECTING&&i._didClose(2007,"Transport timeouted")});var a=n.random_string(8),l=i._base_url+"/"+i._server+"/"+a;return i._debug("Opening transport:",o," url:"+l," RTO:"+i._options.rto),i._transport=new k[o](i,l,i._base_url),!0}i._debug("Skipping transport:",o)}},k.prototype.close=function(e,t){var i=this;if(e&&!n.userSetCode(e))throw Error("INVALID_ACCESS_ERR");return i.readyState!==k.CONNECTING&&i.readyState!==k.OPEN?!1:(i.readyState=k.CLOSING,i._didClose(e||1e3,t||"Normal closure"),!0)},k.prototype.send=function(e){var t=this;if(t.readyState===k.CONNECTING)throw Error("INVALID_STATE_ERR");return t.readyState===k.OPEN&&t._transport.doSend(n.quote(""+e)),!0},k.prototype._applyInfo=function(t,i,o){var s=this;s._options.info=t,s._options.rtt=i,s._options.rto=n.countRTO(i),s._options.info.null_origin=!e.domain;var r=n.probeProtocols();s._protocols=n.detectProtocols(r,o,t),n.isSameOriginScheme(s._base_url)||2!==n.isXHRCorsCapable()||(s._protocols=["jsonp-polling"])};var T=k.websocket=function(e,i){var o=this,s=i+"/websocket";s="https"===s.slice(0,5)?"wss"+s.slice(5):"ws"+s.slice(4),o.ri=e,o.url=s;var r=t.WebSocket||t.MozWebSocket;o.ws=new r(o.url),o.ws.onmessage=function(e){o.ri._didMessage(e.data)},o.unload_ref=n.unload_add(function(){o.ws.close()}),o.ws.onclose=function(){o.ri._didMessage(n.closeFrame(1006,"WebSocket connection broken"))}};T.prototype.doSend=function(e){this.ws.send("["+e+"]")},T.prototype.doCleanup=function(){var e=this,t=e.ws;t&&(t.onmessage=t.onclose=null,t.close(),n.unload_del(e.unload_ref),e.unload_ref=e.ri=e.ws=null)},T.enabled=function(){return!(!t.WebSocket&&!t.MozWebSocket)},T.roundTrips=2;var M=function(){};M.prototype.send_constructor=function(e){var t=this;t.send_buffer=[],t.sender=e},M.prototype.doSend=function(e){var t=this;t.send_buffer.push(e),t.send_stop||t.send_schedule()},M.prototype.send_schedule_wait=function(){var e,t=this;t.send_stop=function(){t.send_stop=null,clearTimeout(e)},e=n.delay(25,function(){t.send_stop=null,t.send_schedule()})},M.prototype.send_schedule=function(){var e=this;if(e.send_buffer.length>0){var t="["+e.send_buffer.join(",")+"]";e.send_stop=e.sender(e.trans_url,t,function(t,n){e.send_stop=null,t===!1?e.ri._didClose(1006,"Sending error "+n):e.send_schedule_wait()}),e.send_buffer=[]}},M.prototype.send_destructor=function(){var e=this;e._send_stop&&e._send_stop(),e._send_stop=null};var S=function(t,i,o){var s=this;if(!("_send_form"in s)){var r=s._send_form=e.createElement("form"),a=s._send_area=e.createElement("textarea");a.name="d",r.style.display="none",r.style.position="absolute",r.method="POST",r.enctype="application/x-www-form-urlencoded",r.acceptCharset="UTF-8",r.appendChild(a),e.body.appendChild(r)}var r=s._send_form,a=s._send_area,l="a"+n.random_string(8);r.target=l,r.action=t+"/jsonp_send?i="+l;var c;try{c=e.createElement('<iframe name="'+l+'">')}catch(u){c=e.createElement("iframe"),c.name=l}c.id=l,r.appendChild(c),c.style.display="none";try{a.value=i}catch(d){n.log("Your browser is seriously broken. Go home! "+d.message)}r.submit();var p=function(){c.onerror&&(c.onreadystatechange=c.onerror=c.onload=null,n.delay(500,function(){c.parentNode.removeChild(c),c=null}),a.value="",o(!0))};return c.onerror=c.onload=p,c.onreadystatechange=function(){"complete"==c.readyState&&p()},p},I=function(e){return function(t,n,i){var o=new e("POST",t+"/xhr_send",n);return o.onfinish=function(e){i(200===e||204===e,"http status "+e)},function(e){i(!1,e)}}},D=function(t,i){var o,s,r=e.createElement("script"),a=function(e){s&&(s.parentNode.removeChild(s),s=null),r&&(clearTimeout(o),r.parentNode.removeChild(r),r.onreadystatechange=r.onerror=r.onload=r.onclick=null,r=null,i(e),i=null)},l=!1,c=null;if(r.id="a"+n.random_string(8),r.src=t,r.type="text/javascript",r.charset="UTF-8",r.onerror=function(){c||(c=setTimeout(function(){l||a(n.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},r.onload=function(){a(n.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},r.onreadystatechange=function(){if(/loaded|closed/.test(r.readyState)){if(r&&r.htmlFor&&r.onclick){l=!0;try{r.onclick()}catch(e){}}r&&a(n.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},r.async===void 0&&e.attachEvent)if(/opera/i.test(navigator.userAgent))s=e.createElement("script"),s.text="try{var a = document.getElementById('"+r.id+"'); if(a)a.onerror();}catch(x){};",r.async=s.async=!1;else{try{r.htmlFor=r.id,r.event="onclick"}catch(u){}r.async=!0}r.async!==void 0&&(r.async=!0),o=setTimeout(function(){a(n.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var d=e.getElementsByTagName("head")[0];return d.insertBefore(r,d.firstChild),s&&d.insertBefore(s,d.firstChild),a},A=k["jsonp-polling"]=function(e,t){n.polluteGlobalNamespace();var i=this;i.ri=e,i.trans_url=t,i.send_constructor(S),i._schedule_recv()};A.prototype=new M,A.prototype._schedule_recv=function(){var e=this,t=function(t){e._recv_stop=null,t&&(e._is_closing||e.ri._didMessage(t)),e._is_closing||e._schedule_recv()};e._recv_stop=E(e.trans_url+"/jsonp",D,t)},A.enabled=function(){return!0},A.need_body=!0,A.prototype.doCleanup=function(){var e=this;e._is_closing=!0,e._recv_stop&&e._recv_stop(),e.ri=e._recv_stop=null,e.send_destructor()};var E=function(e,i,o){var s="a"+n.random_string(6),r=e+"?c="+escape(a+"."+s),l=0,c=function(e){switch(l){case 0:delete t[a][s],o(e);break;case 1:o(e),l=2;break;case 2:delete t[a][s]}},u=i(r,c);t[a][s]=u;var d=function(){t[a][s]&&(l=1,t[a][s](n.closeFrame(1e3,"JSONP user aborted read")))};return d},P=function(){};P.prototype=new M,P.prototype.run=function(e,t,n,i,o){var s=this;s.ri=e,s.trans_url=t,s.send_constructor(I(o)),s.poll=new X(e,i,t+n,o)},P.prototype.doCleanup=function(){var e=this;e.poll&&(e.poll.abort(),e.poll=null)};var $=k["xhr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",it,n.XHRCorsObject)};$.prototype=new P,$.enabled=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},$.roundTrips=2,$.need_body=!0;var L=k["xdr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",it,n.XDRObject)};L.prototype=new P,L.enabled=function(){return!!t.XDomainRequest},L.roundTrips=2;var N=k["xhr-polling"]=function(e,t){this.run(e,t,"/xhr",it,n.XHRCorsObject)};N.prototype=new P,N.enabled=$.enabled,N.roundTrips=2;var O=k["xdr-polling"]=function(e,t){this.run(e,t,"/xhr",it,n.XDRObject)};O.prototype=new P,O.enabled=L.enabled,O.roundTrips=2;var B=function(){};B.prototype.i_constructor=function(e,t,i){var o=this;o.ri=e,o.origin=n.getOrigin(i),o.base_url=i,o.trans_url=t;var s=i+"/iframe.html";o.ri._options.devel&&(s+="?t="+ +new Date),o.window_id=n.random_string(8),s+="#"+o.window_id,o.iframeObj=n.createIframe(s,function(e){o.ri._didClose(1006,"Unable to load an iframe ("+e+")")}),o.onmessage_cb=n.bind(o.onmessage,o),n.attachMessage(o.onmessage_cb)},B.prototype.doCleanup=function(){var e=this;if(e.iframeObj){n.detachMessage(e.onmessage_cb);try{e.iframeObj.iframe.contentWindow&&e.postMessage("c")}catch(t){}e.iframeObj.cleanup(),e.iframeObj=null,e.onmessage_cb=e.iframeObj=null}},B.prototype.onmessage=function(e){var t=this;if(e.origin===t.origin){var n=e.data.slice(0,8),i=e.data.slice(8,9),o=e.data.slice(9);if(n===t.window_id)switch(i){case"s":t.iframeObj.loaded(),t.postMessage("s",JSON.stringify([k.version,t.protocol,t.trans_url,t.base_url]));break;case"t":t.ri._didMessage(o)}}},B.prototype.postMessage=function(e,t){var n=this;n.iframeObj.post(n.window_id+e+(t||""),n.origin)},B.prototype.doSend=function(e){this.postMessage("m",e)},B.enabled=function(){var e=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof t.postMessage||"object"==typeof t.postMessage)&&!e};var R,H=function(e,i){parent!==t?parent.postMessage(R+e+(i||""),"*"):n.log("Can't postMessage, no parent window.",e,i)},j=function(){};j.prototype._didClose=function(e,t){H("t",n.closeFrame(e,t))},j.prototype._didMessage=function(e){H("t",e)},j.prototype._doSend=function(e){this._transport.doSend(e)},j.prototype._doCleanup=function(){this._transport.doCleanup()},n.parent_origin=void 0,k.bootstrap_iframe=function(){var i;R=e.location.hash.slice(1);var o=function(e){if(e.source===parent&&(n.parent_origin===void 0&&(n.parent_origin=e.origin),e.origin===n.parent_origin)){var o=e.data.slice(0,8),s=e.data.slice(8,9),r=e.data.slice(9);if(o===R)switch(s){case"s":var a=JSON.parse(r),l=a[0],c=a[1],u=a[2],d=a[3];if(l!==k.version&&n.log('Incompatibile SockJS! Main site uses: "'+l+'", the iframe:'+' "'+k.version+'".'),!n.flatUrl(u)||!n.flatUrl(d))return n.log("Only basic urls are supported in SockJS"),void 0;if(!n.isSameOriginUrl(u)||!n.isSameOriginUrl(d))return n.log("Can't connect to different domain from within an iframe. ("+JSON.stringify([t.location.href,u,d])+")"),void 0;i=new j,i._transport=new j[c](i,u,d);break;case"m":i._doSend(r);break;case"c":i&&i._doCleanup(),i=null}}};n.attachMessage(o),H("s")};var U=function(e,t){var i=this;n.delay(function(){i.doXhr(e,t)})};U.prototype=new s(["finish"]),U.prototype.doXhr=function(e,t){var i=this,o=(new Date).getTime(),s=new t("GET",e+"/info"),r=n.delay(8e3,function(){s.ontimeout()});s.onfinish=function(e,t){if(clearTimeout(r),r=null,200===e){var n=(new Date).getTime()-o,s=JSON.parse(t);"object"!=typeof s&&(s={}),i.emit("finish",s,n)}else i.emit("finish")},s.ontimeout=function(){s.close(),i.emit("finish")}};var F=function(t){var i=this,o=function(){var e=new B;e.protocol="w-iframe-info-receiver";var n=function(t){if("string"==typeof t&&"m"===t.substr(0,1)){var n=JSON.parse(t.substr(1)),o=n[0],s=n[1];i.emit("finish",o,s)}else i.emit("finish");e.doCleanup(),e=null},o={_options:{},_didClose:n,_didMessage:n};e.i_constructor(o,t,t)};e.body?o():n.attachEvent("load",o)};F.prototype=new s(["finish"]);var z=function(){var e=this;n.delay(function(){e.emit("finish",{},2e3)})};z.prototype=new s(["finish"]);var W=function(e){if(n.isSameOriginUrl(e))return new U(e,n.XHRLocalObject);switch(n.isXHRCorsCapable()){case 1:return new U(e,n.XHRLocalObject);case 2:return n.isSameOriginScheme(e)?new U(e,n.XDRObject):new z;case 3:return new F(e);default:return new z}},q=j["w-iframe-info-receiver"]=function(e,t,i){var o=new U(i,n.XHRLocalObject);o.onfinish=function(t,n){e._didMessage("m"+JSON.stringify([t,n])),e._didClose()}};q.prototype.doCleanup=function(){};var V=k["iframe-eventsource"]=function(){var e=this;e.protocol="w-iframe-eventsource",e.i_constructor.apply(e,arguments)};V.prototype=new B,V.enabled=function(){return"EventSource"in t&&B.enabled()},V.need_body=!0,V.roundTrips=3;var Y=j["w-iframe-eventsource"]=function(e,t){this.run(e,t,"/eventsource",Z,n.XHRLocalObject)};Y.prototype=new P;var J=k["iframe-xhr-polling"]=function(){var e=this;e.protocol="w-iframe-xhr-polling",e.i_constructor.apply(e,arguments)};J.prototype=new B,J.enabled=function(){return t.XMLHttpRequest&&B.enabled()},J.need_body=!0,J.roundTrips=3;var Q=j["w-iframe-xhr-polling"]=function(e,t){this.run(e,t,"/xhr",it,n.XHRLocalObject)};Q.prototype=new P;var G=k["iframe-htmlfile"]=function(){var e=this;e.protocol="w-iframe-htmlfile",e.i_constructor.apply(e,arguments)};G.prototype=new B,G.enabled=function(){return B.enabled()},G.need_body=!0,G.roundTrips=3;var K=j["w-iframe-htmlfile"]=function(e,t){this.run(e,t,"/htmlfile",nt,n.XHRLocalObject)};K.prototype=new P;var X=function(e,t,n,i){var o=this;o.ri=e,o.Receiver=t,o.recv_url=n,o.AjaxObject=i,o._scheduleRecv()};X.prototype._scheduleRecv=function(){var e=this,t=e.poll=new e.Receiver(e.recv_url,e.AjaxObject),n=0;t.onmessage=function(t){n+=1,e.ri._didMessage(t.data)},t.onclose=function(n){e.poll=t=t.onmessage=t.onclose=null,e.poll_is_closing||("permanent"===n.reason?e.ri._didClose(1006,"Polling error ("+n.reason+")"):e._scheduleRecv())}},X.prototype.abort=function(){var e=this;e.poll_is_closing=!0,e.poll&&e.poll.abort()};var Z=function(e){var t=this,i=new EventSource(e);i.onmessage=function(e){t.dispatchEvent(new o("message",{data:unescape(e.data)}))},t.es_close=i.onerror=function(e,s){var r=s?"user":2!==i.readyState?"network":"permanent";t.es_close=i.onmessage=i.onerror=null,i.close(),i=null,n.delay(200,function(){t.dispatchEvent(new o("close",{reason:r}))})}};Z.prototype=new i,Z.prototype.abort=function(){var e=this;e.es_close&&e.es_close({},!0)};var et,tt=function(){if(void 0===et)if("ActiveXObject"in t)try{et=!!new ActiveXObject("htmlfile")}catch(e){}else et=!1;return et},nt=function(e){var i=this;n.polluteGlobalNamespace(),i.id="a"+n.random_string(6,26),e+=(-1===e.indexOf("?")?"?":"&")+"c="+escape(a+"."+i.id);var s,r=tt()?n.createHtmlfile:n.createIframe;t[a][i.id]={start:function(){s.loaded()},message:function(e){i.dispatchEvent(new o("message",{data:e}))},stop:function(){i.iframe_close({},"network")}},i.iframe_close=function(e,n){s.cleanup(),i.iframe_close=s=null,delete t[a][i.id],i.dispatchEvent(new o("close",{reason:n}))},s=r(e,function(){i.iframe_close({},"permanent")})};nt.prototype=new i,nt.prototype.abort=function(){var e=this;e.iframe_close&&e.iframe_close({},"user")};var it=function(e,t){var n=this,i=0;n.xo=new t("POST",e,null),n.xo.onchunk=function(e,t){if(200===e)for(;;){var s=t.slice(i),r=s.indexOf("\n");if(-1===r)break;i+=r+1;var a=s.slice(0,r);n.dispatchEvent(new o("message",{data:a}))}},n.xo.onfinish=function(e,t){n.xo.onchunk(e,t),n.xo=null;var i=200===e?"network":"permanent";n.dispatchEvent(new o("close",{reason:i}))}};return it.prototype=new i,it.prototype.abort=function(){var e=this;e.xo&&(e.xo.close(),e.dispatchEvent(new o("close",{reason:"user"})),e.xo=null)},k.getUtils=function(){return n},k.getIframeTransport=function(){return B},k}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),"function"==typeof define&&define.amd&&define("sockjs",[],function(){return SockJS})}(),function(){Meteor._Stream=function(e){var t=this;t.rawUrl=e,t.socket=null,t.event_callbacks={},t.sent_update_available=!1,t._forcedToDisconnect=!1,t.CONNECT_TIMEOUT=1e4,t.HEARTBEAT_TIMEOUT=6e4,t.RETRY_BASE_TIMEOUT=1e3,t.RETRY_EXPONENT=2.2,t.RETRY_MAX_TIMEOUT=18e5,t.RETRY_MIN_TIMEOUT=10,t.RETRY_MIN_COUNT=2,t.RETRY_FUZZ=.5,t.current_status={status:"connecting",connected:!1,retryCount:0,retry_count:0},t.status_listeners=window.Deps&&new Deps.Dependency,t.status_changed=function(){t.status_listeners&&t.status_listeners.changed()},t.retry_timer=null,t.connection_timer=null,t.heartbeat_timer=null,t._launch_connection()},_.extend(Meteor._Stream,{_toSockjsUrl:function(e){var t=function(e,t){return e.length>=t.length&&e.substring(0,t.length)===t},n=function(e,t){return e.length>=t.length&&e.substring(e.length-t.length)===t},i=e.match(/^ddp(i?)\+sockjs:\/\//);if(i){var o=e.substr(i[0].length),s="i"===i[1]?"http":"https",r=o.indexOf("/"),a=-1===r?o:o.substr(0,r),l=-1===r?"":o.substr(r);return a=a.replace(/\*/g,function(){return Math.floor(10*Random.fraction())}),s+"://"+a+l}return-1!==e.indexOf("://")||t(e,"/")||(e="http://"+e),n(e,"/")?e+"sockjs":e+"/sockjs"}}),_.extend(Meteor._Stream.prototype,{on:function(e,t){var n=this;if("message"!==e&&"reset"!==e&&"update_available"!==e)throw Error("unknown event type: "+e);n.event_callbacks[e]||(n.event_callbacks[e]=[]),n.event_callbacks[e].push(t)},send:function(e){var t=this;t.current_status.connected&&t.socket.send(e)},status:function(){var e=this;return e.status_listeners&&e.status_listeners.depend(),e.current_status},reconnect:function(e){var t=this;return t.current_status.connected?(e&&e._force&&t._lostConnection(),void 0):("connecting"===t.current_status.status&&t._lostConnection(),t.retry_timer&&clearTimeout(t.retry_timer),t.retry_timer=null,t.current_status.retryCount-=1,t.current_status.retry_count=t.current_status.retryCount,t._retry_now(),void 0)},_connected:function(e){var t=this;if(t.connection_timer&&(clearTimeout(t.connection_timer),t.connection_timer=null),!t.current_status.connected){try{var n=JSON.parse(e)}catch(i){Meteor._debug("DEBUG: malformed welcome packet",e)}n&&n.server_id?__meteor_runtime_config__.serverId&&__meteor_runtime_config__.serverId!==n.server_id&&!t.sent_update_available&&(t.sent_update_available=!0,_.each(t.event_callbacks.update_available,function(e){e()})):Meteor._debug("DEBUG: invalid welcome packet",n),t.current_status.status="connected",t.current_status.connected=!0,t.current_status.retryCount=0,t.current_status.retry_count=t.current_status.retryCount,t.status_changed(),_.each(t.event_callbacks.reset,function(e){e()})}},_cleanupSocket:function(){var e=this;e._clearConnectionAndHeartbeatTimers(),e.socket&&(e.socket.onmessage=e.socket.onclose=e.socket.onerror=function(){},e.socket.close(),e.socket=null)},_clearConnectionAndHeartbeatTimers:function(){var e=this;e.connection_timer&&(clearTimeout(e.connection_timer),e.connection_timer=null),e.heartbeat_timer&&(clearTimeout(e.heartbeat_timer),e.heartbeat_timer=null)},forceDisconnect:function(e){var t=this;t._forcedToDisconnect=!0,t._cleanupSocket(),t.retry_timer&&(clearTimeout(t.retry_timer),t.retry_timer=null),t.current_status={status:"failed",connected:!1,retryCount:0,retry_count:0},e&&(t.current_status.reason=e),t.status_changed()},_lostConnection:function(){var e=this;e._cleanupSocket(),e._retry_later()},_heartbeat_timeout:function(){var e=this;Meteor._debug("Connection timeout. No heartbeat received."),e._lostConnection()},_heartbeat_received:function(){var e=this;e._forcedToDisconnect||(e.heartbeat_timer&&clearTimeout(e.heartbeat_timer),e.heartbeat_timer=setTimeout(_.bind(e._heartbeat_timeout,e),e.HEARTBEAT_TIMEOUT))},_retry_timeout:function(e){var t=this;if(t.RETRY_MIN_COUNT>e)return t.RETRY_MIN_TIMEOUT;var n=Math.min(t.RETRY_MAX_TIMEOUT,t.RETRY_BASE_TIMEOUT*Math.pow(t.RETRY_EXPONENT,e));return n*=Random.fraction()*t.RETRY_FUZZ+(1-t.RETRY_FUZZ/2)},_retry_later:function(){var e=this,t=e._retry_timeout(e.current_status.retryCount);e.retry_timer&&clearTimeout(e.retry_timer),e.retry_timer=setTimeout(_.bind(e._retry_now,e),t),e.current_status.status="waiting",e.current_status.connected=!1,e.current_status.retryTime=(new Date).getTime()+t,e.current_status.retry_time=e.current_status.retryTime,e.status_changed()},_retry_now:function(){var e=this;e._forcedToDisconnect||(e.current_status.retryCount+=1,e.current_status.retry_count=e.current_status.retryCount,e.current_status.status="connecting",e.current_status.connected=!1,delete e.current_status.retryTime,delete e.current_status.retry_time,e.status_changed(),e._launch_connection())
},_launch_connection:function(){var e=this;e._cleanupSocket(),e.socket=new SockJS(Meteor._Stream._toSockjsUrl(e.rawUrl),void 0,{debug:!1,protocols_whitelist:["xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"]}),e.socket.onmessage=function(t){e._heartbeat_received(),"connecting"===e.current_status.status?e._connected(t.data):e.current_status.connected&&_.each(e.event_callbacks.message,function(e){e(t.data)})},e.socket.onclose=function(){e._lostConnection()},e.socket.onerror=function(){Meteor._debug("stream error",_.toArray(arguments),(new Date).toDateString())},e.socket.onheartbeat=function(){e._heartbeat_received()},e.connection_timer&&clearTimeout(e.connection_timer),e.connection_timer=setTimeout(_.bind(e._lostConnection,e),e.CONNECT_TIMEOUT)}})}(),function(){EJSON={};var e={};EJSON.addType=function(t,n){if(_.has(e,t))throw Error("Type "+t+" already present");e[t]=n};var t=[{matchJSONValue:function(e){return _.has(e,"$date")&&1===_.size(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return _.has(e,"$binary")&&1===_.size(e)},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&_.has(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:EJSON._base64Encode(e)}},fromJSONValue:function(e){return EJSON._base64Decode(e.$binary)}},{matchJSONValue:function(e){return _.has(e,"$escape")&&1===_.size(e)},matchObject:function(e){return _.isEmpty(e)||_.size(e)>2?!1:_.any(t,function(t){return t.matchJSONValue(e)})},toJSONValue:function(e){var t={};return _.each(e,function(e,n){t[n]=EJSON.toJSONValue(e)}),{$escape:t}},fromJSONValue:function(e){var t={};return _.each(e.$escape,function(e,n){t[n]=EJSON.fromJSONValue(e)}),t}},{matchJSONValue:function(e){return _.has(e,"$type")&&_.has(e,"$value")&&2===_.size(e)},matchObject:function(e){return EJSON._isCustomType(e)},toJSONValue:function(e){return{$type:e.typeName(),$value:e.toJSONValue()}},fromJSONValue:function(t){var n=t.$type,i=e[n];return i(t.$value)}}];EJSON._isCustomType=function(t){return t&&"function"==typeof t.toJSONValue&&"function"==typeof t.typeName&&_.has(e,t.typeName())};var n=EJSON._adjustTypesToJSONValue=function(e){if(null===e)return null;var t=i(e);return void 0!==t?t:(_.each(e,function(t,o){if("object"==typeof t||void 0===t){var s=i(t);return s?(e[o]=s,void 0):(n(t),void 0)}}),e)},i=function(e){for(var n=0;t.length>n;n++){var i=t[n];if(i.matchObject(e))return i.toJSONValue(e)}return void 0};EJSON.toJSONValue=function(e){var t=i(e);return void 0!==t?t:("object"==typeof e&&(e=EJSON.clone(e),n(e)),e)};var o=EJSON._adjustTypesFromJSONValue=function(e){if(null===e)return null;var t=s(e);return t!==e?t:(_.each(e,function(t,n){if("object"==typeof t){var i=s(t);if(t!==i)return e[n]=i,void 0;o(t)}}),e)},s=function(e){if("object"==typeof e&&null!==e&&2>=_.size(e)&&_.all(e,function(e,t){return"string"==typeof t&&"$"===t.substr(0,1)}))for(var n=0;t.length>n;n++){var i=t[n];if(i.matchJSONValue(e))return i.fromJSONValue(e)}return e};EJSON.fromJSONValue=function(e){var t=s(e);return t===e&&"object"==typeof e?(e=EJSON.clone(e),o(e),e):t},EJSON.stringify=function(e){return JSON.stringify(EJSON.toJSONValue(e))},EJSON.parse=function(e){return EJSON.fromJSONValue(JSON.parse(e))},EJSON.isBinary=function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill},EJSON.equals=function(e,t,n){var i,o=!(!n||!n.keyOrderSensitive);if(e===t)return!0;if(!e||!t)return!1;if("object"!=typeof e||"object"!=typeof t)return!1;if(e instanceof Date&&t instanceof Date)return e.valueOf()===t.valueOf();if(EJSON.isBinary(e)&&EJSON.isBinary(t)){if(e.length!==t.length)return!1;for(i=0;e.length>i;i++)if(e[i]!==t[i])return!1;return!0}if("function"==typeof e.equals)return e.equals(t,n);if(e instanceof Array){if(!(t instanceof Array))return!1;if(e.length!==t.length)return!1;for(i=0;e.length>i;i++)if(!EJSON.equals(e[i],t[i],n))return!1;return!0}var s;if(o){var r=[];return _.each(t,function(e,t){r.push(t)}),i=0,s=_.all(e,function(e,o){return i>=r.length?!1:o!==r[i]?!1:EJSON.equals(e,t[r[i]],n)?(i++,!0):!1}),s&&i===r.length}return i=0,s=_.all(e,function(e,o){return _.has(t,o)?EJSON.equals(e,t[o],n)?(i++,!0):!1:!1}),s&&_.size(t)===i},EJSON.clone=function(e){var t;if("object"!=typeof e)return e;if(null===e)return null;if(e instanceof Date)return new Date(e.getTime());if(EJSON.isBinary(e)){for(t=EJSON.newBinary(e.length),n=0;e.length>n;n++)t[n]=e[n];return t}if(_.isArray(e)){t=e.slice(0);for(var n=0;e.length>n;n++)t[n]=EJSON.clone(t[n]);return t}return"function"==typeof e.clone?e.clone():(t={},_.each(e,function(e,n){t[n]=EJSON.clone(e)}),t)}}(),function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={},n=0;e.length>n;n++)t[e.charAt(n)]=n;EJSON._base64Encode=function(e){for(var t=[],n=null,o=null,s=null,r=null,a=0;e.length>a;a++)switch(a%3){case 0:n=63&e[a]>>2,o=(3&e[a])<<4;break;case 1:o|=15&e[a]>>4,s=(15&e[a])<<2;break;case 2:s|=3&e[a]>>6,r=63&e[a],t.push(i(n)),t.push(i(o)),t.push(i(s)),t.push(i(r)),n=null,o=null,s=null,r=null}return null!=n&&(t.push(i(n)),t.push(i(o)),null==s?t.push("="):t.push(i(s)),null==r&&t.push("=")),t.join("")};var i=function(t){return e.charAt(t)},o=function(e){return"="===e?-1:t[e]};EJSON.newBinary=function(e){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var t=[],n=0;e>n;n++)t.push(0);return t.$Uint8ArrayPolyfill=!0,t}return new Uint8Array(new ArrayBuffer(e))},EJSON._base64Decode=function(e){var t=Math.floor(3*e.length/4);"="==e.charAt(e.length-1)&&(t--,"="==e.charAt(e.length-2)&&t--);for(var n=EJSON.newBinary(t),i=null,s=null,r=null,a=0,l=0;e.length>l;l++){var c=e.charAt(l),u=o(c);switch(l%4){case 0:if(0>u)throw Error("invalid base64 string");i=u<<2;break;case 1:if(0>u)throw Error("invalid base64 string");i|=u>>4,n[a++]=i,s=(15&u)<<4;break;case 2:u>0&&(s|=u>>2,n[a++]=s,r=(3&u)<<6);break;case 3:u>0&&(n[a++]=r|u)}}return n}}(),function(){var e=function(e,t,n,i){return{key:e,value:t,next:n,prev:i}};OrderedDict=function(){var e=this;e._dict={},e._first=null,e._last=null,e._size=0;var t=_.toArray(arguments);e._stringify=function(e){return e},"function"==typeof t[0]&&(e._stringify=t.shift()),_.each(t,function(t){e.putBefore(t[0],t[1],null)})},_.extend(OrderedDict.prototype,{_k:function(e){return" "+this._stringify(e)},empty:function(){var e=this;return!e._first},size:function(){var e=this;return e._size},_linkEltIn:function(e){var t=this;e.next?(e.prev=e.next.prev,e.next.prev=e,e.prev&&(e.prev.next=e)):(e.prev=t._last,t._last&&(t._last.next=e),t._last=e),(null===t._first||t._first===e.next)&&(t._first=e)},_linkEltOut:function(e){var t=this;e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next),e===t._last&&(t._last=e.prev),e===t._first&&(t._first=e.next)},putBefore:function(t,n,i){var o=this;if(o._dict[o._k(t)])throw Error("Item "+t+" already present in OrderedDict");var s=i?e(t,n,o._dict[o._k(i)]):e(t,n,null);if(void 0===s.next)throw Error("could not find item to put this one before");o._linkEltIn(s),o._dict[o._k(t)]=s,o._size++},append:function(e,t){var n=this;n.putBefore(e,t,null)},remove:function(e){var t=this,n=t._dict[t._k(e)];if(void 0===n)throw Error("Item "+e+" not present in OrderedDict");return t._linkEltOut(n),t._size--,delete t._dict[t._k(e)],n.value},get:function(e){var t=this;return t.has(e)?t._dict[t._k(e)].value:void 0},has:function(e){var t=this;return _.has(t._dict,t._k(e))},forEach:function(e){for(var t=this,n=0,i=t._first;null!==i;){var o=e(i.value,i.key,n);if(o===OrderedDict.BREAK)return;i=i.next,n++}},first:function(){var e=this;return e.empty()?void 0:e._first.key},firstValue:function(){var e=this;return e.empty()?void 0:e._first.value},last:function(){var e=this;return e.empty()?void 0:e._last.key},lastValue:function(){var e=this;return e.empty()?void 0:e._last.value},prev:function(e){var t=this;if(t.has(e)){var n=t.get(e);if(n.prev)return n.prev.key}return null},next:function(e){var t=this;if(t.has(e)){var n=t.get(e);if(n.next)return n.next.key}return null},moveBefore:function(e,t){var n=this,i=n._dict[n._k(e)],o=t?n._dict[n._k(t)]:null;if(void 0===i)throw Error("Item to move is not present");if(void 0===o)throw Error("Could not find element to move this one before");o!==i.next&&(n._linkEltOut(i),i.next=o,n._linkEltIn(i))},indexOf:function(e){var t=this,n=null;return t.forEach(function(i,o,s){return t._k(o)===t._k(e)?(n=s,OrderedDict.BREAK):void 0}),n},_checkRep:function(){var e=this;_.each(e._dict,function(e,t){if(t.next===t)throw Error("Next is a loop");if(t.prev===t)throw Error("Prev is a loop")})}}),OrderedDict.BREAK={"break":!0}}(),function(){LocalCollection=function(){this.docs={},this.next_qid=1,this.queries={},this._savedOriginals=null,this.paused=!1},LocalCollection._applyChanges=function(e,t){_.each(t,function(t,n){void 0===t?delete e[n]:e[n]=t})},LocalCollection.MinimongoError=function(e){var t=this;t.name="MinimongoError",t.details=e},LocalCollection.MinimongoError.prototype=Error(),LocalCollection.prototype.find=function(e,t){return 0===arguments.length&&(e={}),new LocalCollection.Cursor(this,e,t)},LocalCollection.Cursor=function(e,t,n){var i=this;n||(n={}),this.collection=e,LocalCollection._selectorIsId(t)?(i.selector_id=LocalCollection._idStringify(t),i.selector_f=LocalCollection._compileSelector(t),i.sort_f=void 0):(i.selector_id=void 0,i.selector_f=LocalCollection._compileSelector(t),i.sort_f=n.sort?LocalCollection._compileSort(n.sort):null),i.skip=n.skip,i.limit=n.limit,i._transform=n.transform&&"undefined"!=typeof Deps?Deps._makeNonreactive(n.transform):n.transform,i.db_objects=null,i.cursor_pos=0,"undefined"!=typeof Deps&&(i.reactive=void 0===n.reactive?!0:n.reactive)},LocalCollection.Cursor.prototype.rewind=function(){var e=this;e.db_objects=null,e.cursor_pos=0},LocalCollection.prototype.findOne=function(e,t){return 0===arguments.length&&(e={}),t=t||{},t.limit=1,this.find(e,t).fetch()[0]},LocalCollection.Cursor.prototype.forEach=function(e){var t=this;for(null===t.db_objects&&(t.db_objects=t._getRawObjects(!0)),t.reactive&&t._depend({addedBefore:!0,removed:!0,changed:!0,movedBefore:!0});t.cursor_pos<t.db_objects.length;){var n=EJSON.clone(t.db_objects[t.cursor_pos++]);t._transform&&(n=t._transform(n)),e(n)}},LocalCollection.Cursor.prototype.getTransform=function(){var e=this;return e._transform},LocalCollection.Cursor.prototype.map=function(e){var t=this,n=[];return t.forEach(function(t){n.push(e(t))}),n},LocalCollection.Cursor.prototype.fetch=function(){var e=this,t=[];return e.forEach(function(e){t.push(e)}),t},LocalCollection.Cursor.prototype.count=function(){var e=this;return e.reactive&&e._depend({added:!0,removed:!0}),null===e.db_objects&&(e.db_objects=e._getRawObjects(!0)),e.db_objects.length},LocalCollection._isOrderedChanges=function(e){if(e.added&&e.addedBefore)throw Error("Please specify only one of added() and addedBefore()");return"function"==typeof e.addedBefore||"function"==typeof e.movedBefore},LocalCollection.LiveResultsSet=function(){},_.extend(LocalCollection.Cursor.prototype,{observe:function(e){var t=this;return LocalCollection._observeFromObserveChanges(t,e)},observeChanges:function(e){var t=this,n=LocalCollection._isOrderedChanges(e);if(!n&&(t.skip||t.limit))throw Error("must use ordered observe with skip or limit");var i,o={selector_f:t.selector_f,sort_f:n&&t.sort_f,results_snapshot:null,ordered:n,cursor:this,observeChanges:e.observeChanges};t.reactive&&(i=t.collection.next_qid++,t.collection.queries[i]=o),o.results=t._getRawObjects(n),t.collection.paused&&(o.results_snapshot=n?[]:{});var s=function(e){return e?function(){t.collection.paused||e.apply(this,arguments)}:function(){}};o.added=s(e.added),o.changed=s(e.changed),o.removed=s(e.removed),n&&(o.moved=s(e.moved),o.addedBefore=s(e.addedBefore),o.movedBefore=s(e.movedBefore)),e._suppress_initial||t.collection.paused||_.each(o.results,function(e){var t=EJSON.clone(e);delete t._id,n&&o.addedBefore(e._id,t,null),o.added(e._id,t)});var r=new LocalCollection.LiveResultsSet;return _.extend(r,{collection:t.collection,stop:function(){t.reactive&&delete t.collection.queries[i]}}),t.reactive&&Deps.active&&Deps.onInvalidate(function(){r.stop()}),r}}),LocalCollection.Cursor.prototype._getRawObjects=function(e){var t=this,n=e?[]:{};if(t.selector_id){if(t.skip)return n;if(_.has(t.collection.docs,t.selector_id)){var i=t.collection.docs[t.selector_id];e?n.push(i):n[t.selector_id]=i}return n}for(var o in t.collection.docs){var s=t.collection.docs[o];if(t.selector_f(s)&&(e?n.push(s):n[o]=s),t.limit&&!t.skip&&!t.sort_f&&n.length===t.limit)return n}if(!e)return n;t.sort_f&&n.sort(t.sort_f);var r=t.skip||0,a=t.limit?t.limit+r:n.length;return n.slice(r,a)},LocalCollection.Cursor.prototype._depend=function(e){var t=this;if(Deps.active){var n=new Deps.Dependency;n.depend();var i=_.bind(n.changed,n),o={_suppress_initial:!0};_.each(["added","changed","removed","addedBefore","movedBefore"],function(t){e[t]&&(o[t]=i)}),t.observeChanges(o)}},LocalCollection.prototype.insert=function(e){var t=this;e=EJSON.clone(e),_.has(e,"_id")||(e._id=LocalCollection._useOID?new LocalCollection._ObjectID:Random.id());var n=LocalCollection._idStringify(e._id);if(_.has(t.docs,e._id))throw new LocalCollection.MinimongoError("Duplicate _id '"+e._id+"'");t._saveOriginal(n,void 0),t.docs[n]=e;var i=[];for(var o in t.queries){var s=t.queries[o];s.selector_f(e)&&(s.cursor.skip||s.cursor.limit?i.push(o):LocalCollection._insertInResults(s,e))}_.each(i,function(e){t.queries[e]&&LocalCollection._recomputeResults(t.queries[e])})},LocalCollection.prototype.remove=function(e){var t=this,n=[],i=[],o=LocalCollection._compileSelector(e),s=LocalCollection._idsMatchedBySelector(e);if(s)_.each(s,function(e){var i=LocalCollection._idStringify(e);_.has(t.docs,i)&&o(t.docs[i])&&n.push(i)});else for(var r in t.docs){var a=t.docs[r];o(a)&&n.push(r)}for(var l=[],c=0;n.length>c;c++){var u=n[c],d=t.docs[u];_.each(t.queries,function(e,t){e.selector_f(d)&&(e.cursor.skip||e.cursor.limit?i.push(t):l.push({qid:t,doc:d}))}),t._saveOriginal(u,d),delete t.docs[u]}_.each(l,function(e){var n=t.queries[e.qid];n&&LocalCollection._removeFromResults(n,e.doc)}),_.each(i,function(e){var n=t.queries[e];n&&LocalCollection._recomputeResults(n)})},LocalCollection.prototype.update=function(e,t,n){var i=this;if(n||(n={}),n.upsert)throw Error("upsert not yet implemented");var o=LocalCollection._compileSelector(e),s={};_.each(i.queries,function(e,t){!e.cursor.skip&&!e.cursor.limit||e.paused||(s[t]=EJSON.clone(e.results))});var r={};for(var a in i.docs){var l=i.docs[a];if(o(l)&&(i._saveOriginal(a,l),i._modifyAndNotify(l,t,r),!n.multi))break}_.each(r,function(e,t){var n=i.queries[t];n&&LocalCollection._recomputeResults(n,s[t])})},LocalCollection.prototype._modifyAndNotify=function(e,t,n){var i=this,o={};for(var s in i.queries){var r=i.queries[s];o[s]=r.ordered?r.selector_f(e):_.has(r.results,LocalCollection._idStringify(e._id))}var a=EJSON.clone(e);LocalCollection._modify(e,t);for(s in i.queries){r=i.queries[s];var l=o[s],c=r.selector_f(e);r.cursor.skip||r.cursor.limit?(l||c)&&(n[s]=!0):l&&!c?LocalCollection._removeFromResults(r,e):!l&&c?LocalCollection._insertInResults(r,e):l&&c&&LocalCollection._updateInResults(r,e,a)}},LocalCollection._insertInResults=function(e,t){var n=EJSON.clone(t);if(delete n._id,e.ordered){if(e.sort_f){var i=LocalCollection._insertInSortedList(e.sort_f,e.results,t),o=e.results[i+1];o=o?o._id:null,e.addedBefore(t._id,n,o)}else e.addedBefore(t._id,n,null),e.results.push(t);e.added(t._id,n)}else e.added(t._id,n),e.results[LocalCollection._idStringify(t._id)]=t},LocalCollection._removeFromResults=function(e,t){if(e.ordered){var n=LocalCollection._findInOrderedResults(e,t);e.removed(t._id),e.results.splice(n,1)}else{var i=LocalCollection._idStringify(t._id);e.removed(t._id),delete e.results[i]}},LocalCollection._updateInResults=function(e,t,n){if(!EJSON.equals(t._id,n._id))throw Error("Can't change a doc's _id while updating");var i=LocalCollection._makeChangedFields(t,n);if(!e.ordered)return _.isEmpty(i)||(e.changed(t._id,i),e.results[LocalCollection._idStringify(t._id)]=t),void 0;var o=LocalCollection._findInOrderedResults(e,t);if(_.isEmpty(i)||e.changed(t._id,i),e.sort_f){e.results.splice(o,1);var s=LocalCollection._insertInSortedList(e.sort_f,e.results,t);if(o!==s){var r=e.results[s+1];r=r?r._id:null,e.movedBefore&&e.movedBefore(t._id,r)}}},LocalCollection._recomputeResults=function(e,t){t||(t=e.results),e.results=e.cursor._getRawObjects(e.ordered),e.paused||LocalCollection._diffQueryChanges(e.ordered,t,e.results,e)},LocalCollection._findInOrderedResults=function(e,t){if(!e.ordered)throw Error("Can't call _findInOrderedResults on unordered query");for(var n=0;e.results.length>n;n++)if(e.results[n]===t)return n;throw Error("object missing from query")},LocalCollection._insertInSortedList=function(e,t,n){if(0===t.length)return t.push(n),0;for(var i=0;t.length>i;i++)if(0>e(n,t[i]))return t.splice(i,0,n),i;return t.push(n),t.length-1},LocalCollection.prototype.saveOriginals=function(){var e=this;if(e._savedOriginals)throw Error("Called saveOriginals twice without retrieveOriginals");e._savedOriginals={}},LocalCollection.prototype.retrieveOriginals=function(){var e=this;if(!e._savedOriginals)throw Error("Called retrieveOriginals without saveOriginals");var t=e._savedOriginals;return e._savedOriginals=null,t},LocalCollection.prototype._saveOriginal=function(e,t){var n=this;n._savedOriginals&&(_.has(n._savedOriginals,e)||(n._savedOriginals[e]=EJSON.clone(t)))},LocalCollection.prototype.pauseObservers=function(){if(!this.paused){this.paused=!0;for(var e in this.queries){var t=this.queries[e];t.results_snapshot=EJSON.clone(t.results)}}},LocalCollection.prototype.resumeObservers=function(){if(this.paused){this.paused=!1;for(var e in this.queries){var t=this.queries[e];LocalCollection._diffQueryChanges(t.ordered,t.results_snapshot,t.results,t),t.results_snapshot=null}}},LocalCollection._idStringify=function(e){if(e instanceof LocalCollection._ObjectID)return e.valueOf();if("string"==typeof e)return""===e?e:"-"===e.substr(0,1)||"~"===e.substr(0,1)||LocalCollection._looksLikeObjectID(e)||"{"===e.substr(0,1)?"-"+e:e;if(void 0===e)return"-";if("object"==typeof e)throw Error("Meteor does not currently support objects other than ObjectID as ids");return"~"+JSON.stringify(e)},LocalCollection._idParse=function(e){return""===e?e:"-"===e?void 0:"-"===e.substr(0,1)?e.substr(1):"~"===e.substr(0,1)?JSON.parse(e.substr(1)):LocalCollection._looksLikeObjectID(e)?new LocalCollection._ObjectID(e):e},"undefined"!=typeof Meteor&&(Meteor.idParse=LocalCollection._idParse,Meteor.idStringify=LocalCollection._idStringify),LocalCollection._makeChangedFields=function(e,t){var n={};return LocalCollection._diffObjects(t,e,{leftOnly:function(e){n[e]=void 0},rightOnly:function(e,t){n[e]=t},both:function(e,t,i){EJSON.equals(t,i)||(n[e]=i)}}),n},LocalCollection._observeFromObserveChanges=function(e,t){var n=e.getTransform();if(n||(n=function(e){return e}),t.addedAt&&t.added)throw Error("Please specify only one of added() and addedAt()");if(t.changedAt&&t.changed)throw Error("Please specify only one of changed() and changedAt()");if(t.removed&&t.removedAt)throw Error("Please specify only one of removed() and removedAt()");return t.addedAt||t.movedTo||t.changedAt||t.removedAt?LocalCollection._observeOrderedFromObserveChanges(e,t,n):LocalCollection._observeUnorderedFromObserveChanges(e,t,n)},LocalCollection._observeUnorderedFromObserveChanges=function(e,t,n){var i={},o=!!t._suppress_initial,s=e.observeChanges({added:function(e,s){var r=LocalCollection._idStringify(e),a=EJSON.clone(s);a._id=e,i[r]=a,o||t.added&&t.added(n(a))},changed:function(e,s){var r=LocalCollection._idStringify(e),a=i[r],l=EJSON.clone(a);LocalCollection._applyChanges(a,s),o||t.changed&&t.changed(n(a),n(l))},removed:function(e){var s=LocalCollection._idStringify(e),r=i[s];delete i[s],o||t.removed&&t.removed(n(r))}});return o=!1,s},LocalCollection._observeOrderedFromObserveChanges=function(e,t,n){var i=new OrderedDict(LocalCollection._idStringify),o=!!t._suppress_initial,s=e.observeChanges({addedBefore:function(e,s,r){var a=EJSON.clone(s);if(a._id=e,i.putBefore(e,a,r?r:null),!o)if(t.addedAt){var l=i.indexOf(e);t.addedAt(n(EJSON.clone(a)),l,r)}else t.added&&t.added(n(EJSON.clone(a)))},changed:function(e,o){var s=i.get(e);if(!s)throw Error("Unknown id for changed: "+e);var r=EJSON.clone(s);if(LocalCollection._applyChanges(s,o),t.changedAt){var a=i.indexOf(e);t.changedAt(n(EJSON.clone(s)),n(r),a)}else t.changed&&t.changed(n(EJSON.clone(s)),n(r))},movedBefore:function(e,o){var s,r=i.get(e);if(t.movedTo&&(s=i.indexOf(e)),i.moveBefore(e,o?o:null),t.movedTo){var a=i.indexOf(e);t.movedTo(n(EJSON.clone(r)),s,a)}else t.moved&&t.moved(n(EJSON.clone(r)))},removed:function(e){var o,s=i.get(e);t.removedAt&&(o=i.indexOf(e)),i.remove(e),t.removedAt&&t.removedAt(n(s),o),t.removed&&t.removed(n(s))}});return o=!1,s}}(),function(){var e=function(e){return _.isArray(e)&&!EJSON.isBinary(e)},t=function(t,n){return e(t)?_.any(t,n):n(t)},n=function(t,n){return n(t)?!0:e(t)&&_.any(t,n)},i=function(e){var t=void 0;for(var n in e){var i="$"===n.substr(0,1);if(void 0===t)t=i;else if(t!==i)throw Error("Inconsistent selector: "+e)}return!!t},o=function(o){if(null==o)return function(e){return t(e,function(e){return null==e})};if(!_.isObject(o))return function(e){return t(e,function(e){return e===o})};if(o instanceof RegExp)return function(e){return void 0===e?!1:t(e,function(e){return o.test(e)})};if(e(o))return function(t){return e(t)?n(t,function(e){return LocalCollection._f._equal(o,e)}):!1};if(i(o)){var s=[];return _.each(o,function(e,t){if(!_.has(r,t))throw Error("Unrecognized operator: "+t);s.push(r[t](e,o.$options))}),function(e){return _.all(s,function(t){return t(e)})}}return function(e){return t(e,function(e){return LocalCollection._f._equal(o,e)})}},s={$and:function(t){if(!e(t)||_.isEmpty(t))throw Error("$and/$or/$nor must be nonempty array");var n=_.map(t,a);return function(e){return _.all(n,function(t){return t(e)})}},$or:function(t){if(!e(t)||_.isEmpty(t))throw Error("$and/$or/$nor must be nonempty array");var n=_.map(t,a);return function(e){return _.any(n,function(t){return t(e)})}},$nor:function(t){if(!e(t)||_.isEmpty(t))throw Error("$and/$or/$nor must be nonempty array");var n=_.map(t,a);return function(e){return _.all(n,function(t){return!t(e)})}},$where:function(e){return e instanceof Function||(e=Function("return "+e)),function(t){return e.call(t)}}},r={$in:function(t){if(!e(t))throw Error("Argument to $in must be array");return function(e){return n(e,function(e){return _.any(t,function(t){return LocalCollection._f._equal(t,e)})})}},$all:function(t){if(!e(t))throw Error("Argument to $all must be array");return function(n){return e(n)?_.all(t,function(e){return _.any(n,function(t){return LocalCollection._f._equal(e,t)})}):!1}},$lt:function(e){return function(n){return t(n,function(t){return 0>LocalCollection._f._cmp(t,e)})}},$lte:function(e){return function(n){return t(n,function(t){return 0>=LocalCollection._f._cmp(t,e)})}},$gt:function(e){return function(n){return t(n,function(t){return LocalCollection._f._cmp(t,e)>0})}},$gte:function(e){return function(n){return t(n,function(t){return LocalCollection._f._cmp(t,e)>=0})}},$ne:function(e){return function(t){return!n(t,function(t){return LocalCollection._f._equal(t,e)})}},$nin:function(t){if(!e(t))throw Error("Argument to $nin must be array");var n=r.$in(t);return function(e){return void 0===e?!0:!n(e)}},$exists:function(e){return function(t){return e===(void 0!==t)}},$mod:function(e){var n=e[0],i=e[1];return function(e){return t(e,function(e){return e%n===i})}},$size:function(t){return function(n){return e(n)&&t===n.length}},$type:function(e){return function(n){return void 0===n?!1:t(n,function(t){return LocalCollection._f._type(t)===e})}},$regex:function(e,n){if(void 0!==n){if(/[^gim]/.test(n))throw Error("Only the i, m, and g regexp options are supported");var i=e instanceof RegExp?e.source:e;e=RegExp(i,n)}else e instanceof RegExp||(e=RegExp(e));return function(n){return void 0===n?!1:t(n,function(t){return e.test(t)})}},$options:function(){return function(){return!0}},$elemMatch:function(t){var n=a(t);return function(t){return e(t)?_.any(t,function(e){return n(e)}):!1}},$not:function(e){var t=o(e);return function(e){return!t(e)}}};LocalCollection._f={_type:function(t){return"number"==typeof t?1:"string"==typeof t?2:"boolean"==typeof t?8:e(t)?4:null===t?10:t instanceof RegExp?11:"function"==typeof t?13:t instanceof Date?9:EJSON.isBinary(t)?5:t instanceof Meteor.Collection.ObjectID?7:3},_equal:function(e,t){return EJSON.equals(e,t,{keyOrderSensitive:!0})},_typeorder:function(e){return[-1,1,2,3,4,5,-1,6,7,8,0,9,-1,100,2,100,1,8,1][e]},_cmp:function(e,t){if(void 0===e)return void 0===t?0:-1;if(void 0===t)return 1;var n=LocalCollection._f._type(e),i=LocalCollection._f._type(t),o=LocalCollection._f._typeorder(n),s=LocalCollection._f._typeorder(i);if(o!==s)return s>o?-1:1;if(n!==i)throw Error("Missing type coercion logic in _cmp");if(7===n&&(n=i=2,e=e.toHexString(),t=t.toHexString()),9===n&&(n=i=1,e=e.getTime(),t=t.getTime()),1===n)return e-t;if(2===i)return t>e?-1:e===t?0:1;if(3===n){var r=function(e){var t=[];for(var n in e)t.push(n),t.push(e[n]);return t};return LocalCollection._f._cmp(r(e),r(t))}if(4===n)for(var a=0;;a++){if(a===e.length)return a===t.length?0:-1;if(a===t.length)return 1;var l=LocalCollection._f._cmp(e[a],t[a]);if(0!==l)return l}if(5===n){if(e.length!==t.length)return e.length-t.length;for(a=0;e.length>a;a++){if(e[a]<t[a])return-1;if(e[a]>t[a])return 1}return 0}if(8===n)return e?t?0:1:t?-1:0;if(10===n)return 0;if(11===n)throw Error("Sorting not supported on regular expression");if(13===n)throw Error("Sorting not supported on Javascript code");throw Error("Unknown type to sort")}},LocalCollection._matches=function(e,t){return LocalCollection._compileSelector(e)(t)},LocalCollection._makeLookupFunction=function(t){var n,i,o,s=t.indexOf(".");if(-1===s)n=t;else{n=t.substr(0,s);var r=t.substr(s+1);i=LocalCollection._makeLookupFunction(r),o=/^\d+(\.|$)/.test(r)}return function(t){if(null==t)return[void 0];var s=t[n];return i?e(s)&&0===s.length?[void 0]:((!e(s)||o)&&(s=[s]),Array.prototype.concat.apply([],_.map(s,i))):[s]}};var a=function(e){var t=[];return _.each(e,function(e,n){if("$"===n.substr(0,1)){if(!_.has(s,n))throw Error("Unrecognized logical operator: "+n);t.push(s[n](e))}else{var i=LocalCollection._makeLookupFunction(n),r=o(e);t.push(function(e){var t=i(e);return _.any(t,r)})}}),function(e){return _.all(t,function(t){return t(e)})}};LocalCollection._compileSelector=function(t){if(t instanceof Function)return function(e){return t.call(e)};if(LocalCollection._selectorIsId(t))return function(e){return EJSON.equals(e._id,t)};if(!t||"_id"in t&&!t._id)return function(){return!1};if("boolean"==typeof t||e(t)||EJSON.isBinary(t))throw Error("Invalid selector: "+t);return a(t)},LocalCollection._compileSort=function(t){var n=[];if(t instanceof Array)for(var i=0;t.length>i;i++)"string"==typeof t[i]?n.push({lookup:LocalCollection._makeLookupFunction(t[i]),ascending:!0}):n.push({lookup:LocalCollection._makeLookupFunction(t[i][0]),ascending:"desc"!==t[i][1]});else{if("object"!=typeof t)throw Error("Bad sort specification: ",JSON.stringify(t));for(var o in t)n.push({lookup:LocalCollection._makeLookupFunction(o),ascending:t[o]>=0})}if(0===n.length)return function(){return 0};var s=function(t,n){var i,o=!0;return _.each(t,function(t){e(t)||(t=[t]),e(t)&&0===t.length&&(t=[void 0]),_.each(t,function(e){if(o)i=e,o=!1;else{var t=LocalCollection._f._cmp(i,e);(n&&t>0||!n&&0>t)&&(i=e)}})}),i};return function(e,t){for(var i=0;n.length>i;++i){var o=n[i],r=s(o.lookup(e),o.ascending),a=s(o.lookup(t),o.ascending),l=LocalCollection._f._cmp(r,a);if(0!==l)return o.ascending?l:-l}return 0}}}(),function(){LocalCollection._modify=function(e,t){var n=!1;for(var i in t){n="$"===i.substr(0,1);break}var o;if(n){var o=EJSON.clone(e);for(var s in t){var r=LocalCollection._modifiers[s];if(!r)throw Error("Invalid modifier specified "+s);for(var a in t[s]){if(a.length&&"."===a[a.length-1])throw Error("Invalid mod field name, may not end in a period");var l=t[s][a],c=a.split("."),u=!!LocalCollection._noCreateModifiers[s],d="$rename"===s,p=LocalCollection._findModTarget(o,c,u,d),h=c.pop();r(p,h,l,a,o)}}}else{if(t._id&&!EJSON.equals(e._id,t._id))throw Error("Cannot change the _id of a document");for(var i in t){if("$"===i.substr(0,1))throw Error("When replacing document, field name may not start with '$'");if(/\./.test(i))throw Error("When replacing document, field name may not contain '.'")}o=t}_.each(_.keys(e),function(t){"_id"!==t&&delete e[t]});for(var i in o)e[i]=o[i]},LocalCollection._findModTarget=function(e,t,n,i){for(var o=0;t.length>o;o++){var s=o===t.length-1,r=t[o],a=/^[0-9]+$/.test(r);if(!(!n||"object"==typeof e&&r in e))return void 0;if(e instanceof Array){if(i)return null;if(!a)throw Error("can't append to array using string field name ["+r+"]");for(r=parseInt(r),s&&(t[o]=r);r>e.length;)e.push(null);if(!s)if(e.length===r)e.push({});else if("object"!=typeof e[r])throw Error("can't modify field '"+t[o+1]+"' of list value "+JSON.stringify(e[r]))}else s||r in e||(e[r]={});if(s)return e;e=e[r]}},LocalCollection._noCreateModifiers={$unset:!0,$pop:!0,$rename:!0,$pull:!0,$pullAll:!0},LocalCollection._modifiers={$inc:function(e,t,n){if("number"!=typeof n)throw Error("Modifier $inc allowed for numbers only");if(t in e){if("number"!=typeof e[t])throw Error("Cannot apply $inc modifier to non-number");e[t]+=n}else e[t]=n},$set:function(e,t,n){if("_id"===t&&!EJSON.equals(n,e._id))throw Error("Cannot change the _id of a document");e[t]=EJSON.clone(n)},$unset:function(e,t){void 0!==e&&(e instanceof Array?t in e&&(e[t]=null):delete e[t])},$push:function(e,t,n){var i=e[t];if(void 0===i)e[t]=[n];else{if(!(i instanceof Array))throw Error("Cannot apply $push modifier to non-array");i.push(EJSON.clone(n))}},$pushAll:function(e,t,n){if(!("object"==typeof n&&n instanceof Array))throw Error("Modifier $pushAll/pullAll allowed for arrays only");var i=e[t];if(void 0===i)e[t]=n;else{if(!(i instanceof Array))throw Error("Cannot apply $pushAll modifier to non-array");for(var o=0;n.length>o;o++)i.push(n[o])}},$addToSet:function(e,t,n){var i=e[t];if(void 0===i)e[t]=[n];else{if(!(i instanceof Array))throw Error("Cannot apply $addToSet modifier to non-array");var o=!1;if("object"==typeof n)for(var s in n){"$each"===s&&(o=!0);break}var r=o?n.$each:[n];_.each(r,function(e){for(var t=0;i.length>t;t++)if(LocalCollection._f._equal(e,i[t]))return;i.push(e)})}},$pop:function(e,t,n){if(void 0!==e){var i=e[t];if(void 0!==i){if(!(i instanceof Array))throw Error("Cannot apply $pop modifier to non-array");"number"==typeof n&&0>n?i.splice(0,1):i.pop()}}},$pull:function(e,t,n){if(void 0!==e){var i=e[t];if(void 0!==i){if(!(i instanceof Array))throw Error("Cannot apply $pull/pullAll modifier to non-array");var o=[];if("object"!=typeof n||n instanceof Array)for(var s=0;i.length>s;s++)LocalCollection._f._equal(i[s],n)||o.push(i[s]);else for(var r=LocalCollection._compileSelector(n),s=0;i.length>s;s++)r(i[s])||o.push(i[s]);e[t]=o}}},$pullAll:function(e,t,n){if(!("object"==typeof n&&n instanceof Array))throw Error("Modifier $pushAll/pullAll allowed for arrays only");if(void 0!==e){var i=e[t];if(void 0!==i){if(!(i instanceof Array))throw Error("Cannot apply $pull/pullAll modifier to non-array");for(var o=[],s=0;i.length>s;s++){for(var r=!1,a=0;n.length>a;a++)if(LocalCollection._f._equal(i[s],n[a])){r=!0;break}r||o.push(i[s])}e[t]=o}}},$rename:function(e,t,n,i,o){if(i===n)throw Error("$rename source must differ from target");if(null===e)throw Error("$rename source field invalid");if("string"!=typeof n)throw Error("$rename target must be a string");
if(void 0!==e){var s=e[t];delete e[t];var r=n.split("."),a=LocalCollection._findModTarget(o,r,!1,!0);if(null===a)throw Error("$rename target field invalid");var l=r.pop();a[l]=s}},$bit:function(){throw Error("$bit is not supported")}}}(),function(){LocalCollection._diffQueryChanges=function(e,t,n,i){e?LocalCollection._diffQueryOrderedChanges(t,n,i):LocalCollection._diffQueryUnorderedChanges(t,n,i)},LocalCollection._diffQueryUnorderedChanges=function(e,t,n){if(n.moved)throw Error("_diffQueryUnordered called with a moved observer!");_.each(t,function(t){if(_.has(e,t._id)){var i=e[t._id];n.changed&&!EJSON.equals(i,t)&&n.changed(t._id,LocalCollection._makeChangedFields(t,i))}else{var o=EJSON.clone(t);delete o._id,n.added&&n.added(t._id,o)}}),n.removed&&_.each(e,function(e){_.has(t,e._id)||n.removed(e._id)})},LocalCollection._diffQueryOrderedChanges=function(e,t,n){var i={};_.each(t,function(e){i[e._id]&&Meteor._debug("Duplicate _id in new_results"),i[e._id]=!0});var o={};_.each(e,function(e,t){e._id in o&&Meteor._debug("Duplicate _id in old_results"),o[e._id]=t});for(var s=[],r=0,a=t.length,l=Array(a),c=Array(a),u=function(e){return o[t[e]._id]},d=0;a>d;d++)if(void 0!==o[t[d]._id]){for(var p=r;p>0&&!(u(l[p-1])<u(d));)p--;c[d]=0===p?-1:l[p-1],l[p]=d,p+1>r&&(r=p+1)}for(var h=0===r?-1:l[r-1];h>=0;)s.push(h),h=c[h];s.reverse(),s.push(t.length),_.each(e,function(e){i[e._id]||n.removed&&n.removed(e._id)});var f=0;_.each(s,function(i){for(var s,r,a,l=t[i]?t[i]._id:null,c=f;i>c;c++)r=t[c],_.has(o,r._id)?(s=e[o[r._id]],a=LocalCollection._makeChangedFields(r,s),_.isEmpty(a)||n.changed&&n.changed(r._id,a),n.movedBefore&&n.movedBefore(r._id,l)):(a=EJSON.clone(r),delete a._id,n.addedBefore&&n.addedBefore(r._id,a,l),n.added&&n.added(r._id,a));l&&(r=t[i],s=e[o[r._id]],a=LocalCollection._makeChangedFields(r,s),_.isEmpty(a)||n.changed&&n.changed(r._id,a)),f=i+1})},LocalCollection._diffObjects=function(e,t,n){_.each(e,function(e,i){_.has(t,i)?n.both&&n.both(i,e,t[i]):n.leftOnly&&n.leftOnly(i,e)}),n.rightOnly&&_.each(t,function(t,i){_.has(e,i)||n.rightOnly(i,t)})}}(),function(){LocalCollection._looksLikeObjectID=function(e){return 24===e.length&&e.match(/^[0-9a-f]*$/)},LocalCollection._ObjectID=function(e){var t=this;if(e){if(e=e.toLowerCase(),!LocalCollection._looksLikeObjectID(e))throw Error("Invalid hexadecimal string for creating an ObjectID");t._str=e}else t._str=Random.hexString(24)},LocalCollection._ObjectID.prototype.toString=function(){var e=this;return'ObjectID("'+e._str+'")'},LocalCollection._ObjectID.prototype.equals=function(e){var t=this;return e instanceof LocalCollection._ObjectID&&t.valueOf()===e.valueOf()},LocalCollection._ObjectID.prototype.clone=function(){var e=this;return new LocalCollection._ObjectID(e._str)},LocalCollection._ObjectID.prototype.typeName=function(){return"oid"},LocalCollection._ObjectID.prototype.getTimestamp=function(){var e=this;return parseInt(e._str.substr(0,8),16)},LocalCollection._ObjectID.prototype.valueOf=LocalCollection._ObjectID.prototype.toJSONValue=LocalCollection._ObjectID.prototype.toHexString=function(){return this._str},LocalCollection._selectorIsId=function(e){return"string"==typeof e||"number"==typeof e||e instanceof LocalCollection._ObjectID},LocalCollection._selectorIsIdPerhapsAsObject=function(e){return LocalCollection._selectorIsId(e)||e&&"object"==typeof e&&e._id&&LocalCollection._selectorIsId(e._id)&&1===_.size(e)},LocalCollection._idsMatchedBySelector=function(e){if(LocalCollection._selectorIsId(e))return[e];if(!e)return null;if(_.has(e,"_id"))return LocalCollection._selectorIsId(e._id)?[e._id]:e._id&&e._id.$in&&_.isArray(e._id.$in)&&!_.isEmpty(e._id.$in)&&_.all(e._id.$in,LocalCollection._selectorIsId)?e._id.$in:null;if(e.$and&&_.isArray(e.$and))for(var t=0;e.$and.length>t;++t){var n=LocalCollection._idsMatchedBySelector(e.$and[t]);if(n)return n}return null},EJSON.addType("oid",function(e){return new LocalCollection._ObjectID(e)})}(),function(){Meteor._SUPPORTED_DDP_VERSIONS=["pre1"],Meteor._MethodInvocation=function(e){this.isSimulation=e.isSimulation,this.is_simulation=this.isSimulation,this._unblock=e.unblock||function(){},this._calledUnblock=!1,this.userId=e.userId,this._setUserId=e.setUserId||function(){},this._sessionData=e.sessionData},_.extend(Meteor._MethodInvocation.prototype,{unblock:function(){var e=this;e._calledUnblock=!0,e._unblock()},setUserId:function(e){var t=this;if(t._calledUnblock)throw Error("Can't call setUserId in a method after calling unblock");t.userId=e,t._setUserId(e)}}),Meteor._parseDDP=function(e){try{var t=JSON.parse(e)}catch(n){return Meteor._debug("Discarding message with invalid JSON",e),null}return null===t||"object"!=typeof t?(Meteor._debug("Discarding non-object DDP message",e),null):(_.has(t,"cleared")&&(_.has(t,"fields")||(t.fields={}),_.each(t.cleared,function(e){t.fields[e]=void 0}),delete t.cleared),_.each(["fields","params","result"],function(e){_.has(t,e)&&(t[e]=EJSON._adjustTypesFromJSONValue(t[e]))}),t)},Meteor._stringifyDDP=function(e){var t=EJSON.clone(e);if(_.has(e,"fields")){var n=[];_.each(e.fields,function(e,i){void 0===e&&(n.push(i),delete t.fields[i])}),_.isEmpty(n)||(t.cleared=n),_.isEmpty(t.fields)&&delete t.fields}if(_.each(["fields","params","result"],function(e){_.has(t,e)&&(t[e]=EJSON._adjustTypesToJSONValue(t[e]))}),e.id&&"string"!=typeof e.id)throw Error("Message id is not a string");return JSON.stringify(t)},Meteor._CurrentInvocation=new Meteor.EnvironmentVariable,Meteor.Error=function(e,t,n){var i=this;i.error=e,i.reason=t,i.details=n},Meteor.Error.prototype=Error()}(),function(){if(Meteor.isServer)var e=Npm.require(path.join("fibers","future"));Meteor._LivedataConnection=function(e,t){var n=this;t=_.extend({reloadOnUpdate:!1,reloadWithOutstanding:!1,supportedDDPVersions:Meteor._SUPPORTED_DDP_VERSIONS,onConnectionFailure:function(e){Meteor._debug("Failed DDP connection: "+e)},onConnected:function(){}},t),n.onReconnect=null,n._stream="object"==typeof e?e:new Meteor._Stream(e),n._lastSessionId=null,n._versionSuggestion=null,n._version=null,n._stores={},n._methodHandlers={},n._nextMethodId=1,n._supportedDDPVersions=t.supportedDDPVersions,n._methodInvokers={},n._outstandingMethodBlocks=[],n._documentsWrittenByStub={},n._serverDocuments={},n._afterUpdateCallbacks=[],n._messagesBufferedUntilQuiescence=[],n._methodsBlockingQuiescence={},n._subsBeingRevived={},n._resetStores=!1,n._updatesForUnknownStores={},n._retryMigrate=null,n._subscriptions={},n._sessionData={},n._userId=null,n._userIdDeps="undefined"!=typeof Deps&&new Deps.Dependency,t.reloadWithOutstanding||Meteor._reload.onMigrate(function(e){if(n._readyToMigrate())return[!0];if(n._retryMigrate)throw Error("Two migrations in progress?");return n._retryMigrate=e,!1}),n._stream.on("message",function(e){try{var i=Meteor._parseDDP(e)}catch(o){return Meteor._debug("Exception while parsing DDP",o),void 0}if(null===i||!i.msg)return Meteor._debug("discarding invalid livedata message",i),void 0;if("connected"===i.msg)n._version=n._versionSuggestion,t.onConnected(),n._livedata_connected(i);else if("failed"==i.msg)if(_.contains(n._supportedDDPVersions,i.version))n._versionSuggestion=i.version,n._stream.reconnect({_force:!0});else{var s="Version negotiation failed; server requested version "+i.version;n._stream.forceDisconnect(s),t.onConnectionFailure(s)}else _.include(["added","changed","removed","ready","updated"],i.msg)?n._livedata_data(i):"nosub"===i.msg?n._livedata_nosub(i):"result"===i.msg?n._livedata_result(i):"error"===i.msg?n._livedata_error(i):Meteor._debug("discarding unknown livedata message type",i)}),n._stream.on("reset",function(){var e={msg:"connect"};n._lastSessionId&&(e.session=n._lastSessionId),e.version=n._versionSuggestion||n._supportedDDPVersions[0],n._versionSuggestion=e.version,e.support=n._supportedDDPVersions,n._send(e),!_.isEmpty(n._outstandingMethodBlocks)&&_.isEmpty(n._outstandingMethodBlocks[0].methods)&&n._outstandingMethodBlocks.shift(),_.each(n._methodInvokers,function(e){e.sentMessage=!1}),n.onReconnect?n._callOnReconnectAndSendAppropriateOutstandingMethods():n._sendOutstandingMethods(),_.each(n._subscriptions,function(e,t){n._send({msg:"sub",id:t,name:e.name,params:e.params})})}),t.reloadOnUpdate&&n._stream.on("update_available",function(){Meteor._reload.reload()})};var t=function(e){var t=this;t.methodId=e.methodId,t.sentMessage=!1,t._callback=e.callback,t._connection=e.connection,t._message=e.message,t._onResultReceived=e.onResultReceived||function(){},t._wait=e.wait,t._methodResult=null,t._dataVisible=!1,t._connection._methodInvokers[t.methodId]=t};_.extend(t.prototype,{sendMessage:function(){var e=this;if(e.gotResult())throw Error("sendingMethod is called on method with result");e._dataVisible=!1,e.sentMessage=!0,e._wait&&(e._connection._methodsBlockingQuiescence[e.methodId]=!0),e._connection._send(e._message)},_maybeInvokeCallback:function(){var e=this;e._methodResult&&e._dataVisible&&(e._callback(e._methodResult[0],e._methodResult[1]),delete e._connection._methodInvokers[e.methodId],e._connection._outstandingMethodFinished())},receiveResult:function(e,t){var n=this;if(n.gotResult())throw Error("Methods should only receive results once");n._methodResult=[e,t],n._onResultReceived(e,t),n._maybeInvokeCallback()},dataVisible:function(){var e=this;e._dataVisible=!0,e._maybeInvokeCallback()},gotResult:function(){var e=this;return!!e._methodResult}}),_.extend(Meteor._LivedataConnection.prototype,{registerStore:function(e,t){var n=this;if(e in n._stores)return!1;var i={};_.each(["update","beginUpdate","endUpdate","saveOriginals","retrieveOriginals"],function(e){i[e]=function(){return t[e]?t[e].apply(t,arguments):void 0}}),n._stores[e]=i;var o=n._updatesForUnknownStores[e];return o&&(i.beginUpdate(o.length,!1),_.each(o,function(e){i.update(e)}),i.endUpdate(),delete n._updatesForUnknownStores[e]),!0},subscribe:function(e){var t=this,n=Array.prototype.slice.call(arguments,1),i={};if(n.length){var o=n[n.length-1];"function"==typeof o?i.onReady=n.pop():!o||"function"!=typeof o.onReady&&"function"!=typeof o.onError||(i=n.pop())}var s,r=_.find(t._subscriptions,function(t){return t.inactive&&t.name===e&&EJSON.equals(t.params,n)});r?(s=r.id,r.inactive=!1,i.onReady&&(r.ready||(r.readyCallback=i.onReady)),i.onError&&(r.errorCallback=i.onError)):(s=Random.id(),t._subscriptions[s]={id:s,name:e,params:n,inactive:!1,ready:!1,readyDeps:"undefined"!=typeof Deps&&new Deps.Dependency,readyCallback:i.onReady,errorCallback:i.onError},t._send({msg:"sub",id:s,name:e,params:n}));var a={stop:function(){_.has(t._subscriptions,s)&&(t._send({msg:"unsub",id:s}),delete t._subscriptions[s])},ready:function(){if(!_.has(t._subscriptions,s))return!1;var e=t._subscriptions[s];return e.readyDeps&&e.readyDeps.depend(),e.ready}};return Deps.active&&Deps.onInvalidate(function(){_.has(t._subscriptions,s)&&(t._subscriptions[s].inactive=!0),Deps.afterFlush(function(){_.has(t._subscriptions,s)&&t._subscriptions[s].inactive&&a.stop()})}),a},methods:function(e){var t=this;_.each(e,function(e,n){if(t._methodHandlers[n])throw Error("A method named '"+n+"' is already defined");t._methodHandlers[n]=e})},call:function(e){var t=Array.prototype.slice.call(arguments,1);if(t.length&&"function"==typeof t[t.length-1])var n=t.pop();return this.apply(e,t,n)},apply:function(n,i,o,s){var r=this;s||"function"!=typeof o||(s=o,o={}),o=o||{},s&&(s=Meteor.bindEnvironment(s,function(e){Meteor._debug("Exception while delivering result of invoking '"+n+"'",e,e.stack)}));var a=function(){var e;return function(){return void 0===e&&(e=""+r._nextMethodId++),e}}();if(Meteor.isClient){var l=Meteor._CurrentInvocation.get(),c=l&&l.isSimulation,u=r._methodHandlers[n];if(u){var d=function(e){r.setUserId(e)},p=new Meteor._MethodInvocation({isSimulation:!0,userId:r.userId(),setUserId:d,sessionData:r._sessionData});c||r._saveOriginals();try{var h=Meteor._CurrentInvocation.withValue(p,function(){return u.apply(p,EJSON.clone(i))})}catch(f){var m=f}c||r._retrieveAndStoreOriginals(a())}if(c){if(s)return s(m,h),void 0;if(m)throw m;return h}m&&!m.expected&&Meteor._debug("Exception while simulating the effect of invoking '"+n+"'",m,m.stack)}if(!s)if(Meteor.isClient)s=function(){};else{var g=new e;s=function(e,t){g["return"]([e,t])}}var v=new t({methodId:a(),callback:s,connection:r,onResultReceived:o.onResultReceived,wait:!!o.wait,message:{msg:"method",method:n,params:i,id:a()}});if(o.wait?r._outstandingMethodBlocks.push({wait:!0,methods:[v]}):((_.isEmpty(r._outstandingMethodBlocks)||_.last(r._outstandingMethodBlocks).wait)&&r._outstandingMethodBlocks.push({wait:!1,methods:[]}),_.last(r._outstandingMethodBlocks).methods.push(v)),1===r._outstandingMethodBlocks.length&&v.sendMessage(),g){var b=g.wait();if(b[0])throw b[0];return b[1]}return void 0},_saveOriginals:function(){var e=this;_.each(e._stores,function(e){e.saveOriginals()})},_retrieveAndStoreOriginals:function(e){var t=this;if(t._documentsWrittenByStub[e])throw Error("Duplicate methodId in _retrieveAndStoreOriginals");var n=[];_.each(t._stores,function(i,o){var s=i.retrieveOriginals();_.each(s,function(i,s){if("string"!=typeof s)throw Error("id is not a string");n.push({collection:o,id:s});var r=Meteor._ensure(t._serverDocuments,o,s);r.writtenByStubs?r.writtenByStubs[e]=!0:(r.document=i,r.flushCallbacks=[],r.writtenByStubs={},r.writtenByStubs[e]=!0)})}),_.isEmpty(n)||(t._documentsWrittenByStub[e]=n)},_unsubscribeAll:function(){var e=this;_.each(_.clone(e._subscriptions),function(t,n){e._send({msg:"unsub",id:n}),delete e._subscriptions[n]})},_send:function(e){var t=this;t._stream.send(Meteor._stringifyDDP(e))},status:function(){var e=this;return e._stream.status.apply(e._stream,arguments)},reconnect:function(){var e=this;return e._stream.reconnect.apply(e._stream,arguments)},userId:function(){var e=this;return e._userIdDeps&&e._userIdDeps.depend(),e._userId},setUserId:function(e){var t=this;t._userId!==e&&(t._userId=e,t._userIdDeps&&t._userIdDeps.changed())},_waitingForQuiescence:function(){var e=this;return!_.isEmpty(e._subsBeingRevived)||!_.isEmpty(e._methodsBlockingQuiescence)},_anyMethodsAreOutstanding:function(){var e=this;return _.any(_.pluck(e._methodInvokers,"sentMessage"))},_livedata_connected:function(e){var t=this;if(t._lastSessionId&&(t._resetStores=!0),"string"==typeof e.session){var n=t._lastSessionId===e.session;t._lastSessionId=e.session}n||(t._updatesForUnknownStores={},t._resetStores&&(t._documentsWrittenByStub={},t._serverDocuments={}),t._afterUpdateCallbacks=[],t._subsBeingRevived={},_.each(t._subscriptions,function(e,n){e.ready&&(t._subsBeingRevived[n]=!0)}),t._methodsBlockingQuiescence={},t._resetStores&&_.each(t._methodInvokers,function(e){e.gotResult()?t._afterUpdateCallbacks.push(_.bind(e.dataVisible,e)):e.sentMessage&&(t._methodsBlockingQuiescence[e.methodId]=!0)}),t._messagesBufferedUntilQuiescence=[],t._waitingForQuiescence()||(t._resetStores&&(_.each(t._stores,function(e){e.beginUpdate(0,!0),e.endUpdate()}),t._resetStores=!1),t._runAfterUpdateCallbacks()))},_processOneDataMessage:function(e,t){var n=this;n["_process_"+e.msg](e,t)},_livedata_data:function(e){var t=this,n={};if(t._waitingForQuiescence()){if(t._messagesBufferedUntilQuiescence.push(e),_.each(e.subs||[],function(e){delete t._subsBeingRevived[e]}),_.each(e.methods||[],function(e){delete t._methodsBlockingQuiescence[e]}),t._waitingForQuiescence())return;_.each(t._messagesBufferedUntilQuiescence,function(e){t._processOneDataMessage(e,n)}),t._messagesBufferedUntilQuiescence=[]}else t._processOneDataMessage(e,n);(t._resetStores||!_.isEmpty(n))&&(_.each(t._stores,function(e,i){e.beginUpdate(_.has(n,i)?n[i].length:0,t._resetStores)}),t._resetStores=!1,_.each(n,function(e,n){var i=t._stores[n];i?_.each(e,function(e){i.update(e)}):(_.has(t._updatesForUnknownStores,n)||(t._updatesForUnknownStores[n]=[]),Array.prototype.push.apply(t._updatesForUnknownStores[n],e))}),_.each(t._stores,function(e){e.endUpdate()})),t._runAfterUpdateCallbacks()},_runAfterUpdateCallbacks:function(){var e=this,t=e._afterUpdateCallbacks;e._afterUpdateCallbacks=[],_.each(t,function(e){e()})},_pushUpdate:function(e,t,n){_.has(e,t)||(e[t]=[]),e[t].push(n)},_process_added:function(e,t){var n=this,i=Meteor._get(n._serverDocuments,e.collection,e.id);if(i){if(void 0!==i.document)throw Error("It doesn't make sense to be adding something we know exists: "+e.id);i.document=e.fields||{},i.document._id=Meteor.idParse(e.id)}else n._pushUpdate(t,e.collection,e)},_process_changed:function(e,t){var n=this,i=Meteor._get(n._serverDocuments,e.collection,e.id);if(i){if(void 0===i.document)throw Error("It doesn't make sense to be changing something we don't think exists: "+e.id);LocalCollection._applyChanges(i.document,e.fields)}else n._pushUpdate(t,e.collection,e)},_process_removed:function(e,t){var n=this,i=Meteor._get(n._serverDocuments,e.collection,e.id);if(i){if(void 0===i.document)throw Error("It doesn't make sense to be deleting something we don't know exists: "+e.id);i.document=void 0}else n._pushUpdate(t,e.collection,{msg:"removed",collection:e.collection,id:e.id})},_process_updated:function(e,t){var n=this;_.each(e.methods,function(e){_.each(n._documentsWrittenByStub[e],function(i){var o=Meteor._get(n._serverDocuments,i.collection,i.id);if(!o)throw Error("Lost serverDoc for "+JSON.stringify(i));if(!o.writtenByStubs[e])throw Error("Doc "+JSON.stringify(i)+" not written by  method "+e);delete o.writtenByStubs[e],_.isEmpty(o.writtenByStubs)&&(n._pushUpdate(t,i.collection,{msg:"replace",id:i.id,replace:o.document}),_.each(o.flushCallbacks,function(e){e()}),delete n._serverDocuments[i.collection][i.id])}),delete n._documentsWrittenByStub[e];var i=n._methodInvokers[e];if(!i)throw Error("No callback invoker for method "+e);n._runWhenAllServerDocsAreFlushed(_.bind(i.dataVisible,i))})},_process_ready:function(e){var t=this;_.each(e.subs,function(e){t._runWhenAllServerDocsAreFlushed(function(){var n=t._subscriptions[e];n&&(n.ready||(n.readyCallback&&n.readyCallback(),n.ready=!0,n.readyDeps&&n.readyDeps.changed()))})})},_runWhenAllServerDocsAreFlushed:function(e){var t=this,n=function(){t._afterUpdateCallbacks.push(e)},i=0,o=function(){--i,0===i&&n()};_.each(t._serverDocuments,function(e){_.each(e,function(e){var n=_.any(e.writtenByStubs,function(e,n){var i=t._methodInvokers[n];return i&&i.sentMessage});n&&(++i,e.flushCallbacks.push(o))})}),0===i&&n()},_livedata_nosub:function(e){var t=this;if(_.has(t._subscriptions,e.id)){var n=t._subscriptions[e.id].errorCallback;delete t._subscriptions[e.id],n&&e.error&&n(new Meteor.Error(e.error.error,e.error.reason,e.error.details))}},_livedata_result:function(e){var t=this;if(_.isEmpty(t._outstandingMethodBlocks))return Meteor._debug("Received method result but no methods outstanding"),void 0;for(var n,i=t._outstandingMethodBlocks[0].methods,o=0;i.length>o&&(n=i[o],n.methodId!==e.id);o++);return n?(i.splice(o,1),_.has(e,"error")?n.receiveResult(new Meteor.Error(e.error.error,e.error.reason,e.error.details)):n.receiveResult(void 0,e.result),void 0):(Meteor._debug("Can't match method response to original method call",e),void 0)},_outstandingMethodFinished:function(){var e=this;if(!e._anyMethodsAreOutstanding()){if(!_.isEmpty(e._outstandingMethodBlocks)){var t=e._outstandingMethodBlocks.shift();if(!_.isEmpty(t.methods))throw Error("No methods outstanding but nonempty block: "+JSON.stringify(t));_.isEmpty(e._outstandingMethodBlocks)||e._sendOutstandingMethods()}e._maybeMigrate()}},_sendOutstandingMethods:function(){var e=this;_.isEmpty(e._outstandingMethodBlocks)||_.each(e._outstandingMethodBlocks[0].methods,function(e){e.sendMessage()})},_livedata_error:function(e){Meteor._debug("Received error from server: ",e.reason),e.offendingMessage&&Meteor._debug("For: ",e.offendingMessage)},_callOnReconnectAndSendAppropriateOutstandingMethods:function(){var e=this,t=e._outstandingMethodBlocks;if(e._outstandingMethodBlocks=[],e.onReconnect(),!_.isEmpty(t)){if(_.isEmpty(e._outstandingMethodBlocks))return e._outstandingMethodBlocks=t,e._sendOutstandingMethods(),void 0;_.last(e._outstandingMethodBlocks).wait||t[0].wait||(_.each(t[0].methods,function(t){_.last(e._outstandingMethodBlocks).methods.push(t),1===e._outstandingMethodBlocks.length&&t.sendMessage()}),t.shift()),_.each(t,function(t){e._outstandingMethodBlocks.push(t)})}},_readyToMigrate:function(){var e=this;return _.isEmpty(e._methodInvokers)},_maybeMigrate:function(){var e=this;e._retryMigrate&&e._readyToMigrate()&&(e._retryMigrate(),e._retryMigrate=null)}}),_.extend(Meteor,{connect:function(e,t){var n=new Meteor._LivedataConnection(e,{reloadOnUpdate:t});return Meteor._LivedataConnection._allConnections.push(n),n}}),Meteor._LivedataConnection._allConnections=[],Meteor._LivedataConnection._allSubscriptionsReady=function(){return _.all(Meteor._LivedataConnection._allConnections,function(e){return _.all(e._subscriptions,function(e){return e.ready})})}}(),function(){var e="/";"undefined"!=typeof __meteor_runtime_config__&&__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL&&(e=__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL),_.extend(Meteor,{default_connection:Meteor.connect(e,!0),refresh:function(){}}),_.each(["subscribe","methods","call","apply","status","reconnect"],function(e){Meteor[e]=_.bind(Meteor.default_connection[e],Meteor.default_connection)})}(),function(){Meteor._LocalCollectionDriver=function(){var e=this;e.collections={}},_.extend(Meteor._LocalCollectionDriver.prototype,{open:function(e){var t=this;return e?(e in t.collections||(t.collections[e]=new LocalCollection),t.collections[e]):new LocalCollection}}),Meteor._LocalCollectionDriver=new Meteor._LocalCollectionDriver}(),function(){Meteor.Collection=function(e,t){var n=this;switch(t&&t.methods&&(t={manager:t}),t=_.extend({manager:void 0,idGeneration:"STRING",transform:null,_driver:void 0,_preventAutopublish:!1},t),t.idGeneration){case"MONGO":n._makeNewID=function(){return new Meteor.Collection.ObjectID};break;case"STRING":default:n._makeNewID=function(){return Random.id()}}if(n._transform=t.transform?Deps._makeNonreactive(t.transform):null,e||null===e||Meteor._debug("Warning: creating anonymous collection. It will not be saved or synchronized over the network. (Pass null for the collection name to turn off this warning.)"),n._manager=e&&(t.manager||(Meteor.isClient?Meteor.default_connection:Meteor.default_server)),t._driver||(t._driver=e&&n._manager===Meteor.default_server&&Meteor._RemoteCollectionDriver?Meteor._RemoteCollectionDriver:Meteor._LocalCollectionDriver),n._collection=t._driver.open(e),n._name=e,e&&n._manager.registerStore){var i=n._manager.registerStore(e,{beginUpdate:function(e,t){(e>1||t)&&n._collection.pauseObservers(),t&&n._collection.remove({})},update:function(e){var t=Meteor.idParse(e.id),i=n._collection.findOne(t);if("replace"===e.msg){var o=e.replace;return o?i?n._collection.update(t,o):n._collection.insert(o):i&&n._collection.remove(t),void 0}if("added"===e.msg){if(i){debugger;throw Error("Expected not to find a document already present for an add")}n._collection.insert(_.extend({_id:t},e.fields))}else if("removed"===e.msg){if(!i)throw Error("Expected to find a document already present for removed");n._collection.remove(t)}else{if("changed"!==e.msg)throw Error("I don't know how to deal with this message");if(!i)throw Error("Expected to find a document to change");if(!_.isEmpty(e.fields)){var s={};_.each(e.fields,function(e,t){void 0===e?(s.$unset||(s.$unset={}),s.$unset[t]=1):(s.$set||(s.$set={}),s.$set[t]=e)}),n._collection.update(t,s)}}},endUpdate:function(){n._collection.resumeObservers()},saveOriginals:function(){n._collection.saveOriginals()},retrieveOriginals:function(){return n._collection.retrieveOriginals()}});if(!i)throw Error("There is already a collection named '"+e+"'")}n._defineMutationMethods(),!t._preventAutopublish&&n._manager&&n._manager.onAutopublish&&n._manager.onAutopublish(function(){var e=function(){return n.find()};n._manager.publish(null,e,{is_auto:!0})})},_.extend(Meteor.Collection.prototype,{_getFindSelector:function(e){return 0==e.length?{}:e[0]},_getFindOptions:function(e){var t=this;return 2>e.length?{transform:t._transform}:_.extend({transform:t._transform},e[1])},find:function(){var e=this,t=_.toArray(arguments);return e._collection.find(e._getFindSelector(t),e._getFindOptions(t))},findOne:function(){var e=this,t=_.toArray(arguments);return e._collection.findOne(e._getFindSelector(t),e._getFindOptions(t))}}),Meteor.Collection._rewriteSelector=function(e){if(LocalCollection._selectorIsId(e)&&(e={_id:e}),!e||"_id"in e&&!e._id)return{_id:Random.id()};var t={};return _.each(e,function(e,n){if(e instanceof RegExp){t[n]={$regex:e.source};var i="";e.ignoreCase&&(i+="i"),e.multiline&&(i+="m"),i&&(t[n].$options=i)}else t[n]=e}),t};var e=function(e,t){if(!LocalCollection._selectorIsIdPerhapsAsObject(e))throw new Meteor.Error(403,"Not permitted. Untrusted code may only "+t+" documents by ID.")};_.each(["insert","update","remove"],function(t){Meteor.Collection.prototype[t]=function(){var n,i,o=this,s=_.toArray(arguments);if(s.length&&s[s.length-1]instanceof Function&&(n=s.pop()),Meteor.isClient&&!n&&(n=function(e){e&&Meteor._debug(t+" failed: "+(e.reason||e.stack))}),"insert"===t){if(!s.length)throw Error("insert requires an argument");if(s[0]=_.extend({},s[0]),"_id"in s[0]){if(i=s[0]._id,!("string"==typeof i||i instanceof Meteor.Collection.ObjectID))throw Error("Meteor requires document _id fields to be strings or ObjectIDs")}else i=s[0]._id=o._makeNewID()}else s[0]=Meteor.Collection._rewriteSelector(s[0]);if(o._manager&&o._manager!==Meteor.default_server){var r=Meteor._CurrentInvocation.get(),a=r&&r.isSimulation;a||"insert"===t||e(s[0],t),n?o._manager.apply(o._prefix+t,s,function(e){n(e,!e&&i)}):o._manager.apply(o._prefix+t,s)}else{try{o._collection[t].apply(o._collection,s)}catch(l){if(n)return n(l),null;throw l}n&&n(null,i)}return i}}),Meteor.Collection.prototype._ensureIndex=function(e,t){var n=this;if(!n._collection._ensureIndex)throw Error("Can only call _ensureIndex on server collections");n._collection._ensureIndex(e,t)},Meteor.Collection.prototype._dropIndex=function(e){var t=this;if(!t._collection._dropIndex)throw Error("Can only call _dropIndex on server collections");t._collection._dropIndex(e)},Meteor.Collection.ObjectID=LocalCollection._ObjectID,function(){var e=function(e,t){var n=["insert","update","remove","fetch","transform"];_.each(_.keys(t),function(t){if(!_.contains(n,t))throw Error(e+": Invalid key: "+t)});var i=this;if(i._restricted=!0,_.each(["insert","update","remove"],function(n){if(t[n]){if(!(t[n]instanceof Function))throw Error(e+": Value for `"+n+"` must be a function");i._transform&&(t[n].transform=i._transform),t.transform&&(t[n].transform=Deps._makeNonreactive(t.transform)),i._validators[n][e].push(t[n])}}),t.update||t.remove||t.fetch){if(t.fetch&&!(t.fetch instanceof Array))throw Error(e+": Value for `fetch` must be an array");i._updateFetch(t.fetch)}};Meteor.Collection.prototype.allow=function(t){e.call(this,"allow",t)},Meteor.Collection.prototype.deny=function(t){e.call(this,"deny",t)}}(),Meteor.Collection.prototype._defineMutationMethods=function(){var t=this;if(t._restricted=!1,t._insecure=void 0,t._validators={insert:{allow:[],deny:[]},update:{allow:[],deny:[]},remove:{allow:[],deny:[]},fetch:[],fetchAllFields:!1},t._name&&(t._prefix="/"+t._name+"/",t._manager)){var n={};_.each(["insert","update","remove"],function(i){n[t._prefix+i]=function(){try{if(this.isSimulation)return t._collection[i].apply(t._collection,_.toArray(arguments)),void 0;if("insert"!==i&&e(arguments[0],i),t._restricted){if(0===t._validators[i].allow.length)throw new Meteor.Error(403,"Access denied. No allow validators set on restricted collection for method '"+i+"'.");var n="_validated"+i.charAt(0).toUpperCase()+i.slice(1),o=[this.userId].concat(_.toArray(arguments));t[n].apply(t,o)}else{if(!t._isInsecure())throw new Meteor.Error(403,"Access denied");t._collection[i].apply(t._collection,_.toArray(arguments))}}catch(s){throw"MongoError"===s.name||"MinimongoError"===s.name?new Meteor.Error(409,""+s):s}}}),t._manager.methods(n)}},Meteor.Collection.prototype._updateFetch=function(e){var t=this;t._validators.fetchAllFields||(e?t._validators.fetch=_.union(t._validators.fetch,e):(t._validators.fetchAllFields=!0,t._validators.fetch=null))},Meteor.Collection.prototype._isInsecure=function(){var e=this;return void 0===e._insecure?Meteor.Collection.insecure:e._insecure};var t=function(e,t){var n=t;return e.transform&&(n=e.transform(EJSON.clone(t))),n};Meteor.Collection.prototype._validatedInsert=function(e,n){var i=this;if(_.any(i._validators.insert.deny,function(i){return i(e,t(i,n))}))throw new Meteor.Error(403,"Access denied");if(_.all(i._validators.insert.allow,function(i){return!i(e,t(i,n))}))throw new Meteor.Error(403,"Access denied");i._collection.insert.call(i._collection,n)};var n=function(e,t){return e.transform?e.transform(t):t};Meteor.Collection.prototype._validatedUpdate=function(e,t,o,s){var r=this;if(!LocalCollection._selectorIsIdPerhapsAsObject(t))throw Error("validated update should be of a single ID");var a=[];_.each(o,function(e,t){if("$"!==t.charAt(0))throw new Meteor.Error(403,"Access denied. In a restricted collection you can only update documents, not replace them. Use a Mongo update operator, such as '$set'.");if(!_.has(i,t))throw new Meteor.Error(403,"Access denied. Operator "+t+" not allowed in a restricted collection.");_.each(_.keys(e),function(e){-1!==e.indexOf(".")&&(e=e.substring(0,e.indexOf("."))),_.contains(a,e)||a.push(e)})});var l={transform:null};r._validators.fetchAllFields||(l.fields={},_.each(r._validators.fetch,function(e){l.fields[e]=1}));var c=r._collection.findOne(t,l);if(c){var u;if(_.any(r._validators.update.deny,function(t){return u||(u=n(t,c)),t(e,u,a,o)}))throw new Meteor.Error(403,"Access denied");if(_.all(r._validators.update.allow,function(t){return u||(u=n(t,c)),!t(e,u,a,o)}))throw new Meteor.Error(403,"Access denied");r._collection.update.call(r._collection,t,o,s)}};var i={$inc:1,$set:1,$unset:1,$addToSet:1,$pop:1,$pullAll:1,$pull:1,$pushAll:1,$push:1,$bit:1};Meteor.Collection.prototype._validatedRemove=function(e,t){var i=this,o={transform:null};i._validators.fetchAllFields||(o.fields={},_.each(i._validators.fetch,function(e){o.fields[e]=1}));var s=i._collection.findOne(t,o);if(s){if(_.any(i._validators.remove.deny,function(t){return t(e,n(t,s))}))throw new Meteor.Error(403,"Access denied");if(_.all(i._validators.remove.allow,function(t){return!t(e,n(t,s))}))throw new Meteor.Error(403,"Access denied");i._collection.remove.call(i._collection,t)}}}(),function(){(function(e,t){function n(e){var t=ft[e]={};return X.each(e.split(tt),function(e,n){t[n]=!0}),t}function i(e,n,i){if(i===t&&1===e.nodeType){var o="data-"+n.replace(gt,"-$1").toLowerCase();if(i=e.getAttribute(o),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:mt.test(i)?X.parseJSON(i):i}catch(s){}X.data(e,n,i)}else i=t}return i}function o(e){var t;for(t in e)if(("data"!==t||!X.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function s(){return!1}function r(){return!0}function a(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function l(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function c(e,t,n){if(t=t||0,X.isFunction(t))return X.grep(e,function(e,i){var o=!!t.call(e,i,e);return o===n});if(t.nodeType)return X.grep(e,function(e){return e===t===n});if("string"==typeof t){var i=X.grep(e,function(e){return 1===e.nodeType});if(Ot.test(t))return X.filter(t,i,!n);t=X.filter(t,i)}return X.grep(e,function(e){return X.inArray(e,t)>=0===n})}function u(e){var t=Ht.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function d(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function p(e,t){if(1===t.nodeType&&X.hasData(e)){var n,i,o,s=X._data(e),r=X._data(t,s),a=s.events;if(a){delete r.handle,r.events={};
for(n in a)for(i=0,o=a[n].length;o>i;i++)X.event.add(t,n,a[n][i])}r.data&&(r.data=X.extend({},r.data))}}function h(e,t){var n;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),X.support.html5Clone&&e.innerHTML&&!X.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Qt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.selected=e.defaultSelected:"input"===n||"textarea"===n?t.defaultValue=e.defaultValue:"script"===n&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(X.expando))}function f(e){return e.getElementsByTagName!==t?e.getElementsByTagName("*"):e.querySelectorAll!==t?e.querySelectorAll("*"):[]}function m(e){Qt.test(e.type)&&(e.defaultChecked=e.checked)}function g(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,o=bn.length;o--;)if(t=bn[o]+n,t in e)return t;return i}function v(e,t){return e=t||e,"none"===X.css(e,"display")||!X.contains(e.ownerDocument,e)}function b(e,t){for(var n,i,o=[],s=0,r=e.length;r>s;s++)n=e[s],n.style&&(o[s]=X._data(n,"olddisplay"),t?(o[s]||"none"!==n.style.display||(n.style.display=""),""===n.style.display&&v(n)&&(o[s]=X._data(n,"olddisplay",x(n.nodeName)))):(i=nn(n,"display"),o[s]||"none"===i||X._data(n,"olddisplay",i)));for(s=0;r>s;s++)n=e[s],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?o[s]||"":"none"));return e}function _(e,t,n){var i=dn.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function y(e,t,n,i){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=X.css(e,n+vn[o],!0)),i?("content"===n&&(s-=parseFloat(nn(e,"padding"+vn[o]))||0),"margin"!==n&&(s-=parseFloat(nn(e,"border"+vn[o]+"Width"))||0)):(s+=parseFloat(nn(e,"padding"+vn[o]))||0,"padding"!==n&&(s+=parseFloat(nn(e,"border"+vn[o]+"Width"))||0));return s}function w(e,t,n){var i="width"===t?e.offsetWidth:e.offsetHeight,o=!0,s=X.support.boxSizing&&"border-box"===X.css(e,"boxSizing");if(0>=i||null==i){if(i=nn(e,t),(0>i||null==i)&&(i=e.style[t]),pn.test(i))return i;o=s&&(X.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+y(e,t,n||(s?"border":"content"),o)+"px"}function x(e){if(fn[e])return fn[e];var t=X("<"+e+">").appendTo(U.body),n=t.css("display");return t.remove(),("none"===n||""===n)&&(on=U.body.appendChild(on||X.extend(U.createElement("iframe"),{frameBorder:0,width:0,height:0})),sn&&on.createElement||(sn=(on.contentWindow||on.contentDocument).document,sn.write("<!doctype html><html><body>"),sn.close()),t=sn.body.appendChild(sn.createElement(e)),n=nn(t,"display"),U.body.removeChild(on)),fn[e]=n,n}function C(e,t,n,i){var o;if(X.isArray(t))X.each(t,function(t,o){n||wn.test(e)?i(e,o):C(e+"["+("object"==typeof o?t:"")+"]",o,n,i)});else if(n||"object"!==X.type(t))i(e,t);else for(o in t)C(e+"["+o+"]",t[o],n,i)}function k(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o,s,r=t.toLowerCase().split(tt),a=0,l=r.length;if(X.isFunction(n))for(;l>a;a++)i=r[a],s=/^\+/.test(i),s&&(i=i.substr(1)||"*"),o=e[i]=e[i]||[],o[s?"unshift":"push"](n)}}function T(e,n,i,o,s,r){s=s||n.dataTypes[0],r=r||{},r[s]=!0;for(var a,l=e[s],c=0,u=l?l.length:0,d=e===Bn;u>c&&(d||!a);c++)a=l[c](n,i,o),"string"==typeof a&&(!d||r[a]?a=t:(n.dataTypes.unshift(a),a=T(e,n,i,o,a,r)));return!d&&a||r["*"]||(a=T(e,n,i,o,"*",r)),a}function M(e,n){var i,o,s=X.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:o||(o={}))[i]=n[i]);o&&X.extend(!0,e,o)}function S(e,n,i){var o,s,r,a,l=e.contents,c=e.dataTypes,u=e.responseFields;for(s in u)s in i&&(n[u[s]]=i[s]);for(;"*"===c[0];)c.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("content-type"));if(o)for(s in l)if(l[s]&&l[s].test(o)){c.unshift(s);break}if(c[0]in i)r=c[0];else{for(s in i){if(!c[0]||e.converters[s+" "+c[0]]){r=s;break}a||(a=s)}r=r||a}return r?(r!==c[0]&&c.unshift(r),i[r]):t}function I(e,t){var n,i,o,s,r=e.dataTypes.slice(),a=r[0],l={},c=0;if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),r[1])for(n in e.converters)l[n.toLowerCase()]=e.converters[n];for(;o=r[++c];)if("*"!==o){if("*"!==a&&a!==o){if(n=l[a+" "+o]||l["* "+o],!n)for(i in l)if(s=i.split(" "),s[1]===o&&(n=l[a+" "+s[0]]||l["* "+s[0]])){n===!0?n=l[i]:l[i]!==!0&&(o=s[0],r.splice(c--,0,o));break}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(u){return{state:"parsererror",error:n?u:"No conversion from "+a+" to "+o}}}a=o}return{state:"success",data:t}}function D(){try{return new e.XMLHttpRequest}catch(t){}}function A(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function E(){return setTimeout(function(){Jn=t},0),Jn=X.now()}function P(e,t){X.each(t,function(t,n){for(var i=(ei[t]||[]).concat(ei["*"]),o=0,s=i.length;s>o;o++)if(i[o].call(e,t,n))return})}function $(e,t,n){var i,o=0,s=Zn.length,r=X.Deferred().always(function(){delete a.elem}),a=function(){for(var t=Jn||E(),n=Math.max(0,l.startTime+l.duration-t),i=1-(n/l.duration||0),o=0,s=l.tweens.length;s>o;o++)l.tweens[o].run(i);return r.notifyWith(e,[l,i,n]),1>i&&s?n:(r.resolveWith(e,[l]),!1)},l=r.promise({elem:e,props:X.extend({},t),opts:X.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Jn||E(),duration:n.duration,tweens:[],createTween:function(t,n){var i=X.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){for(var n=0,i=t?l.tweens.length:0;i>n;n++)l.tweens[n].run(1);return t?r.resolveWith(e,[l,t]):r.rejectWith(e,[l,t]),this}}),c=l.props;for(L(c,l.opts.specialEasing);s>o;o++)if(i=Zn[o].call(l,e,c,l.opts))return i;return P(l,c),X.isFunction(l.opts.start)&&l.opts.start.call(e,l),X.fx.timer(X.extend(a,{anim:l,queue:l.opts.queue,elem:e})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function L(e,t){var n,i,o,s,r;for(n in e)if(i=X.camelCase(n),o=t[i],s=e[n],X.isArray(s)&&(o=s[1],s=e[n]=s[0]),n!==i&&(e[i]=s,delete e[n]),r=X.cssHooks[i],r&&"expand"in r){s=r.expand(s),delete e[i];for(n in s)n in e||(e[n]=s[n],t[n]=o)}else t[i]=o}function N(e,t,n){var i,o,s,r,a,l,c,u,d=this,p=e.style,h={},f=[],m=e.nodeType&&v(e);n.queue||(c=X._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,u=c.empty.fire,c.empty.fire=function(){c.unqueued||u()}),c.unqueued++,d.always(function(){d.always(function(){c.unqueued--,X.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===X.css(e,"display")&&"none"===X.css(e,"float")&&(X.support.inlineBlockNeedsLayout&&"inline"!==x(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",X.support.shrinkWrapBlocks||d.done(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(s=t[i],Gn.exec(s)){if(delete t[i],s===(m?"hide":"show"))continue;f.push(i)}if(r=f.length)for(a=X._data(e,"fxshow")||X._data(e,"fxshow",{}),m?X(e).show():d.done(function(){X(e).hide()}),d.done(function(){var t;X.removeData(e,"fxshow",!0);for(t in h)X.style(e,t,h[t])}),i=0;r>i;i++)o=f[i],l=d.createTween(o,m?a[o]:0),h[o]=a[o]||X.style(e,o),o in a||(a[o]=l.start,m&&(l.end=l.start,l.start="width"===o||"height"===o?1:0))}function O(e,t,n,i,o){return new O.prototype.init(e,t,n,i,o)}function B(e,t){var n,i={height:e},o=0;for(t=t?1:0;4>o;o+=2-t)n=vn[o],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function R(e){return X.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var H,j,U=e.document,F=e.location,z=e.navigator,W=e.jQuery,q=e.$,V=Array.prototype.push,Y=Array.prototype.slice,J=Array.prototype.indexOf,Q=Object.prototype.toString,G=Object.prototype.hasOwnProperty,K=String.prototype.trim,X=function(e,t){return new X.fn.init(e,t,H)},Z=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,et=/\S/,tt=/\s+/,nt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,it=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,ot=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,st=/^[\],:{}\s]*$/,rt=/(?:^|:|,)(?:\s*\[)+/g,at=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,lt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ct=/^-ms-/,ut=/-([\da-z])/gi,dt=function(e,t){return(t+"").toUpperCase()},pt=function(){U.addEventListener?(U.removeEventListener("DOMContentLoaded",pt,!1),X.ready()):"complete"===U.readyState&&(U.detachEvent("onreadystatechange",pt),X.ready())},ht={};X.fn=X.prototype={constructor:X,init:function(e,n,i){var o,s,r;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("string"==typeof e){if(o="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:it.exec(e),!o||!o[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(o[1])return n=n instanceof X?n[0]:n,r=n&&n.nodeType?n.ownerDocument||n:U,e=X.parseHTML(o[1],r,!0),ot.test(o[1])&&X.isPlainObject(n)&&this.attr.call(e,n,!0),X.merge(this,e);if(s=U.getElementById(o[2]),s&&s.parentNode){if(s.id!==o[2])return i.find(e);this.length=1,this[0]=s}return this.context=U,this.selector=e,this}return X.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),X.makeArray(e,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return Y.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,n){var i=X.merge(this.constructor(),e);return i.prevObject=this,i.context=this.context,"find"===t?i.selector=this.selector+(this.selector?" ":"")+n:t&&(i.selector=this.selector+"."+t+"("+n+")"),i},each:function(e,t){return X.each(this,e,t)},ready:function(e){return X.ready.promise().done(e),this},eq:function(e){return e=+e,-1===e?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(Y.apply(this,arguments),"slice",Y.call(arguments).join(","))},map:function(e){return this.pushStack(X.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:V,sort:[].sort,splice:[].splice},X.fn.init.prototype=X.fn,X.extend=X.fn.extend=function(){var e,n,i,o,s,r,a=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},l=2),"object"==typeof a||X.isFunction(a)||(a={}),c===l&&(a=this,--l);c>l;l++)if(null!=(e=arguments[l]))for(n in e)i=a[n],o=e[n],a!==o&&(u&&o&&(X.isPlainObject(o)||(s=X.isArray(o)))?(s?(s=!1,r=i&&X.isArray(i)?i:[]):r=i&&X.isPlainObject(i)?i:{},a[n]=X.extend(u,r,o)):o!==t&&(a[n]=o));return a},X.extend({noConflict:function(t){return e.$===X&&(e.$=q),t&&e.jQuery===X&&(e.jQuery=W),X},isReady:!1,readyWait:1,holdReady:function(e){e?X.readyWait++:X.ready(!0)},ready:function(e){if(e===!0?!--X.readyWait:!X.isReady){if(!U.body)return setTimeout(X.ready,1);X.isReady=!0,e!==!0&&--X.readyWait>0||(j.resolveWith(U,[X]),X.fn.trigger&&X(U).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===X.type(e)},isArray:Array.isArray||function(e){return"array"===X.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":ht[Q.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==X.type(e)||e.nodeType||X.isWindow(e))return!1;try{if(e.constructor&&!G.call(e,"constructor")&&!G.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in e);return i===t||G.call(e,i)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){var i;return e&&"string"==typeof e?("boolean"==typeof t&&(n=t,t=0),t=t||U,(i=ot.exec(e))?[t.createElement(i[1])]:(i=X.buildFragment([e],t,n?null:[]),X.merge([],(i.cacheable?X.clone(i.fragment):i.fragment).childNodes))):null},parseJSON:function(n){return n&&"string"==typeof n?(n=X.trim(n),e.JSON&&e.JSON.parse?e.JSON.parse(n):st.test(n.replace(at,"@").replace(lt,"]").replace(rt,""))?Function("return "+n)():(X.error("Invalid JSON: "+n),t)):null},parseXML:function(n){var i,o;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(o=new DOMParser,i=o.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(s){i=t}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||X.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&et.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ct,"ms-").replace(ut,dt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,i){var o,s=0,r=e.length,a=r===t||X.isFunction(e);if(i)if(a){for(o in e)if(n.apply(e[o],i)===!1)break}else for(;r>s&&n.apply(e[s++],i)!==!1;);else if(a){for(o in e)if(n.call(e[o],o,e[o])===!1)break}else for(;r>s&&n.call(e[s],s,e[s++])!==!1;);return e},trim:K&&!K.call("ï»¿Â ")?function(e){return null==e?"":K.call(e)}:function(e){return null==e?"":(e+"").replace(nt,"")},makeArray:function(e,t){var n,i=t||[];return null!=e&&(n=X.type(e),null==e.length||"string"===n||"function"===n||"regexp"===n||X.isWindow(e)?V.call(i,e):X.merge(i,e)),i},inArray:function(e,t,n){var i;if(t){if(J)return J.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var i=n.length,o=e.length,s=0;if("number"==typeof i)for(;i>s;s++)e[o++]=n[s];else for(;n[s]!==t;)e[o++]=n[s++];return e.length=o,e},grep:function(e,t,n){var i,o=[],s=0,r=e.length;for(n=!!n;r>s;s++)i=!!t(e[s],s),n!==i&&o.push(e[s]);return o},map:function(e,n,i){var o,s,r=[],a=0,l=e.length,c=e instanceof X||l!==t&&"number"==typeof l&&(l>0&&e[0]&&e[l-1]||0===l||X.isArray(e));if(c)for(;l>a;a++)o=n(e[a],a,i),null!=o&&(r[r.length]=o);else for(s in e)o=n(e[s],s,i),null!=o&&(r[r.length]=o);return r.concat.apply([],r)},guid:1,proxy:function(e,n){var i,o,s;return"string"==typeof n&&(i=e[n],n=e,e=i),X.isFunction(e)?(o=Y.call(arguments,2),s=function(){return e.apply(n,o.concat(Y.call(arguments)))},s.guid=e.guid=e.guid||X.guid++,s):t},access:function(e,n,i,o,s,r,a){var l,c=null==i,u=0,d=e.length;if(i&&"object"==typeof i){for(u in i)X.access(e,n,u,i[u],1,r,o);s=1}else if(o!==t){if(l=a===t&&X.isFunction(o),c&&(l?(l=n,n=function(e,t,n){return l.call(X(e),n)}):(n.call(e,o),n=null)),n)for(;d>u;u++)n(e[u],i,l?o.call(e[u],u,n(e[u],i)):o,a);s=1}return s?e:c?n.call(e):d?n(e[0],i):r},now:function(){return(new Date).getTime()}}),X.ready.promise=function(t){if(!j)if(j=X.Deferred(),"complete"===U.readyState)setTimeout(X.ready,1);else if(U.addEventListener)U.addEventListener("DOMContentLoaded",pt,!1),e.addEventListener("load",X.ready,!1);else{U.attachEvent("onreadystatechange",pt),e.attachEvent("onload",X.ready);var n=!1;try{n=null==e.frameElement&&U.documentElement}catch(i){}n&&n.doScroll&&function o(){if(!X.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}X.ready()}}()}return j.promise(t)},X.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){ht["[object "+t+"]"]=t.toLowerCase()}),H=X(U);var ft={};X.Callbacks=function(e){e="string"==typeof e?ft[e]||n(e):X.extend({},e);var i,o,s,r,a,l,c=[],u=!e.once&&[],d=function(t){for(i=e.memory&&t,o=!0,l=r||0,r=0,a=c.length,s=!0;c&&a>l;l++)if(c[l].apply(t[0],t[1])===!1&&e.stopOnFalse){i=!1;break}s=!1,c&&(u?u.length&&d(u.shift()):i?c=[]:p.disable())},p={add:function(){if(c){var t=c.length;(function n(t){X.each(t,function(t,i){var o=X.type(i);"function"!==o||e.unique&&p.has(i)?i&&i.length&&"string"!==o&&n(i):c.push(i)})})(arguments),s?a=c.length:i&&(r=t,d(i))}return this},remove:function(){return c&&X.each(arguments,function(e,t){for(var n;(n=X.inArray(t,c,n))>-1;)c.splice(n,1),s&&(a>=n&&a--,l>=n&&l--)}),this},has:function(e){return X.inArray(e,c)>-1},empty:function(){return c=[],this},disable:function(){return c=u=i=t,this},disabled:function(){return!c},lock:function(){return u=t,i||p.disable(),this},locked:function(){return!u},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!c||o&&!u||(s?u.push(t):d(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!o}};return p},X.extend({Deferred:function(e){var t=[["resolve","done",X.Callbacks("once memory"),"resolved"],["reject","fail",X.Callbacks("once memory"),"rejected"],["notify","progress",X.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return X.Deferred(function(n){X.each(t,function(t,i){var s=i[0],r=e[t];o[i[1]](X.isFunction(r)?function(){var e=r.apply(this,arguments);e&&X.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===o?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return null!=e?X.extend(e,i):i}},o={};return i.pipe=i.then,X.each(t,function(e,s){var r=s[2],a=s[3];i[s[1]]=r.add,a&&r.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),o[s[0]]=r.fire,o[s[0]+"With"]=r.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,i,o=0,s=Y.call(arguments),r=s.length,a=1!==r||e&&X.isFunction(e.promise)?r:0,l=1===a?e:X.Deferred(),c=function(e,n,i){return function(o){n[e]=this,i[e]=arguments.length>1?Y.call(arguments):o,i===t?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(r>1)for(t=Array(r),n=Array(r),i=Array(r);r>o;o++)s[o]&&X.isFunction(s[o].promise)?s[o].promise().done(c(o,i,s)).fail(l.reject).progress(c(o,n,t)):--a;return a||l.resolveWith(i,s),l.promise()}}),X.support=function(){var n,i,o,s,r,a,l,c,u,d,p,h=U.createElement("div");if(h.setAttribute("className","t"),h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=h.getElementsByTagName("*"),o=h.getElementsByTagName("a")[0],o.style.cssText="top:1px;float:left;opacity:.5",!i||!i.length)return{};s=U.createElement("select"),r=s.appendChild(U.createElement("option")),a=h.getElementsByTagName("input")[0],n={leadingWhitespace:3===h.firstChild.nodeType,tbody:!h.getElementsByTagName("tbody").length,htmlSerialize:!!h.getElementsByTagName("link").length,style:/top/.test(o.getAttribute("style")),hrefNormalized:"/a"===o.getAttribute("href"),opacity:/^0.5/.test(o.style.opacity),cssFloat:!!o.style.cssFloat,checkOn:"on"===a.value,optSelected:r.selected,getSetAttribute:"t"!==h.className,enctype:!!U.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==U.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===U.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,n.noCloneChecked=a.cloneNode(!0).checked,s.disabled=!0,n.optDisabled=!r.disabled;try{delete h.test}catch(f){n.deleteExpando=!1}if(!h.addEventListener&&h.attachEvent&&h.fireEvent&&(h.attachEvent("onclick",p=function(){n.noCloneEvent=!1}),h.cloneNode(!0).fireEvent("onclick"),h.detachEvent("onclick",p)),a=U.createElement("input"),a.value="t",a.setAttribute("type","radio"),n.radioValue="t"===a.value,a.setAttribute("checked","checked"),a.setAttribute("name","t"),h.appendChild(a),l=U.createDocumentFragment(),l.appendChild(h.lastChild),n.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,n.appendChecked=a.checked,l.removeChild(a),l.appendChild(h),h.attachEvent)for(u in{submit:!0,change:!0,focusin:!0})c="on"+u,d=c in h,d||(h.setAttribute(c,"return;"),d="function"==typeof h[c]),n[u+"Bubbles"]=d;return X(function(){var i,o,s,r,a="padding:0;margin:0;border:0;display:block;overflow:hidden;",l=U.getElementsByTagName("body")[0];l&&(i=U.createElement("div"),i.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",l.insertBefore(i,l.firstChild),o=U.createElement("div"),i.appendChild(o),o.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=o.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",d=0===s[0].offsetHeight,s[0].style.display="",s[1].style.display="none",n.reliableHiddenOffsets=d&&0===s[0].offsetHeight,o.innerHTML="",o.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",n.boxSizing=4===o.offsetWidth,n.doesNotIncludeMarginInBodyOffset=1!==l.offsetTop,e.getComputedStyle&&(n.pixelPosition="1%"!==(e.getComputedStyle(o,null)||{}).top,n.boxSizingReliable="4px"===(e.getComputedStyle(o,null)||{width:"4px"}).width,r=U.createElement("div"),r.style.cssText=o.style.cssText=a,r.style.marginRight=r.style.width="0",o.style.width="1px",o.appendChild(r),n.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),o.style.zoom!==t&&(o.innerHTML="",o.style.cssText=a+"width:1px;padding:1px;display:inline;zoom:1",n.inlineBlockNeedsLayout=3===o.offsetWidth,o.style.display="block",o.style.overflow="visible",o.innerHTML="<div></div>",o.firstChild.style.width="5px",n.shrinkWrapBlocks=3!==o.offsetWidth,i.style.zoom=1),l.removeChild(i),i=o=s=r=null)}),l.removeChild(h),i=o=s=r=a=l=h=null,n}();var mt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,gt=/([A-Z])/g;X.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(X.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?X.cache[e[X.expando]]:e[X.expando],!!e&&!o(e)},data:function(e,n,i,o){if(X.acceptData(e)){var s,r,a=X.expando,l="string"==typeof n,c=e.nodeType,u=c?X.cache:e,d=c?e[a]:e[a]&&a;if(d&&u[d]&&(o||u[d].data)||!l||i!==t)return d||(c?e[a]=d=X.deletedIds.pop()||X.guid++:d=a),u[d]||(u[d]={},c||(u[d].toJSON=X.noop)),("object"==typeof n||"function"==typeof n)&&(o?u[d]=X.extend(u[d],n):u[d].data=X.extend(u[d].data,n)),s=u[d],o||(s.data||(s.data={}),s=s.data),i!==t&&(s[X.camelCase(n)]=i),l?(r=s[n],null==r&&(r=s[X.camelCase(n)])):r=s,r}},removeData:function(e,t,n){if(X.acceptData(e)){var i,s,r,a=e.nodeType,l=a?X.cache:e,c=a?e[X.expando]:X.expando;if(l[c]){if(t&&(i=n?l[c]:l[c].data)){X.isArray(t)||(t in i?t=[t]:(t=X.camelCase(t),t=t in i?[t]:t.split(" ")));for(s=0,r=t.length;r>s;s++)delete i[t[s]];if(!(n?o:X.isEmptyObject)(i))return}(n||(delete l[c].data,o(l[c])))&&(a?X.cleanData([e],!0):X.support.deleteExpando||l!=l.window?delete l[c]:l[c]=null)}}},_data:function(e,t,n){return X.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&X.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),X.fn.extend({data:function(e,n){var o,s,r,a,l,c=this[0],u=0,d=null;if(e===t){if(this.length&&(d=X.data(c),1===c.nodeType&&!X._data(c,"parsedAttrs"))){for(r=c.attributes,l=r.length;l>u;u++)a=r[u].name,a.indexOf("data-")||(a=X.camelCase(a.substring(5)),i(c,a,d[a]));X._data(c,"parsedAttrs",!0)}return d}return"object"==typeof e?this.each(function(){X.data(this,e)}):(o=e.split(".",2),o[1]=o[1]?"."+o[1]:"",s=o[1]+"!",X.access(this,function(n){return n===t?(d=this.triggerHandler("getData"+s,[o[0]]),d===t&&c&&(d=X.data(c,e),d=i(c,e,d)),d===t&&o[1]?this.data(o[0]):d):(o[1]=n,this.each(function(){var t=X(this);t.triggerHandler("setData"+s,o),X.data(this,e,n),t.triggerHandler("changeData"+s,o)}),t)},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){X.removeData(this,e)})}}),X.extend({queue:function(e,n,i){var o;return e?(n=(n||"fx")+"queue",o=X._data(e,n),i&&(!o||X.isArray(i)?o=X._data(e,n,X.makeArray(i)):o.push(i)),o||[]):t},dequeue:function(e,t){t=t||"fx";var n=X.queue(e,t),i=n.length,o=n.shift(),s=X._queueHooks(e,t),r=function(){X.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete s.stop,o.call(e,r,s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return X._data(e,n)||X._data(e,n,{empty:X.Callbacks("once memory").add(function(){X.removeData(e,t+"queue",!0),X.removeData(e,n,!0)})})}}),X.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),i>arguments.length?X.queue(this[0],e):n===t?this:this.each(function(){var t=X.queue(this,e,n);X._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&X.dequeue(this,e)})},dequeue:function(e){return this.each(function(){X.dequeue(this,e)})},delay:function(e,t){return e=X.fx?X.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var i,o=1,s=X.Deferred(),r=this,a=this.length,l=function(){--o||s.resolveWith(r,[r])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";a--;)i=X._data(r[a],e+"queueHooks"),i&&i.empty&&(o++,i.empty.add(l));return l(),s.promise(n)}});var vt,bt,_t,yt=/[\t\r\n]/g,wt=/\r/g,xt=/^(?:button|input)$/i,Ct=/^(?:button|input|object|select|textarea)$/i,kt=/^a(?:rea|)$/i,Tt=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Mt=X.support.getSetAttribute;X.fn.extend({attr:function(e,t){return X.access(this,X.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){X.removeAttr(this,e)})},prop:function(e,t){return X.access(this,X.prop,e,t,arguments.length>1)},removeProp:function(e){return e=X.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,i,o,s,r,a;if(X.isFunction(e))return this.each(function(t){X(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(tt),n=0,i=this.length;i>n;n++)if(o=this[n],1===o.nodeType)if(o.className||1!==t.length){for(s=" "+o.className+" ",r=0,a=t.length;a>r;r++)0>s.indexOf(" "+t[r]+" ")&&(s+=t[r]+" ");o.className=X.trim(s)}else o.className=e;return this},removeClass:function(e){var n,i,o,s,r,a,l;if(X.isFunction(e))return this.each(function(t){X(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(n=(e||"").split(tt),a=0,l=this.length;l>a;a++)if(o=this[a],1===o.nodeType&&o.className){for(i=(" "+o.className+" ").replace(yt," "),s=0,r=n.length;r>s;s++)for(;i.indexOf(" "+n[s]+" ")>=0;)i=i.replace(" "+n[s]+" "," ");o.className=e?X.trim(i):""}return this},toggleClass:function(e,t){var n=typeof e,i="boolean"==typeof t;return X.isFunction(e)?this.each(function(n){X(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var o,s=0,r=X(this),a=t,l=e.split(tt);o=l[s++];)a=i?a:!r.hasClass(o),r[a?"addClass":"removeClass"](o);else("undefined"===n||"boolean"===n)&&(this.className&&X._data(this,"__className__",this.className),this.className=this.className||e===!1?"":X._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(yt," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,i,o,s=this[0];{if(arguments.length)return o=X.isFunction(e),this.each(function(i){var s,r=X(this);1===this.nodeType&&(s=o?e.call(this,i,r.val()):e,null==s?s="":"number"==typeof s?s+="":X.isArray(s)&&(s=X.map(s,function(e){return null==e?"":e+""})),n=X.valHooks[this.type]||X.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,s,"value")!==t||(this.value=s))});if(s)return n=X.valHooks[s.type]||X.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(s,"value"))!==t?i:(i=s.value,"string"==typeof i?i.replace(wt,""):null==i?"":i)}}}),X.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,i,o,s=e.selectedIndex,r=[],a=e.options,l="select-one"===e.type;if(0>s)return null;for(n=l?s:0,i=l?s+1:a.length;i>n;n++)if(o=a[n],!(!o.selected||(X.support.optDisabled?o.disabled:null!==o.getAttribute("disabled"))||o.parentNode.disabled&&X.nodeName(o.parentNode,"optgroup"))){if(t=X(o).val(),l)return t;r.push(t)}return l&&!r.length&&a.length?X(a[s]).val():r},set:function(e,t){var n=X.makeArray(t);return X(e).find("option").each(function(){this.selected=X.inArray(X(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,i,o){var s,r,a,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return o&&X.isFunction(X.fn[n])?X(e)[n](i):e.getAttribute===t?X.prop(e,n,i):(a=1!==l||!X.isXMLDoc(e),a&&(n=n.toLowerCase(),r=X.attrHooks[n]||(Tt.test(n)?bt:vt)),i!==t?null===i?(X.removeAttr(e,n),t):r&&"set"in r&&a&&(s=r.set(e,i,n))!==t?s:(e.setAttribute(n,i+""),i):r&&"get"in r&&a&&null!==(s=r.get(e,n))?s:(s=e.getAttribute(n),null===s?t:s))},removeAttr:function(e,t){var n,i,o,s,r=0;if(t&&1===e.nodeType)for(i=t.split(tt);i.length>r;r++)o=i[r],o&&(n=X.propFix[o]||o,s=Tt.test(o),s||X.attr(e,o,""),e.removeAttribute(Mt?o:n),s&&n in e&&(e[n]=!1))},attrHooks:{type:{set:function(e,t){if(xt.test(e.nodeName)&&e.parentNode)X.error("type property can't be changed");else if(!X.support.radioValue&&"radio"===t&&X.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return vt&&X.nodeName(e,"button")?vt.get(e,t):t in e?e.value:null},set:function(e,n,i){return vt&&X.nodeName(e,"button")?vt.set(e,n,i):(e.value=n,t)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,i){var o,s,r,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return r=1!==a||!X.isXMLDoc(e),r&&(n=X.propFix[n]||n,s=X.propHooks[n]),i!==t?s&&"set"in s&&(o=s.set(e,i,n))!==t?o:e[n]=i:s&&"get"in s&&null!==(o=s.get(e,n))?o:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):Ct.test(e.nodeName)||kt.test(e.nodeName)&&e.href?0:t}}}}),bt={get:function(e,n){var i,o=X.prop(e,n);return o===!0||"boolean"!=typeof o&&(i=e.getAttributeNode(n))&&i.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var i;return t===!1?X.removeAttr(e,n):(i=X.propFix[n]||n,i in e&&(e[i]=!0),e.setAttribute(n,n.toLowerCase())),n}},Mt||(_t={name:!0,id:!0,coords:!0},vt=X.valHooks.button={get:function(e,n){var i;return i=e.getAttributeNode(n),i&&(_t[n]?""!==i.value:i.specified)?i.value:t},set:function(e,t,n){var i=e.getAttributeNode(n);return i||(i=U.createAttribute(n),e.setAttributeNode(i)),i.value=t+""}},X.each(["width","height"],function(e,n){X.attrHooks[n]=X.extend(X.attrHooks[n],{set:function(e,i){return""===i?(e.setAttribute(n,"auto"),i):t}})}),X.attrHooks.contenteditable={get:vt.get,set:function(e,t,n){""===t&&(t="false"),vt.set(e,t,n)}}),X.support.hrefNormalized||X.each(["href","src","width","height"],function(e,n){X.attrHooks[n]=X.extend(X.attrHooks[n],{get:function(e){var i=e.getAttribute(n,2);return null===i?t:i}})}),X.support.style||(X.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),X.support.optSelected||(X.propHooks.selected=X.extend(X.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),X.support.enctype||(X.propFix.enctype="encoding"),X.support.checkOn||X.each(["radio","checkbox"],function(){X.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),X.each(["radio","checkbox"],function(){X.valHooks[this]=X.extend(X.valHooks[this],{set:function(e,n){return X.isArray(n)?e.checked=X.inArray(X(e).val(),n)>=0:t}})});var St=/^(?:textarea|input|select)$/i,It=/^([^\.]*|)(?:\.(.+)|)$/,Dt=/(?:^|\s)hover(\.\S+|)\b/,At=/^key/,Et=/^(?:mouse|contextmenu)|click/,Pt=/^(?:focusinfocus|focusoutblur)$/,$t=function(e){return X.event.special.hover?e:e.replace(Dt,"mouseenter$1 mouseleave$1")};X.event={add:function(e,n,i,o,s){var r,a,l,c,u,d,p,h,f,m,g;if(3!==e.nodeType&&8!==e.nodeType&&n&&i&&(r=X._data(e))){for(i.handler&&(f=i,i=f.handler,s=f.selector),i.guid||(i.guid=X.guid++),l=r.events,l||(r.events=l={}),a=r.handle,a||(r.handle=a=function(e){return X===t||e&&X.event.triggered===e.type?t:X.event.dispatch.apply(a.elem,arguments)
},a.elem=e),n=X.trim($t(n)).split(" "),c=0;n.length>c;c++)u=It.exec(n[c])||[],d=u[1],p=(u[2]||"").split(".").sort(),g=X.event.special[d]||{},d=(s?g.delegateType:g.bindType)||d,g=X.event.special[d]||{},h=X.extend({type:d,origType:u[1],data:o,handler:i,guid:i.guid,selector:s,needsContext:s&&X.expr.match.needsContext.test(s),namespace:p.join(".")},f),m=l[d],m||(m=l[d]=[],m.delegateCount=0,g.setup&&g.setup.call(e,o,p,a)!==!1||(e.addEventListener?e.addEventListener(d,a,!1):e.attachEvent&&e.attachEvent("on"+d,a))),g.add&&(g.add.call(e,h),h.handler.guid||(h.handler.guid=i.guid)),s?m.splice(m.delegateCount++,0,h):m.push(h),X.event.global[d]=!0;e=null}},global:{},remove:function(e,t,n,i,o){var s,r,a,l,c,u,d,p,h,f,m,g=X.hasData(e)&&X._data(e);if(g&&(p=g.events)){for(t=X.trim($t(t||"")).split(" "),s=0;t.length>s;s++)if(r=It.exec(t[s])||[],a=l=r[1],c=r[2],a){for(h=X.event.special[a]||{},a=(i?h.delegateType:h.bindType)||a,f=p[a]||[],u=f.length,c=c?RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d=0;f.length>d;d++)m=f[d],!o&&l!==m.origType||n&&n.guid!==m.guid||c&&!c.test(m.namespace)||i&&i!==m.selector&&("**"!==i||!m.selector)||(f.splice(d--,1),m.selector&&f.delegateCount--,h.remove&&h.remove.call(e,m));0===f.length&&u!==f.length&&(h.teardown&&h.teardown.call(e,c,g.handle)!==!1||X.removeEvent(e,a,g.handle),delete p[a])}else for(a in p)X.event.remove(e,a+t[s],n,i,!0);X.isEmptyObject(p)&&(delete g.handle,X.removeData(e,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,i,o,s){if(!o||3!==o.nodeType&&8!==o.nodeType){var r,a,l,c,u,d,p,h,f,m,g=n.type||n,v=[];if(!Pt.test(g+X.event.triggered)&&(g.indexOf("!")>=0&&(g=g.slice(0,-1),a=!0),g.indexOf(".")>=0&&(v=g.split("."),g=v.shift(),v.sort()),o&&!X.event.customEvent[g]||X.event.global[g]))if(n="object"==typeof n?n[X.expando]?n:new X.Event(g,n):new X.Event(g),n.type=g,n.isTrigger=!0,n.exclusive=a,n.namespace=v.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d=0>g.indexOf(":")?"on"+g:"",o){if(n.result=t,n.target||(n.target=o),i=null!=i?X.makeArray(i):[],i.unshift(n),p=X.event.special[g]||{},!p.trigger||p.trigger.apply(o,i)!==!1){if(f=[[o,p.bindType||g]],!s&&!p.noBubble&&!X.isWindow(o)){for(m=p.delegateType||g,c=Pt.test(m+g)?o:o.parentNode,u=o;c;c=c.parentNode)f.push([c,m]),u=c;u===(o.ownerDocument||U)&&f.push([u.defaultView||u.parentWindow||e,m])}for(l=0;f.length>l&&!n.isPropagationStopped();l++)c=f[l][0],n.type=f[l][1],h=(X._data(c,"events")||{})[n.type]&&X._data(c,"handle"),h&&h.apply(c,i),h=d&&c[d],h&&X.acceptData(c)&&h.apply&&h.apply(c,i)===!1&&n.preventDefault();return n.type=g,s||n.isDefaultPrevented()||p._default&&p._default.apply(o.ownerDocument,i)!==!1||"click"===g&&X.nodeName(o,"a")||!X.acceptData(o)||d&&o[g]&&("focus"!==g&&"blur"!==g||0!==n.target.offsetWidth)&&!X.isWindow(o)&&(u=o[d],u&&(o[d]=null),X.event.triggered=g,o[g](),X.event.triggered=t,u&&(o[d]=u)),n.result}}else{r=X.cache;for(l in r)r[l].events&&r[l].events[g]&&X.event.trigger(n,i,r[l].handle.elem,!0)}}},dispatch:function(n){n=X.event.fix(n||e.event);var i,o,s,r,a,l,c,u,d,p=(X._data(this,"events")||{})[n.type]||[],h=p.delegateCount,f=Y.call(arguments),m=!n.exclusive&&!n.namespace,g=X.event.special[n.type]||{},v=[];if(f[0]=n,n.delegateTarget=this,!g.preDispatch||g.preDispatch.call(this,n)!==!1){if(h&&(!n.button||"click"!==n.type))for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||"click"!==n.type){for(a={},c=[],i=0;h>i;i++)u=p[i],d=u.selector,a[d]===t&&(a[d]=u.needsContext?X(d,this).index(s)>=0:X.find(d,this,null,[s]).length),a[d]&&c.push(u);c.length&&v.push({elem:s,matches:c})}for(p.length>h&&v.push({elem:this,matches:p.slice(h)}),i=0;v.length>i&&!n.isPropagationStopped();i++)for(l=v[i],n.currentTarget=l.elem,o=0;l.matches.length>o&&!n.isImmediatePropagationStopped();o++)u=l.matches[o],(m||!n.namespace&&!u.namespace||n.namespace_re&&n.namespace_re.test(u.namespace))&&(n.data=u.data,n.handleObj=u,r=((X.event.special[u.origType]||{}).handle||u.handler).apply(l.elem,f),r!==t&&(n.result=r,r===!1&&(n.preventDefault(),n.stopPropagation())));return g.postDispatch&&g.postDispatch.call(this,n),n.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,o,s,r=n.button,a=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||U,o=i.documentElement,s=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||s&&s.scrollLeft||0)-(o&&o.clientLeft||s&&s.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||s&&s.scrollTop||0)-(o&&o.clientTop||s&&s.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),e.which||r===t||(e.which=1&r?1:2&r?3:4&r?2:0),e}},fix:function(e){if(e[X.expando])return e;var t,n,i=e,o=X.event.fixHooks[e.type]||{},s=o.props?this.props.concat(o.props):this.props;for(e=X.Event(i),t=s.length;t;)n=s[--t],e[n]=i[n];return e.target||(e.target=i.srcElement||U),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,i):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){X.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,i){var o=X.extend(new X.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?X.event.trigger(o,null,t):X.event.dispatch.call(t,o),o.isDefaultPrevented()&&n.preventDefault()}},X.event.handle=X.event.dispatch,X.removeEvent=U.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,n,i){var o="on"+n;e.detachEvent&&(e[o]===t&&(e[o]=null),e.detachEvent(o,i))},X.Event=function(e,n){return this instanceof X.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?r:s):this.type=e,n&&X.extend(this,n),this.timeStamp=e&&e.timeStamp||X.now(),this[X.expando]=!0,t):new X.Event(e,n)},X.Event.prototype={preventDefault:function(){this.isDefaultPrevented=r;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=r;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r,this.stopPropagation()},isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s},X.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){X.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,s=e.handleObj;return s.selector,(!o||o!==i&&!X.contains(i,o))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),X.support.submitBubbles||(X.event.special.submit={setup:function(){return X.nodeName(this,"form")?!1:(X.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,i=X.nodeName(n,"input")||X.nodeName(n,"button")?n.form:t;i&&!X._data(i,"_submit_attached")&&(X.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),X._data(i,"_submit_attached",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&X.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return X.nodeName(this,"form")?!1:(X.event.remove(this,"._submit"),t)}}),X.support.changeBubbles||(X.event.special.change={setup:function(){return St.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(X.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),X.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),X.event.simulate("change",this,e,!0)})),!1):(X.event.add(this,"beforeactivate._change",function(e){var t=e.target;St.test(t.nodeName)&&!X._data(t,"_change_attached")&&(X.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||X.event.simulate("change",this.parentNode,e,!0)}),X._data(t,"_change_attached",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return X.event.remove(this,"._change"),!St.test(this.nodeName)}}),X.support.focusinBubbles||X.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){X.event.simulate(t,e.target,X.event.fix(e),!0)};X.event.special[t]={setup:function(){0===n++&&U.addEventListener(e,i,!0)},teardown:function(){0===--n&&U.removeEventListener(e,i,!0)}}}),X.fn.extend({on:function(e,n,i,o,r){var a,l;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=t);for(l in e)this.on(l,n,i,e[l],r);return this}if(null==i&&null==o?(o=n,i=n=t):null==o&&("string"==typeof n?(o=i,i=t):(o=i,i=n,n=t)),o===!1)o=s;else if(!o)return this;return 1===r&&(a=o,o=function(e){return X().off(e),a.apply(this,arguments)},o.guid=a.guid||(a.guid=X.guid++)),this.each(function(){X.event.add(this,e,o,i,n)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,n,i){var o,r;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,X(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof e){for(r in e)this.off(r,n,e[r]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=s),this.each(function(){X.event.remove(this,e,i,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return X(this.context).on(e,this.selector,t,n),this},die:function(e,t){return X(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){X.event.trigger(e,t,this)})},triggerHandler:function(e,n){return this[0]?X.event.trigger(e,n,this[0],!0):t},toggle:function(e){var t=arguments,n=e.guid||X.guid++,i=0,o=function(n){var o=(X._data(this,"lastToggle"+e.guid)||0)%i;return X._data(this,"lastToggle"+e.guid,o+1),n.preventDefault(),t[o].apply(this,arguments)||!1};for(o.guid=n;t.length>i;)t[i++].guid=n;return this.click(o)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),X.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){X.fn[t]=function(e,n){return null==n&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},At.test(t)&&(X.event.fixHooks[t]=X.event.keyHooks),Et.test(t)&&(X.event.fixHooks[t]=X.event.mouseHooks)}),function(e,t){function n(e,t,n,i){n=n||[],t=t||E;var o,s,r,a,l=t.nodeType;if(!e||"string"!=typeof e)return n;if(1!==l&&9!==l)return[];if(r=w(t),!r&&!i&&(o=nt.exec(e)))if(a=o[1]){if(9===l){if(s=t.getElementById(a),!s||!s.parentNode)return n;if(s.id===a)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(a))&&x(t,s)&&s.id===a)return n.push(s),n}else{if(o[2])return O.apply(n,B.call(t.getElementsByTagName(e),0)),n;if((a=o[3])&&pt&&t.getElementsByClassName)return O.apply(n,B.call(t.getElementsByClassName(a),0)),n}return m(e.replace(K,"$1"),t,n,i,r)}function i(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function o(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function s(e){return H(function(t){return t=+t,H(function(n,i){for(var o,s=e([],n.length,t),r=s.length;r--;)n[o=s[r]]&&(n[o]=!(i[o]=n[o]))})})}function r(e,t,n){if(e===t)return n;for(var i=e.nextSibling;i;){if(i===t)return-1;i=i.nextSibling}return 1}function a(e,t){var i,o,s,r,a,l,c,u=F[D][e];if(u)return t?0:u.slice(0);for(a=e,l=[],c=_.preFilter;a;){(!i||(o=Z.exec(a)))&&(o&&(a=a.slice(o[0].length)),l.push(s=[])),i=!1,(o=et.exec(a))&&(s.push(i=new A(o.shift())),a=a.slice(i.length),i.type=o[0].replace(K," "));for(r in _.filter)!(o=at[r].exec(a))||c[r]&&!(o=c[r](o,E,!0))||(s.push(i=new A(o.shift())),a=a.slice(i.length),i.type=r,i.matches=o);if(!i)break}return t?a.length:a?n.error(e):F(e,l).slice(0)}function l(e,t,n){var i=t.dir,o=n&&"parentNode"===t.dir,s=L++;return t.first?function(t,n,s){for(;t=t[i];)if(o||1===t.nodeType)return e(t,n,s)}:function(t,n,r){if(r){for(;t=t[i];)if((o||1===t.nodeType)&&e(t,n,r))return t}else for(var a,l=$+" "+s+" ",c=l+v;t=t[i];)if(o||1===t.nodeType){if((a=t[D])===c)return t.sizset;if("string"==typeof a&&0===a.indexOf(l)){if(t.sizset)return t}else{if(t[D]=c,e(t,n,r))return t.sizset=!0,t;t.sizset=!1}}}}function c(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function u(e,t,n,i,o){for(var s,r=[],a=0,l=e.length,c=null!=t;l>a;a++)(s=e[a])&&(!n||n(s,i,o))&&(r.push(s),c&&t.push(a));return r}function d(e,t,n,i,o,s){return i&&!i[D]&&(i=d(i)),o&&!o[D]&&(o=d(o,s)),H(function(s,r,a,l){if(!s||!o){var c,d,p,h=[],m=[],g=r.length,v=s||f(t||"*",a.nodeType?[a]:a,[],s),b=!e||!s&&t?v:u(v,h,e,a,l),_=n?o||(s?e:g||i)?[]:r:b;if(n&&n(b,_,a,l),i)for(p=u(_,m),i(p,[],a,l),c=p.length;c--;)(d=p[c])&&(_[m[c]]=!(b[m[c]]=d));if(s)for(c=e&&_.length;c--;)(d=_[c])&&(s[h[c]]=!(r[h[c]]=d));else _=u(_===r?_.splice(g,_.length):_),o?o(null,r,_,l):O.apply(r,_)}})}function p(e){for(var t,n,i,o=e.length,s=_.relative[e[0].type],r=s||_.relative[" "],a=s?1:0,u=l(function(e){return e===t},r,!0),h=l(function(e){return R.call(t,e)>-1},r,!0),f=[function(e,n,i){return!s&&(i||n!==M)||((t=n).nodeType?u(e,n,i):h(e,n,i))}];o>a;a++)if(n=_.relative[e[a].type])f=[l(c(f),n)];else{if(n=_.filter[e[a].type].apply(null,e[a].matches),n[D]){for(i=++a;o>i&&!_.relative[e[i].type];i++);return d(a>1&&c(f),a>1&&e.slice(0,a-1).join("").replace(K,"$1"),n,i>a&&p(e.slice(a,i)),o>i&&p(e=e.slice(i)),o>i&&e.join(""))}f.push(n)}return c(f)}function h(e,t){var i=t.length>0,o=e.length>0,s=function(r,a,l,c,d){var p,h,f,m=[],g=0,b="0",y=r&&[],w=null!=d,x=M,C=r||o&&_.find.TAG("*",d&&a.parentNode||a),k=$+=null==x?1:Math.E;for(w&&(M=a!==E&&a,v=s.el);null!=(p=C[b]);b++){if(o&&p){for(h=0;f=e[h];h++)if(f(p,a,l)){c.push(p);break}w&&($=k,v=++s.el)}i&&((p=!f&&p)&&g--,r&&y.push(p))}if(g+=b,i&&b!==g){for(h=0;f=t[h];h++)f(y,m,a,l);if(r){if(g>0)for(;b--;)y[b]||m[b]||(m[b]=N.call(c));m=u(m)}O.apply(c,m),w&&!r&&m.length>0&&g+t.length>1&&n.uniqueSort(c)}return w&&($=k,M=x),y};return s.el=0,i?H(s):s}function f(e,t,i,o){for(var s=0,r=t.length;r>s;s++)n(e,t[s],i,o);return i}function m(e,t,n,i,o){var s,r,l,c,u,d=a(e);if(d.length,!i&&1===d.length){if(r=d[0]=d[0].slice(0),r.length>2&&"ID"===(l=r[0]).type&&9===t.nodeType&&!o&&_.relative[r[1].type]){if(t=_.find.ID(l.matches[0].replace(rt,""),t,o)[0],!t)return n;e=e.slice(r.shift().length)}for(s=at.POS.test(e)?-1:r.length-1;s>=0&&(l=r[s],!_.relative[c=l.type]);s--)if((u=_.find[c])&&(i=u(l.matches[0].replace(rt,""),it.test(r[0].type)&&t.parentNode||t,o))){if(r.splice(s,1),e=i.length&&r.join(""),!e)return O.apply(n,B.call(i,0)),n;break}}return C(e,d)(i,t,o,n,it.test(e)),n}function g(){}var v,b,_,y,w,x,C,k,T,M,S=!0,I="undefined",D=("sizcache"+Math.random()).replace(".",""),A=String,E=e.document,P=E.documentElement,$=0,L=0,N=[].pop,O=[].push,B=[].slice,R=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},H=function(e,t){return e[D]=null==t||t,e},j=function(){var e={},t=[];return H(function(n,i){return t.push(n)>_.cacheLength&&delete e[t.shift()],e[n]=i},e)},U=j(),F=j(),z=j(),W="[\\x20\\t\\r\\n\\f]",q="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",V=q.replace("w","w#"),Y="([*^$|!~]?=)",J="\\["+W+"*("+q+")"+W+"*(?:"+Y+W+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+V+")|)|)"+W+"*\\]",Q=":("+q+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+J+")|[^:]|\\\\.)*|.*))\\)|)",G=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+W+"*((?:-\\d)?\\d*)"+W+"*\\)|)(?=[^-]|$)",K=RegExp("^"+W+"+|((?:^|[^\\\\])(?:\\\\.)*)"+W+"+$","g"),Z=RegExp("^"+W+"*,"+W+"*"),et=RegExp("^"+W+"*([\\x20\\t\\r\\n\\f>+~])"+W+"*"),tt=RegExp(Q),nt=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,it=/[\x20\t\r\n\f]*[+~]/,ot=/h\d/i,st=/input|select|textarea|button/i,rt=/\\(?!\\)/g,at={ID:RegExp("^#("+q+")"),CLASS:RegExp("^\\.("+q+")"),NAME:RegExp("^\\[name=['\"]?("+q+")['\"]?\\]"),TAG:RegExp("^("+q.replace("w","w*")+")"),ATTR:RegExp("^"+J),PSEUDO:RegExp("^"+Q),POS:RegExp(G,"i"),CHILD:RegExp("^:(only|nth|first|last)-child(?:\\("+W+"*(even|odd|(([+-]|)(\\d*)n|)"+W+"*(?:([+-]|)"+W+"*(\\d+)|))"+W+"*\\)|)","i"),needsContext:RegExp("^"+W+"*[>+~]|"+G,"i")},lt=function(e){var t=E.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},ct=lt(function(e){return e.appendChild(E.createComment("")),!e.getElementsByTagName("*").length}),ut=lt(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==I&&"#"===e.firstChild.getAttribute("href")}),dt=lt(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),pt=lt(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),ht=lt(function(e){e.id=D+0,e.innerHTML="<a name='"+D+"'></a><div name='"+D+"'></div>",P.insertBefore(e,P.firstChild);var t=E.getElementsByName&&E.getElementsByName(D).length===2+E.getElementsByName(D+0).length;return b=!E.getElementById(D),P.removeChild(e),t});try{B.call(P.childNodes,0)[0].nodeType}catch(ft){B=function(e){for(var t,n=[];t=this[e];e++)n.push(t);return n}}n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){return n(t,null,null,[e]).length>0},y=n.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=y(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i];i++)n+=y(t);return n},w=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},x=n.contains=P.contains?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!!(i&&1===i.nodeType&&n.contains&&n.contains(i))}:P.compareDocumentPosition?function(e,t){return t&&!!(16&e.compareDocumentPosition(t))}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},n.attr=function(e,t){var n,i=w(e);return i||(t=t.toLowerCase()),(n=_.attrHandle[t])?n(e):i||dt?e.getAttribute(t):(n=e.getAttributeNode(t),n?"boolean"==typeof e[t]?e[t]?t:null:n.specified?n.value:null:null)},_=n.selectors={cacheLength:50,createPseudo:H,match:at,attrHandle:ut?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:b?function(e,t,n){if(typeof t.getElementById!==I&&!n){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}}:function(e,n,i){if(typeof n.getElementById!==I&&!i){var o=n.getElementById(e);return o?o.id===e||typeof o.getAttributeNode!==I&&o.getAttributeNode("id").value===e?[o]:t:[]}},TAG:ct?function(e,n){return typeof n.getElementsByTagName!==I?n.getElementsByTagName(e):t}:function(e,t){var n=t.getElementsByTagName(e);if("*"===e){for(var i,o=[],s=0;i=n[s];s++)1===i.nodeType&&o.push(i);return o}return n},NAME:ht&&function(e,n){return typeof n.getElementsByName!==I?n.getElementsByName(name):t},CLASS:pt&&function(e,n,i){return typeof n.getElementsByClassName===I||i?t:n.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(rt,""),e[3]=(e[4]||e[5]||"").replace(rt,""),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1]?(e[2]||n.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*("even"===e[2]||"odd"===e[2])),e[4]=+(e[6]+e[7]||"odd"===e[2])):e[2]&&n.error(e[0]),e},PSEUDO:function(e){var t,n;return at.CHILD.test(e[0])?null:(e[3]?e[2]=e[3]:(t=e[4])&&(tt.test(t)&&(n=a(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t),e.slice(0,3))}},filter:{ID:b?function(e){return e=e.replace(rt,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(rt,""),function(t){var n=typeof t.getAttributeNode!==I&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(rt,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=U[D][e];return t||(t=U(e,RegExp("(^|"+W+")"+e+"("+W+"|$)"))),function(e){return t.test(e.className||typeof e.getAttribute!==I&&e.getAttribute("class")||"")}},ATTR:function(e,t,i){return function(o){var s=n.attr(o,e);return null==s?"!="===t:t?(s+="","="===t?s===i:"!="===t?s!==i:"^="===t?i&&0===s.indexOf(i):"*="===t?i&&s.indexOf(i)>-1:"$="===t?i&&s.substr(s.length-i.length)===i:"~="===t?(" "+s+" ").indexOf(i)>-1:"|="===t?s===i||s.substr(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i){return"nth"===e?function(e){var t,o,s=e.parentNode;if(1===n&&0===i)return!0;if(s)for(o=0,t=s.firstChild;t&&(1!==t.nodeType||(o++,e!==t));t=t.nextSibling);return o-=i,o===n||0===o%n&&o/n>=0}:function(t){var n=t;switch(e){case"only":case"first":for(;n=n.previousSibling;)if(1===n.nodeType)return!1;if("first"===e)return!0;n=t;case"last":for(;n=n.nextSibling;)if(1===n.nodeType)return!1;return!0}}},PSEUDO:function(e,t){var i,o=_.pseudos[e]||_.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return o[D]?o(t):o.length>1?(i=[e,e,"",t],_.setFilters.hasOwnProperty(e.toLowerCase())?H(function(e,n){for(var i,s=o(e,t),r=s.length;r--;)i=R.call(e,s[r]),e[i]=!(n[i]=s[r])}):function(e){return o(e,0,i)}):o}},pseudos:{not:H(function(e){var t=[],n=[],i=C(e.replace(K,"$1"));return i[D]?H(function(e,t,n,o){for(var s,r=i(e,null,o,[]),a=e.length;a--;)(s=r[a])&&(e[a]=!(t[a]=s))}):function(e,o,s){return t[0]=e,i(t,null,s,n),!n.pop()}}),has:H(function(e){return function(t){return n(e,t).length>0}}),contains:H(function(e){return function(t){return(t.textContent||t.innerText||y(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!_.pseudos.empty(e)},empty:function(e){var t;for(e=e.firstChild;e;){if(e.nodeName>"@"||3===(t=e.nodeType)||4===t)return!1;e=e.nextSibling}return!0},header:function(e){return ot.test(e.nodeName)},text:function(e){var t,n;return"input"===e.nodeName.toLowerCase()&&"text"===(t=e.type)&&(null==(n=e.getAttribute("type"))||n.toLowerCase()===t)},radio:i("radio"),checkbox:i("checkbox"),file:i("file"),password:i("password"),image:i("image"),submit:o("submit"),reset:o("reset"),button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return st.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return!(e!==t.activeElement||t.hasFocus&&!t.hasFocus()||!e.type&&!e.href)},active:function(e){return e===e.ownerDocument.activeElement},first:s(function(){return[0]}),last:s(function(e,t){return[t-1]}),eq:s(function(e,t,n){return[0>n?n+t:n]}),even:s(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:s(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:s(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:s(function(e,t,n){for(var i=0>n?n+t:n;t>++i;)e.push(i);return e})}},k=P.compareDocumentPosition?function(e,t){return e===t?(T=!0,0):(e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t):e.compareDocumentPosition)?-1:1}:function(e,t){if(e===t)return T=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,i,o=[],s=[],a=e.parentNode,l=t.parentNode,c=a;if(a===l)return r(e,t);if(!a)return-1;if(!l)return 1;for(;c;)o.unshift(c),c=c.parentNode;for(c=l;c;)s.unshift(c),c=c.parentNode;n=o.length,i=s.length;for(var u=0;n>u&&i>u;u++)if(o[u]!==s[u])return r(o[u],s[u]);return u===n?r(e,s[u],-1):r(o[u],t,1)},[0,0].sort(k),S=!T,n.uniqueSort=function(e){var t,n=1;if(T=S,e.sort(k),T)for(;t=e[n];n++)t===e[n-1]&&e.splice(n--,1);return e},n.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},C=n.compile=function(e,t){var n,i=[],o=[],s=z[D][e];if(!s){for(t||(t=a(e)),n=t.length;n--;)s=p(t[n]),s[D]?i.push(s):o.push(s);s=z(e,h(o,i))}return s},E.querySelectorAll&&function(){var e,t=m,i=/'|\\/g,o=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,s=[":focus"],r=[":active",":focus"],l=P.matchesSelector||P.mozMatchesSelector||P.webkitMatchesSelector||P.oMatchesSelector||P.msMatchesSelector;lt(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||s.push("\\["+W+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||s.push(":checked")}),lt(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&s.push("[*^$]="+W+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||s.push(":enabled",":disabled")}),s=RegExp(s.join("|")),m=function(e,n,o,r,l){if(!(r||l||s&&s.test(e))){var c,u,d=!0,p=D,h=n,f=9===n.nodeType&&e;if(1===n.nodeType&&"object"!==n.nodeName.toLowerCase()){for(c=a(e),(d=n.getAttribute("id"))?p=d.replace(i,"\\$&"):n.setAttribute("id",p),p="[id='"+p+"'] ",u=c.length;u--;)c[u]=p+c[u].join("");h=it.test(e)&&n.parentNode||n,f=c.join(",")}if(f)try{return O.apply(o,B.call(h.querySelectorAll(f),0)),o}catch(m){}finally{d||n.removeAttribute("id")}}return t(e,n,o,r,l)},l&&(lt(function(t){e=l.call(t,"div");try{l.call(t,"[test!='']:sizzle"),r.push("!=",Q)}catch(n){}}),r=RegExp(r.join("|")),n.matchesSelector=function(t,i){if(i=i.replace(o,"='$1']"),!(w(t)||r.test(i)||s&&s.test(i)))try{var a=l.call(t,i);if(a||e||t.document&&11!==t.document.nodeType)return a}catch(c){}return n(i,null,null,[t]).length>0})}(),_.pseudos.nth=_.pseudos.eq,_.filters=g.prototype=_.pseudos,_.setFilters=new g,n.attr=X.attr,X.find=n,X.expr=n.selectors,X.expr[":"]=X.expr.pseudos,X.unique=n.uniqueSort,X.text=n.getText,X.isXMLDoc=n.isXML,X.contains=n.contains}(e);var Lt=/Until$/,Nt=/^(?:parents|prev(?:Until|All))/,Ot=/^.[^:#\[\.,]*$/,Bt=X.expr.match.needsContext,Rt={children:!0,contents:!0,next:!0,prev:!0};X.fn.extend({find:function(e){var t,n,i,o,s,r,a=this;if("string"!=typeof e)return X(e).filter(function(){for(t=0,n=a.length;n>t;t++)if(X.contains(a[t],this))return!0});for(r=this.pushStack("","find",e),t=0,n=this.length;n>t;t++)if(i=r.length,X.find(e,this[t],r),t>0)for(o=i;r.length>o;o++)for(s=0;i>s;s++)if(r[s]===r[o]){r.splice(o--,1);break}return r},has:function(e){var t,n=X(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(X.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(c(this,e,!1),"not",e)},filter:function(e){return this.pushStack(c(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?Bt.test(e)?X(e,this.context).index(this[0])>=0:X.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var n,i=0,o=this.length,s=[],r=Bt.test(e)||"string"!=typeof e?X(e,t||this.context):0;o>i;i++)for(n=this[i];n&&n.ownerDocument&&n!==t&&11!==n.nodeType;){if(r?r.index(n)>-1:X.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}return s=s.length>1?X.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?"string"==typeof e?X.inArray(this[0],X(e)):X.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n="string"==typeof e?X(e,t):X.makeArray(e&&e.nodeType?[e]:e),i=X.merge(this.get(),n);return this.pushStack(a(n[0])||a(i[0])?i:X.unique(i))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),X.fn.andSelf=X.fn.addBack,X.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return X.dir(e,"parentNode")},parentsUntil:function(e,t,n){return X.dir(e,"parentNode",n)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return X.dir(e,"nextSibling")},prevAll:function(e){return X.dir(e,"previousSibling")},nextUntil:function(e,t,n){return X.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return X.dir(e,"previousSibling",n)},siblings:function(e){return X.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return X.sibling(e.firstChild)},contents:function(e){return X.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:X.merge([],e.childNodes)}},function(e,t){X.fn[e]=function(n,i){var o=X.map(this,t,n);return Lt.test(e)||(i=n),i&&"string"==typeof i&&(o=X.filter(i,o)),o=this.length>1&&!Rt[e]?X.unique(o):o,this.length>1&&Nt.test(e)&&(o=o.reverse()),this.pushStack(o,e,Y.call(arguments).join(","))}}),X.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?X.find.matchesSelector(t[0],e)?[t[0]]:[]:X.find.matches(e,t)},dir:function(e,n,i){for(var o=[],s=e[n];s&&9!==s.nodeType&&(i===t||1!==s.nodeType||!X(s).is(i));)1===s.nodeType&&o.push(s),s=s[n];return o},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",jt=/ jQuery\d+="(?:null|\d+)"/g,Ut=/^\s+/,Ft=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,zt=/<([\w:]+)/,Wt=/<tbody/i,qt=/<|&#?\w+;/,Vt=/<(?:script|style|link)/i,Yt=/<(?:script|object|embed|option|style)/i,Jt=RegExp("<(?:"+Ht+")[\\s/>]","i"),Qt=/^(?:checkbox|radio)$/,Gt=/checked\s*(?:[^=]|=\s*.checked.)/i,Kt=/\/(java|ecma)script/i,Xt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Zt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},en=u(U),tn=en.appendChild(U.createElement("div"));Zt.optgroup=Zt.option,Zt.tbody=Zt.tfoot=Zt.colgroup=Zt.caption=Zt.thead,Zt.th=Zt.td,X.support.htmlSerialize||(Zt._default=[1,"X<div>","</div>"]),X.fn.extend({text:function(e){return X.access(this,function(e){return e===t?X.text(this):this.empty().append((this[0]&&this[0].ownerDocument||U).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(X.isFunction(e))return this.each(function(t){X(this).wrapAll(e.call(this,t))});if(this[0]){var t=X(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return X.isFunction(e)?this.each(function(t){X(this).wrapInner(e.call(this,t))}):this.each(function(){var t=X(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=X.isFunction(e);return this.each(function(n){X(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){X.nodeName(this,"body")||X(this).replaceWith(this.childNodes)
}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!a(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=X.clean(arguments);return this.pushStack(X.merge(e,this),"before",this.selector)}},after:function(){if(!a(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=X.clean(arguments);return this.pushStack(X.merge(this,e),"after",this.selector)}},remove:function(e,t){for(var n,i=0;null!=(n=this[i]);i++)(!e||X.filter(e,[n]).length)&&(t||1!==n.nodeType||(X.cleanData(n.getElementsByTagName("*")),X.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&X.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return X.clone(this,e,t)})},html:function(e){return X.access(this,function(e){var n=this[0]||{},i=0,o=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(jt,""):t;if(!("string"!=typeof e||Vt.test(e)||!X.support.htmlSerialize&&Jt.test(e)||!X.support.leadingWhitespace&&Ut.test(e)||Zt[(zt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Ft,"<$1></$2>");try{for(;o>i;i++)n=this[i]||{},1===n.nodeType&&(X.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return a(this[0])?this.length?this.pushStack(X(X.isFunction(e)?e():e),"replaceWith",e):this:X.isFunction(e)?this.each(function(t){var n=X(this),i=n.html();n.replaceWith(e.call(this,t,i))}):("string"!=typeof e&&(e=X(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;X(this).remove(),t?X(t).before(e):X(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,i){e=[].concat.apply([],e);var o,s,r,a,l=0,c=e[0],u=[],p=this.length;if(!X.support.checkClone&&p>1&&"string"==typeof c&&Gt.test(c))return this.each(function(){X(this).domManip(e,n,i)});if(X.isFunction(c))return this.each(function(o){var s=X(this);e[0]=c.call(this,o,n?s.html():t),s.domManip(e,n,i)});if(this[0]){if(o=X.buildFragment(e,this,u),r=o.fragment,s=r.firstChild,1===r.childNodes.length&&(r=s),s)for(n=n&&X.nodeName(s,"tr"),a=o.cacheable||p-1;p>l;l++)i.call(n&&X.nodeName(this[l],"table")?d(this[l],"tbody"):this[l],l===a?r:X.clone(r,!0,!0));r=s=null,u.length&&X.each(u,function(e,t){t.src?X.ajax?X.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):X.error("no ajax"):X.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Xt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),X.buildFragment=function(e,n,i){var o,s,r,a=e[0];return n=n||U,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,!(1===e.length&&"string"==typeof a&&512>a.length&&n===U&&"<"===a.charAt(0))||Yt.test(a)||!X.support.checkClone&&Gt.test(a)||!X.support.html5Clone&&Jt.test(a)||(s=!0,o=X.fragments[a],r=o!==t),o||(o=n.createDocumentFragment(),X.clean(e,n,o,i),s&&(X.fragments[a]=r&&o)),{fragment:o,cacheable:s}},X.fragments={},X.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){X.fn[e]=function(n){var i,o=0,s=[],r=X(n),a=r.length,l=1===this.length&&this[0].parentNode;if((null==l||l&&11===l.nodeType&&1===l.childNodes.length)&&1===a)return r[t](this[0]),this;for(;a>o;o++)i=(o>0?this.clone(!0):this).get(),X(r[o])[t](i),s=s.concat(i);return this.pushStack(s,e,r.selector)}}),X.extend({clone:function(e,t,n){var i,o,s,r;if(X.support.html5Clone||X.isXMLDoc(e)||!Jt.test("<"+e.nodeName+">")?r=e.cloneNode(!0):(tn.innerHTML=e.outerHTML,tn.removeChild(r=tn.firstChild)),!(X.support.noCloneEvent&&X.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||X.isXMLDoc(e)))for(h(e,r),i=f(e),o=f(r),s=0;i[s];++s)o[s]&&h(i[s],o[s]);if(t&&(p(e,r),n))for(i=f(e),o=f(r),s=0;i[s];++s)p(i[s],o[s]);return i=o=null,r},clean:function(e,n,i,o){var s,r,a,l,c,d,p,h,f,g,v,b=n===U&&en,_=[];for(n&&n.createDocumentFragment!==t||(n=U),s=0;null!=(a=e[s]);s++)if("number"==typeof a&&(a+=""),a){if("string"==typeof a)if(qt.test(a)){for(b=b||u(n),p=n.createElement("div"),b.appendChild(p),a=a.replace(Ft,"<$1></$2>"),l=(zt.exec(a)||["",""])[1].toLowerCase(),c=Zt[l]||Zt._default,d=c[0],p.innerHTML=c[1]+a+c[2];d--;)p=p.lastChild;if(!X.support.tbody)for(h=Wt.test(a),f="table"!==l||h?"<table>"!==c[1]||h?[]:p.childNodes:p.firstChild&&p.firstChild.childNodes,r=f.length-1;r>=0;--r)X.nodeName(f[r],"tbody")&&!f[r].childNodes.length&&f[r].parentNode.removeChild(f[r]);!X.support.leadingWhitespace&&Ut.test(a)&&p.insertBefore(n.createTextNode(Ut.exec(a)[0]),p.firstChild),a=p.childNodes,p.parentNode.removeChild(p)}else a=n.createTextNode(a);a.nodeType?_.push(a):X.merge(_,a)}if(p&&(a=p=b=null),!X.support.appendChecked)for(s=0;null!=(a=_[s]);s++)X.nodeName(a,"input")?m(a):a.getElementsByTagName!==t&&X.grep(a.getElementsByTagName("input"),m);if(i)for(g=function(e){return!e.type||Kt.test(e.type)?o?o.push(e.parentNode?e.parentNode.removeChild(e):e):i.appendChild(e):t},s=0;null!=(a=_[s]);s++)X.nodeName(a,"script")&&g(a)||(i.appendChild(a),a.getElementsByTagName!==t&&(v=X.grep(X.merge([],a.getElementsByTagName("script")),g),_.splice.apply(_,[s+1,0].concat(v)),s+=v.length));return _},cleanData:function(e,t){for(var n,i,o,s,r=0,a=X.expando,l=X.cache,c=X.support.deleteExpando,u=X.event.special;null!=(o=e[r]);r++)if((t||X.acceptData(o))&&(i=o[a],n=i&&l[i])){if(n.events)for(s in n.events)u[s]?X.event.remove(o,s):X.removeEvent(o,s,n.handle);l[i]&&(delete l[i],c?delete o[a]:o.removeAttribute?o.removeAttribute(a):o[a]=null,X.deletedIds.push(i))}}}),function(){var e,t;X.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||0>e.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=X.uaMatch(z.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),X.browser=t,X.sub=function(){function e(t,n){return new e.fn.init(t,n)}X.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(n,i){return i&&i instanceof X&&!(i instanceof e)&&(i=e(i)),X.fn.init.call(this,n,i,t)},e.fn.init.prototype=e.fn;var t=e(U);return e}}();var nn,on,sn,rn=/alpha\([^)]*\)/i,an=/opacity=([^)]*)/,ln=/^(top|right|bottom|left)$/,cn=/^(none|table(?!-c[ea]).+)/,un=/^margin/,dn=RegExp("^("+Z+")(.*)$","i"),pn=RegExp("^("+Z+")(?!px)[a-z%]+$","i"),hn=RegExp("^([-+])=("+Z+")","i"),fn={},mn={position:"absolute",visibility:"hidden",display:"block"},gn={letterSpacing:0,fontWeight:400},vn=["Top","Right","Bottom","Left"],bn=["Webkit","O","Moz","ms"],_n=X.fn.toggle;X.fn.extend({css:function(e,n){return X.access(this,function(e,n,i){return i!==t?X.style(e,n,i):X.css(e,n)},e,n,arguments.length>1)},show:function(){return b(this,!0)},hide:function(){return b(this)},toggle:function(e,t){var n="boolean"==typeof e;return X.isFunction(e)&&X.isFunction(t)?_n.apply(this,arguments):this.each(function(){(n?e:v(this))?X(this).show():X(this).hide()})}}),X.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=nn(e,"opacity");return""===n?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":X.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,i,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,r,a,l=X.camelCase(n),c=e.style;if(n=X.cssProps[l]||(X.cssProps[l]=g(c,l)),a=X.cssHooks[n]||X.cssHooks[l],i===t)return a&&"get"in a&&(s=a.get(e,!1,o))!==t?s:c[n];if(r=typeof i,"string"===r&&(s=hn.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(X.css(e,n)),r="number"),!(null==i||"number"===r&&isNaN(i)||("number"!==r||X.cssNumber[l]||(i+="px"),a&&"set"in a&&(i=a.set(e,i,o))===t)))try{c[n]=i}catch(u){}}},css:function(e,n,i,o){var s,r,a,l=X.camelCase(n);return n=X.cssProps[l]||(X.cssProps[l]=g(e.style,l)),a=X.cssHooks[n]||X.cssHooks[l],a&&"get"in a&&(s=a.get(e,!0,o)),s===t&&(s=nn(e,n)),"normal"===s&&n in gn&&(s=gn[n]),i||o!==t?(r=parseFloat(s),i||X.isNumeric(r)?r||0:s):s},swap:function(e,t,n){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];i=n.call(e);for(o in t)e.style[o]=s[o];return i}}),e.getComputedStyle?nn=function(t,n){var i,o,s,r,a=e.getComputedStyle(t,null),l=t.style;return a&&(i=a[n],""!==i||X.contains(t.ownerDocument,t)||(i=X.style(t,n)),pn.test(i)&&un.test(n)&&(o=l.width,s=l.minWidth,r=l.maxWidth,l.minWidth=l.maxWidth=l.width=i,i=a.width,l.width=o,l.minWidth=s,l.maxWidth=r)),i}:U.documentElement.currentStyle&&(nn=function(e,t){var n,i,o=e.currentStyle&&e.currentStyle[t],s=e.style;return null==o&&s&&s[t]&&(o=s[t]),pn.test(o)&&!ln.test(t)&&(n=s.left,i=e.runtimeStyle&&e.runtimeStyle.left,i&&(e.runtimeStyle.left=e.currentStyle.left),s.left="fontSize"===t?"1em":o,o=s.pixelLeft+"px",s.left=n,i&&(e.runtimeStyle.left=i)),""===o?"auto":o}),X.each(["height","width"],function(e,n){X.cssHooks[n]={get:function(e,i,o){return i?0===e.offsetWidth&&cn.test(nn(e,"display"))?X.swap(e,mn,function(){return w(e,n,o)}):w(e,n,o):t},set:function(e,t,i){return _(e,t,i?y(e,n,i,X.support.boxSizing&&"border-box"===X.css(e,"boxSizing")):0)}}}),X.support.opacity||(X.cssHooks.opacity={get:function(e,t){return an.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,o=X.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=i&&i.filter||n.filter||"";n.zoom=1,t>=1&&""===X.trim(s.replace(rn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),i&&!i.filter)||(n.filter=rn.test(s)?s.replace(rn,o):s+" "+o)}}),X(function(){X.support.reliableMarginRight||(X.cssHooks.marginRight={get:function(e,n){return X.swap(e,{display:"inline-block"},function(){return n?nn(e,"marginRight"):t})}}),!X.support.pixelPosition&&X.fn.position&&X.each(["top","left"],function(e,t){X.cssHooks[t]={get:function(e,n){if(n){var i=nn(e,t);return pn.test(i)?X(e).position()[t]+"px":i}}}})}),X.expr&&X.expr.filters&&(X.expr.filters.hidden=function(e){return 0===e.offsetWidth&&0===e.offsetHeight||!X.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||nn(e,"display"))},X.expr.filters.visible=function(e){return!X.expr.filters.hidden(e)}),X.each({margin:"",padding:"",border:"Width"},function(e,t){X.cssHooks[e+t]={expand:function(n){var i,o="string"==typeof n?n.split(" "):[n],s={};for(i=0;4>i;i++)s[e+vn[i]+t]=o[i]||o[i-2]||o[0];return s}},un.test(e)||(X.cssHooks[e+t].set=_)});var yn=/%20/g,wn=/\[\]$/,xn=/\r?\n/g,Cn=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,kn=/^(?:select|textarea)/i;X.fn.extend({serialize:function(){return X.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?X.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||kn.test(this.nodeName)||Cn.test(this.type))}).map(function(e,t){var n=X(this).val();return null==n?null:X.isArray(n)?X.map(n,function(e){return{name:t.name,value:e.replace(xn,"\r\n")}}):{name:t.name,value:n.replace(xn,"\r\n")}}).get()}}),X.param=function(e,n){var i,o=[],s=function(e,t){t=X.isFunction(t)?t():null==t?"":t,o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=X.ajaxSettings&&X.ajaxSettings.traditional),X.isArray(e)||e.jquery&&!X.isPlainObject(e))X.each(e,function(){s(this.name,this.value)});else for(i in e)C(i,e[i],n,s);return o.join("&").replace(yn,"+")};var Tn,Mn,Sn=/#.*$/,In=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Dn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,An=/^(?:GET|HEAD)$/,En=/^\/\//,Pn=/\?/,$n=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Ln=/([?&])_=[^&]*/,Nn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,On=X.fn.load,Bn={},Rn={},Hn=["*/"]+["*"];try{Mn=F.href}catch(jn){Mn=U.createElement("a"),Mn.href="",Mn=Mn.href}Tn=Nn.exec(Mn.toLowerCase())||[],X.fn.load=function(e,n,i){if("string"!=typeof e&&On)return On.apply(this,arguments);if(!this.length)return this;var o,s,r,a=this,l=e.indexOf(" ");return l>=0&&(o=e.slice(l,e.length),e=e.slice(0,l)),X.isFunction(n)?(i=n,n=t):n&&"object"==typeof n&&(s="POST"),X.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){i&&a.each(i,r||[e.responseText,t,e])}}).done(function(e){r=arguments,a.html(o?X("<div>").append(e.replace($n,"")).find(o):e)}),this},X.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){X.fn[t]=function(e){return this.on(t,e)}}),X.each(["get","post"],function(e,n){X[n]=function(e,i,o,s){return X.isFunction(i)&&(s=s||o,o=i,i=t),X.ajax({type:n,url:e,data:i,success:o,dataType:s})}}),X.extend({getScript:function(e,n){return X.get(e,t,n,"script")},getJSON:function(e,t,n){return X.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?M(e,X.ajaxSettings):(t=e,e=X.ajaxSettings),M(e,t),e},ajaxSettings:{url:Mn,isLocal:Dn.test(Tn[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Hn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":X.parseJSON,"text xml":X.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:k(Bn),ajaxTransport:k(Rn),ajax:function(e,n){function i(e,n,i,r){var c,d,b,_,w,C=n;2!==y&&(y=2,l&&clearTimeout(l),a=t,s=r||"",x.readyState=e>0?4:0,i&&(_=S(p,x,i)),e>=200&&300>e||304===e?(p.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(X.lastModified[o]=w),w=x.getResponseHeader("Etag"),w&&(X.etag[o]=w)),304===e?(C="notmodified",c=!0):(c=I(p,_),C=c.state,d=c.data,b=c.error,c=!b)):(b=C,(!C||e)&&(C="error",0>e&&(e=0))),x.status=e,x.statusText=(n||C)+"",c?m.resolveWith(h,[d,C,x]):m.rejectWith(h,[x,C,b]),x.statusCode(v),v=t,u&&f.trigger("ajax"+(c?"Success":"Error"),[x,p,c?d:b]),g.fireWith(h,[x,C]),u&&(f.trigger("ajaxComplete",[x,p]),--X.active||X.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var o,s,r,a,l,c,u,d,p=X.ajaxSetup({},n),h=p.context||p,f=h!==p&&(h.nodeType||h instanceof X)?X(h):X.event,m=X.Deferred(),g=X.Callbacks("once memory"),v=p.statusCode||{},b={},_={},y=0,w="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!y){var n=e.toLowerCase();e=_[n]=_[n]||e,b[e]=t}return this},getAllResponseHeaders:function(){return 2===y?s:null},getResponseHeader:function(e){var n;if(2===y){if(!r)for(r={};n=In.exec(s);)r[n[1].toLowerCase()]=n[2];n=r[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return y||(p.mimeType=e),this},abort:function(e){return e=e||w,a&&a.abort(e),i(0,e),this}};if(m.promise(x),x.success=x.done,x.error=x.fail,x.complete=g.add,x.statusCode=function(e){if(e){var t;if(2>y)for(t in e)v[t]=[v[t],e[t]];else t=e[x.status],x.always(t)}return this},p.url=((e||p.url)+"").replace(Sn,"").replace(En,Tn[1]+"//"),p.dataTypes=X.trim(p.dataType||"*").toLowerCase().split(tt),null==p.crossDomain&&(c=Nn.exec(p.url.toLowerCase())||!1,p.crossDomain=c&&c.join(":")+(c[3]?"":"http:"===c[1]?80:443)!==Tn.join(":")+(Tn[3]?"":"http:"===Tn[1]?80:443)),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=X.param(p.data,p.traditional)),T(Bn,p,n,x),2===y)return x;if(u=p.global,p.type=p.type.toUpperCase(),p.hasContent=!An.test(p.type),u&&0===X.active++&&X.event.trigger("ajaxStart"),!p.hasContent&&(p.data&&(p.url+=(Pn.test(p.url)?"&":"?")+p.data,delete p.data),o=p.url,p.cache===!1)){var C=X.now(),k=p.url.replace(Ln,"$1_="+C);p.url=k+(k===p.url?(Pn.test(p.url)?"&":"?")+"_="+C:"")}(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",p.contentType),p.ifModified&&(o=o||p.url,X.lastModified[o]&&x.setRequestHeader("If-Modified-Since",X.lastModified[o]),X.etag[o]&&x.setRequestHeader("If-None-Match",X.etag[o])),x.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Hn+"; q=0.01":""):p.accepts["*"]);for(d in p.headers)x.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(p.beforeSend.call(h,x,p)===!1||2===y))return x.abort();w="abort";for(d in{success:1,error:1,complete:1})x[d](p[d]);if(a=T(Rn,p,n,x)){x.readyState=1,u&&f.trigger("ajaxSend",[x,p]),p.async&&p.timeout>0&&(l=setTimeout(function(){x.abort("timeout")},p.timeout));try{y=1,a.send(b,i)}catch(M){if(!(2>y))throw M;i(-1,M)}}else i(-1,"No Transport");return x},active:0,lastModified:{},etag:{}});var Un=[],Fn=/\?/,zn=/(=)\?(?=&|$)|\?\?/,Wn=X.now();X.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Un.pop()||X.expando+"_"+Wn++;return this[e]=!0,e}}),X.ajaxPrefilter("json jsonp",function(n,i,o){var s,r,a,l=n.data,c=n.url,u=n.jsonp!==!1,d=u&&zn.test(c),p=u&&!d&&"string"==typeof l&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&zn.test(l);return"jsonp"===n.dataTypes[0]||d||p?(s=n.jsonpCallback=X.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,r=e[s],d?n.url=c.replace(zn,"$1"+s):p?n.data=l.replace(zn,"$1"+s):u&&(n.url+=(Fn.test(c)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return a||X.error(s+" was not called"),a[0]},n.dataTypes[0]="json",e[s]=function(){a=arguments},o.always(function(){e[s]=r,n[s]&&(n.jsonpCallback=i.jsonpCallback,Un.push(s)),a&&X.isFunction(r)&&r(a[0]),a=r=t}),"script"):t}),X.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return X.globalEval(e),e}}}),X.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),X.ajaxTransport("script",function(e){if(e.crossDomain){var n,i=U.head||U.getElementsByTagName("head")[0]||U.documentElement;return{send:function(o,s){n=U.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,o){(o||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,i&&n.parentNode&&i.removeChild(n),n=t,o||s(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var qn,Vn=e.ActiveXObject?function(){for(var e in qn)qn[e](0,1)}:!1,Yn=0;X.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&D()||A()}:D,function(e){X.extend(X.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(X.ajaxSettings.xhr()),X.support.ajax&&X.ajaxTransport(function(n){if(!n.crossDomain||X.support.cors){var i;return{send:function(o,s){var r,a,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(a in n.xhrFields)l[a]=n.xhrFields[a];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");try{for(a in o)l.setRequestHeader(a,o[a])}catch(c){}l.send(n.hasContent&&n.data||null),i=function(e,o){var a,c,u,d,p;try{if(i&&(o||4===l.readyState))if(i=t,r&&(l.onreadystatechange=X.noop,Vn&&delete qn[r]),o)4!==l.readyState&&l.abort();else{a=l.status,u=l.getAllResponseHeaders(),d={},p=l.responseXML,p&&p.documentElement&&(d.xml=p);try{d.text=l.responseText}catch(e){}try{c=l.statusText}catch(h){c=""}a||!n.isLocal||n.crossDomain?1223===a&&(a=204):a=d.text?200:404}}catch(f){o||s(-1,f)}d&&s(a,c,d,u)},n.async?4===l.readyState?setTimeout(i,0):(r=++Yn,Vn&&(qn||(qn={},X(e).unload(Vn)),qn[r]=i),l.onreadystatechange=i):i()},abort:function(){i&&i(0,1)}}}});var Jn,Qn,Gn=/^(?:toggle|show|hide)$/,Kn=RegExp("^(?:([-+])=|)("+Z+")([a-z%]*)$","i"),Xn=/queueHooks$/,Zn=[N],ei={"*":[function(e,t){var n,i,o=this.createTween(e,t),s=Kn.exec(t),r=o.cur(),a=+r||0,l=1,c=20;if(s){if(n=+s[2],i=s[3]||(X.cssNumber[e]?"":"px"),"px"!==i&&a){a=X.css(o.elem,e,!0)||n||1;do l=l||".5",a/=l,X.style(o.elem,e,a+i);while(l!==(l=o.cur()/r)&&1!==l&&--c)}o.unit=i,o.start=a,o.end=s[1]?a+(s[1]+1)*n:n}return o}]};X.Animation=X.extend($,{tweener:function(e,t){X.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,o=e.length;o>i;i++)n=e[i],ei[n]=ei[n]||[],ei[n].unshift(t)},prefilter:function(e,t){t?Zn.unshift(e):Zn.push(e)}}),X.Tween=O,O.prototype={constructor:O,init:function(e,t,n,i,o,s){this.elem=e,this.prop=n,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(X.cssNumber[n]?"":"px")},cur:function(){var e=O.propHooks[this.prop];return e&&e.get?e.get(this):O.propHooks._default.get(this)},run:function(e){var t,n=O.propHooks[this.prop];return this.pos=t=this.options.duration?X.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):O.propHooks._default.set(this),this}},O.prototype.init.prototype=O.prototype,O.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=X.css(e.elem,e.prop,!1,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){X.fx.step[e.prop]?X.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[X.cssProps[e.prop]]||X.cssHooks[e.prop])?X.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},O.propHooks.scrollTop=O.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},X.each(["toggle","show","hide"],function(e,t){var n=X.fn[t];X.fn[t]=function(i,o,s){return null==i||"boolean"==typeof i||!e&&X.isFunction(i)&&X.isFunction(o)?n.apply(this,arguments):this.animate(B(t,!0),i,o,s)}}),X.fn.extend({fadeTo:function(e,t,n,i){return this.filter(v).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=X.isEmptyObject(e),s=X.speed(t,n,i),r=function(){var t=$(this,X.extend({},e),s);o&&t.stop(!0)};return o||s.queue===!1?this.each(r):this.queue(s.queue,r)},stop:function(e,n,i){var o=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",s=X.timers,r=X._data(this);if(n)r[n]&&r[n].stop&&o(r[n]);else for(n in r)r[n]&&r[n].stop&&Xn.test(n)&&o(r[n]);for(n=s.length;n--;)s[n].elem!==this||null!=e&&s[n].queue!==e||(s[n].anim.stop(i),t=!1,s.splice(n,1));(t||!i)&&X.dequeue(this,e)})}}),X.each({slideDown:B("show"),slideUp:B("hide"),slideToggle:B("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){X.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),X.speed=function(e,t,n){var i=e&&"object"==typeof e?X.extend({},e):{complete:n||!n&&t||X.isFunction(e)&&e,duration:e,easing:n&&t||t&&!X.isFunction(t)&&t};return i.duration=X.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in X.fx.speeds?X.fx.speeds[i.duration]:X.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){X.isFunction(i.old)&&i.old.call(this),i.queue&&X.dequeue(this,i.queue)},i},X.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},X.timers=[],X.fx=O.prototype.init,X.fx.tick=function(){for(var e,t=X.timers,n=0;t.length>n;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||X.fx.stop()},X.fx.timer=function(e){e()&&X.timers.push(e)&&!Qn&&(Qn=setInterval(X.fx.tick,X.fx.interval))},X.fx.interval=13,X.fx.stop=function(){clearInterval(Qn),Qn=null},X.fx.speeds={slow:600,fast:200,_default:400},X.fx.step={},X.expr&&X.expr.filters&&(X.expr.filters.animated=function(e){return X.grep(X.timers,function(t){return e===t.elem}).length});var ti=/^(?:body|html)$/i;X.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){X.offset.setOffset(this,e,t)});var n,i,o,s,r,a,l,c={top:0,left:0},u=this[0],d=u&&u.ownerDocument;if(d)return(i=d.body)===u?X.offset.bodyOffset(u):(n=d.documentElement,X.contains(n,u)?(u.getBoundingClientRect!==t&&(c=u.getBoundingClientRect()),o=R(d),s=n.clientTop||i.clientTop||0,r=n.clientLeft||i.clientLeft||0,a=o.pageYOffset||n.scrollTop,l=o.pageXOffset||n.scrollLeft,{top:c.top+a-s,left:c.left+l-r}):c)},X.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return X.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(X.css(e,"marginTop"))||0,n+=parseFloat(X.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var i=X.css(e,"position");"static"===i&&(e.style.position="relative");var o,s,r=X(e),a=r.offset(),l=X.css(e,"top"),c=X.css(e,"left"),u=("absolute"===i||"fixed"===i)&&X.inArray("auto",[l,c])>-1,d={},p={};u?(p=r.position(),o=p.top,s=p.left):(o=parseFloat(l)||0,s=parseFloat(c)||0),X.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(d.top=t.top-a.top+o),null!=t.left&&(d.left=t.left-a.left+s),"using"in t?t.using.call(e,d):r.css(d)}},X.fn.extend({position:function(){if(this[0]){var e=this[0],t=this.offsetParent(),n=this.offset(),i=ti.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(X.css(e,"marginTop"))||0,n.left-=parseFloat(X.css(e,"marginLeft"))||0,i.top+=parseFloat(X.css(t[0],"borderTopWidth"))||0,i.left+=parseFloat(X.css(t[0],"borderLeftWidth"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||U.body;e&&!ti.test(e.nodeName)&&"static"===X.css(e,"position");)e=e.offsetParent;return e||U.body})}}),X.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i=/Y/.test(n);X.fn[e]=function(o){return X.access(this,function(e,o,s){var r=R(e);return s===t?r?n in r?r[n]:r.document.documentElement[o]:e[o]:(r?r.scrollTo(i?X(r).scrollLeft():s,i?s:X(r).scrollTop()):e[o]=s,t)},e,o,arguments.length,null)}}),X.each({Height:"height",Width:"width"},function(e,n){X.each({padding:"inner"+e,content:n,"":"outer"+e},function(i,o){X.fn[o]=function(o,s){var r=arguments.length&&(i||"boolean"!=typeof o),a=i||(o===!0||s===!0?"margin":"border");return X.access(this,function(n,i,o){var s;return X.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):o===t?X.css(n,i,o,a):X.style(n,i,o,a)},n,r?o:t,r,null)}})}),e.jQuery=e.$=X,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return X})})(window)}(),function(){DomUtils={};var e=function(e,t){if(!document.querySelectorAll)throw Error("This browser doesn't support querySelectorAll.");var n=t;return p(t,"DomUtils_findAllBySelector_scope",function(t){var i=_.map(e.split(","),function(e){return t+" "+e}).join(",");return n.querySelectorAll(i)})},t=window.Sizzle||window.jQuery&&window.jQuery.find||e,n=document.createElement("div");n.innerHTML="   <link/><table></table><select><!----></select>";var i=document.createElement("div");i.innerHTML="<select><option selected>Foo</option></select>",i.firstChild.setAttribute("name","myname");var o={leadingWhitespaceKilled:3!==n.firstChild.nodeType,tbodyInsertion:n.getElementsByTagName("tbody").length>0,tagsLost:0===n.getElementsByTagName("link").length,commentsLost:!n.getElementsByTagName("select")[0].firstChild,selectValueMustBeFromAttribute:"Foo"!==i.firstChild.value,mustSetNameInCreateElement:i.firstChild.outerHTML&&-1===i.firstChild.outerHTML.indexOf("myname")},s={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};_.extend(s,{optgroup:s.option,tbody:s.thead,tfoot:s.thead,colgroup:s.thead,caption:s.thead,th:s.td}),o.tagsLost&&(s._default=[1,"div<div>","</div>"]);var r=/^\s+/,a=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,l=/<([\w:]+)/,c=/<tbody/i,u=/<|&#?\w+;/;DomUtils.htmlToFragment=function(e){var t=document,n=t.createDocumentFragment();if(e.length)if(u.test(e)){e=e.replace(a,"<$1></$2>");var i=l.exec(e),d=i?i[1].toLowerCase():"",p=s[d]||s._default,h=p[1]+e+p[2];o.commentsLost&&(h=h.replace(/<\s*(select|option)\b/gi,'<ins domutilsrealtagname="$1"'),h=h.replace(/<\/\s*(select|option)\b/gi,"</ins"));var f=t.createElement("div");f.innerHTML=h;for(var m=p[0];m--;)f=f.lastChild;if(o.tbodyInsertion&&!c.test(e)){var g=f.getElementsByTagName("tbody");_.each(g,function(e){e.firstChild||e.parentNode.removeChild(e)})}if(o.leadingWhitespaceKilled){var v=r.exec(e);v&&f.insertBefore(t.createTextNode(v[0]),f.firstChild)}if(o.commentsLost){var b=[];_.each(f.getElementsByTagName("ins"),function(e){e.getAttribute("domutilsrealtagname")&&b.push(e)}),_.each(b,function(e){var t=e.getAttribute("domutilsrealtagname");o.mustSetNameInCreateElement&&e.getAttribute("name")&&(t="<"+t+" name='"+_.escape(e.getAttribute("name"))+"'/>");var n=document.createElement(t);e.removeAttribute("domutilsrealtagname");for(var i=e.attributes,s=0;i.length>s;++s){var r=i.item(s);if(r.specified){var a=r.name.toLowerCase(),l=r.value+"";"selected"===a&&""===l&&(l="selected"),n.setAttribute(a,l)}}for(;e.firstChild;)n.appendChild(e.firstChild);e.parentNode.replaceChild(n,e)})}for(;f.firstChild;)n.appendChild(f.firstChild)}else n.appendChild(t.createTextNode(e));else;return n},DomUtils.fragmentToHtml=function(e){return e=e.cloneNode(!0),DomUtils.fragmentToContainer(e).innerHTML},DomUtils.fragmentToContainer=function(e){for(var t=document,n=e.firstChild;n&&1!==n.nodeType;)n=n.nextSibling;var i=t.createElement("div");if(n){var o=n.nodeName,r=s[o]||s._default;i.innerHTML=r[1]+r[2];for(var a=r[0];a--;)i=i.lastChild;i.appendChild(e)}else i.appendChild(e);return i},DomUtils.elementContains=function(e,t){return 1!==e.nodeType?!1:e===t?!1:e.compareDocumentPosition?16&e.compareDocumentPosition(t):(t=t.parentNode,t&&1===t.nodeType?e===t?!0:e.contains(t):!1)},DomUtils.findAll=function(e,n){if(11===e.nodeType){for(var i=e,o=DomUtils.fragmentToContainer(i),s=t(n,o);o.firstChild;)i.appendChild(o.firstChild);return s}return t(n,e)},DomUtils.find=function(e,t){var n=DomUtils.findAll(e,t);return n.length?n[0]:null};var d=function(e,t,n){return DomUtils.elementContains(e,t)?!1:0>=DomUtils.compareElementIndex(t,e)&&0>=DomUtils.compareElementIndex(e,n)};DomUtils.findAllClipped=function(e,t,n,i){for(;n!==i&&1!==n.nodeType;)n=n.nextSibling;for(;n!==i&&1!==i.nodeType;)i=i.previousSibling;if(1!==n.nodeType)return[];var o=DomUtils.findAll(e,t);return _.reject(o,function(e){return!d(e,n,i)})},DomUtils.findClipped=function(e,t,n,i){var o=DomUtils.findAllClipped(e,t,n,i);return o.length?o[0]:null};var p=function(e,t,n){var i=!1;e.getAttribute("id")||(e.setAttribute("id",t),i=!0);try{var o=e.getAttribute("id").replace(/'/g,"\\$&");return n("[id='"+o+"']")}finally{i&&e.removeAttribute("id")}},h=function(e,t,n,i,o){for(var s=n.split(","),r=0,a=s.length;a>r;r++){var l=p(e,"DomUtils_matchesSelector_target",function(s){var r,a=n.match(/\S.*?(?=\s*$)/)[0],l=a+s;return r=i?DomUtils.findClipped(t,l,i,o):DomUtils.find(t,l),r===e});if(l)return!0}return!1};DomUtils.matchesSelector=function(e,t,n){return h(e,t,n)},DomUtils.matchesSelectorClipped=function(e,t,n,i,o){return h(e,t,n,i,o)},DomUtils.compareElementIndex=function(e,t){if(e===t)return 0;if(e.compareDocumentPosition){var n=e.compareDocumentPosition(t);return 24&n?0:4&n?-1:1}return e.contains(t)||t.contains(e)?0:e.sourceIndex<t.sourceIndex?-1:1},DomUtils.wrapFragmentForContainer=function(e,t){if(t&&"TABLE"===t.nodeName&&_.any(e.childNodes,function(e){return"TR"===e.nodeName
})){var n=document.createElement("TBODY");n.appendChild(e),e.appendChild(n)}},DomUtils.isInDocument=function(e){return e===document?!0:(1!==e.nodeType&&(e=e.parentNode),e&&1===e.nodeType?e===document.body?!0:DomUtils.elementContains(document.body,e):!1)},DomUtils.rangeToHtml=function(e,t){for(var n=document.createDocumentFragment(),i=e,o=t.nextSibling;i&&i!==o;i=i.nextSibling)n.appendChild(i.cloneNode(!0));return DomUtils.fragmentToHtml(n)},DomUtils.outerHtml=function(e){return DomUtils.rangeToHtml(e,e)},DomUtils.setElementValue=function(e,t){if(e.value=t,e.value!==t&&"SELECT"===e.nodeName)for(var n=DomUtils.findAll(e,"option"),i=0;n.length>i;++i)if(DomUtils.getElementValue(n[i])===t)return n[i].selected=!0,void 0},DomUtils.getElementValue=function(e){if(!o.selectValueMustBeFromAttribute)return e.value;if("OPTION"===e.nodeName){var t=e.attributes.value;return!t||t.specified?e.value:e.text}return"SELECT"===e.nodeName?0>e.selectedIndex?null:DomUtils.getElementValue(e.options[e.selectedIndex]):e.value}}(),function(){var e=function(){var e=document.createTextNode("");try{e.test=123}catch(t){}return 123!==e.test?!1:document.documentMode?!1:!0}(),t=function(t,n){if(e)return[t,n];if(3===t.nodeType){var i=document.createComment("IE");t.parentNode.insertBefore(i,t),t=i}if(3===n.nodeType){var i=document.createComment("IE");n.parentNode.insertBefore(i,n.nextSibling),n=i}return[t,n]};LiveRange=function(e,i,o,s){if(11===i.nodeType)o=i.lastChild,i=i.firstChild;else if(!i.parentNode)throw Error("LiveRange start and end must have a parent");o=o||i,this.tag=e;var r=t(i,o);i=this._ensureTag(r[0]),o=this._ensureTag(r[1]);var a=n(i[e][0],!0,o,i,s),l=n(o[e][1],!1,i,o,s);this._insertEntries(i,0,a,[this]),this._insertEntries(o,1,l,[this])};var n=function(e,t,n,i,o){for(var s,r=t?n.parentNode.lastChild:i,a=t?!o:o,l=0,c=r;e.length>=l;l++){for(var u=e[l],d=u&&(t?u._end:u._start);c!==d&&c!==n;)c=c.previousSibling;if(d===n){if(s=l,a)break}else if(c===n){s=l;break}}return s};LiveRange.prototype._ensureTag=function(e){return this.tag in e||(e[this.tag]=[[],[]]),e};var i=function(){var e=document.createElement("DIV"),t=!1;try{e.test=12,delete e.test,t=!0}catch(n){}return t}();LiveRange._cleanNode=function(e,t,n){var o=t[e];!o||o[0].length+o[1].length&&!n||(i?delete t[e]:t.removeAttribute(e))},LiveRange.prototype.destroy=function(e){var t=this;if(e){if(this.visit(function(e,t){e&&(t._start=null,t._end=null)},function(e,n){if(!e)for(var i=n.firstChild;i;i=i.nextSibling)LiveRange._cleanNode(t.tag,i,!0)}),this._removeEntries(this._start,0,this._startIndex),this._removeEntries(this._end,1,0,this._endIndex+1),this._start!==this._end){for(var n=this._start.nextSibling;n!==this._end;n=n.nextSibling)LiveRange._cleanNode(t.tag,n,!0);this._start[t.tag]&&this._removeEntries(this._start,1),this._end[t.tag]&&this._removeEntries(this._end,0)}this._start=this._end=null}else this._removeEntries(this._start,0,this._startIndex,this._startIndex+1),this._removeEntries(this._end,1,this._endIndex,this._endIndex+1),this._start=this._end=null},LiveRange.prototype.firstNode=function(){return this._start},LiveRange.prototype.lastNode=function(){return this._end},LiveRange.prototype.containerNode=function(){return this._start.parentNode},LiveRange.prototype.visit=function(e,t){e=e||function(){},t=t||function(){};var n=this.tag,i=function(o,s,r){for(var a=r||0,l=s.nextSibling,c=o;c&&c!==l;c=c.nextSibling){var u=c[n]&&c[n][0];if(u&&u.length>a){var d=u[a],p=d._start,h=d._end;e(!0,d)!==!1&&i(p,h,a+1),e(!1,d),c=h}else t(!0,c)!==!1&&c.firstChild&&i(c.firstChild,c.lastChild),t(!1,c);a=0}};i(this._start,this._end,this._startIndex+1)},LiveRange.prototype._removeEntries=function(e,t,n,i){var o=e[this.tag][t];n=n||0,i=i||0===i?i:o.length;for(var s=o.splice(n,i-n),r=n;o.length>r;r++)t?o[r]._endIndex=r:o[r]._startIndex=r;return o.length||LiveRange._cleanNode(this.tag,e),s},LiveRange.prototype._insertEntries=function(e,t,n,i){var o=e[this.tag][t];Array.prototype.splice.apply(o,[n,0].concat(i));for(var s=n;o.length>s;s++)t?(o[s]._end=e,o[s]._endIndex=s):(o[s]._start=e,o[s]._startIndex=s)},LiveRange.prototype.replaceContents=function(e){if(!e.firstChild)throw Error("replaceContents requires non-empty fragment");return this.operate(function(t,n){t.parentNode.insertBefore(e,t);for(var i=t.ownerDocument.createDocumentFragment(),o=t;;){var s=o.nextSibling;if(i.appendChild(o),o===n)break;if(o=s,!o)throw Error("LiveRanges must begin and end on siblings in order")}return i})},LiveRange.prototype.operate=function(e){var n=this._start,i=this._end,o=this._removeEntries(n,0,0,this._startIndex+1),s=this._removeEntries(i,1,this._endIndex),r=n.parentNode,a=n.previousSibling,l=i.nextSibling,c=null;c=e(n,i);var u=a?a.nextSibling:r.firstChild,d=l?l.previousSibling:r.lastChild;if(!u||u===l)throw Error("Ranges must contain at least one element");var p=t(u,d);return u=this._ensureTag(p[0]),d=this._ensureTag(p[1]),this._insertEntries(u,0,0,o),this._insertEntries(d,1,d[this.tag][1].length,s),c},LiveRange.transplantTag=function(e,t,n){if(n[e]){t[e]=n[e],n[e]=null;for(var i=t[e][0],o=t[e][1],s=0;i.length>s;s++)i[s]._start=t;for(var s=0;o.length>s;s++)o[s]._end=t}},LiveRange.transplantRange=function(e,t,n){n._ensureTag(e),t!==e&&n._ensureTag(t),n._insertEntries(e,0,0,n._start[n.tag][0].slice(0,n._startIndex+1)),n._insertEntries(t,1,0,n._end[n.tag][1].slice(n._endIndex))},LiveRange.prototype.insertBefore=function(e){var t=e.firstChild;t&&(this._start.parentNode.insertBefore(e,this._start),this._ensureTag(t),this._insertEntries(t,0,0,this._removeEntries(this._start,0,0,this._startIndex)))},LiveRange.prototype.insertAfter=function(e){var t=e.lastChild;t&&(this._end.parentNode.insertBefore(e,this._end.nextSibling),this._ensureTag(t),this._insertEntries(t,1,t[this.tag][1].length,this._removeEntries(this._end,1,this._endIndex+1)))},LiveRange.prototype.extract=function(){if(this._startIndex>0&&this._start[this.tag][0][this._startIndex-1]._end===this._end)return null;var e=this._start.previousSibling,t=this._end.nextSibling,n=this._start.parentNode;this._startIndex>0&&(this._ensureTag(t),this._insertEntries(t,0,0,this._removeEntries(this._start,0,0,this._startIndex))),this._endIndex<this._end[this.tag][1].length-1&&(this._ensureTag(e),this._insertEntries(e,1,e[this.tag][1].length,this._removeEntries(this._end,1,this._endIndex+1)));for(var i,o=document.createDocumentFragment();i=e?e.nextSibling:n.firstChild,i&&i!==t;)o.appendChild(i);return o},LiveRange.prototype.findParent=function(e){var t=o(this.tag,this._end,this._endIndex);return t?t:e?null:LiveRange.findRange(this.tag,this.containerNode())},LiveRange.findRange=function(e,t){var n=o(e,t);return n?n:t.parentNode?LiveRange.findRange(e,t.parentNode):null};var o=function(e,t,n){if(n===void 0&&(n=-1),t[e]&&t[e][1].length>n+1)return t[e][1][n+1];for(var i=t.nextSibling;i;){var n=0,o=i[e]&&i[e][0];if(o&&o.length){var s=o[0];i=s._end,n=s._endIndex+1}if(i[e]&&i[e][1].length>n)return i[e][1][n];i=i.nextSibling}return null}}(),function(){var e,t=[],n=function(){return!1},i=function(){return!0},o=function(e){var t=e.stopPropagation,o=e.preventDefault;e.isPropagationStopped=n,e.isImmediatePropagationStopped=n,e.isDefaultPrevented=n,e.stopPropagation=function(){e.isPropagationStopped=i,t?t.call(e):e.cancelBubble=!0},e.preventDefault=function(){e.isDefaultPrevented=i,o?o.call(e):e.returnValue=!1},e.stopImmediatePropagation=function(){e.stopPropagation(),e.isImmediatePropagationStopped=i};var s=e.type;if(void 0===e.metaKey&&(e.metaKey=e.ctrlKey),/^key/.test(s))null==e.which&&(e.which=null!=e.charCode?e.charCode:e.keyCode);else if(/^(?:mouse|contextmenu)|click/.test(s)&&(!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),!e.which&&void 0!==e.button)){var r=e.button;e.which=1&r?1:2&r?3:4&r?2:0}return e},s=function(e){e=o(e),_.each(t,function(t){t.types[e.type]&&(!t._checkIECompliance||e.currentTarget["_uevents_test_eventtype_"+e.type])&&t.handler.call(null,e)})},r=function(){return e||(e=document.addEventListener?new UniversalEventListener._impl.w3c(s):new UniversalEventListener._impl.ie(s)),e},a={};UniversalEventListener=function(e,n){this.handler=e,this.types={},this.impl=r(),this._checkIECompliance=n,t.push(this)},_.extend(UniversalEventListener.prototype,{addType:function(e){this.types[e]||(this.types[e]=!0,a[e]=(a[e]||0)+1,1===a[e]&&this.impl.addType(e))},removeType:function(e){this.types[e]&&(delete this.types[e],a[e]--,a[e]||this.impl.removeType(e))},installHandler:function(e,t){1===e.nodeType&&(this.impl.installHandler(e,t),this._checkIECompliance&&(e["_uevents_test_eventtype_"+t]=e,e.firstChild&&_.each(e.getElementsByTagName("*"),function(e){e["_uevents_test_eventtype_"+t]=e})))},destroy:function(){var e=this;t=_.without(t,e),_.each(_.keys(e.types),function(t){e.removeType(t)})}})}(),function(){var e=0,t=1,n=2;UniversalEventListener._impl=UniversalEventListener._impl||{},UniversalEventListener._impl.w3c=function(t){this.deliver=t,this.typeCounts={},this.boundHandler=_.bind(this.handler,this),this.boundCapturer=_.bind(this.capturer,this),this.focusBlurMode="onfocusin"in document.createElement("DIV")?e:n,this.simulateMouseEnterLeave=!window.opera},_.extend(UniversalEventListener._impl.w3c.prototype,{addType:function(e){this._listen(this._expandEventType(e))},removeType:function(e){this._unlisten(this._expandEventType(e))},installHandler:function(){},_expandEventType:function(e){var i=[e];return this.focusBlurMode===t?"focus"===e?i.push("focusin"):"blur"===e&&i.push("focusout"):this.focusBlurMode===n&&("focusin"===e?i.push("focus"):"focusout"===e&&i.push("blur")),this.simulateMouseEnterLeave&&("mouseenter"===e?i.push("mouseover"):"mouseleave"===e&&i.push("mouseout")),i},_listen:function(e){var t=this;_.each(e,function(e){1===(t.typeCounts[e]=(t.typeCounts[e]||0)+1)&&document.addEventListener(e,t.boundCapturer,!0)})},_unlisten:function(e){var t=this;_.each(e,function(e){--t.typeCounts[e]||document.removeEventListener(e,t.boundCapturer,!0)})},capturer:function(e){3===e.target.nodeType&&(e.target=e.target.parentNode);var t=e.type,n=e.bubbles,i=e.target;i.addEventListener(t,this.boundHandler,!1);var o;if(n){o=[];for(var s=i.parentNode;s;s=s.parentNode)s.addEventListener(t,this.boundHandler,!1),o.push(s)}setTimeout(function(){i.removeEventListener(t,this.boundHandler,!1),n&&_.each(o,function(e){e.removeEventListener(t,this.boundHandler,!1)})},0)},handler:function(e){var i=function(e,t,n,i,o){var s=document.createEvent("UIEvents");s.initUIEvent(e,n,i,window,o),s.synthetic=!0,t.dispatchEvent(s)};if(e.currentTarget===e.target&&(this.focusBlurMode===t?"focusin"===e.type?i("focus",e.target,!1):"focusout"===e.type&&i("blur",e.target,!1):this.focusBlurMode===n&&("focus"===e.type?i("focusin",e.target,!0):"blur"===e.type&&i("focusout",e.target,!0))),this.focusBlurMode===t){if(("focus"===e.type||"blur"===e.type)&&!e.synthetic)return}else if(this.focusBlurMode===n&&("focusin"===e.type||"focusout"===e.type)&&!e.synthetic)return;(!this.simulateMouseEnterLeave||"mouseenter"!==e.type&&"mouseleave"!==e.type||e.synthetic)&&(this.deliver(e),!this.simulateMouseEnterLeave||e.relatedTarget&&(e.currentTarget===e.relatedTarget||DomUtils.elementContains(e.currentTarget,e.relatedTarget))||("mouseover"===e.type?i("mouseenter",e.currentTarget,!1):"mouseout"===e.type&&i("mouseleave",e.currentTarget,!1)))}})}(),function(){UniversalEventListener._impl=UniversalEventListener._impl||{},UniversalEventListener._impl.ie=function(e){var t=this;this.deliver=e,this.curriedHandler=function(){t.handler.call(this,t)},document.attachEvent("ondatasetcomplete",function(){var e=window.event,t=e&&e.srcElement;e.synthetic&&t&&"FORM"===t.nodeName&&e.returnValue!==!1&&t.submit()})},_.extend(UniversalEventListener._impl.ie.prototype,{addType:function(){},removeType:function(){},installHandler:function(e,t){var n="on"+t;if(1===e.nodeType){this._install(e,n);for(var i=e.getElementsByTagName("*"),o=0,s=i.length;s>o;o++)this._install(i[o],n)}},_install:function(e,t){var n=[t];"onfocus"===t?n.push("onfocusin"):"onblur"===t?n.push("onfocusout"):"onchange"===t?("INPUT"!==e.nodeName||"checkbox"!==e.type&&"radio"!==e.type||(n=["onpropertychange"]),n.push("oncellchange")):"onsubmit"===t&&n.push(e,"ondatasetcomplete");for(var i=0;n.length>i;i++)e[n[i]]=this.curriedHandler},handler:function(e){var t=function(e,t){var n=document.createEventObject();return n.synthetic=!0,t.fireEvent(e,n),n.returnValue},n=window.event,i=n.type,o=n.srcElement||document;if(n.target=o,1===this.nodeType){n.currentTarget=this;var s=this;if(s!==o||n.synthetic||("focusin"===i?t("onfocus",s):"focusout"===i?t("onblur",s):"change"===i?t("oncellchange",s):"propertychange"===i?"checked"===n.propertyName&&t("oncellchange",s):"submit"===i&&t("ondatasetcomplete",s)),("focus"===i||"blur"===n.type||"change"===n.type||"submit"===n.type)&&!n.synthetic)return"submit"===n.type&&(n.returnValue=!1),void 0;"cellchange"===i&&n.synthetic&&(i=n.type="change"),"datasetcomplete"===i&&n.synthetic&&(i=n.type="submit"),e.deliver(n)}}})}(),function(){Spark={},Spark._currentRenderer=function(){var e=null;return{get:function(){return e},withValue:function(t,n){var i=e;e=t;try{return n()}finally{e=i}}}}(),Spark._TAG="_spark_"+Random.id(),Spark._ANNOTATION_NOTIFY="notify",Spark._ANNOTATION_DATA="data",Spark._ANNOTATION_ISOLATE="isolate",Spark._ANNOTATION_EVENTS="events",Spark._ANNOTATION_WATCH="watch",Spark._ANNOTATION_LABEL="label",Spark._ANNOTATION_LANDMARK="landmark",Spark._ANNOTATION_LIST="list",Spark._ANNOTATION_LIST_ITEM="item",Spark._checkIECompliance=!1,Spark._globalPreserves={};var e=function(e,t,n,i){var o=new LiveRange(Spark._TAG,t,n,i);return o.type=e,o},t=function(e,t){for(var n=LiveRange.findRange(Spark._TAG,t);n&&n.type!==e;)n=n.findParent();return n},n=function(e,t){do t=t.findParent();while(t&&t.type!==e);return t},i=function(e,t){for(var n=new LiveRange(Spark._TAG,e,t,!0),i=n;i;i=i.findParent())i.type===Spark._ANNOTATION_WATCH&&i.notify();n.destroy()},o=!1,s=function(e){var t=o;o=!0;try{return e()}finally{o=t}};Spark._Renderer=function(){this.annotations={},this._branchNotes={},this.currentBranch=this.newLabelStack(),this.landmarkRanges=[],this.pc=new l},_.extend(Spark._Renderer.prototype,{annotate:function(t,n,i){if("function"!=typeof i){var o=i;i=function(e){e&&_.extend(e,o)}}var s=(n||"")+":"+Random.id();return this.annotations[s]=function(t,o){if(!t||!n)return i(null),void 0;var s=e(n,t,o);i(s)},"<$"+s+">"+t+"</$"+s+">"},newLabelStack:function(){var e=[this._branchNotes];return{pushLabel:function(t){var n=e[e.length-1],i="_"+t;e.push(n[i]=n[i]||{})},popLabel:function(){e.pop()},getNotes:function(){var t=e[e.length-1];return t},mark:function(t){for(var n=e.length-1;n>=0&&!e[n][t];n--)e[n][t]=!0}}},materialize:function(e){var t=this,n=Spark._currentRenderer.withValue(t,e);n=t.annotate(n);var i,o={},s=function(e){for(var t=e.firstChild;t;){var n=t.nextSibling;if(8===t.nodeType){var i=o[t.nodeValue];if(i===!1)throw Error("Spark HTML fragments may only be used once. Second use in "+DomUtils.fragmentToHtml(e));i&&(o[t.nodeValue]=!1,DomUtils.wrapFragmentForContainer(i,t.parentNode),t.parentNode.replaceChild(i,t))}else 1===t.nodeType&&s(t);t=n}},r=[[]],l=[],c=/<(\/?)\$([^<>]+)>|<|[^<]+/g;c.lastIndex=0;for(var u;u=c.exec(n);){var d=!u[1],p=u[2],h=t.annotations[p];if(h===!1)throw Error("Spark HTML fragments may be used only once. Second use of: "+DomUtils.fragmentToHtml(o[p]));if(h)if(d)l.push(p),r.push([]);else{var f=l.pop();if(f!==p)throw Error("Range mismatch: "+f+" / "+p);var m=DomUtils.htmlToFragment(r.pop().join(""));if(s(m),m.firstChild||m.appendChild(document.createComment("empty")),h(m.firstChild,m.lastChild),t.annotations[p]=!1,!l.length){i=m;break}o[p]=m,r[r.length-1].push("<!--"+p+"-->")}else r[r.length-1].push(u[0])}return a(i,t.landmarkRanges),t.landmarkRanges=[],_.each(t.annotations,function(e){e&&e()}),t.annotations={},_.each(DomUtils.findAll(i,"[value], textarea, select"),function(e){e._sparkOriginalRenderedValue=[DomUtils.getElementValue(e)]}),_.each(DomUtils.findAll(i,"input[type=checkbox], input[type=radio]"),function(e){e._sparkOriginalRenderedChecked=[!!e.checked]}),i}});var r=function(e){return function(){var t=Spark._currentRenderer.get(),n=_.toArray(arguments);return t?(n.push(t),e.apply(null,n)):n.pop()}},a=function(e,t){var o=new LiveRange(Spark._TAG,e),s=!1;o.finalize=function(){s=!0},Deps.afterFlush(function(){if(!s){if(!DomUtils.isInDocument(o.firstNode())){for(var e=o.firstNode();e.parentNode;)e=e.parentNode;if(!e._protect)return Spark.finalize(e),void 0}_.each(t,function(e){e.isPreservedConstant||e.rendered.call(e.landmark)});for(var r=o;r=n(Spark._ANNOTATION_LANDMARK,r);)r.rendered.call(r.landmark);i(o.firstNode(),o.lastNode()),o.destroy()}})};Spark.render=function(e){var t=new Spark._Renderer,n=t.materialize(e);return n};var l=function(){this.roots=[],this.regionPreservations=[]};_.extend(l.prototype,{addRoot:function(e,t,n,i){var o=this;o.roots.push({context:i,preserve:e,fromRange:t,toRange:n})},addConstantRegion:function(e,t){var n=this;n.regionPreservations.push({type:"region",fromStart:e.firstNode(),fromEnd:e.lastNode(),newRange:t})},computePreservations:function(e,t){var n=this,i=_.clone(n.regionPreservations),o=function(e,t,n,i,o){e=e||t.containerNode();var s=DomUtils.findAllClipped(e,i,t.firstNode(),t.lastNode());_.each(s,function(e){var t=n(e);t&&o(e,t)})};_.each(n.roots,function(e){e.fromNodesByLabel={},_.each(e.preserve,function(t,n){e.fromNodesByLabel[n]={},o(e.context,e.fromRange,t,n,function(t,i){e.fromNodesByLabel[n][i]=t})})});var s=new LiveRange(Spark._TAG,t.firstNode(),t.lastNode()),r=document.createDocumentFragment();r.appendChild(document.createComment(""));var a=s.replaceContents(r),l=new LiveRange(Spark._TAG,a);e.insertBefore(a),_.each(n.roots,function(e){_.each(e.preserve,function(t,n){o(e.context,e.toRange,t,n,function(t,o){var s=e.fromNodesByLabel[n][o];s&&(i.push({type:"node",from:s,to:t}),e.fromNodesByLabel[n][o]=null)})})});var c=l.extract();return l.destroy(),s.replaceContents(c),s.destroy(),i}}),Spark.renderToRange=function(e,t){var n=e.firstNode();if(n&&n.parentNode){var i=new Spark._Renderer,o=function(e,t){var n=i.newLabelStack();e.visit(function(e,i){i.type===Spark._ANNOTATION_LABEL?e?n.pushLabel(i.label):n.popLabel():i.type===Spark._ANNOTATION_LANDMARK&&e&&t(i,n.getNotes())})};o(e,function(e,t){t.originalRange=e});var r=DomUtils.findAllClipped(e.containerNode(),"input[type=radio]",e.firstNode(),e.lastNode());_.each(r,function(e){e._currentChecked=[!!e.checked]});var a=i.materialize(t);DomUtils.wrapFragmentForContainer(a,e.containerNode());var l=new LiveRange(Spark._TAG,a),c=i.pc;o(l,function(e,t){t.originalRange&&(e.constant&&c.addConstantRegion(t.originalRange,e),c.addRoot(e.preserve,t.originalRange,e))});for(var u=e;(u=u.findParent())&&u.firstNode().parentNode;)u.type===Spark._ANNOTATION_LANDMARK,u&&c.addRoot(u.preserve,e,l,u.containerNode());c.addRoot(Spark._globalPreserves,e,l);var d=c.computePreservations(e,l);l.destroy();var p={};s(function(){e.operate(function(e,t){Spark.finalize(e,t),Spark._patch(e.parentNode,a,e.previousSibling,t.nextSibling,d,p)})}),_.each(p.regionPreservations,function(e){e.isPreservedConstant=!0})}},Spark.finalize=function(e,t){if(!e.parentNode&&11!==e.nodeType){var n=document.createDocumentFragment();n.appendChild(e),e=n,t=null}var i=new LiveRange(Spark._TAG,e,t);i.visit(function(e,t){e&&t.finalize&&t.finalize()}),i.destroy(!0)},Spark.setDataContext=r(function(e,t,n){return n.annotate(t,Spark._ANNOTATION_DATA,{data:e})}),Spark.getDataContext=function(e){var n=t(Spark._ANNOTATION_DATA,e);return n&&n.data};var c=null,u=function(){return c||(c=new UniversalEventListener(function(e){if(!o){for(var i=[],s=t(Spark._ANNOTATION_EVENTS,e.currentTarget);s;)i.push(s),s=n(Spark._ANNOTATION_EVENTS,s);_.each(i,function(t){t.handler(e)})}},Spark._checkIECompliance)),c};Spark.attachEvents=r(function(e,t,i){var o=u(),s={};_.each(e,function(e,t){"function"==typeof e&&(e=[e]);var n=t.split(/,\s+/);_.each(n,function(t){var n=t.split(/\s+/);if(0!==n.length){var i=n.shift(),o=n.join(" ");s[i]=s[i]||[],_.each(e,function(e){s[i].push({selector:o,callback:e})})}})});var r=_.keys(s),a=function(e){_.each(r,function(t){for(var n=e.firstNode(),i=e.lastNode().nextSibling;n&&n!==i;n=n.nextSibling)o.installHandler(n,t)})};t=i.annotate(t,Spark._ANNOTATION_WATCH,{notify:function(){a(this)}});var l=!1;return t=i.annotate(t,Spark._ANNOTATION_EVENTS,function(e){e&&(_.each(r,function(e){o.addType(e)}),a(e),e.finalize=function(){l=!0},e.handler=function(t){for(var i=s[t.type]||[],o=0;i.length>o;o++){if(l||t.isImmediatePropagationStopped())return;var r=i[o],a=r.callback,c=r.selector;if(c){if(!DomUtils.matchesSelectorClipped(t.currentTarget,e.containerNode(),c,e.firstNode(),e.lastNode()))continue}else if(t.currentTarget!==t.target)continue;var u=Spark.getDataContext(t.currentTarget)||{},d=n(Spark._ANNOTATION_LANDMARK,e),p=d&&d.landmark,h=a.call(u,t,p);h===!1&&(t.stopImmediatePropagation(),t.preventDefault())}})})}),Spark.isolate=function(e){var t=Spark._currentRenderer.get();if(!t)return e();var n,i,o=!0;return Deps.autorun(function(s){o?(i=t.annotate(e(),Spark._ANNOTATION_ISOLATE,function(e){e?(n=e,n.finalize=function(){s.stop()}):s.stop()}),o=!1):Spark.renderToRange(n,e)}),i};var d,p=function(e,t){_.each(t,function(t,n){void 0===t?delete e[n]:e[n]=t})};d="undefined"!=typeof LocalCollection?function(e){return null===e?e:LocalCollection._idStringify(e)}:function(e){return e},Spark.list=function(t,i,o){o=o||function(){return""};var r={},a={};_.each(["addedBefore","removed","movedBefore","changed"],function(e){a[e]=function(){return r[e].apply(null,arguments)}});var l=new OrderedDict(d);_.extend(r,{addedBefore:function(e,t,n){var i=EJSON.clone(t);i._id=e;var o={doc:i,liveRange:null};l.putBefore(e,o,n)}});var c,u=t.observeChanges(a),h=Spark._currentRenderer.get(),f=h?_.bind(h.annotate,h):function(e){return e},m=function(e){return t.getTransform&&t.getTransform()?t.getTransform()(EJSON.clone(e)):e},g="";l.empty()?g=o():l.forEach(function(e){g+=f(i(m(e.doc)),Spark._ANNOTATION_LIST_ITEM,function(t){e.liveRange=t})});var v=!1,b=function(){u.stop(),v=!0};g=f(g,Spark._ANNOTATION_LIST,function(e){e?(c=e,c.finalize=b):b()}),h||b();var y=function(){for(var e=c;e=n(Spark._ANNOTATION_LANDMARK,e);)e.rendered.call(e.landmark)},w=function(e){Deps.afterFlush(function(){v||s(e)})};return _.extend(r,{addedBefore:function(t,n,o){w(function(){var s=EJSON.clone(n);s._id=t;var r=Spark.render(_.bind(i,null,m(s)));DomUtils.wrapFragmentForContainer(r,c.containerNode());var a=e(Spark._ANNOTATION_LIST_ITEM,r);l.empty()?Spark.finalize(c.replaceContents(r)):null===o?l.lastValue().liveRange.insertAfter(r):l.get(o).liveRange.insertBefore(r),l.putBefore(t,{doc:s,liveRange:a},o)})},removed:function(e){w(function(){if(l.first()===l.last()){var t=Spark.render(o);DomUtils.wrapFragmentForContainer(t,c.containerNode()),Spark.finalize(c.replaceContents(t))}else Spark.finalize(l.get(e).liveRange.extract());l.remove(e),y()})},movedBefore:function(e,t){w(function(){var n=l.get(e).liveRange.extract();null===t?l.lastValue().liveRange.insertAfter(n):l.get(t).liveRange.insertBefore(n),l.moveBefore(e,t),y()})},changed:function(e,t){w(function(){var n=l.get(e);if(!n)throw Error("Unknown id for changed: "+e);p(n.doc,t),Spark.renderToRange(n.liveRange,_.bind(i,null,m(n.doc)))})}}),g};var h=1;Spark.Landmark=function(){this.id=h++,this._range=null},_.extend(Spark.Landmark.prototype,{firstNode:function(){return this._range.firstNode()},lastNode:function(){return this._range.lastNode()},find:function(e){var t=this._range;return DomUtils.findClipped(t.containerNode(),e,t.firstNode(),t.lastNode())},findAll:function(e){var t=this._range;return DomUtils.findAllClipped(t.containerNode(),e,t.firstNode(),t.lastNode())},hasDom:function(){return!!this._range}}),Spark.UNIQUE_LABEL=["UNIQUE_LABEL"],Spark.labelBranch=function(e,t){var n=Spark._currentRenderer.get();if(!n||null===e)return t();e===Spark.UNIQUE_LABEL&&(e=Random.id()),n.currentBranch.pushLabel(e);var i=t(),o=n.currentBranch.getNotes().occupied;return n.currentBranch.popLabel(),o?n.annotate(i,Spark._ANNOTATION_LABEL,{label:e}):i},Spark.createLandmark=function(e,t){var n=Spark._currentRenderer.get();if(!n){var i=new Spark.Landmark;e.created&&e.created.call(i);var o=t(i);return e.destroyed&&e.destroyed.call(i),o}var s={};_.isArray(e.preserve)?_.each(e.preserve,function(e){s[e]=!0}):s=e.preserve||{};for(var r in s)"function"!=typeof s[r]&&(s[r]=function(){return!0});n.currentBranch.mark("occupied");var i,a=n.currentBranch.getNotes();if(a.originalRange){if(a.originalRange.superceded)throw Error("Can't create second landmark in same branch");a.originalRange.superceded=!0,i=a.originalRange.landmark}else i=new Spark.Landmark,e.created&&Deps.nonreactive(function(){e.created.call(i)});a.landmark=i;var o=t(i);return n.annotate(o,Spark._ANNOTATION_LANDMARK,function(t){return t?(_.extend(t,{preserve:s,constant:!!e.constant,rendered:e.rendered||function(){},destroyed:e.destroyed||function(){},landmark:i,finalize:function(){this.superceded||(this.landmark._range=null,this.destroyed.call(this.landmark))}}),i._range=t,n.landmarkRanges.push(t),void 0):(e.destroyed&&e.destroyed.call(i),void 0)})},Spark._getEnclosingLandmark=function(e){var n=t(Spark._ANNOTATION_LANDMARK,e);return n?n.landmark:null}}(),function(){Spark._patch=function(e,t,n,i,o,s){var r=function(e,t){LiveRange.transplantTag(Spark._TAG,e,t)},a=new Spark._Patcher(e,t,n,i),l=function(e,t,n,i){for(var o=t?t.nextSibling:e.firstChild;o&&o!==n;o=o.nextSibling)i(o)!==!1&&o.firstChild&&l(o,null,null,i)};s=s||{};var c=s.regionPreservations=s.regionPreservations||[],u=null;return l(t,null,null,function(e){var t=_.find(o,function(t){return"region"===t.type&&t.newRange.firstNode()===e})||_.find(o,function(t){return"node"===t.type&&t.to===e});if(t){var n="region"===t.type?t.fromStart:t.from;if(!u||0>DomUtils.compareElementIndex(u,n))if("region"===t.type)a.match(t.fromStart,t.newRange.firstNode(),r,!0)&&(a.skipToSiblings(t.fromEnd,t.newRange.lastNode()),LiveRange.transplantRange(t.fromStart,t.fromEnd,t.newRange),c.push(t.newRange));else if("node"===t.type&&a.match(n,e,r))return u=n,(n.firstChild||e.firstChild)&&"TEXTAREA"!==n.nodeName&&"SELECT"!==n.nodeName&&Spark._patch(n,e,null,null,o),!1}return!0}),a.finish(),s},Spark._Patcher=function(e,t,n,i){this.tgtParent=e,this.srcParent=t,this.tgtBefore=n,this.tgtAfter=i,this.lastKeptTgtNode=null,this.lastKeptSrcNode=null},Spark._Patcher.prototype.match=function(e,t,n,i){var o=this.lastKeptTgtNode,s=this.lastKeptSrcNode,r=e,a=t;if(!r!=!a)return!1;var l=!o,c=!r;if(!l){for(;!(o.parentNode===this.tgtParent||r&&DomUtils.elementContains(o.parentNode,r));)this._replaceNodes(o,null,s,null),o=o.parentNode,s=s.parentNode;if(this.lastKeptTgtNode=o,this.lastKeptSrcNode=s,!c&&(DomUtils.elementContains(s,a)||s.parentNode!==this.srcParent&&!DomUtils.elementContains(s.parentNode,a)))return!1}if(c)this._replaceNodes(o,null,s,null,this.tgtParent,this.srcParent);else{if(!i&&r.nodeName!==a.nodeName)return!1;for(var u=r.parentNode,d=a.parentNode;u!==(l?this.tgtParent:o.parentNode);u=u.parentNode,d=d.parentNode){if(d===(l?this.srcParent:s.parentNode))return!1;if(u.nodeName!==d.nodeName)return!1}if(d!==(l?this.srcParent:s.parentNode))return!1;for(var p=!0;;){if(p&&i||(1===r.nodeType&&Spark._Patcher._copyAttributes(r,a),n&&n(r,a)),p=!1,(l?this.tgtParent:o.parentNode)===r.parentNode){this._replaceNodes(o,r,s,a);break}this._replaceNodes(null,r,null,a),r=r.parentNode,a=a.parentNode}}return this.lastKeptTgtNode=e,this.lastKeptSrcNode=t,!0},Spark._Patcher.prototype.skipToSiblings=function(e,t){var n=this.lastKeptTgtNode,i=this.lastKeptSrcNode;return n&&n.parentNode===e.parentNode?i&&i.parentNode===t.parentNode?(this.lastKeptTgtNode=e,this.lastKeptSrcNode=t,!0):!1:!1},Spark._Patcher.prototype.finish=function(){return this.match(null,null)},Spark._Patcher.prototype._replaceNodes=function(e,t,n,i,o,s){var r=o||(e||t).parentNode,a=s||(n||i).parentNode;r===this.tgtParent&&(e=e||this.tgtBefore,t=t||this.tgtAfter),a===this.srcParent&&(n=n||this.srcBefore,i=i||this.srcAfter);for(var l;(l=e?e.nextSibling:r.firstChild)&&l!==t;)r.removeChild(l);for(var c;(c=n?n.nextSibling:a.firstChild)&&c!==i;)r.insertBefore(c,t||null)},Spark._Patcher._copyAttributes=function(e,t){var n=t.attributes,i=e.attributes,o=e===document.activeElement;e.style.cssText&&(e.style.cssText="");var s=!1,r=null;if("INPUT"===e.nodeName&&(s="radio"===e.type,s||"checkbox"===e.type)){var a=!!e._sparkOriginalRenderedChecked&&e._sparkOriginalRenderedChecked[0],l=!!t._sparkOriginalRenderedChecked&&t._sparkOriginalRenderedChecked[0],c=e._currentChecked?e._currentChecked[0]:e.checked;a===l?r=c:(r=l,e._sparkOriginalRenderedChecked=[r])}for(var u=i.length-1;u>=0;u--){var d=i[u];if(d.specified){var p=d.name;if(i[p]&&"id"!==p&&"type"!==p&&(!s||"name"!==p)&&"value"!==p&&"src"!==p){var h=e[p];(!h||"object"!=typeof h&&!/^jQuery/.test(p))&&e.removeAttributeNode(d)}}}if(e.mergeAttributes){var f=t._sparkOriginalRenderedValue;t.removeAttribute("_sparkOriginalRenderedValue"),e.mergeAttributes(t),f&&(t._sparkOriginalRenderedValue=f),t.name&&(e.name=t.name)}else for(var u=0,m=n.length;m>u;u++){var g=n.item(u);if(g.specified){var p=g.name.toLowerCase(),v=g.value+"";if("type"===p);else if("checked"===p);else if("style"===p)e.style.cssText=t.style.cssText;else if("class"===p)e.className=t.className;else if("value"===p);else if("src"===p)t.src!==e.src&&(e.src=t.src);else try{e.setAttribute(p,v)}catch(b){throw Error("Error copying attribute '"+p+"': "+b)}}}var _=function(e){return e._sparkOriginalRenderedValue?e._sparkOriginalRenderedValue[0]:null},y=_(t),w=_(e),x=DomUtils.getElementValue(e);if("SELECT"===e.nodeName){for(;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.insertBefore(t.firstChild,null);DomUtils.setElementValue(e,x)}y===w||x!==y&&o||(x!==y&&DomUtils.setElementValue(e,y),e._sparkOriginalRenderedValue=[y]),null!==r&&(e.checked!==r&&(e.checked=r),e.defaultChecked=r,r?e.setAttribute("checked","checked"):e.removeAttribute("checked"))}}(),function(){Meteor.render=function(e){return Spark.render(function(){return Spark.isolate("function"==typeof e?e:function(){return e+""})})},Meteor.renderList=function(e,t,n){return Spark.render(function(){return Spark.list(e,function(e){return Spark.labelBranch(e._id||null,function(){return Spark.isolate(_.bind(t,null,e))})},function(){return n?Spark.isolate(n):""})})}}(),function(){Spark._labelFromIdOrName=function(e){var t=null;if(1===e.nodeType)if(e.getAttribute("id"))t="#"+e.getAttribute("id");else if(e.getAttribute("name"))for(t=e.getAttribute("name"),"INPUT"!==e.nodeName||"radio"!==e.type&&"checkbox"!==e.type||!e.value||(t=t+":"+e.value);e.parentNode&&1===e.parentNode.nodeType;){if(e=e.parentNode,e.id){t="#"+e.id+"/"+t;break}e.getAttribute("name")&&(t=e.getAttribute("name")+"/"+t)}return t}}(),function(){Meteor._partials={},Meteor._hook_handlebars=function(){Meteor._hook_handlebars=function(){};var e=Handlebars._default_helpers.each;Handlebars._default_helpers.each=function(t,n){return t&&"observeChanges"in t?Spark.list(t,function(e){return Spark.labelBranch(e&&e._id||Spark.UNIQUE_LABEL,function(){var t=Spark.isolate(_.bind(n.fn,null,e));return Spark.setDataContext(e,t)})},function(){return n.inverse?Spark.isolate(n.inverse):""}):e.call(this,t,n)},_.extend(Handlebars._default_helpers,{isolate:function(e){var t=this;return Spark.isolate(function(){return e.fn(t)})},constant:function(e){var t=this;return Spark.createLandmark({constant:!0},function(){return e.fn(t)})}})};var e={},t=function(t){var n=e[t.id]||(e[t.id]={find:function(e){if(!t.hasDom())throw Error("Template not in DOM");return t.find(e)},findAll:function(e){if(!t.hasDom())throw Error("Template not in DOM");return t.findAll(e)}});return n.firstNode=t.hasDom()?t.firstNode():null,n.lastNode=t.hasDom()?t.lastNode():null,n};Meteor._template_decl_methods={_tmpl_data:null,events:function(e){var t=this._tmpl_data.events=this._tmpl_data.events||{};
_.each(e,function(e,n){t[n]=t[n]||[],t[n].push(e)})},preserve:function(e){var t=this._tmpl_data.preserve=this._tmpl_data.preserve||{};_.isArray(e)?_.each(e,function(e){t[e]=!0}):_.extend(t,e)},helpers:function(e){var t=this._tmpl_data.helpers=this._tmpl_data.helpers||{};for(var n in e)t[n]=e[n]}},Meteor._def_template=function(n,i){Meteor._hook_handlebars(),window.Template=window.Template||{};var o=function(s){var r=n&&Template[n]||{},a=r._tmpl_data||{},l=Spark.labelBranch("Template."+n,function(){var l=Spark.createLandmark({preserve:a.preserve||{},created:function(){var e=t(this);e.data=s,r.created&&r.created.call(e)},rendered:function(){var e=t(this);e.data=s,r.rendered&&r.rendered.call(e)},destroyed:function(){r.destroyed&&r.destroyed.call(t(this)),delete e[this.id]}},function(){var e=Spark.isolate(function(){return i(s,{helpers:_.extend({},o,a.helpers||{}),partials:Meteor._partials,name:n})}),l=function(e){var n={};return _.each(e,function(e,i){"function"==typeof e&&(e=[e]),n[i]=_.map(e,function(e){return function(n,i){return e.call(this,n,t(i))}})}),n},c=r.events!==Meteor._template_decl_methods.events?r.events:a.events;return r.events&&(e=Spark.attachEvents(l(c),e)),e});return l=Spark.setDataContext(s,l)});return l};if(_.extend(o,Handlebars.helpers),n){if(Template[n])throw Error("There are multiple templates named '"+n+"'. Each template needs a unique name.");Template[n]=o,_.extend(o,Meteor._template_decl_methods),o._tmpl_data={},Meteor._partials[n]=o}return o}}(),function(){var e=[],t="loaded"===document.readyState||"complete"==document.readyState,n=function(){for(t=!0;e.length;)e.shift()()};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("load",n)),Meteor.startup=function(n){var i=!document.addEventListener&&document.documentElement.doScroll;if(i&&window===top){try{i("left")}catch(o){return setTimeout(function(){Meteor.startup(n)},50),void 0}n()}else t?n():e.push(n)}}(),function(){Handlebars={},Handlebars.json_ast_to_func=function(e){return function(t,n){return Handlebars.evaluate(e,t,n)}},Handlebars._default_helpers={"with":function(e,t){return!e||e instanceof Array&&!e.length?t.inverse(this):t.fn(e)},each:function(e,t){var n=this;return e&&e.length>0?_.map(e,function(e){var n=e&&e._id||("string"==typeof e?e:null)||Spark.UNIQUE_LABEL;return Spark.labelBranch(n,function(){return t.fn(e)})}).join(""):Spark.labelBranch("else",function(){return t.inverse(n)})},"if":function(e,t){return!e||e instanceof Array&&!e.length?t.inverse(this):t.fn(this)},unless:function(e,t){return!e||e instanceof Array&&!e.length?t.fn(this):t.inverse(this)}},Handlebars.registerHelper=function(e,t){if(e in Handlebars._default_helpers)throw Error("There is already a helper '"+e+"'");Handlebars._default_helpers[e]=t},Handlebars._escape=function(){var e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","&":"&amp;"},t=function(t){return e[t]};return function(e){return e.replace(/[&<>"'`]/g,t)}}(),Handlebars._defaultThis=function(){return this}(),Handlebars.evaluate=function(e,t,n){n=n||{};var i=_.extend({},Handlebars._default_helpers);_.extend(i,n.helpers||{});var o=n.partials||{},s=function(e,t){if("object"!=typeof t)return t;for(var n=0;t[0]>n;n++){if(!e.parent)throw Error("Too many '..' segments");e=e.parent}if(1===t.length)return e.data;var o=!1;""===t[1]&&(t.splice(1,1),o=!0);var s,r=e.data;if(0===t[0]&&i.hasOwnProperty(t[1])&&!o)s=i[t[1]];else{if(!s instanceof Object&&function(){}[t[1]]!==void 0&&!o)throw Error("Can't call a helper '"+t[1]+"' because "+"it is a built-in function property in JavaScript");s=e.data&&e.data[t[1]]}for(var n=2;t.length>n;n++){if("function"==typeof s&&(s=s.call(r),r=s),void 0===s||null===s){s="";break}s=s[t[n]]}return"function"==typeof s?_.bind(s,r):s},r=function(e,t,n,i){n=n||{},t=t.slice(0);var o=t[t.length-1],r={};"object"!=typeof o||o instanceof Array||_.each(t.pop(),function(t,n){var i=s(e,t);r[n]="function"==typeof i?i():i});for(var a=function(t,n){for(var i=t.slice(1),o=0;i.length>o;o++)"function"==typeof i[o]&&(i[o]=i[o]());return n&&i.push(n),t[0].apply(e.data,i)},l=Array(t.length),c=0;t.length>c;c++)l[c]=s(e,t[c]);if("function"!=typeof l[0])return l[0];if(i&&l.length>1){var u=l[1];"function"==typeof u&&(u=a(l.slice(1),{hash:r})),l=[l[0],u],n.hash={}}else n.hash=r;return a(l,n)},a=function(e,t,n){var i,s=[],l=function(e){return"string"==typeof e?e:null===e?"null":void 0===e?"":""+e},c=function(e,t){return function(n){return(n||Handlebars._defaultThis)===(t||Handlebars._defaultThis)?e(n):Spark.setDataContext(n,e(n))}},u=function(e){return e instanceof Handlebars.SafeString?""+e:Handlebars._escape(l(e))},d=function(){return(n?n+".":"")+i},p=function(e,t){return Spark.labelBranch(e+"@"+d(),t)};return _.each(t,function(t,n){if(i=n,"string"==typeof t)s.push(t);else if("{"===t[0])s.push(p(t[1],function(){return u(r(e,t[1]))}));else if("!"===t[0])s.push(p(t[1],function(){return l(r(e,t[1]||""))}));else if("#"===t[0]){var h=d(),f=c(function(n){return a({parent:e,data:n},t[2],h)},e.data);f.fn=f,f.inverse=c(function(n){return a({parent:e,data:n},t[3]||[],h)},e.data);var m=p(t[1],function(){return l(r(e,t[1],f,!0))});s.push(m)}else{if(">"!==t[0])throw Error("bad element in template");var g=t[1];if(!(g in o))throw Error("No such template '"+g+"'");var m=p(g,function(){return l(o[g](e.data))});s.push(m)}}),s.join("")},l=(n.name||"")+"#";return a({data:t,parent:null},e,l)},Handlebars.SafeString=function(e){this.string=e},Handlebars.SafeString.prototype.toString=function(){return""+this.string}}(),function(){Meteor.is_client=Meteor.isClient,Meteor.is_server=Meteor.isServer,Meteor.autosubscribe=Deps.autorun,Meteor.flush=Deps.flush,Meteor.autorun=Deps.autorun,Deps.depend=function(e){return e.depend()},Meteor.uuid=function(){for(var e="0123456789abcdef",t=[],n=0;36>n;n++)t[n]=Random.choice(e);t[14]="4",t[19]=e.substr(8|3&parseInt(t[19],16),1),t[8]=t[13]=t[18]=t[23]="-";var i=t.join("");return i}}(),function(){var e="input textarea button select option".split(" "),t=_.map(e,function(e){return e.replace(/^.*$/,"$&[id], $&[name]")}).join(", ");Spark._globalPreserves[t]=Spark._labelFromIdOrName}(),function(){(function(){function e(t,n){if("function"==typeof t)return e("*",t);if("function"==typeof n)for(var o=new i(t),s=1;arguments.length>s;++s)e.callbacks.push(o.middleware(arguments[s]));else"string"==typeof t?e.show(t,n):e.start(t)}function t(t){f.pathname+f.search!=t.canonicalPath&&(e.stop(),t.unhandled=!0,window.location=t.canonicalPath)}function n(e,t){"/"==e[0]&&0!=e.indexOf(h)&&(e=h+e);var n=e.indexOf("?");this.canonicalPath=e,this.path=e.replace(h,"")||"/",this.title=document.title,this.state=t||{},this.state.path=e,this.querystring=~n?e.slice(n+1):"",this.pathname=~n?e.slice(0,n):e,this.params=[]}function i(e,t){t=t||{},this.path=e,this.method="GET",this.regexp=o(e,this.keys=[],t.sensitive,t.strict)}function o(e,t,n,i){return e instanceof RegExp?e:(e instanceof Array&&(e="("+e.join("|")+")"),e=e.concat(i?"":"/?").replace(/\/\(/g,"(?:/").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(e,n,i,o,s,r){return t.push({name:o,optional:!!r}),n=n||"",""+(r?"":n)+"(?:"+(r?n:"")+(i||"")+(s||i&&"([^/.]+?)"||"([^/]+?)")+")"+(r||"")}).replace(/([\/.])/g,"\\$1").replace(/\*/g,"(.*)"),RegExp("^"+e+"$",n?"":"i"))}function s(t){if(t.state){var n=t.state.path;e.replace(n,t.state)}}function r(t){if(a(t)&&!(t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){for(var n=t.target||t.srcElement;n&&"A"!=n.nodeName;)n=n.parentNode;if(n&&"A"==n.nodeName){var i=n.href,o=n.pathname+n.search;if("/"!==o[0]&&(o="/"+o),!n.hash&&"#"!=n.getAttribute("href")&&l(i)){var s=o;o=o.replace(h,""),h&&s==o||(t.preventDefault?t.preventDefault():t.returnValue=!1,e.show(s))}}}}function a(e){return e=e||window.event,null==e.which?0==e.button:1==e.which}function l(e){var t=f.protocol+"//"+f.hostname;return f.port&&(t+=":"+f.port),0==e.indexOf(t)}function c(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function u(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)}var d,p=!0,h="",f=history.location||window.location;e.callbacks=[],e.base=function(e){return 0==arguments.length?h:(h=e,void 0)},e.start=function(t){t=t||{},d||(d=!0,!1===t.dispatch&&(p=!1),!1!==t.popstate&&c(window,"popstate",s),!1!==t.click&&c(document,"click",r),p&&e.replace(f.pathname+f.search,null,!0,p))},e.stop=function(){d=!1,u(document,"click",r),u(window,"popstate",s)},e.show=function(t,i,o){var s=new n(t,i);return!1!==o&&e.dispatch(s),s.unhandled||s.pushState(),s},e.replace=function(t,i,o,s){var r=new n(t,i);return r.init=o,null==s&&(s=!0),s&&e.dispatch(r),r.save(),r},e.dispatch=function(n){function i(){var s=e.callbacks[o++];return s?(s(n,i),void 0):t(n)}var o=0;i()},e.Context=n,n.prototype.pushState=function(){history.pushState(this.state,this.title,this.canonicalPath)},n.prototype.save=function(){history.replaceState(this.state,this.title,this.canonicalPath)},e.Route=i,i.prototype.middleware=function(e){var t=this;return function(n,i){return t.match(n.path,n.params)?e(n,i):(i(),void 0)}},i.prototype.match=function(e,t){var n=this.keys,i=e.indexOf("?"),o=~i?e.slice(0,i):e,s=this.regexp.exec(o);if(!s)return!1;for(var r=1,a=s.length;a>r;++r){var l=n[r-1],c="string"==typeof s[r]?decodeURIComponent(s[r]):s[r];l?t[l.name]=void 0!==t[l.name]?t[l.name]:c:t.push(c)}return!0},"undefined"==typeof module?window.page=e:module.exports=e})()}(),function(){(function(){var e=function(){this._page=null,this._autorunHandle=null,this._filters={},this._activeFilters=[],this._pageDeps=new Deps.Dependency,this.namedRoutes={}};e.prototype._setPageFn=function(e,t){var n,i=this;i._autorunHandle&&i._autorunHandle.stop(),i._autorunHandle=Deps.autorun(function(){if(n=i.beforeRouting(t),void 0==n||n!==!1){var o=[];for(key in t.params)o.push(t.params[key]);var s=i._page;i._page=i._applyFilters(e.apply(t,o)),s!==i._page&&i._pageDeps.changed()}})},e.prototype.add=function(e,t){var n=this;_.isObject(e)&&!_.isRegExp(e)?_.each(e,function(e,t){n.add(t,e)}):((!_.isObject(t)||_.isFunction(t))&&(t={to:t}),!t.as&&_.isString(t.to)&&(t.as=t.to),t.as&&n._setUpNamedRoute(t.as,e),page(e,_.bind(n._setPageFn,n,function(){return t.and&&t.and.apply(this,arguments),_.isFunction(t.to)?t.to.apply(this,arguments):t.to})))},e.prototype._setUpNamedRoute=function(e,t){var n=this,i=e+"Path",o=e+"Url";if(!n.namedRoutes[e]){var s=new Meteor.Router.Route(t);n.namedRoutes[e]=s,n[i]=_.bind(s.pathWithContext,s),n[o]=function(){var e=n[i].apply(n,arguments);return Meteor.absoluteUrl(e.substring(1))},"undefined"!=typeof Handlebars&&(Handlebars.registerHelper(i,_.bind(n[i],n)),Handlebars.registerHelper(o,_.bind(n[o],n)))}},e.prototype.page=function(){return Deps.depend(this._pageDeps),this._page},e.prototype.to=function(e){if("/"!==e[0]){var t=this.namedRoutes[e];if(!t)throw"That named route does not exist!";var n=Array.prototype.slice.call(arguments,1);e=t.pathWithContext.apply(t,n)}page(e)},e.prototype.filters=function(e){_.extend(this._filters,e)},e.prototype.filter=function(e,t){var n=this;return _.isObject(e)?_.each(e,function(e,t){n.filter(t,e)}):(t=t||{},t.name=e,t.only&&!_.isArray(t.only)&&(t.only=[t.only]),t.except&&!_.isArray(t.except)&&(t.except=[t.except]),n._activeFilters.push(t),void 0)},e.prototype.resetFilters=function(){this._activeFilters=[]},e.prototype._applyFilters=function(e){var t=this;return _.reduce(t._activeFilters,function(e,n){return t._applyFilter(e,n)},e)},e.prototype._applyFilter=function(e,t){var n=!0;return t.only?n=_.include(t.only,e):t.except&&(n=!_.include(t.except,e)),n?this._filters[t.name](e):e},e.prototype.beforeRouting=function(){},Meteor.Router=new e,Meteor.startup(function(){page()})})()}(),function(){"undefined"!=typeof Handlebars&&(Handlebars.registerHelper("renderPage",function(e){return _.isString(e)||(e=Meteor.Router.page()),Template[e]?new Handlebars.SafeString(Template[e](this)):void 0}),Handlebars.registerHelper("currentPage",function(){return Meteor.Router.page()}))}(),function(){(function(){function e(e,t,n,i){return e instanceof RegExp?e:(e instanceof Array&&(e="("+e.join("|")+")"),e=e.concat(i?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(e,n,i,o,s,r){return t.push({name:o,optional:!!r}),n=n||"",""+(r?"":n)+"(?:"+(r?n:"")+(i||"")+(s||i&&"([^/.]+?)"||"([^/]+?)")+")"+(r||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),RegExp("^"+e+"$",n?"":"i"))}Meteor.Router.Route=function(t,n,i){i=i||{},this.path=t,this.method=n,this.regexp=e(t,this.keys=[],i.sensitive,i.strict)},Meteor.Router.Route.prototype.match=function(e,t,n){var i,o,s,r;if(this.method&&this.method.toUpperCase()!==t)return!1;if(i=this.keys,o=e.indexOf("?"),s=~o?e.slice(0,o):e,r=this.regexp.exec(s),!r)return!1;for(var a=1,l=r.length;l>a;++a){var c=i[a-1],u="string"==typeof r[a]?decodeURIComponent(r[a]):r[a];c?n[c.name]=void 0!==n[c.name]?n[c.name]:u:n.push(u)}return!0},Meteor.Router.Route.prototype.pathWithContext=function(e){var t,n=this,i=n.path,o=arguments;t=n.regexp.exec(n.path).slice(1),e=e||{};var s=function(t,n){var s,r=RegExp(t,"g"),a=t.replace(":","");s=_.isObject(e)?e[a]:o[n],i=i.replace(r,s||"")};return _.each(t,s),i}})()}(),function(){window.localStorage||(window.localStorage=function(){if($.browser.msie){var e=document.createElement("span");e.style.behavior='url("#default#userData")',e.id="localstorage-polyfill-helper",e.style.display="none",document.getElementsByTagName("head")[0].appendChild(e);var t="localStorage";return e.load(t),{setItem:function(n,i){e.setAttribute(n,i),e.save(t)},removeItem:function(n){e.removeAttribute(n),e.save(t)},getItem:function(n){return e.load(t),e.getAttribute(n)}}}return Meteor._debug("You are running a browser with no localStorage or userData support. Logging in from one tab will not cause another tab to be logged in."),{_data:{},setItem:function(e,t){this._data[e]=t},removeItem:function(e){delete this._data[e]},getItem:function(e){return this._data[e]}}}())}(),function(){"undefined"==typeof Accounts&&(Accounts={});var e;e=window.location.hash.match(/^\#\/reset-password\/(.*)$/),e&&(Accounts._preventAutoLogin=!0,Accounts._resetPasswordToken=e[1],window.location.hash=""),e=window.location.hash.match(/^\#\/verify-email\/(.*)$/),e&&(Accounts._preventAutoLogin=!0,Accounts._verifyEmailToken=e[1],window.location.hash=""),e=window.location.hash.match(/^\#\/enroll-account\/(.*)$/),e&&(Accounts._preventAutoLogin=!0,Accounts._enrollAccountToken=e[1],window.location.hash="")}(),function(){"undefined"==typeof Accounts&&(Accounts={}),Accounts._options||(Accounts._options={}),Accounts.config=function(e){var t=["sendVerificationEmail","forbidClientAccountCreation"];_.each(_.keys(e),function(e){if(!_.contains(t,e))throw Error("Accounts.config: Invalid key: "+e)}),_.each(t,function(t){if(t in e){if(t in Accounts._options)throw Error("Can't set `"+t+"` more than once");Accounts._options[t]=e[t]}})},Meteor.users=new Meteor.Collection("users",{_preventAutopublish:!0}),Accounts.loginServiceConfiguration=new Meteor.Collection("meteor_accounts_loginServiceConfiguration",{_preventAutopublish:!0}),Accounts.ConfigError=function(e){this.message=e},Accounts.ConfigError.prototype=Error(),Accounts.ConfigError.prototype.name="Accounts.ConfigError",Accounts.LoginCancelledError=function(e){this.message=e},Accounts.LoginCancelledError.numericError=145546287,Accounts.LoginCancelledError.prototype=Error(),Accounts.LoginCancelledError.prototype.name="Accounts.LoginCancelledError"}(),function(){Meteor.userId=function(){return Meteor.default_connection.userId()};var e=!1,t=new Deps.Dependency;Accounts._setLoggingIn=function(n){e!==n&&(e=n,t.changed())},Meteor.loggingIn=function(){return t.depend(),e},Meteor.user=function(){var e=Meteor.userId();return e?Meteor.users.findOne(e):null},Accounts.callLoginMethod=function(e){e=_.extend({methodName:"login",methodArguments:[],_suppressLoggingIn:!1},e),_.each(["validateResult","userCallback"],function(t){e[t]||(e[t]=function(){})});var t=!1,n=function(n,i){Meteor.default_connection.onReconnect=!n&&i&&i.token?function(){t=!0,Accounts.callLoginMethod({methodArguments:[{resume:i.token}],_suppressLoggingIn:!0,userCallback:function(t){t&&Accounts._makeClientLoggedOut(),e.userCallback(t)}})}:null},i=function(n,i){if(!t){if(Accounts._setLoggingIn(!1),n||!i)return n=n||Error("No result from call to "+e.methodName),e.userCallback(n),void 0;try{e.validateResult(i)}catch(o){return e.userCallback(o),void 0}Accounts._makeClientLoggedIn(i.id,i.token),e.userCallback()}};e._suppressLoggingIn||Accounts._setLoggingIn(!0),Meteor.apply(e.methodName,e.methodArguments,{wait:!0,onResultReceived:n},i)},Accounts._makeClientLoggedOut=function(){Accounts._unstoreLoginToken(),Meteor.default_connection.setUserId(null),Meteor.default_connection.onReconnect=null},Accounts._makeClientLoggedIn=function(e,t){Accounts._storeLoginToken(e,t),Meteor.default_connection.setUserId(e)},Meteor.logout=function(e){Meteor.apply("logout",[],{wait:!0},function(t){t?e&&e(t):(Accounts._makeClientLoggedOut(),e&&e())})},"undefined"!=typeof Handlebars&&(Handlebars.registerHelper("currentUser",function(){return Meteor.user()}),Handlebars.registerHelper("loggingIn",function(){return Meteor.loggingIn()}));var n=!1,i=new Deps.Dependency;Meteor.subscribe("meteor.loginServiceConfiguration",function(){n=!0,i.changed()}),Accounts.loginServicesConfigured=function(){return n?!0:(i.depend(),!1)}}(),function(){var e="Meteor.loginToken",t="Meteor.userId";if(Accounts._isolateLoginTokenForTest=function(){e+=Random.id(),t+=Random.id()},Accounts._storeLoginToken=function(n,i){localStorage.setItem(t,n),localStorage.setItem(e,i),Accounts._lastLoginTokenWhenPolled=i},Accounts._unstoreLoginToken=function(){localStorage.removeItem(t),localStorage.removeItem(e),Accounts._lastLoginTokenWhenPolled=null},Accounts._storedLoginToken=function(){return localStorage.getItem(e)},Accounts._storedUserId=function(){return localStorage.getItem(t)},Meteor.loginWithToken=function(e,t){Accounts.callLoginMethod({methodArguments:[{resume:e}],userCallback:t})},!Accounts._preventAutoLogin){var n=Accounts._storedLoginToken();if(n){var i=Accounts._storedUserId();i&&Meteor.default_connection.setUserId(i),Meteor.loginWithToken(n,function(e){e&&(Meteor._debug("Error logging in with token: "+e),Accounts._makeClientLoggedOut())})}}Accounts._lastLoginTokenWhenPolled=n,Accounts._pollStoredLoginToken=function(){if(!Accounts._preventAutoLogin){var e=Accounts._storedLoginToken();Accounts._lastLoginTokenWhenPolled!=e&&(e?Meteor.loginWithToken(e):Meteor.logout()),Accounts._lastLoginTokenWhenPolled=e}},Accounts._enableAutoLogin=function(){Accounts._preventAutoLogin=!1,Accounts._pollStoredLoginToken()},setInterval(Accounts._pollStoredLoginToken,3e3)}(),function(){Meteor._srp===void 0&&(Meteor._srp={}),Meteor._srp.BigInteger=function(){function e(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function t(){return new e(null)}function n(e,t,n,i,o,s){for(var r=16383&t,a=t>>14;--s>=0;){var l=16383&this[e],c=this[e++]>>14,u=a*l+c*r;l=r*l+((16383&u)<<14)+n[i]+o,o=(l>>28)+(u>>14)+a*c,n[i++]=268435455&l}return o}function i(e){return Zt.charAt(e)}function o(e,t){var n=en[e.charCodeAt(t)];return null==n?-1:n}function s(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function r(e){this.t=1,this.s=0>e?-1:0,e>0?this[0]=e:-1>e?this[0]=e+DV:this.t=0}function a(e){var n=t();return n.fromInt(e),n}function l(t,n){var i;if(16==n)i=4;else if(8==n)i=3;else if(256==n)i=8;else if(2==n)i=1;else if(32==n)i=5;else{if(4!=n)return this.fromRadix(t,n),void 0;i=2}this.t=0,this.s=0;for(var s=t.length,r=!1,a=0;--s>=0;){var l=8==i?255&t[s]:o(t,s);0>l?"-"==t.charAt(s)&&(r=!0):(r=!1,0==a?this[this.t++]=l:a+i>this.DB?(this[this.t-1]|=(l&(1<<this.DB-a)-1)<<a,this[this.t++]=l>>this.DB-a):this[this.t-1]|=l<<a,a+=i,a>=this.DB&&(a-=this.DB))}8==i&&0!=(128&t[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),r&&e.ZERO.subTo(this,this)}function c(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function u(e){if(0>this.s)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,o=(1<<t)-1,s=!1,r="",a=this.t,l=this.DB-a*this.DB%t;if(a-->0)for(this.DB>l&&(n=this[a]>>l)>0&&(s=!0,r=i(n));a>=0;)t>l?(n=(this[a]&(1<<l)-1)<<t-l,n|=this[--a]>>(l+=this.DB-t)):(n=this[a]>>(l-=t)&o,0>=l&&(l+=this.DB,--a)),n>0&&(s=!0),s&&(r+=i(n));return s?r:"0"}function d(){var n=t();return e.ZERO.subTo(this,n),n}function p(){return 0>this.s?this.negate():this}function h(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(t=n-e.t,0!=t)return t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0}function f(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function m(){return 0>=this.t?0:this.DB*(this.t-1)+f(this[this.t-1]^this.s&this.DM)}function g(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function v(e,t){for(var n=e;this.t>n;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function b(e,t){var n,i=e%this.DB,o=this.DB-i,s=(1<<o)-1,r=Math.floor(e/this.DB),a=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)t[n+r+1]=this[n]>>o|a,a=(this[n]&s)<<i;for(n=r-1;n>=0;--n)t[n]=0;t[r]=a,t.t=this.t+r+1,t.s=this.s,t.clamp()}function _(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)return t.t=0,void 0;var i=e%this.DB,o=this.DB-i,s=(1<<i)-1;t[0]=this[n]>>i;for(var r=n+1;this.t>r;++r)t[r-n-1]|=(this[r]&s)<<o,t[r-n]=this[r]>>i;i>0&&(t[this.t-n-1]|=(this.s&s)<<o),t.t=this.t-n,t.clamp()}function y(e,t){for(var n=0,i=0,o=Math.min(e.t,this.t);o>n;)i+=this[n]-e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;this.t>n;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;e.t>n;)i-=e[n],t[n++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=0>i?-1:0,-1>i?t[n++]=this.DV+i:i>0&&(t[n++]=i),t.t=n,t.clamp()}function w(t,n){var i=this.abs(),o=t.abs(),s=i.t;for(n.t=s+o.t;--s>=0;)n[s]=0;for(s=0;o.t>s;++s)n[s+i.t]=i.am(0,o[s],n,s,0,i.t);n.s=0,n.clamp(),this.s!=t.s&&e.ZERO.subTo(n,n)}function x(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;t.t-1>n;++n){var i=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,i,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function C(n,i,o){var s=n.abs();if(!(0>=s.t)){var r=this.abs();if(r.t<s.t)return null!=i&&i.fromInt(0),null!=o&&this.copyTo(o),void 0;null==o&&(o=t());var a=t(),l=this.s,c=n.s,u=this.DB-f(s[s.t-1]);u>0?(s.lShiftTo(u,a),r.lShiftTo(u,o)):(s.copyTo(a),r.copyTo(o));var d=a.t,p=a[d-1];if(0!=p){var h=p*(1<<this.F1)+(d>1?a[d-2]>>this.F2:0),m=this.FV/h,g=(1<<this.F1)/h,v=1<<this.F2,b=o.t,_=b-d,y=null==i?t():i;for(a.dlShiftTo(_,y),o.compareTo(y)>=0&&(o[o.t++]=1,o.subTo(y,o)),e.ONE.dlShiftTo(d,y),y.subTo(a,a);d>a.t;)a[a.t++]=0;for(;--_>=0;){var w=o[--b]==p?this.DM:Math.floor(o[b]*m+(o[b-1]+v)*g);if(w>(o[b]+=a.am(0,w,o,_,0,d)))for(a.dlShiftTo(_,y),o.subTo(y,o);o[b]<--w;)o.subTo(y,o)}null!=i&&(o.drShiftTo(d,i),l!=c&&e.ZERO.subTo(i,i)),o.t=d,o.clamp(),u>0&&o.rShiftTo(u,o),0>l&&e.ZERO.subTo(o,o)}}}function k(n){var i=t();return this.abs().divRemTo(n,null,i),0>this.s&&i.compareTo(e.ZERO)>0&&n.subTo(i,i),i}function T(e){this.m=e}function M(e){return 0>e.s||e.compareTo(this.m)>=0?e.mod(this.m):e}function S(e){return e}function I(e){e.divRemTo(this.m,null,e)}function D(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function A(e,t){e.squareTo(t),this.reduce(t)}function E(){if(1>this.t)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return t=15&t*(2-(15&e)*t),t=255&t*(2-(255&e)*t),t=65535&t*(2-(65535&(65535&e)*t)),t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function P(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function $(n){var i=t();return n.abs().dlShiftTo(this.m.t,i),i.divRemTo(this.m,null,i),0>n.s&&i.compareTo(e.ZERO)>0&&this.m.subTo(i,i),i}function L(e){var n=t();return e.copyTo(n),this.reduce(n),n}function N(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;this.m.t>t;++t){var n=32767&e[t],i=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,i,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function O(e,t){e.squareTo(t),this.reduce(t)}function B(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function R(){return 0==(this.t>0?1&this[0]:this.s)}function H(n,i){if(n>4294967295||1>n)return e.ONE;var o=t(),s=t(),r=i.convert(this),a=f(n)-1;for(r.copyTo(o);--a>=0;)if(i.sqrTo(o,s),(n&1<<a)>0)i.mulTo(s,r,o);else{var l=o;o=s,s=l}return i.revert(o)}function j(e,t){var n;return n=256>e||t.isEven()?new T(t):new P(t),this.exp(e,n)}function U(){var e=t();return this.copyTo(e),e}function F(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function z(){return 0==this.t?this.s:this[0]<<24>>24}function W(){return 0==this.t?this.s:this[0]<<16>>16}function q(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function V(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1}function Y(e){if(null==e&&(e=10),0==this.signum()||2>e||e>36)return"0";var n=this.chunkSize(e),i=Math.pow(e,n),o=a(i),s=t(),r=t(),l="";for(this.divRemTo(o,s,r);s.signum()>0;)l=(i+r.intValue()).toString(e).substr(1)+l,s.divRemTo(o,s,r);return r.intValue().toString(e)+l}function J(t,n){this.fromInt(0),null==n&&(n=10);for(var i=this.chunkSize(n),s=Math.pow(n,i),r=!1,a=0,l=0,c=0;t.length>c;++c){var u=o(t,c);0>u?"-"==t.charAt(c)&&0==this.signum()&&(r=!0):(l=n*l+u,++a>=i&&(this.dMultiply(s),this.dAddOffset(l,0),a=0,l=0))}a>0&&(this.dMultiply(Math.pow(n,a)),this.dAddOffset(l,0)),r&&e.ZERO.subTo(this,this)}function Q(t,n,i){if("number"==typeof n)if(2>t)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(e.ONE.shiftLeft(t-1),it,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(e.ONE.shiftLeft(t-1),this);else{var o=[],s=7&t;o.length=(t>>3)+1,n.nextBytes(o),s>0?o[0]&=(1<<s)-1:o[0]=0,this.fromString(o,256)}}function G(){var e=this.t,t=[];t[0]=this.s;var n,i=this.DB-e*this.DB%8,o=0;if(e-->0)for(this.DB>i&&(n=this[e]>>i)!=(this.s&this.DM)>>i&&(t[o++]=n|this.s<<this.DB-i);e>=0;)8>i?(n=(this[e]&(1<<i)-1)<<8-i,n|=this[--e]>>(i+=this.DB-8)):(n=255&this[e]>>(i-=8),0>=i&&(i+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==o&&(128&this.s)!=(128&n)&&++o,(o>0||n!=this.s)&&(t[o++]=n);return t}function K(e){return 0==this.compareTo(e)}function X(e){return 0>this.compareTo(e)?this:e}function Z(e){return this.compareTo(e)>0?this:e}function et(e,t,n){var i,o,s=Math.min(e.t,this.t);for(i=0;s>i;++i)n[i]=t(this[i],e[i]);if(e.t<this.t){for(o=e.s&this.DM,i=s;this.t>i;++i)n[i]=t(this[i],o);n.t=this.t}else{for(o=this.s&this.DM,i=s;e.t>i;++i)n[i]=t(o,e[i]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()}function tt(e,t){return e&t}function nt(e){var n=t();return this.bitwiseTo(e,tt,n),n}function it(e,t){return e|t}function ot(e){var n=t();return this.bitwiseTo(e,it,n),n}function st(e,t){return e^t}function rt(e){var n=t();return this.bitwiseTo(e,st,n),n}function at(e,t){return e&~t}function lt(e){var n=t();return this.bitwiseTo(e,at,n),n}function ct(){for(var e=t(),n=0;this.t>n;++n)e[n]=this.DM&~this[n];return e.t=this.t,e.s=~this.s,e}function ut(e){var n=t();return 0>e?this.rShiftTo(-e,n):this.lShiftTo(e,n),n}function dt(e){var n=t();return 0>e?this.lShiftTo(-e,n):this.rShiftTo(e,n),n}function pt(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function ht(){for(var e=0;this.t>e;++e)if(0!=this[e])return e*this.DB+pt(this[e]);return 0>this.s?this.t*this.DB:-1}function ft(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function mt(){for(var e=0,t=this.s&this.DM,n=0;this.t>n;++n)e+=ft(this[n]^t);return e}function gt(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)}function vt(t,n){var i=e.ONE.shiftLeft(t);return this.bitwiseTo(i,n,i),i}function bt(e){return this.changeBit(e,it)}function _t(e){return this.changeBit(e,at)}function yt(e){return this.changeBit(e,st)}function wt(e,t){for(var n=0,i=0,o=Math.min(e.t,this.t);o>n;)i+=this[n]+e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;this.t>n;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;e.t>n;)i+=e[n],t[n++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=0>i?-1:0,i>0?t[n++]=i:-1>i&&(t[n++]=this.DV+i),t.t=n,t.clamp()}function xt(e){var n=t();return this.addTo(e,n),n}function Ct(e){var n=t();return this.subTo(e,n),n}function kt(e){var n=t();return this.multiplyTo(e,n),n}function Tt(e){var n=t();return this.divRemTo(e,n,null),n}function Mt(e){var n=t();return this.divRemTo(e,null,n),n}function St(e){var n=t(),i=t();return this.divRemTo(e,n,i),[n,i]}function It(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function Dt(e,t){for(;t>=this.t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}function At(){}function Et(e){return e}function Pt(e,t,n){e.multiplyTo(t,n)}function $t(e,t){e.squareTo(t)}function Lt(e){return this.exp(e,new At)}function Nt(e,t,n){var i=Math.min(this.t+e.t,t);for(n.s=0,n.t=i;i>0;)n[--i]=0;var o;for(o=n.t-this.t;o>i;++i)n[i+this.t]=this.am(0,e[i],n,i,0,this.t);for(o=Math.min(e.t,t);o>i;++i)this.am(0,e[i],n,i,0,t-i);n.clamp()}function Ot(e,t,n){--t;var i=n.t=this.t+e.t-t;for(n.s=0;--i>=0;)n[i]=0;for(i=Math.max(t-this.t,0);e.t>i;++i)n[this.t+i-t]=this.am(t-i,e[i],n,0,0,this.t+i-t);n.clamp(),n.drShiftTo(1,n)}function Bt(n){this.r2=t(),this.q3=t(),e.ONE.dlShiftTo(2*n.t,this.r2),this.mu=this.r2.divide(n),this.m=n}function Rt(e){if(0>e.s||e.t>2*this.m.t)return e.mod(this.m);if(0>e.compareTo(this.m))return e;var n=t();return e.copyTo(n),this.reduce(n),n}function Ht(e){return e}function jt(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>e.compareTo(this.r2);)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function Ut(e,t){e.squareTo(t),this.reduce(t)}function Ft(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function zt(e,n){var i,o,s=e.bitLength(),r=a(1);if(0>=s)return r;i=18>s?1:48>s?3:144>s?4:768>s?5:6,o=8>s?new T(n):n.isEven()?new Bt(n):new P(n);var l=[],c=3,u=i-1,d=(1<<i)-1;if(l[1]=o.convert(this),i>1){var p=t();for(o.sqrTo(l[1],p);d>=c;)l[c]=t(),o.mulTo(p,l[c-2],l[c]),c+=2}var h,m,g=e.t-1,v=!0,b=t();for(s=f(e[g])-1;g>=0;){for(s>=u?h=e[g]>>s-u&d:(h=(e[g]&(1<<s+1)-1)<<u-s,g>0&&(h|=e[g-1]>>this.DB+s-u)),c=i;0==(1&h);)h>>=1,--c;if(0>(s-=c)&&(s+=this.DB,--g),v)l[h].copyTo(r),v=!1;else{for(;c>1;)o.sqrTo(r,b),o.sqrTo(b,r),c-=2;c>0?o.sqrTo(r,b):(m=r,r=b,b=m),o.mulTo(b,l[h],r)}for(;g>=0&&0==(e[g]&1<<s);)o.sqrTo(r,b),m=r,r=b,b=m,0>--s&&(s=this.DB-1,--g)}return o.revert(r)}function Wt(e){var t=0>this.s?this.negate():this.clone(),n=0>e.s?e.negate():e.clone();if(0>t.compareTo(n)){var i=t;t=n,n=i}var o=t.getLowestSetBit(),s=n.getLowestSetBit();if(0>s)return t;for(s>o&&(s=o),s>0&&(t.rShiftTo(s,t),n.rShiftTo(s,n));t.signum()>0;)(o=t.getLowestSetBit())>0&&t.rShiftTo(o,t),(o=n.getLowestSetBit())>0&&n.rShiftTo(o,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return s>0&&n.lShiftTo(s,n),n}function qt(e){if(0>=e)return 0;var t=this.DV%e,n=0>this.s?e-1:0;
if(this.t>0)if(0==t)n=this[0]%e;else for(var i=this.t-1;i>=0;--i)n=(t*n+this[i])%e;return n}function Vt(t){var n=t.isEven();if(this.isEven()&&n||0==t.signum())return e.ZERO;for(var i=t.clone(),o=this.clone(),s=a(1),r=a(0),l=a(0),c=a(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),n?(s.isEven()&&r.isEven()||(s.addTo(this,s),r.subTo(t,r)),s.rShiftTo(1,s)):r.isEven()||r.subTo(t,r),r.rShiftTo(1,r);for(;o.isEven();)o.rShiftTo(1,o),n?(l.isEven()&&c.isEven()||(l.addTo(this,l),c.subTo(t,c)),l.rShiftTo(1,l)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);i.compareTo(o)>=0?(i.subTo(o,i),n&&s.subTo(l,s),r.subTo(c,r)):(o.subTo(i,o),n&&l.subTo(s,l),c.subTo(r,c))}return 0!=o.compareTo(e.ONE)?e.ZERO:c.compareTo(t)>=0?c.subtract(t):0>c.signum()?(c.addTo(t,c),0>c.signum()?c.add(t):c):c}function Yt(e){var t,n=this.abs();if(1==n.t&&n[0]<=tn[tn.length-1]){for(t=0;tn.length>t;++t)if(n[0]==tn[t])return!0;return!1}if(n.isEven())return!1;for(t=1;tn.length>t;){for(var i=tn[t],o=t+1;tn.length>o&&nn>i;)i*=tn[o++];for(i=n.modInt(i);o>t;)if(0==i%tn[t++])return!1}return n.millerRabin(e)}function Jt(n){var i=this.subtract(e.ONE),o=i.getLowestSetBit();if(0>=o)return!1;var s=i.shiftRight(o);n=n+1>>1,n>tn.length&&(n=tn.length);for(var r=t(),a=0;n>a;++a){r.fromInt(tn[a]);var l=r.modPow(s,this);if(0!=l.compareTo(e.ONE)&&0!=l.compareTo(i)){for(var c=1;o>c++&&0!=l.compareTo(i);)if(l=l.modPowInt(2,this),0==l.compareTo(e.ONE))return!1;if(0!=l.compareTo(i))return!1}}return!0}var Qt;e.prototype.am=n,Qt=28,e.prototype.DB=Qt,e.prototype.DM=(1<<Qt)-1,e.prototype.DV=1<<Qt;var Gt=52;e.prototype.FV=Math.pow(2,Gt),e.prototype.F1=Gt-Qt,e.prototype.F2=2*Qt-Gt;var Kt,Xt,Zt="0123456789abcdefghijklmnopqrstuvwxyz",en=[];for(Kt="0".charCodeAt(0),Xt=0;9>=Xt;++Xt)en[Kt++]=Xt;for(Kt="a".charCodeAt(0),Xt=10;36>Xt;++Xt)en[Kt++]=Xt;for(Kt="A".charCodeAt(0),Xt=10;36>Xt;++Xt)en[Kt++]=Xt;T.prototype.convert=M,T.prototype.revert=S,T.prototype.reduce=I,T.prototype.mulTo=D,T.prototype.sqrTo=A,P.prototype.convert=$,P.prototype.revert=L,P.prototype.reduce=N,P.prototype.mulTo=B,P.prototype.sqrTo=O,e.prototype.copyTo=s,e.prototype.fromInt=r,e.prototype.fromString=l,e.prototype.clamp=c,e.prototype.dlShiftTo=g,e.prototype.drShiftTo=v,e.prototype.lShiftTo=b,e.prototype.rShiftTo=_,e.prototype.subTo=y,e.prototype.multiplyTo=w,e.prototype.squareTo=x,e.prototype.divRemTo=C,e.prototype.invDigit=E,e.prototype.isEven=R,e.prototype.exp=H,e.prototype.toString=u,e.prototype.negate=d,e.prototype.abs=p,e.prototype.compareTo=h,e.prototype.bitLength=m,e.prototype.mod=k,e.prototype.modPowInt=j,e.ZERO=a(0),e.ONE=a(1),At.prototype.convert=Et,At.prototype.revert=Et,At.prototype.mulTo=Pt,At.prototype.sqrTo=$t,Bt.prototype.convert=Rt,Bt.prototype.revert=Ht,Bt.prototype.reduce=jt,Bt.prototype.mulTo=Ft,Bt.prototype.sqrTo=Ut;var tn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],nn=(1<<26)/tn[tn.length-1];return e.prototype.chunkSize=q,e.prototype.toRadix=Y,e.prototype.fromRadix=J,e.prototype.fromNumber=Q,e.prototype.bitwiseTo=et,e.prototype.changeBit=vt,e.prototype.addTo=wt,e.prototype.dMultiply=It,e.prototype.dAddOffset=Dt,e.prototype.multiplyLowerTo=Nt,e.prototype.multiplyUpperTo=Ot,e.prototype.modInt=qt,e.prototype.millerRabin=Jt,e.prototype.clone=U,e.prototype.intValue=F,e.prototype.byteValue=z,e.prototype.shortValue=W,e.prototype.signum=V,e.prototype.toByteArray=G,e.prototype.equals=K,e.prototype.min=X,e.prototype.max=Z,e.prototype.and=nt,e.prototype.or=ot,e.prototype.xor=rt,e.prototype.andNot=lt,e.prototype.not=ct,e.prototype.shiftLeft=ut,e.prototype.shiftRight=dt,e.prototype.getLowestSetBit=ht,e.prototype.bitCount=mt,e.prototype.testBit=gt,e.prototype.setBit=bt,e.prototype.clearBit=_t,e.prototype.flipBit=yt,e.prototype.add=xt,e.prototype.subtract=Ct,e.prototype.multiply=kt,e.prototype.divide=Tt,e.prototype.remainder=Mt,e.prototype.divideAndRemainder=St,e.prototype.modPow=zt,e.prototype.modInverse=Vt,e.prototype.pow=Lt,e.prototype.gcd=Wt,e.prototype.isProbablePrime=Yt,e}()}(),function(){Meteor._srp===void 0&&(Meteor._srp={}),Meteor._srp.SHA256=function(){function e(e){function t(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n}function n(e,t){return e>>>t|e<<32-t}function i(e,t){return e>>>t}function o(e,t,n){return e&t^~e&n}function s(e,t,n){return e&t^e&n^t&n}function r(e){return n(e,2)^n(e,13)^n(e,22)}function a(e){return n(e,6)^n(e,11)^n(e,25)}function l(e){return n(e,7)^n(e,18)^i(e,3)}function c(e){return n(e,17)^n(e,19)^i(e,10)}function u(e,n){var i,u,d,p,h,f,m,g,v,b,_,y,w=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],x=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],C=Array(64);e[n>>5]|=128<<24-n%32,e[(n+64>>9<<4)+15]=n;for(var v=0;e.length>v;v+=16){i=x[0],u=x[1],d=x[2],p=x[3],h=x[4],f=x[5],m=x[6],g=x[7];for(var b=0;64>b;b++)C[b]=16>b?e[b+v]:t(t(t(c(C[b-2]),C[b-7]),l(C[b-15])),C[b-16]),_=t(t(t(t(g,a(h)),o(h,f,m)),w[b]),C[b]),y=t(r(i),s(i,u,d)),g=m,m=f,f=h,h=t(p,_),p=d,d=u,u=i,i=t(_,y);x[0]=t(i,x[0]),x[1]=t(u,x[1]),x[2]=t(d,x[2]),x[3]=t(p,x[3]),x[4]=t(h,x[4]),x[5]=t(f,x[5]),x[6]=t(m,x[6]),x[7]=t(g,x[7])}return x}function d(e){for(var t=[],n=(1<<f)-1,i=0;e.length*f>i;i+=f)t[i>>5]|=(e.charCodeAt(i/f)&n)<<24-i%32;return t}function p(e){for(var t="",n=0;e.length>n;n++){var i=e.charCodeAt(n);128>i?t+=String.fromCharCode(i):i>127&&2048>i?(t+=String.fromCharCode(192|i>>6),t+=String.fromCharCode(128|63&i)):(t+=String.fromCharCode(224|i>>12),t+=String.fromCharCode(128|63&i>>6),t+=String.fromCharCode(128|63&i))}return t}function h(e){for(var t=m?"0123456789ABCDEF":"0123456789abcdef",n="",i=0;4*e.length>i;i++)n+=t.charAt(15&e[i>>2]>>8*(3-i%4)+4)+t.charAt(15&e[i>>2]>>8*(3-i%4));return n}var f=8,m=0;return e=p(e),h(u(d(e),e.length*f))}return e}()}(),function(){Meteor._srp===void 0&&(Meteor._srp={}),Meteor._srp.generateVerifier=function(t,n){var i=e(n),o=n&&n.identity||Random.id(),s=n&&n.salt||Random.id(),r=i.hash(s+i.hash(o+":"+t)),a=new Meteor._srp.BigInteger(r,16),l=i.g.modPow(a,i.N);return{identity:o,salt:s,verifier:l.toString(16)}},Meteor._srp.Client=function(n,i){var o=this;o.params=e(i),o.password=n;var s,r,a=o.params.N,l=o.params.g;if(i&&i.a){if("string"==typeof i.a)s=new Meteor._srp.BigInteger(i.a,16);else{if(!(i.a instanceof Meteor._srp.BigInteger))throw Error("Invalid parameter: a");s=i.a}if(r=l.modPow(s,a),0===r.mod(a))throw Error("Invalid parameter: a: A mod N == 0.")}else for(;!r||0===r.mod(a);)s=t(),r=l.modPow(s,a);o.a=s,o.A=r,o.Astr=r.toString(16)},Meteor._srp.Client.prototype.startExchange=function(){var e=this;return{A:e.Astr}},Meteor._srp.Client.prototype.respondToChallenge=function(e){var t=this,n=t.params.N,i=t.params.g,o=t.params.k,s=t.params.hash;if(t.identity=e.identity,t.salt=e.salt,t.Bstr=e.B,t.B=new Meteor._srp.BigInteger(t.Bstr,16),0===t.B.mod(n))throw Error("Server sent invalid key: B mod N == 0.");var r=new Meteor._srp.BigInteger(s(t.Astr+t.Bstr),16),a=new Meteor._srp.BigInteger(s(t.salt+s(t.identity+":"+t.password)),16),l=o.multiply(i.modPow(a,n)),c=t.a.add(r.multiply(a)),u=t.B.subtract(l).modPow(c,n),d=s(t.Astr+t.Bstr+u.toString(16)),p=s(t.Astr+d+u.toString(16));return t.S=u,t.HAMK=p,{M:d}},Meteor._srp.Client.prototype.verifyConfirmation=function(e){var t=this;return t.HAMK&&e.HAMK===t.HAMK},Meteor._srp.Server=function(n,i){var o=this;o.params=e(i),o.verifier=n;var s,r,a=o.params.N,l=o.params.g,c=o.params.k,u=new Meteor._srp.BigInteger(o.verifier.verifier,16);if(i&&i.b){if("string"==typeof i.b)s=new Meteor._srp.BigInteger(i.b,16);else{if(!(i.b instanceof Meteor._srp.BigInteger))throw Error("Invalid parameter: b");s=i.b}if(r=c.multiply(u).add(l.modPow(s,a)).mod(a),0===r.mod(a))throw Error("Invalid parameter: b: B mod N == 0.")}else for(;!r||0===r.mod(a);)s=t(),r=c.multiply(u).add(l.modPow(s,a)).mod(a);o.b=s,o.B=r,o.Bstr=r.toString(16)},Meteor._srp.Server.prototype.issueChallenge=function(e){var t=this;if(t.Astr=e.A,t.A=new Meteor._srp.BigInteger(t.Astr,16),0===t.A.mod(t.params.N))throw Error("Client sent invalid key: A mod N == 0.");var n=t.params.N,i=t.params.hash,o=new Meteor._srp.BigInteger(i(t.Astr+t.Bstr),16),s=new Meteor._srp.BigInteger(t.verifier.verifier,16),r=t.A.multiply(s.modPow(o,n));return t.S=r.modPow(t.b,n),t.M=i(t.Astr+t.Bstr+t.S.toString(16)),t.HAMK=i(t.Astr+t.M+t.S.toString(16)),{identity:t.verifier.identity,salt:t.verifier.salt,B:t.Bstr}},Meteor._srp.Server.prototype.verifyResponse=function(e){var t=this;return e.M!==t.M?null:{HAMK:t.HAMK}},Meteor._srp._defaults={hash:function(e){return Meteor._srp.SHA256(e).toLowerCase()},N:new Meteor._srp.BigInteger("EEAF0AB9ADB38DD69C33F80AFA8FC5E86072618775FF3C0B9EA2314C9C256576D674DF7496EA81D3383B4813D692C6E0E0D5D8E250B98BE48E495C1D6089DAD15DC7D7B46154D6B6CE8EF4AD69B15D4982559B297BCF1885C529F566660E57EC68EDBC3C05726CC02FD4CBF4976EAA9AFD5138FE8376435B9FC61D2FC0EB06E3",16),g:new Meteor._srp.BigInteger("2")},Meteor._srp._defaults.k=new Meteor._srp.BigInteger(Meteor._srp._defaults.hash(Meteor._srp._defaults.N.toString(16)+Meteor._srp._defaults.g.toString(16)),16);var e=function(e){if(!e)return Meteor._srp._defaults;var t=_.extend({},Meteor._srp._defaults);return _.each(["N","g","k"],function(n){if(e[n])if("string"==typeof e[n])t[n]=new Meteor._srp.BigInteger(e[n],16);else{if(!(e[n]instanceof Meteor._srp.BigInteger))throw Error("Invalid parameter: "+n);t[n]=e[n]}}),e.hash&&(t.hash=function(t){return e.hash(t).toLowerCase()}),!e.k&&(e.N||e.g||e.hash)&&(t.k=t.hash(t.N.toString(16)+t.g.toString(16))),t},t=function(){return new Meteor._srp.BigInteger(Random.hexString(36),16)}}(),function(){Accounts.createUser=function(e,t){if(e=_.clone(e),!e.password)throw Error("Must set options.password");var n=Meteor._srp.generateVerifier(e.password);delete e.password,e.srp=n,Accounts.callLoginMethod({methodName:"createUser",methodArguments:[e],userCallback:t})},Meteor.loginWithPassword=function(e,t,n){var i=new Meteor._srp.Client(t),o=i.startExchange();"string"==typeof e&&(e=-1===e.indexOf("@")?{username:e}:{email:e}),o.user=e,Accounts._setLoggingIn(!0),Meteor.apply("beginPasswordExchange",[o],function(e,t){if(e||!t)return Accounts._setLoggingIn(!1),e=e||Error("No result from call to beginPasswordExchange"),n&&n(e),void 0;var o=i.respondToChallenge(t);Accounts.callLoginMethod({methodArguments:[{srp:o}],validateResult:function(e){if(!i.verifyConfirmation({HAMK:e.HAMK}))throw Error("Server is cheating!")},userCallback:n})})},Accounts.changePassword=function(e,t,n){if(!Meteor.user())return n&&n(Error("Must be logged in to change password.")),void 0;var i=Meteor._srp.generateVerifier(t);if(e){var o=new Meteor._srp.Client(e),s=o.startExchange();s.user={id:Meteor.user()._id},Meteor.apply("beginPasswordExchange",[s],function(e,t){if(e||!t)return n&&n(e||Error("No result from call to beginPasswordExchange")),void 0;var s=o.respondToChallenge(t);s.srp=i,Meteor.apply("changePassword",[s],function(e,t){e||!t?n&&n(e||Error("No result from changePassword.")):o.verifyConfirmation(t)?n&&n():n&&n(Error("Old password verification failed."))})})}else Meteor.apply("changePassword",[{srp:i}],function(e,t){e||!t?n&&n(e||Error("No result from changePassword.")):n&&n()})},Accounts.forgotPassword=function(e,t){if(!e.email)throw Error("Must pass options.email");Meteor.call("forgotPassword",e,t)},Accounts.resetPassword=function(e,t,n){if(!e)throw Error("Need to pass token");if(!t)throw Error("Need to pass newPassword");var i=Meteor._srp.generateVerifier(t);Accounts.callLoginMethod({methodName:"resetPassword",methodArguments:[e,i],userCallback:n})},Accounts.verifyEmail=function(e,t){if(!e)throw Error("Need to pass token");Accounts.callLoginMethod({methodName:"verifyEmail",methodArguments:[e],userCallback:t})}}(),function(){Accounts.password={}}(),function(){PaginatedSubscriptionHandle=function(e){this.perPage=e,this._limit=e,this._limitListeners=new Deps.Dependency,this._loaded=0,this._loadedListeners=new Deps.Dependency},PaginatedSubscriptionHandle.prototype.loaded=function(){return this._loadedListeners.depend(),this._loaded},PaginatedSubscriptionHandle.prototype.limit=function(){return this._limitListeners.depend(),this._limit},PaginatedSubscriptionHandle.prototype.ready=function(){return this.loaded()===this.limit()},PaginatedSubscriptionHandle.prototype.loading=function(){return!this.ready()},PaginatedSubscriptionHandle.prototype.loadNextPage=function(){this._limit+=this.perPage,this._limitListeners.changed()},PaginatedSubscriptionHandle.prototype.done=function(){this._loaded=this._limit,this._loadedListeners.changed()},PaginatedSubscriptionHandle.prototype.reset=function(){this._limit=this.perPage,this._limitListeners.changed()},Meteor.subscribeWithPagination=function(){var e=Array.prototype.slice.call(arguments,0),t=e.pop(),n=new PaginatedSubscriptionHandle(t);return Meteor.autorun(function(){var t=_.map(e,function(e){return _.isFunction(e)?e():e}),i=Meteor.subscribe.apply(this,t.concat([n.limit(),function(){n.done()}]));n.stop=i.stop}),n}}(),function(){(function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Spinner=t()})(this,function(){"use strict";function e(e,t){var n,i=document.createElement(e||"div");for(n in t)i[n]=t[n];return i}function t(e){for(var t=1,n=arguments.length;n>t;t++)e.appendChild(arguments[t]);return e}function n(e,t,n,i){var o=["opacity",t,~~(100*e),n,i].join("-"),s=.01+100*(n/i),r=Math.max(1-(1-e)/t*(100-s),e),a=c.substring(0,c.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return d[o]||(p.insertRule("@"+l+"keyframes "+o+"{"+"0%{opacity:"+r+"}"+s+"%{opacity:"+e+"}"+(s+.01)+"%{opacity:1}"+(s+t)%100+"%{opacity:"+e+"}"+"100%{opacity:"+r+"}"+"}",p.cssRules.length),d[o]=1),o}function i(e,t){var n,i,o=e.style;if(void 0!==o[t])return t;for(t=t.charAt(0).toUpperCase()+t.slice(1),i=0;u.length>i;i++)if(n=u[i]+t,void 0!==o[n])return n}function o(e,t){for(var n in t)e.style[i(e,n)||n]=t[n];return e}function s(e){for(var t=1;arguments.length>t;t++){var n=arguments[t];for(var i in n)void 0===e[i]&&(e[i]=n[i])}return e}function r(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function a(e){return this===void 0?new a(e):(this.opts=s(e||{},a.defaults,h),void 0)}function l(){function n(t,n){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}p.addRule(".spin-vml","behavior:url(#default#VML)"),a.prototype.lines=function(e,i){function s(){return o(n("group",{coordsize:c+" "+c,coordorigin:-l+" "+-l}),{width:c,height:c})}function r(e,r,a){t(d,t(o(s(),{rotation:360/i.lines*e+"deg",left:~~r}),t(o(n("roundrect",{arcsize:i.corners}),{width:l,height:i.width,left:i.radius,top:-i.width>>1,filter:a}),n("fill",{color:i.color,opacity:i.opacity}),n("stroke",{opacity:0}))))}var a,l=i.length+i.width,c=2*l,u=2*-(i.width+i.length)+"px",d=o(s(),{position:"absolute",top:u,left:u});if(i.shadow)for(a=1;i.lines>=a;a++)r(a,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(a=1;i.lines>=a;a++)r(a);return t(e,d)},a.prototype.opacity=function(e,t,n,i){var o=e.firstChild;i=i.shadow&&i.lines||0,o&&o.childNodes.length>t+i&&(o=o.childNodes[t+i],o=o&&o.firstChild,o=o&&o.firstChild,o&&(o.opacity=n))}}var c,u=["webkit","Moz","ms","O"],d={},p=function(){var n=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),h={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};a.defaults={},s(a.prototype,{spin:function(t){this.stop();var n,i,s=this,a=s.opts,l=s.el=o(e(0,{className:a.className}),{position:a.position,width:0,zIndex:a.zIndex}),u=a.radius+a.length+a.width;if(t&&(t.insertBefore(l,t.firstChild||null),i=r(t),n=r(l),o(l,{left:("auto"==a.left?i.x-n.x+(t.offsetWidth>>1):parseInt(a.left,10)+u)+"px",top:("auto"==a.top?i.y-n.y+(t.offsetHeight>>1):parseInt(a.top,10)+u)+"px"})),l.setAttribute("role","progressbar"),s.lines(l,s.opts),!c){var d,p=0,h=(a.lines-1)*(1-a.direction)/2,f=a.fps,m=f/a.speed,g=(1-a.opacity)/(m*a.trail/100),v=m/a.lines;(function b(){p++;for(var e=0;a.lines>e;e++)d=Math.max(1-(p+(a.lines-e)*v)%m*g,a.opacity),s.opacity(l,e*a.direction+h,d,a);s.timeout=s.el&&setTimeout(b,~~(1e3/f))})()}return s},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(i,s){function r(t,n){return o(e(),{position:"absolute",width:s.length+s.width+"px",height:s.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/s.lines*l+s.rotate)+"deg) translate("+s.radius+"px"+",0)",borderRadius:(s.corners*s.width>>1)+"px"})}for(var a,l=0,u=(s.lines-1)*(1-s.direction)/2;s.lines>l;l++)a=o(e(),{position:"absolute",top:1+~(s.width/2)+"px",transform:s.hwaccel?"translate3d(0,0,0)":"",opacity:s.opacity,animation:c&&n(s.opacity,s.trail,u+l*s.direction,s.lines)+" "+1/s.speed+"s linear infinite"}),s.shadow&&t(a,o(r("#000","0 0 4px #000"),{top:"2px"})),t(i,t(a,r(s.color,"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(e,t,n){e.childNodes.length>t&&(e.childNodes[t].style.opacity=n)}});var f=o(e("group"),{behavior:"url(#default#VML)"});return!i(f,"transform")&&f.adj?l():c=i(f,"animation"),a})}(),function(){Meteor._def_template("spinner",Handlebars.json_ast_to_func(['<div id="spinner"></div>']))}(),function(){Template.spinner.rendered=function(){var e={lines:13,length:8,width:3,radius:12,corners:1,rotate:0,direction:1,color:"#000",speed:1.2,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"},t=document.getElementById("spinner");new Spinner(e).spin(t)}}(),function(){!function(e){"use strict";e(function(){e.support.transition=function(){var e=function(){var e,t=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in n)if(void 0!==t.style[e])return n[e]}();return e&&{end:e}}()})}(window.jQuery),!function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function n(){i.trigger("closed").remove()}var i,o=e(this),s=o.attr("data-target");s||(s=o.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),i=e(s),t&&t.preventDefault(),i.length||(i=o.hasClass("alert")?o:o.parent()),i.trigger(t=e.Event("close")),t.isDefaultPrevented()||(i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.on(e.support.transition.end,n):n())};var i=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var i=e(this),o=i.data("alert");o||i.data("alert",o=new n(this)),"string"==typeof t&&o[t].call(i)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.alert.data-api",t,n.prototype.close)}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype.setState=function(e){var t="disabled",n=this.$element,i=n.data(),o=n.is("input")?"val":"html";e+="Text",i.resetText||n.data("resetText",n[o]()),n[o](i[e]||this.options[e]),setTimeout(function(){"loadingText"==e?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var i=e(this),o=i.data("button"),s="object"==typeof n&&n;o||i.data("button",o=new t(this,s)),"toggle"==n?o.toggle():n&&o.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(t){var n=this.getActiveIndex(),i=this;if(!(t>this.$items.length-1||0>t))return this.sliding?this.$element.one("slid",function(){i.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",e(this.$items[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(t,n){var i,o=this.$element.find(".item.active"),s=n||o[t](),r=this.interval,a="next"==t?"left":"right",l="next"==t?"first":"last",c=this;if(this.sliding=!0,r&&this.pause(),s=s.length?s:this.$element.find(".item")[l](),i=e.Event("slide",{relatedTarget:s[0],direction:a}),!s.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=e(c.$indicators.children()[c.getActiveIndex()]);t&&t.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(i),i.isDefaultPrevented())return;s.addClass(t),s[0].offsetWidth,o.addClass(a),s.addClass(a),this.$element.one(e.support.transition.end,function(){s.removeClass([t,a].join(" ")).addClass("active"),o.removeClass(["active",a].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger("slid")},0)})}else{if(this.$element.trigger(i),i.isDefaultPrevented())return;o.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return r&&this.cycle(),this}}};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var i=e(this),o=i.data("carousel"),s=e.extend({},e.fn.carousel.defaults,"object"==typeof n&&n),r="string"==typeof n?n:s.slide;o||i.data("carousel",o=new t(this,s)),"number"==typeof n?o.to(n):r?o[r]():s.interval&&o.pause().cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(t){var n,i,o=e(this),s=e(o.attr("data-target")||(n=o.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),r=e.extend({},s.data(),o.data());s.carousel(r),(i=o.attr("data-slide-to"))&&s.data("carousel").pause().to(i).cycle(),t.preventDefault()})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n,i,o;if(!this.transitioning&&!this.$element.hasClass("in")){if(t=this.dimension(),n=e.camelCase(["scroll",t].join("-")),i=this.$parent&&this.$parent.find("> .accordion-group > .in"),i&&i.length){if(o=i.data("collapse"),o&&o.transitioning)return;i.collapse("hide"),o||i.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][n])}},hide:function(){var t;!this.transitioning&&this.$element.hasClass("in")&&(t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0))},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[null!==e?"addClass":"removeClass"]("collapse"),this},transition:function(t,n,i){var o=this,s=function(){"show"==n.type&&o.reset(),o.transitioning=0,o.$element.trigger(i)};this.$element.trigger(n),n.isDefaultPrevented()||(this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,s):s())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var i=e(this),o=i.data("collapse"),s=e.extend({},e.fn.collapse.defaults,i.data(),"object"==typeof n&&n);o||i.data("collapse",o=new t(this,s)),"string"==typeof n&&o[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n,i=e(this),o=i.attr("data-target")||t.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),s=e(o).data("collapse")?"toggle":i.data();i[e(o).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(o).collapse(s)})}(window.jQuery),!function(e){"use strict";function t(){e(i).each(function(){n(e(this)).removeClass("open")})}function n(t){var n,i=t.attr("data-target");return i||(i=t.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),n=i&&e(i),n&&n.length||(n=t.parent()),n}var i="[data-toggle=dropdown]",o=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};o.prototype={constructor:o,toggle:function(){var i,o,s=e(this);if(!s.is(".disabled, :disabled"))return i=n(s),o=i.hasClass("open"),t(),o||i.toggleClass("open"),s.focus(),!1},keydown:function(t){var o,s,r,a,l;if(/(38|40|27)/.test(t.keyCode)&&(o=e(this),t.preventDefault(),t.stopPropagation(),!o.is(".disabled, :disabled"))){if(r=n(o),a=r.hasClass("open"),!a||a&&27==t.keyCode)return 27==t.which&&r.find(i).focus(),o.click();s=e("[role=menu] li:not(.divider):visible a",r),s.length&&(l=s.index(s.filter(":focus")),38==t.keyCode&&l>0&&l--,40==t.keyCode&&s.length-1>l&&l++,~l||(l=0),s.eq(l).focus())}}};var s=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("dropdown");i||n.data("dropdown",i=new o(this)),"string"==typeof t&&i[t].call(n)})},e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.dropdown.data-api",t).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on(".dropdown-menu",function(e){e.stopPropagation()}).on("click.dropdown.data-api",i,o.prototype.toggle).on("keydown.dropdown.data-api",i+", [role=menu]",o.prototype.keydown)}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault(),t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var n=e.fn.modal;e.fn.modal=function(n){return this.each(function(){var i=e(this),o=i.data("modal"),s=e.extend({},e.fn.modal.defaults,i.data(),"object"==typeof n&&n);o||i.data("modal",o=new t(this,s)),"string"==typeof n?o[n]():s.show&&o.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),i=n.attr("href"),o=e(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),s=o.data("modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},o.data(),n.data());t.preventDefault(),o.modal(s).one("hide",function(){n.focus()})})}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,i){var o,s,r,a,l;for(this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.enabled=!0,r=this.options.trigger.split(" "),l=r.length;l--;)a=r[l],"click"==a?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=a&&(o="hover"==a?"mouseenter":"focus",s="hover"==a?"mouseleave":"blur",this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t
},enter:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);return n.options.delay&&n.options.delay.show?(clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show),void 0):n.show()},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),n.options.delay&&n.options.delay.hide?(n.hoverState="out",this.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide),void 0):n.hide()},show:function(){var t,n,i,o,s,r,a=e.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(a),a.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),s="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),n=this.getPosition(),i=t[0].offsetWidth,o=t[0].offsetHeight,s){case"bottom":r={top:n.top+n.height,left:n.left+n.width/2-i/2};break;case"top":r={top:n.top-o,left:n.left+n.width/2-i/2};break;case"left":r={top:n.top+n.height/2-o/2,left:n.left-i};break;case"right":r={top:n.top+n.height/2-o/2,left:n.left+n.width}}this.applyPlacement(r,s),this.$element.trigger("shown")}},applyPlacement:function(e,t){var n,i,o,s,r=this.tip(),a=r[0].offsetWidth,l=r[0].offsetHeight;r.offset(e).addClass(t).addClass("in"),n=r[0].offsetWidth,i=r[0].offsetHeight,"top"==t&&i!=l&&(e.top=e.top+l-i,s=!0),"bottom"==t||"top"==t?(o=0,0>e.left&&(o=-2*e.left,e.left=0,r.offset(e),n=r[0].offsetWidth,i=r[0].offsetHeight),this.replaceArrow(o-a+n,n,"left")):this.replaceArrow(i-l,i,"top"),s&&r.offset(e)},replaceArrow:function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){n.off(e.support.transition.end).detach()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.detach()})}var n=this.tip(),i=e.Event("hide");return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():n.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var n=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var i=e(this),o=i.data("tooltip"),s="object"==typeof n&&n;o||i.data("tooltip",o=new t(this,s)),"string"==typeof n&&o[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,n=this.options;return e=("function"==typeof n.content?n.content.call(t[0]):n.content)||t.attr("data-content")},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var i=e(this),o=i.data("popover"),s="object"==typeof n&&n;o||i.data("popover",o=new t(this,s)),"string"==typeof n&&o[n]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(window.jQuery),!function(e){"use strict";function t(t,n){var i,o=e.proxy(this.process,this),s=e(t).is("body")?e(window):e(t);this.options=e.extend({},e.fn.scrollspy.defaults,n),this.$scrollElement=s.on("scroll.scroll-spy.data-api",o),this.selector=(this.options.target||(i=e(t).attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t,n=this;this.offsets=e([]),this.targets=e([]),t=this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),o=/^#\w/.test(i)&&e(i);return o&&o.length&&[[o.position().top+(!e.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},process:function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=n-this.$scrollElement.height(),o=this.offsets,s=this.targets,r=this.activeTarget;if(t>=i)return r!=(e=s.last()[0])&&this.activate(e);for(e=o.length;e--;)r!=s[e]&&t>=o[e]&&(!o[e+1]||o[e+1]>=t)&&this.activate(s[e])},activate:function(t){var n,i;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),i=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(i).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}};var n=e.fn.scrollspy;e.fn.scrollspy=function(n){return this.each(function(){var i=e(this),o=i.data("scrollspy"),s="object"==typeof n&&n;o||i.data("scrollspy",o=new t(this,s)),"string"==typeof n&&o[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,n,i,o=this.element,s=o.closest("ul:not(.dropdown-menu)"),r=o.attr("data-target");r||(r=o.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),o.parent("li").hasClass("active")||(t=s.find(".active:last a")[0],i=e.Event("show",{relatedTarget:t}),o.trigger(i),i.isDefaultPrevented()||(n=e(r),this.activate(o.parent("li"),s),this.activate(n,n.parent(),function(){o.trigger({type:"shown",relatedTarget:t})})))},activate:function(t,n,i){function o(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),r?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),i&&i()}var s=n.find("> .active"),r=i&&e.support.transition&&s.hasClass("fade");r?s.one(e.support.transition.end,o):o(),s.removeClass("in")}};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var i=e(this),o=i.data("tab");o||i.data("tab",o=new t(this)),"string"==typeof n&&o[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var t;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(t=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,t?this.process(t):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,n=[],i=[],o=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?i.push(t):o.push(t):n.push(t);return n.concat(i,o)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,i){return t=e(n.options.item).attr("data-value",i),t.find("a").html(n.highlighter(i)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(){var t=this.$menu.find(".active").removeClass("active"),n=t.next();n.length||(n=e(this.$menu.find("li")[0])),n.addClass("active")},prev:function(){var e=this.$menu.find(".active").removeClass("active"),t=e.prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=e.fn.typeahead;e.fn.typeahead=function(n){return this.each(function(){var i=e(this),o=i.data("typeahead"),s="object"==typeof n&&n;o||i.data("typeahead",o=new t(this,s)),"string"==typeof n&&o[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var t=e(this);t.data("typeahead")||t.typeahead(t.data())})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=e.extend({},e.fn.affix.defaults,n),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t,n=e(document).height(),i=this.$window.scrollTop(),o=this.$element.offset(),s=this.options.offset,r=s.bottom,a=s.top,l="affix affix-top affix-bottom";"object"!=typeof s&&(r=a=s),"function"==typeof a&&(a=s.top()),"function"==typeof r&&(r=s.bottom()),t=null!=this.unpin&&i+this.unpin<=o.top?!1:null!=r&&o.top+this.$element.height()>=n-r?"bottom":null!=a&&a>=i?"top":!1,this.affixed!==t&&(this.affixed=t,this.unpin="bottom"==t?o.top-i:null,this.$element.removeClass(l).addClass("affix"+(t?"-"+t:"")))}};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var i=e(this),o=i.data("affix"),s="object"==typeof n&&n;o||i.data("affix",o=new t(this,s)),"string"==typeof n&&o[n]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery)}(),function(){(function(e,t){function n(e,t,n){this._d=e,this._isUTC=!!t,this._a=e._a||null,e._a=null,this._lang=n||!1}function i(e){var t=this._data={},n=e.years||e.y||0,i=e.months||e.M||0,s=e.weeks||e.w||0,r=e.days||e.d||0,a=e.hours||e.h||0,l=e.minutes||e.m||0,c=e.seconds||e.s||0,u=e.milliseconds||e.ms||0;this._milliseconds=u+1e3*c+6e4*l+36e5*a,this._days=r+7*s,this._months=i+12*n,t.milliseconds=u%1e3,c+=o(u/1e3),t.seconds=c%60,l+=o(c/60),t.minutes=l%60,a+=o(l/60),t.hours=a%24,r+=o(a/24),r+=7*s,t.days=r%30,i+=o(r/30),t.months=i%12,n+=o(i/12),t.years=n,this._lang=!1}function o(e){return 0>e?Math.ceil(e):Math.floor(e)}function s(e,t){for(var n=e+"";t>n.length;)n="0"+n;return n}function r(e,t,n){var i,o=t._milliseconds,s=t._days,r=t._months;o&&e._d.setTime(+e+o*n),s&&e.date(e.date()+s*n),r&&(i=e.date(),e.date(1).month(e.month()+r*n).date(Math.min(i,e.daysInMonth())))}function a(e){return"[object Array]"===Object.prototype.toString.call(e)}function l(e,t){var n,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),s=0;for(n=0;i>n;n++)~~e[n]!==~~t[n]&&s++;return s+o}function c(t,n){var i,o;for(i=1;7>i;i++)t[i]=null==t[i]?2===i?1:0:t[i];return t[7]=n,o=new e(0),n?(o.setUTCFullYear(t[0],t[1],t[2]),o.setUTCHours(t[3],t[4],t[5],t[6])):(o.setFullYear(t[0],t[1],t[2]),o.setHours(t[3],t[4],t[5],t[6])),o._a=t,o}function u(e,t){var n,i,o=[];for(!t&&P&&(t=require("./lang/"+e)),n=0;$.length>n;n++)t[$[n]]=t[$[n]]||A.en[$[n]];for(n=0;12>n;n++)i=M([2e3,n]),o[n]=RegExp("^"+(t.months[n]||t.months(i,""))+"|^"+(t.monthsShort[n]||t.monthsShort(i,"")).replace(".",""),"i");return t.monthsParse=t.monthsParse||o,A[e]=t,t}function d(e){var t="string"==typeof e&&e||e&&e._lang||null;return t?A[t]||u(t):M}function p(e){return Z[e]?"'+("+Z[e]+")+'":e.replace(B,"").replace(/\\?'/g,"\\'")}function h(e){return d().longDateFormat[e]||e}function f(e){var t="var a,b;return '"+e.replace(N,p)+"';",n=Function;return new n("t","v","o","p","m",t)}function m(e,t){function n(n,o){return i[n].call?i[n](e,t):i[n][o]}for(var i=d(e);O.test(t);)t=t.replace(O,h);return X[t]||(X[t]=f(t)),X[t](e,n,i.ordinal,s,i.meridiem)}function g(e){switch(e){case"DDDD":return U;case"YYYY":return F;case"S":case"SS":case"SSS":case"DDD":return j;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return z;case"Z":case"ZZ":return W;case"T":return q;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return H;default:return RegExp(e.replace("\\",""))}}function v(e,t,n,i){var o;switch(e){case"M":case"MM":n[1]=null==t?0:~~t-1;break;case"MMM":case"MMMM":for(o=0;12>o;o++)if(d().monthsParse[o].test(t)){n[1]=o;break}break;case"D":case"DD":case"DDD":case"DDDD":null!=t&&(n[2]=~~t);break;case"YY":t=~~t,n[0]=t+(t>70?1900:2e3);break;case"YYYY":n[0]=~~Math.abs(t);break;case"a":case"A":i.isPm="pm"===(t+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":n[3]=~~t;break;case"m":case"mm":n[4]=~~t;break;case"s":case"ss":n[5]=~~t;break;case"S":case"SS":case"SSS":n[6]=~~(1e3*("0."+t));break;case"Z":case"ZZ":i.isUTC=!0,o=(t+"").match(Q),o&&o[1]&&(i.tzh=~~o[1]),o&&o[2]&&(i.tzm=~~o[2]),o&&"+"===o[0]&&(i.tzh=-i.tzh,i.tzm=-i.tzm)}}function b(e,t){var n,i,o=[0,0,1,0,0,0,0],s={tzh:0,tzm:0},r=t.match(N);for(n=0;r.length>n;n++)i=(g(r[n]).exec(e)||[])[0],e=e.replace(g(r[n]),""),v(r[n],i,o,s);return s.isPm&&12>o[3]&&(o[3]+=12),s.isPm===!1&&12===o[3]&&(o[3]=0),o[3]+=s.tzh,o[4]+=s.tzm,c(o,s.isUTC)}function _(e,t){var i,o,s,r,a,c=e.match(R)||[],u=99;for(s=0;t.length>s;s++)r=b(e,t[s]),o=m(new n(r),t[s]).match(R)||[],a=l(c,o),u>a&&(u=a,i=r);return i}function y(t){var n,i="YYYY-MM-DDT";if(V.exec(t)){for(n=0;4>n;n++)if(J[n][1].exec(t)){i+=J[n][0];break}return W.exec(t)?b(t,i+" Z"):b(t,i)}return new e(t)}function w(e,t,n,i,o){var s=o.relativeTime[e];return"function"==typeof s?s(t||1,!!n,e,i):s.replace(/%d/i,t||1)}function x(e,t,n){var i=D(Math.abs(e)/1e3),o=D(i/60),s=D(o/60),r=D(s/24),a=D(r/365),l=45>i&&["s",i]||1===o&&["m"]||45>o&&["mm",o]||1===s&&["h"]||22>s&&["hh",s]||1===r&&["d"]||25>=r&&["dd",r]||45>=r&&["M"]||345>r&&["MM",D(r/30)]||1===a&&["y"]||["yy",a];return l[2]=t,l[3]=e>0,l[4]=n,w.apply({},l)}function C(e,t){M.fn[e]=function(e){var n=this._isUTC?"UTC":"";return null!=e?(this._d["set"+n+t](e),this):this._d["get"+n+t]()}}function k(e){M.duration.fn[e]=function(){return this._data[e]}}function T(e,t){M.duration.fn["as"+e]=function(){return+this/t}}for(var M,S,I="1.7.0",D=Math.round,A={},E="en",P="undefined"!=typeof module&&module.exports,$="months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),L=/^\/?Date\((\-?\d+)/i,N=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?)/g,O=/(LT|LL?L?L?)/g,B=/(^\[)|(\\)|\]$/g,R=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,H=/\d\d?/,j=/\d{1,3}/,U=/\d{3}/,F=/\d{1,4}/,z=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,W=/Z|[\+\-]\d\d:?\d\d/i,q=/T/i,V=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,Y="YYYY-MM-DDTHH:mm:ssZ",J=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],Q=/([\+\-]|\d\d)/gi,G="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),K={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},X={},Z={M:"(a=t.month()+1)",MMM:'v("monthsShort",t.month())',MMMM:'v("months",t.month())',D:"(a=t.date())",DDD:"(a=new Date(t.year(),t.month(),t.date()),b=new Date(t.year(),0,1),a=~~(((a-b)/864e5)+1.5))",d:"(a=t.day())",dd:'v("weekdaysMin",t.day())',ddd:'v("weekdaysShort",t.day())',dddd:'v("weekdays",t.day())',w:"(a=new Date(t.year(),t.month(),t.date()-t.day()+5),b=new Date(a.getFullYear(),0,4),a=~~((a-b)/864e5/7+1.5))",YY:"p(t.year()%100,2)",YYYY:"p(t.year(),4)",a:"m(t.hours(),t.minutes(),!0)",A:"m(t.hours(),t.minutes(),!1)",H:"t.hours()",h:"t.hours()%12||12",m:"t.minutes()",s:"t.seconds()",S:"~~(t.milliseconds()/100)",SS:"p(~~(t.milliseconds()/10),2)",SSS:"p(t.milliseconds(),3)",Z:'((a=-t.zone())<0?((a=-a),"-"):"+")+p(~~(a/60),2)+":"+p(~~a%60,2)',ZZ:'((a=-t.zone())<0?((a=-a),"-"):"+")+p(~~(10*a/6),4)'},et="DDD w M D d".split(" "),tt="M D H h m s w".split(" ");et.length;)S=et.pop(),Z[S+"o"]=Z[S]+"+o(a)";for(;tt.length;)S=tt.pop(),Z[S+S]="p("+Z[S]+",2)";for(Z.DDDD="p("+Z.DDD+",3)",M=function(i,o){if(null===i||""===i)return null;var s,r;return M.isMoment(i)?new n(new e(+i._d),i._isUTC,i._lang):(o?s=a(o)?_(i,o):b(i,o):(r=L.exec(i),s=i===t?new e:r?new e(+r[1]):i instanceof e?i:a(i)?c(i):"string"==typeof i?y(i):new e(i)),new n(s))},M.utc=function(e,t){return a(e)?new n(c(e,!0),!0):("string"!=typeof e||W.exec(e)||(e+=" +0000",t&&(t+=" Z")),M(e,t).utc())},M.unix=function(e){return M(1e3*e)},M.duration=function(e,t){var n,o=M.isDuration(e),s="number"==typeof e,r=o?e._data:s?{}:e;return s&&(t?r[t]=e:r.milliseconds=e),n=new i(r),o&&(n._lang=e._lang),n},M.humanizeDuration=function(e,t,n){return M.duration(e,t===!0?null:t).humanize(t===!0?!0:n)},M.version=I,M.defaultFormat=Y,M.lang=function(e,t){var n;if(!e)return E;if((t||!A[e])&&u(e,t),A[e]){for(n=0;$.length>n;n++)M[$[n]]=A[e][$[n]];M.monthsParse=A[e].monthsParse,E=e}},M.langData=d,M.isMoment=function(e){return e instanceof n},M.isDuration=function(e){return e instanceof i},M.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"}}),M.fn=n.prototype={clone:function(){return M(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return""+this._d},toDate:function(){return this._d},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?!l(this._a,(this._a[7]?M.utc(this):this).toArray()):!isNaN(this._d.getTime())},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(e){return m(this,e?e:M.defaultFormat)},add:function(e,t){var n=t?M.duration(+t,e):M.duration(e);return r(this,n,1),this},subtract:function(e,t){var n=t?M.duration(+t,e):M.duration(e);return r(this,n,-1),this},diff:function(e,t,n){var i,o=this._isUTC?M(e).utc():M(e).local(),s=6e4*(this.zone()-o.zone()),r=this._d-o._d-s,a=this.year()-o.year(),l=this.month()-o.month(),c=this.date()-o.date();return i="months"===t?12*a+l+c/30:"years"===t?a+(l+c/30)/12:"seconds"===t?r/1e3:"minutes"===t?r/6e4:"hours"===t?r/36e5:"days"===t?r/864e5:"weeks"===t?r/6048e5:r,n?i:D(i)},from:function(e,t){return M.duration(this.diff(e)).lang(this._lang).humanize(!t)},fromNow:function(e){return this.from(M(),e)},calendar:function(){var e=this.diff(M().sod(),"days",!0),t=this.lang().calendar,n=t.sameElse,i=-6>e?n:-1>e?t.lastWeek:0>e?t.lastDay:1>e?t.sameDay:2>e?t.nextDay:7>e?t.nextWeek:n;return this.format("function"==typeof i?i.apply(this):i)},isLeapYear:function(){var e=this.year();return 0===e%4&&0!==e%100||0===e%400},isDST:function(){return this.zone()<M([this.year()]).zone()||this.zone()<M([this.year(),5]).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==e?t:this.add({d:e-t})},startOf:function(e){switch(e.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return this},endOf:function(e){return this.startOf(e).add(e.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return M.utc([this.year(),this.month()+1,0]).date()},lang:function(e){return e===t?d(this):(this._lang=e,this)}},S=0;G.length>S;S++)C(G[S].toLowerCase(),G[S]);C("year","FullYear"),M.duration.fn=i.prototype={weeks:function(){return o(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(e){var t=+this,n=this.lang().relativeTime,i=x(t,!e,this.lang());return e&&(i=(0>=t?n.past:n.future).replace(/%s/i,i)),i},lang:M.fn.lang};for(S in K)K.hasOwnProperty(S)&&(T(S,K[S]),k(S.toLowerCase()));T("Weeks",6048e5),P&&(module.exports=M),"undefined"==typeof ender&&(this.moment=M),"function"==typeof define&&define.amd&&define("moment",[],function(){return M})}).call(this,Date)}(),function(){(function(){$.fn.glDatePicker=function(e){var t=this.data("glDatePicker");return t?!0===e?t:this:this.each(function(){return $(this).data("glDatePicker",new O(this,e))})},$.fn.glDatePicker.defaults={cssName:"default",zIndex:1e3,borderSize:1,calendarOffset:{x:0,y:1},showAlways:!1,hideOnClick:!0,allowMonthSelect:!0,allowYearSelect:!0,todayDate:new Date,selectedDate:null,prevArrow:"â—„",nextArrow:"â–º",selectableDates:null,selectableDateRange:null,specialDates:null,selectableMonths:null,selectableYears:null,selectableDOW:null,monthNames:null,dowNames:null,dowOffset:0,onClick:function(e,t,n){e.val(n.toLocaleDateString())},onHover:function(){},onShow:function(e){e.show()},onHide:function(e){e.hide()},firstDate:null};var O=function(){function a(e,t){var n=this;n.el=$(e);var i=n.el;n.options=$.extend(!0,{},$.fn.glDatePicker.defaults,t);var o=n.options;n.calendar=$($.find("[gldp-el="+i.attr("gldp-id")+" ]")),o.selectedDate=o.selectedDate||o.todayDate,o.firstDate=new Date(o.firstDate||o.selectedDate)._first(),(i.attr("gldp-id")||"").length||i.attr("gldp-id","gldp-"+Math.round(1e10*Math.random())),i.addClass("gldp-el").bind("click",function(e){n.show(e)}).bind("focus",function(e){n.show(e)}),n.calendar.length&&!o.showAlways&&n.calendar.hide(),$(document).bind("mouseup",function(e){var e=e.target,t=n.calendar;!i.is(e)&&!t.is(e)&&0===t.has(e).length&&t.is(":visible")&&n.hide()}),n.render()}return a.prototype={show:function(){$.each($(".gldp-el").not(this.el),function(e,t){t.length&&t.options.onHide(t.calendar)}),this.options.onShow(this.calendar)},hide:function(){this.options&&!this.options.showAlways&&this.options.onHide(this.calendar)},render:function(a){var g=this,d=g.el,b=g.options,c=g.calendar,j="gldp-"+b.cssName,t=b.todayDate._val(),u=t.time,h=b.borderSize+"px",y=function(e,t,n){for(var i=[],o=e;t>=o;o++)i.push(o);if(n){var s=[];$.each(n,function(n,i){i>=e&&t>=i&&0>s._indexOf(i)&&s.push(i)}),i=s.length?s:i}return i.sort(),i},H=y(0,11,b.selectableMonths),v=y(t.year-5,t.year+5,b.selectableYears),y=y(0,6,b.selectableDOW),z=b.dowNames||"Sun Mon Tue Wed Thu Fri Sat".split(" "),t=b.monthNames||"January February March April May June July August September October November December".split(" "),f=d.outerWidth(),e,k=f/7+6*(b.borderSize/7),f=f/8+7*(b.borderSize/8);c.length?eval(c.data("is"))||(f=c.outerWidth(),e=c.outerHeight(),k=f/7+6*(b.borderSize/7),f=e/8+7*(b.borderSize/8)):(g.calendar=c=$("<div/>").attr("gldp-el",d.attr("gldp-id")).data("is",!0).css({display:b.showAlways?void 0:"none",zIndex:b.zIndex,width:7*k+"px"}),$("body").append(c)),d.is(":visible")||c.hide(),c.removeClass().addClass(j).children().remove(),j=function(){var e=d.offset();c.css({top:e.top+d.outerHeight()+b.calendarOffset.y+"px",left:e.left+b.calendarOffset.x+"px"})},$(window).resize(j),j();var j={width:k+"px",height:f+"px",lineHeight:f+"px"},f=function(e){for(var t=new Date(b.firstDate),e=e||0;t.setMonth(t.getMonth()+e),t.setDate(Math.min(1,t._max())),0!=e;){var n=t._val(),i=n.year;if(-1!=H._indexOf(n.month)){if(-1!=v._indexOf(i))break;if(v[0]>i||i>v[v.length-1])return null}}return t},A=f(-1),B=f(1),f=b.firstDate=f();e=f._val();var I=e.month,J=e.year,f=new Date(f);e=Math.abs(Math.min(6,Math.max(0,b.dowOffset)));var l=f.getDay()-e,l=1>l?-7-l:-l,z=z.concat(z).slice(e,e+7);for(f._add(l),e=$("<div/>").addClass(" core border monyear ").css($.extend({},j,{borderWidth:h+" 0 0 "+h})).append($("<a/>").addClass("prev-arrow"+(A?"":"-off")).html(b.prevArrow)).mousedown(function(){return!1}).click(function(e){""!=b.prevArrow&&A&&(e.stopPropagation(),A&&(b.firstDate=A,g.render()))}),k=5*k-5*b.borderSize+b.borderSize,k=$("<div/>").addClass(" core border monyear title").css($.extend({},j,{width:k+"px",borderTopWidth:h,marginLeft:"-"+h})),l=$("<div/>").addClass(" core border monyear ").css($.extend({},j,{marginLeft:"-"+h,borderWidth:h+" "+h+" 0 0"})).append($("<a/>").addClass("next-arrow"+(B?"":"-off")).html(b.nextArrow)).mousedown(function(){return!1}).click(function(e){""!=b.nextArrow&&B&&(e.stopPropagation(),B&&(b.firstDate=B,g.render()))}),c.append(e).append(k).append(l),l=e=0;7>e;e++)for(var q=0;7>q;q++,l++){var C=new Date(f),n="day",r=b.zIndex+l,w=$("<div/>");if(e){C._add(q+7*(e-1));var p=C._val(),x=p.time,K=null,s=!0,D=function(e,t){return!0===e.repeatYear&&t.setYear(p.year),!0===e.repeatMonth&&t.setMonth(p.month),t._val()};w.html(p.date),b.selectableDateRange&&(s=!1,$.each(b.selectableDateRange,function(e,t){var n=t.from,i=t.to||null,i=i||new Date(t.from.getFullYear(),t.from.getMonth(),t.from._max()),n=D(t,n),i=D(t,i);return x>=n.time&&i.time>=x?s=!0:void 0})),b.selectableDates&&((b.selectableDateRange&&!s||s&&!b.selectableDateRange)&&(s=!1),$.each(b.selectableDates,function(e,t){return D(t,t.date).time==x?s=!0:void 0})),!s||0>v._indexOf(p.year)||0>H._indexOf(p.month)||0>y._indexOf(p.day)?n="noday":(n="sun mon tue wed thu fri sat".split(" ")[p.day],I!=p.month&&(n+=" outday"),u==x&&(n="today",r+=50),b.selectedDate._time()==x&&(n="selected",r+=51),b.specialDates&&$.each(b.specialDates,function(e,t){D(t,t.date).time==x&&(n=t.cssClass||"special",r+=52,K=t.data)}),w.mousedown(function(){return!1}).hover(function(e){e.stopPropagation(),e=$(this).data("data"),b.onHover(d,w,e.date,e.data)}).click(function(e){e.stopPropagation(),e=$(this).data("data"),b.selectedDate=b.firstDate=e.date,g.render(function(){!b.showAlways&&b.hideOnClick&&g.hide()}),b.onClick(d,$(this),e.date,e.data)}))}else n="dow",w.html(z[q]),C=null;$.extend(j,{borderTopWidth:h,borderBottomWidth:h,borderLeftWidth:e>0||!e&&!q?h:0,borderRightWidth:e>0||!e&&6==q?h:0,marginLeft:q>0?"-"+h:0,marginTop:e>0?"-"+h:0,zIndex:r}),w.data("data",{date:C,data:K}).addClass(" core border "+n).css(j),c.append(w)}var N=function(e){b.allowMonthSelect&&(L.css({display:e?"inline-block":"none"}),E.css({display:e?"none":"inline-block"})),b.allowYearSelect&&(M.css({display:e?"none":"inline-block"}),F.css({display:e?"inline-block":"none"}))},u=function(){b.firstDate=new Date(F.val(),E.val(),1),g.render()
},E=$("<select/>").hide().change(u),F=$("<select/>").hide().change(u),L=$("<span/>").html(t[I]).mousedown(function(){return!1}).click(function(e){e.stopPropagation(),N(!1)}),M=$("<span/>").html(J).mousedown(function(){return!1}).click(function(e){e.stopPropagation(),N(!0)});$.each(t,function(e,t){if(b.allowMonthSelect&&-1!=H._indexOf(e)){var n=$("<option/>").html(t).attr("value",e);e==I&&n.attr("selected","selected"),E.append(n)}}),$.each(v,function(e,t){if(b.allowYearSelect){var n=$("<option/>").html(t).attr("value",t);t==J&&n.attr("selected","selected"),F.append(n)}}),u=$("<div/>").append(L).append(E).append(M).append(F),k.children().remove(),k.append(u),(a||function(){})()}},a}();Date.prototype._clear=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},Date.prototype._time=function(){return this._clear().getTime()},Date.prototype._max=function(){return[31,28+(1==new Date(this.getYear(),1,29).getMonth()?1:0),31,30,31,30,31,31,30,31,30,31][this.getMonth()]},Date.prototype._add=function(e){this.setDate(this.getDate()+e)},Date.prototype._first=function(){var e=new Date(this);return e.setDate(1),e},Date.prototype._val=function(){return this._clear(),{year:this.getFullYear(),month:this.getMonth(),date:this.getDate(),time:this.getTime(),day:this.getDay()}},Array.prototype._indexOf=function(e){return $.inArray(e,this)}})()}(),function(){(function(e){function t(t){if("string"==typeof t.data){var n=t.handler,i=t.data.toLowerCase().split(" "),o=["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color"];t.handler=function(t){if(this===t.target||!(/textarea|select/i.test(t.target.nodeName)||e.inArray(t.target.type,o)>-1)){var s="keypress"!==t.type&&e.hotkeys.specialKeys[t.which],r=String.fromCharCode(t.which).toLowerCase(),a="",l={};t.altKey&&"alt"!==s&&(a+="alt+"),t.ctrlKey&&"ctrl"!==s&&(a+="ctrl+"),t.metaKey&&!t.ctrlKey&&"meta"!==s&&(a+="meta+"),t.shiftKey&&"shift"!==s&&(a+="shift+"),s?l[a+s]=!0:(l[a+r]=!0,l[a+e.hotkeys.shiftNums[r]]=!0,"shift+"===a&&(l[e.hotkeys.shiftNums[r]]=!0));for(var c=0,u=i.length;u>c;c++)if(l[i[c]])return n.apply(this,arguments)}}}}e.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},e.each(["keydown","keyup","keypress"],function(){e.event.special[this]={add:t}})})(jQuery)}(),function(){(function(e){"use strict";var t=function(t){var n=e.Deferred(),i=new FileReader;return i.onload=function(e){n.resolve(e.target.result)},i.onerror=n.reject,i.onprogress=n.notify,i.readAsDataURL(t),n.promise()};e.fn.cleanHtml=function(){var t=e(this).html();return t&&t.replace(/(<br>|\s|<div><br><\/div>|&nbsp;)*$/,"")},e.fn.wysiwyg=function(n){var i,o,s=this,r=function(){o.activeToolbarClass&&e(o.toolbarSelector).find(".btn[data-"+o.commandRole+"]").each(function(){var t=e(this).data(o.commandRole);document.queryCommandState(t)?e(this).addClass(o.activeToolbarClass):e(this).removeClass(o.activeToolbarClass)})},a=function(e,t){var n=e.split(" "),i=n.shift(),o=n.join(" ")+(t||"");document.execCommand(i,0,o),r()},l=function(t){e.each(t,function(e,t){s.keydown(e,function(e){s.attr("contenteditable")&&s.is(":visible")&&(e.preventDefault(),e.stopPropagation(),a(t))}).keyup(e,function(e){s.attr("contenteditable")&&s.is(":visible")&&(e.preventDefault(),e.stopPropagation())})})},c=function(){var e=window.getSelection();return e.getRangeAt&&e.rangeCount?e.getRangeAt(0):void 0},u=function(){i=c()},d=function(){var e=window.getSelection();if(i){try{e.removeAllRanges()}catch(t){document.body.createTextRange().select(),document.selection.empty()}e.addRange(i)}},p=function(n){s.focus(),e.each(n,function(n,i){/^image\//.test(i.type)?e.when(t(i)).done(function(e){a("insertimage",e)}).fail(function(e){o.fileUploadError("file-reader",e)}):o.fileUploadError("unsupported-file-type",i.type)})},h=function(e,t){d(),document.execCommand("hiliteColor",0,t||"transparent"),u(),e.data(o.selectionMarker,t)},f=function(t,n){t.find("a[data-"+n.commandRole+"]").click(function(){d(),s.focus(),a(e(this).data(n.commandRole)),u()}),t.find("[data-toggle=dropdown]").click(d),t.find("input[type=text][data-"+n.commandRole+"]").on("webkitspeechchange change",function(){var t=this.value;this.value="",d(),t&&(s.focus(),a(e(this).data(n.commandRole),t)),u()}).on("focus",function(){var t=e(this);t.data(n.selectionMarker)||(h(t,n.selectionColor),t.focus())}).on("blur",function(){var t=e(this);t.data(n.selectionMarker)&&h(t,!1)}),t.find("input[type=file][data-"+n.commandRole+"]").change(function(){d(),"file"===this.type&&this.files&&this.files.length>0&&p(this.files),u(),this.value=""})},m=function(){s.on("dragenter dragover",!1).on("drop",function(e){var t=e.originalEvent.dataTransfer;e.stopPropagation(),e.preventDefault(),t&&t.files&&t.files.length>0&&p(t.files)})};return o=e.extend({},e.fn.wysiwyg.defaults,n),l(o.hotKeys),m(),f(e(o.toolbarSelector),o),s.attr("contenteditable",!0).on("mouseup keyup mouseout",function(){u(),r()}),e(window).bind("touchend",function(e){var t=s.is(e.target)||s.has(e.target).length>0,n=c(),i=n&&n.startContainer===n.endContainer&&n.startOffset===n.endOffset;(!i||t)&&(u(),r())}),this},e.fn.wysiwyg.defaults={hotKeys:{"ctrl+b meta+b":"bold","ctrl+i meta+i":"italic","ctrl+u meta+u":"underline","ctrl+z meta+z":"undo","ctrl+y meta+y meta+shift+z":"redo","ctrl+l meta+l":"justifyleft","ctrl+r meta+r":"justifyright","ctrl+e meta+e":"justifycenter","ctrl+j meta+j":"justifyfull","shift+tab":"outdent",tab:"indent"},toolbarSelector:"[data-role=editor-toolbar]",commandRole:"edit",activeToolbarClass:"btn-info",selectionMarker:"edit-focus-marker",selectionColor:"darkgrey",fileUploadError:function(e,t){console.log("File upload error",e,t)}}})(window.jQuery)}(),function(){Accounts.ui||(Accounts.ui={}),Accounts.ui._options||(Accounts.ui._options={requestPermissions:{},requestOfflineToken:{}}),Accounts.ui.config=function(e){var t=["passwordSignupFields","requestPermissions","requestOfflineToken"];if(_.each(_.keys(e),function(e){if(!_.contains(t,e))throw Error("Accounts.ui.config: Invalid key: "+e)}),e.passwordSignupFields){if(!_.contains(["USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY","EMAIL_ONLY"],e.passwordSignupFields))throw Error("Accounts.ui.config: Invalid option for `passwordSignupFields`: "+e.passwordSignupFields);if(Accounts.ui._options.passwordSignupFields)throw Error("Accounts.ui.config: Can't set `passwordSignupFields` more than once");Accounts.ui._options.passwordSignupFields=e.passwordSignupFields}e.requestPermissions&&_.each(e.requestPermissions,function(e,t){if(Accounts.ui._options.requestPermissions[t])throw Error("Accounts.ui.config: Can't set `requestPermissions` more than once for "+t);if(!(e instanceof Array))throw Error("Accounts.ui.config: Value for `requestPermissions` must be an array");Accounts.ui._options.requestPermissions[t]=e}),e.requestOfflineToken&&_.each(e.requestOfflineToken,function(e,t){if("google"!==t)throw Error("Accounts.ui.config: `requestOfflineToken` only supported for Google login at the moment.");if(Accounts.ui._options.requestOfflineToken[t])throw Error("Accounts.ui.config: Can't set `requestOfflineToken` more than once for "+t);Accounts.ui._options.requestOfflineToken[t]=e})},Accounts.ui._passwordSignupFields=function(){return Accounts.ui._options.passwordSignupFields||"EMAIL_ONLY"}}(),function(){Meteor._def_template("_loginButtons",Handlebars.json_ast_to_func(['<div id="login-buttons" class="login-buttons-dropdown-align-',["{",[[0,"align"]]],'">\n    ',["#",[[0,"if"],[0,"currentUser"]],["\n      ",["#",[[0,"if"],[0,"loggingIn"]],["\n        ","\n        ",["#",[[0,"if"],[0,"dropdown"]],["\n          ",[">","_loginButtonsLoggingIn"],"\n        "],['\n          <div class="login-buttons-with-only-one-button">\n            ',[">","_loginButtonsLoggingInSingleLoginButton"],"\n          </div>\n        "]],"\n      "],["\n        ",[">","_loginButtonsLoggedIn"],"\n      "]],"\n    "],["\n      ",[">","_loginButtonsLoggedOut"],"\n    "]],"\n  </div>"])),Meteor._def_template("_loginButtonsLoggedIn",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"dropdown"]],["\n    ",[">","_loginButtonsLoggedInDropdown"],"\n  "],['\n    <div class="login-buttons-with-only-one-button">\n      ',[">","_loginButtonsLoggedInSingleLogoutButton"],"\n    </div>\n  "]]])),Meteor._def_template("_loginButtonsLoggedOut",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"services"]],[" ","\n    ",["#",[[0,"if"],[0,"configurationLoaded"]],["\n      ",["#",[[0,"if"],[0,"dropdown"]],[" ","\n        ",[">","_loginButtonsLoggedOutDropdown"],"\n      "],["\n        ",["#",[[0,"with"],[0,"singleService"]],[" ",'\n          <div class="login-buttons-with-only-one-button">\n            ',["#",[[0,"if"],[0,"loggingIn"]],["\n              ",[">","_loginButtonsLoggingInSingleLoginButton"],"\n            "],["\n              ",[">","_loginButtonsLoggedOutSingleLoginButton"],"\n            "]],"\n          </div>\n        "]],"\n      "]],"\n    "]],"\n  "],['\n    <div class="no-services">No login services configured</div>\n  ']]])),Meteor._def_template("_loginButtonsMessages",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"errorMessage"]],['\n    <div class="message error-message">',["{",[[0,"errorMessage"]]],"</div>\n  "]],"\n  ",["#",[[0,"if"],[0,"infoMessage"]],['\n    <div class="message info-message">',["{",[[0,"infoMessage"]]],"</div>\n  "]]])),Meteor._def_template("_loginButtonsLoggingIn",Handlebars.json_ast_to_func([[">","_loginButtonsLoggingInPadding"],'\n  <div class="loading">&nbsp;</div>\n  ',[">","_loginButtonsLoggingInPadding"]])),Meteor._def_template("_loginButtonsLoggingInPadding",Handlebars.json_ast_to_func([["#",[[0,"unless"],[0,"dropdown"]],["\n    ",'\n    <div class="login-buttons-padding">\n      <div class="login-button single-login-button" style="visibility: hidden;" id="login-buttons-logout">&nbsp;</div>\n    </div>\n  '],["\n    ",'\n    <div class="login-buttons-padding" />\n  ']]]))}(),function(){Meteor._def_template("_loginButtonsLoggedOutSingleLoginButton",Handlebars.json_ast_to_func(['<div class="login-text-and-button">\n    <div class="login-button single-login-button ',["#",[[0,"unless"],[0,"configured"]],["configure-button"]],'"\n         id="login-buttons-',["{",[[0,"name"]]],'">\n      <div class="login-image" id="login-buttons-image-',["{",[[0,"name"]]],'"></div>\n      ',["#",[[0,"if"],[0,"configured"]],['\n        <span class="text-besides-image sign-in-text-',["{",[[0,"name"]]],'">Sign in with ',["{",[[0,"capitalizedName"]]],"</span>\n      "],['\n        <span class="text-besides-image configure-text-',["{",[[0,"name"]]],'">Configure ',["{",[[0,"capitalizedName"]]]," Login</span>\n      "]],"\n    </div>\n  </div>"])),Meteor._def_template("_loginButtonsLoggingInSingleLoginButton",Handlebars.json_ast_to_func(['<div class="login-text-and-button">\n    ',[">","_loginButtonsLoggingIn"],"\n  </div>"])),Meteor._def_template("_loginButtonsLoggedInSingleLogoutButton",Handlebars.json_ast_to_func(['<div class="login-text-and-button">\n    <div class="login-display-name">\n      ',["{",[[0,"displayName"]]],'\n    </div>\n    <div class="login-button single-login-button" id="login-buttons-logout">Sign Out</div>\n  </div>']))}(),function(){Meteor._def_template("_loginButtonsLoggedInDropdown",Handlebars.json_ast_to_func(['<div class="login-link-and-dropdown-list">\n    <a class="login-link-text" id="login-name-link">\n      ',["{",[[0,"displayName"]]]," â–¾\n    </a>\n\n    ",["#",[[0,"if"],[0,"dropdownVisible"]],['\n      <div id="login-dropdown-list" class="accounts-dialog">\n        <a class="login-close-text">Close</a>\n        <div class="login-close-text-clear"></div>\n\n        ',["#",[[0,"if"],[0,"inMessageOnlyFlow"]],["\n          ",[">","_loginButtonsMessages"],"\n        "],["\n          ",["#",[[0,"if"],[0,"inChangePasswordFlow"]],["\n            ",[">","_loginButtonsChangePassword"],"\n          "],["\n            ",[">","_loginButtonsLoggedInDropdownActions"],"\n          "]],"\n        "]],"\n      </div>\n    "]],"\n  </div>"])),Meteor._def_template("_loginButtonsLoggedInDropdownActions",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"allowChangingPassword"]],['\n    <div class="login-button" id="login-buttons-open-change-password">\n      Change password\n    </div>\n  ']],'\n\n  <div class="login-button" id="login-buttons-logout">\n    Sign out\n  </div>\n\n  ',[">","_loginButtonsMessages"]])),Meteor._def_template("_loginButtonsLoggedOutDropdown",Handlebars.json_ast_to_func(['<div class="login-link-and-dropdown-list ',["{",[[0,"additionalClasses"]]],'">\n    ',["#",[[0,"if"],[0,"dropdownVisible"]],["\n      ",'\n      <a class="login-link-text" id="login-sign-in-link">Sign in â–¾</a>\n      <div id="login-dropdown-list" class="accounts-dialog">\n        <a class="login-close-text">Close</a>\n        ',["#",[[0,"if"],[0,"loggingIn"]],["\n          ",[">","_loginButtonsLoggingIn"],"\n        "]],'\n        <div class="login-close-text-clear"></div>\n        ',[">","_loginButtonsLoggedOutAllServices"],"\n      </div>\n    "],["\n      ",["#",[[0,"if"],[0,"loggingIn"]],["\n        ","\n        ",[">","_loginButtonsLoggingIn"],"\n      "],['\n        <a class="login-link-text" id="login-sign-in-link">Sign in â–¾</a>\n      ']],"\n    "]],"\n  </div>"])),Meteor._def_template("_loginButtonsLoggedOutAllServices",Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"services"]],["\n    ",["#",[[0,"if"],[0,"isPasswordService"]],["\n      ",["#",[[0,"if"],[0,"hasOtherServices"]],[" ","\n        ",[">","_loginButtonsLoggedOutPasswordServiceSeparator"],"\n      "]],"\n      ",[">","_loginButtonsLoggedOutPasswordService"],"\n    "],["\n      ",[">","_loginButtonsLoggedOutSingleLoginButton"],"\n    "]],"\n  "]],"\n\n  ",["#",[[0,"unless"],[0,"hasPasswordService"]],["\n    ",[">","_loginButtonsMessages"],"\n  "]]])),Meteor._def_template("_loginButtonsLoggedOutPasswordServiceSeparator",Handlebars.json_ast_to_func(['<div class="or">\n    <span class="hline">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\n    <span class="or-text">or</span>\n    <span class="hline">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\n  </div>'])),Meteor._def_template("_loginButtonsLoggedOutPasswordService",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"inForgotPasswordFlow"]],["\n    ",[">","_forgotPasswordForm"],"\n  "],['\n    <div class="login-form login-password-form">\n      ',["#",[[0,"each"],[0,"fields"]],["\n        ",[">","_loginButtonsFormField"],"\n      "]],"\n\n      ",[">","_loginButtonsMessages"],'\n\n      <div class="login-button login-button-form-submit" id="login-buttons-password">\n        ',["#",[[0,"if"],[0,"inSignupFlow"]],["\n          Create account\n        "],["\n          Sign in\n        "]],"\n      </div>\n\n      ",["#",[[0,"if"],[0,"inLoginFlow"]],["\n        ",["#",[[0,"if"],[0,"showCreateAccountLink"]],['\n          <div class="additional-link-container">\n            <a id="signup-link" class="additional-link">Create account</a>\n          </div>\n        ']],"\n\n        ",["#",[[0,"if"],[0,"showForgotPasswordLink"]],['\n          <div class="additional-link-container">\n            <a id="forgot-password-link" class="additional-link">Forgot password</a>\n          </div>\n        ']],"\n      "]],"\n\n      ",["#",[[0,"if"],[0,"inSignupFlow"]],["\n        ",[">","_loginButtonsBackToLoginLink"],"\n      "]],"\n    </div>\n  "]]])),Meteor._def_template("_forgotPasswordForm",Handlebars.json_ast_to_func(['<div class="login-form">\n    <div id="forgot-password-email-label-and-input"> ','\n      <label id="forgot-password-email-label" for="forgot-password-email">Email</label>\n      <input id="forgot-password-email" type="email"/>\n    </div>\n\n    ',[">","_loginButtonsMessages"],'\n\n    <div class="login-button login-button-form-submit" id="login-buttons-forgot-password">\n      Reset password\n    </div>\n\n    ',[">","_loginButtonsBackToLoginLink"],"\n  </div>"])),Meteor._def_template("_loginButtonsBackToLoginLink",Handlebars.json_ast_to_func(['<div class="additional-link-container">\n    <a id="back-to-login-link" class="additional-link">Sign in</a>\n  </div>'])),Meteor._def_template("_loginButtonsFormField",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"visible"]],['\n    <div id="login-',["{",[[0,"fieldName"]]],'-label-and-input">\n      <label id="login-',["{",[[0,"fieldName"]]],'-label" for="login-',["{",[[0,"fieldName"]]],'">\n        ',["{",[[0,"fieldLabel"]]],'\n      </label>\n      <input id="login-',["{",[[0,"fieldName"]]],'" type="',["{",[[0,"inputType"]]],'" />\n    </div>\n  ']]])),Meteor._def_template("_loginButtonsChangePassword",Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"fields"]],["\n    ",[">","_loginButtonsFormField"],"\n  "]],"\n\n  ",[">","_loginButtonsMessages"],'\n\n  <div class="login-button login-button-form-submit" id="login-buttons-do-change-password">\n    Change password\n  </div>']))}(),function(){Meteor.startup(function(){document.body.appendChild(Spark.render(Meteor._def_template(null,Handlebars.json_ast_to_func([[">","_resetPasswordDialog"],"\n  ",[">","_enrollAccountDialog"],"\n  ",[">","_justVerifiedEmailDialog"],"\n  ",[">","_configureLoginServiceDialog"],"\n\n  <!-- if we're not showing a dropdown, we need some other place to show messages -->\n  ",[">","_loginButtonsMessagesDialog"]]))))}),Meteor._def_template("_resetPasswordDialog",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"inResetPasswordFlow"]],['\n    <div class="hide-background"></div>\n\n    <div class="accounts-dialog accounts-centered-dialog">\n      <label id="reset-password-new-password-label" for="reset-password-new-password">\n        New password\n      </label>\n\n      <div>\n        <input id="reset-password-new-password" type="password" />\n      </div>\n\n      ',[">","_loginButtonsMessages"],'\n\n      <div class="login-button login-button-form-submit" id="login-buttons-reset-password-button">\n        Set password\n      </div>\n\n      <a class="accounts-close" id="login-buttons-cancel-reset-password">&times;</a>\n    </div>\n  ']]])),Meteor._def_template("_enrollAccountDialog",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"inEnrollAccountFlow"]],['\n    <div class="hide-background"></div>\n\n    <div class="accounts-dialog accounts-centered-dialog">\n      <label id="enroll-account-password-label" for="enroll-account-password">\n        Choose a password\n      </label>\n\n      <div>\n        <input id="enroll-account-password" type="password" />\n      </div>\n\n      ',[">","_loginButtonsMessages"],'\n\n      <div class="login-button login-button-form-submit" id="login-buttons-enroll-account-button">\n        Create account\n      </div>\n\n      <a class="accounts-close" id="login-buttons-cancel-enroll-account">&times;</a>\n    </div>\n  ']]])),Meteor._def_template("_justVerifiedEmailDialog",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"visible"]],['\n    <div class="accounts-dialog accounts-centered-dialog">\n      Email verified\n      <div class="login-button" id="just-verified-dismiss-button">Dismiss</div>\n    </div>\n  ']]])),Meteor._def_template("_configureLoginServiceDialog",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"visible"]],['\n    <div id="configure-login-service-dialog" class="accounts-dialog accounts-centered-dialog">\n      ',["!",[[0,"configurationSteps"]]],'\n\n      <p>\n        Now, copy over some details.\n      </p>\n      <p>\n        <table>\n          <colgroup>\n            <col span="1" class="configuration_labels">\n            <col span="1" class="configuration_inputs">\n          </colgroup>\n          ',["#",[[0,"each"],[0,"configurationFields"]],['\n            <tr>\n              <td>\n                <label for="configure-login-service-dialog-',["{",[[0,"property"]]],'">',["{",[[0,"label"]]],'</label>\n              </td>\n              <td>\n                <input id="configure-login-service-dialog-',["{",[[0,"property"]]],'" type="text" />\n              </td>\n            </tr>\n          ']],'\n        </table>\n      </p>\n      <div class="new-section">\n        <div class="login-button configure-login-service-dismiss-button">\n          I\'ll do this later\n        </div>\n        <a class="accounts-close configure-login-service-dismiss-button">&times;</a>\n\n        ',["#",[[0,"isolate"]],['\n          <div class="login-button login-button-configure ',["#",[[0,"if"],[0,"saveDisabled"]],["login-button-disabled"]],'"\n             id="configure-login-service-dialog-save-configuration">\n            Save Configuration\n          </div>\n        ']],"\n      </div>\n    </div>\n  "]]])),Meteor._def_template("_loginButtonsMessagesDialog",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"visible"]],['\n    <div class="accounts-dialog accounts-centered-dialog" id="login-buttons-message-dialog">\n      ',[">","_loginButtonsMessages"],'\n      <div class="login-button" id="messages-dialog-dismiss-button">Dismiss</div>\n    </div>\n  ']]]))}(),function(){var e=["dropdownVisible","inSignupFlow","inForgotPasswordFlow","inChangePasswordFlow","inMessageOnlyFlow","errorMessage","infoMessage","resetPasswordToken","enrollAccountToken","justVerifiedEmail","configureLoginServiceDialogVisible","configureLoginServiceDialogServiceName","configureLoginServiceDialogSaveDisabled"],t=function(t){if(!_.contains(e,t))throw Error("Invalid key in loginButtonsSession: "+t)},n="Meteor.loginButtons.";Accounts._loginButtonsSession={set:function(e,n){if(t(e),_.contains(["errorMessage","infoMessage"],e))throw Error("Don't set errorMessage or infoMessage directly. Instead, use errorMessage() or infoMessage().");this._set(e,n)},_set:function(e,t){Session.set(n+e,t)},get:function(e){return t(e),Session.get(n+e)},closeDropdown:function(){this.set("inSignupFlow",!1),this.set("inForgotPasswordFlow",!1),this.set("inChangePasswordFlow",!1),this.set("inMessageOnlyFlow",!1),this.set("dropdownVisible",!1),this.resetMessages()},infoMessage:function(e){this._set("errorMessage",null),this._set("infoMessage",e),this.ensureMessageVisible()},errorMessage:function(e){this._set("errorMessage",e),this._set("infoMessage",null),this.ensureMessageVisible()},isMessageDialogVisible:function(){return this.get("resetPasswordToken")||this.get("enrollAccountToken")||this.get("justVerifiedEmail")},ensureMessageVisible:function(){this.isMessageDialogVisible()||this.set("dropdownVisible",!0)},resetMessages:function(){this._set("errorMessage",null),this._set("infoMessage",null)},configureService:function(e){this.set("configureLoginServiceDialogVisible",!0),this.set("configureLoginServiceDialogServiceName",e),this.set("configureLoginServiceDialogSaveDisabled",!0)}}}(),function(){Accounts._loginButtons||(Accounts._loginButtons={});var e=Accounts._loginButtonsSession;Handlebars.registerHelper("loginButtons",function(e){return"right"===e.hash.align?new Handlebars.SafeString(Template._loginButtons({align:"right"})):new Handlebars.SafeString(Template._loginButtons({align:"left"}))}),Template._loginButtons.events({"click #login-buttons-logout":function(){Meteor.logout(function(){e.closeDropdown()})}}),Template._loginButtons.preserve({"input[id]":Spark._labelFromIdOrName}),Template._loginButtonsLoggedOut.dropdown=function(){return Accounts._loginButtons.dropdown()},Template._loginButtonsLoggedOut.services=function(){return Accounts._loginButtons.getLoginServices()},Template._loginButtonsLoggedOut.singleService=function(){var e=Accounts._loginButtons.getLoginServices();if(1!==e.length)throw Error("Shouldn't be rendering this template with more than one configured service");return e[0]},Template._loginButtonsLoggedOut.configurationLoaded=function(){return Accounts.loginServicesConfigured()},Template._loginButtonsLoggedIn.dropdown=function(){return Accounts._loginButtons.dropdown()},Template._loginButtonsLoggedInSingleLogoutButton.displayName=function(){return Accounts._loginButtons.displayName()},Template._loginButtonsMessages.errorMessage=function(){return e.get("errorMessage")},Template._loginButtonsMessages.infoMessage=function(){return e.get("infoMessage")},Template._loginButtonsLoggingInPadding.dropdown=function(){return Accounts._loginButtons.dropdown()},Accounts._loginButtons.displayName=function(){var e=Meteor.user();return e?e.profile&&e.profile.name?e.profile.name:e.username?e.username:e.emails&&e.emails[0]&&e.emails[0].address?e.emails[0].address:"":""},Accounts._loginButtons.getLoginServices=function(){var e=[];return _.each(_.keys(Meteor),function(t){var n;if(n=t.match(/^loginWith(.*)/)){var i=n[1].toLowerCase();Accounts[i]&&e.push(n[1].toLowerCase())}}),e.sort(),_.contains(e,"password")&&(e=_.without(e,"password").concat(["password"])),_.map(e,function(e){return{name:e}})},Accounts._loginButtons.hasPasswordService=function(){return Accounts.password},Accounts._loginButtons.dropdown=function(){return Accounts._loginButtons.hasPasswordService()||Accounts._loginButtons.getLoginServices().length>1},Accounts._loginButtons.validateUsername=function(t){return t.length>=3?!0:(e.errorMessage("Username must be at least 3 characters long"),!1)},Accounts._loginButtons.validateEmail=function(t){return"USERNAME_AND_OPTIONAL_EMAIL"===Accounts.ui._passwordSignupFields()&&""===t?!0:-1!==t.indexOf("@")?!0:(e.errorMessage("Invalid email"),!1)},Accounts._loginButtons.validatePassword=function(t){return t.length>=6?!0:(e.errorMessage("Password must be at least 6 characters long"),!1)}}(),function(){var e=Accounts._loginButtonsSession;Template._loginButtonsLoggedOutSingleLoginButton.events({"click .login-button":function(){var n=this.name;e.resetMessages();var i=function(t){t?t instanceof Accounts.LoginCancelledError||(t instanceof Accounts.ConfigError?e.configureService(n):e.errorMessage(t.reason||"Unknown error")):e.closeDropdown()},o=Meteor["loginWith"+t(n)],s={};Accounts.ui._options.requestPermissions[n]&&(s.requestPermissions=Accounts.ui._options.requestPermissions[n]),Accounts.ui._options.requestOfflineToken[n]&&(s.requestOfflineToken=Accounts.ui._options.requestOfflineToken[n]),o(s,i)}}),Template._loginButtonsLoggedOutSingleLoginButton.configured=function(){return!!Accounts.loginServiceConfiguration.findOne({service:this.name})},Template._loginButtonsLoggedOutSingleLoginButton.capitalizedName=function(){return"github"===this.name?"GitHub":t(this.name)};var t=function(e){return e=null==e?"":e+"",e.charAt(0).toUpperCase()+e.slice(1)}}(),function(){var e=Accounts._loginButtonsSession;Template._loginButtons.events({"click #login-name-link, click #login-sign-in-link":function(){e.set("dropdownVisible",!0),Deps.flush(),c()},"click .login-close-text":function(){e.closeDropdown()}}),Template._loginButtonsLoggedInDropdown.events({"click #login-buttons-open-change-password":function(){e.resetMessages(),e.set("inChangePasswordFlow",!0)}}),Template._loginButtonsLoggedInDropdown.displayName=function(){return Accounts._loginButtons.displayName()},Template._loginButtonsLoggedInDropdown.inChangePasswordFlow=function(){return e.get("inChangePasswordFlow")},Template._loginButtonsLoggedInDropdown.inMessageOnlyFlow=function(){return e.get("inMessageOnlyFlow")},Template._loginButtonsLoggedInDropdown.dropdownVisible=function(){return e.get("dropdownVisible")},Template._loginButtonsLoggedInDropdownActions.allowChangingPassword=function(){var e=Meteor.user();return e.username||e.emails&&e.emails[0]&&e.emails[0].address},Template._loginButtonsLoggedOutDropdown.events({"click #login-buttons-password":function(){i()},"keypress #forgot-password-email":function(e){13===e.keyCode&&r()},"click #login-buttons-forgot-password":function(){r()},"click #signup-link":function(){e.resetMessages();var i=n("login-username"),o=n("login-email"),s=n("login-username-or-email");t("login-password"),e.set("inSignupFlow",!0),e.set("inForgotPasswordFlow",!1),Deps.flush(),null!==i?document.getElementById("login-username").value=i:null!==o?document.getElementById("login-email").value=o:null!==s&&(-1===s.indexOf("@")?document.getElementById("login-username").value=s:document.getElementById("login-email").value=s);var r=document.getElementById("login-dropdown-list");r.style.display="none",r.offsetHeight,r.style.display="block"},"click #forgot-password-link":function(){e.resetMessages();var t=n("login-email"),i=n("login-username-or-email");e.set("inSignupFlow",!1),e.set("inForgotPasswordFlow",!0),Deps.flush(),null!==t?document.getElementById("forgot-password-email").value=t:null!==i&&-1!==i.indexOf("@")&&(document.getElementById("forgot-password-email").value=i)},"click #back-to-login-link":function(){e.resetMessages();var t=n("login-username"),i=n("login-email")||n("forgot-password-email");e.set("inSignupFlow",!1),e.set("inForgotPasswordFlow",!1),Deps.flush(),document.getElementById("login-username")&&(document.getElementById("login-username").value=t),document.getElementById("login-email")&&(document.getElementById("login-email").value=i),document.getElementById("login-username-or-email")&&(document.getElementById("login-username-or-email").value=i||t)},"keypress #login-username, keypress #login-email, keypress #login-username-or-email, keypress #login-password, keypress #login-password-again":function(e){13===e.keyCode&&i()}}),Template._loginButtonsLoggedOutDropdown.additionalClasses=function(){return Accounts.password?e.get("inSignupFlow")?"login-form-create-account":e.get("inForgotPasswordFlow")?"login-form-forgot-password":"login-form-sign-in":!1},Template._loginButtonsLoggedOutDropdown.dropdownVisible=function(){return e.get("dropdownVisible")},Template._loginButtonsLoggedOutDropdown.hasPasswordService=function(){return Accounts._loginButtons.hasPasswordService()},Template._loginButtonsLoggedOutAllServices.services=function(){return Accounts._loginButtons.getLoginServices()},Template._loginButtonsLoggedOutAllServices.isPasswordService=function(){return"password"===this.name},Template._loginButtonsLoggedOutAllServices.hasOtherServices=function(){return Accounts._loginButtons.getLoginServices().length>1},Template._loginButtonsLoggedOutAllServices.hasPasswordService=function(){return Accounts._loginButtons.hasPasswordService()},Template._loginButtonsLoggedOutPasswordService.fields=function(){var t=[{fieldName:"username-or-email",fieldLabel:"Username or Email",visible:function(){return _.contains(["USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL"],Accounts.ui._passwordSignupFields())}},{fieldName:"username",fieldLabel:"Username",visible:function(){return"USERNAME_ONLY"===Accounts.ui._passwordSignupFields()}},{fieldName:"email",fieldLabel:"Email",inputType:"email",visible:function(){return"EMAIL_ONLY"===Accounts.ui._passwordSignupFields()}},{fieldName:"password",fieldLabel:"Password",inputType:"password",visible:function(){return!0}}],n=[{fieldName:"username",fieldLabel:"Username",visible:function(){return _.contains(["USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY"],Accounts.ui._passwordSignupFields())}},{fieldName:"email",fieldLabel:"Email",inputType:"email",visible:function(){return _.contains(["USERNAME_AND_EMAIL","EMAIL_ONLY"],Accounts.ui._passwordSignupFields())}},{fieldName:"email",fieldLabel:"Email (optional)",inputType:"email",visible:function(){return"USERNAME_AND_OPTIONAL_EMAIL"===Accounts.ui._passwordSignupFields()}},{fieldName:"password",fieldLabel:"Password",inputType:"password",visible:function(){return!0
}},{fieldName:"password-again",fieldLabel:"Password (again)",inputType:"password",visible:function(){return _.contains(["USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY"],Accounts.ui._passwordSignupFields())}}];return e.get("inSignupFlow")?n:t},Template._loginButtonsLoggedOutPasswordService.inForgotPasswordFlow=function(){return e.get("inForgotPasswordFlow")},Template._loginButtonsLoggedOutPasswordService.inLoginFlow=function(){return!e.get("inSignupFlow")&&!e.get("inForgotPasswordFlow")},Template._loginButtonsLoggedOutPasswordService.inSignupFlow=function(){return e.get("inSignupFlow")},Template._loginButtonsLoggedOutPasswordService.showCreateAccountLink=function(){return!Accounts._options.forbidClientAccountCreation},Template._loginButtonsLoggedOutPasswordService.showForgotPasswordLink=function(){return _.contains(["USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL","EMAIL_ONLY"],Accounts.ui._passwordSignupFields())},Template._loginButtonsFormField.inputType=function(){return this.inputType||"text"},Template._loginButtonsChangePassword.events({"keypress #login-old-password, keypress #login-password, keypress #login-password-again":function(e){13===e.keyCode&&a()},"click #login-buttons-do-change-password":function(){a()}}),Template._loginButtonsChangePassword.fields=function(){return[{fieldName:"old-password",fieldLabel:"Current Password",inputType:"password",visible:function(){return!0}},{fieldName:"password",fieldLabel:"New Password",inputType:"password",visible:function(){return!0}},{fieldName:"password-again",fieldLabel:"New Password (again)",inputType:"password",visible:function(){return _.contains(["USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY"],Accounts.ui._passwordSignupFields())}}]};var t=function(e){var t=document.getElementById(e);return t?t.value:null},n=function(e){var t=document.getElementById(e);return t?t.value.replace(/^\s*|\s*$/g,""):null},i=function(){e.get("inSignupFlow")?s():o()},o=function(){e.resetMessages();var i,o=n("login-username"),s=n("login-email"),r=n("login-username-or-email"),a=t("login-password");if(null!==o){if(!Accounts._loginButtons.validateUsername(o))return;i={username:o}}else if(null!==s){if(!Accounts._loginButtons.validateEmail(s))return;i={email:s}}else{if(null===r)throw Error("Unexpected -- no element to use as a login user selector");if(!Accounts._loginButtons.validateUsername(r))return;i=r}Meteor.loginWithPassword(i,a,function(t){t?e.errorMessage(t.reason||"Unknown error"):e.closeDropdown()})},s=function(){e.resetMessages();var i={},o=n("login-username");if(null!==o){if(!Accounts._loginButtons.validateUsername(o))return;i.username=o}var s=n("login-email");if(null!==s){if(!Accounts._loginButtons.validateEmail(s))return;i.email=s}var r=t("login-password");Accounts._loginButtons.validatePassword(r)&&(i.password=r,l()&&Accounts.createUser(i,function(t){t?e.errorMessage(t.reason||"Unknown error"):e.closeDropdown()}))},r=function(){e.resetMessages();var t=n("forgot-password-email");-1!==t.indexOf("@")?Accounts.forgotPassword({email:t},function(t){t?e.errorMessage(t.reason||"Unknown error"):e.infoMessage("Email sent")}):e.errorMessage("Invalid email")},a=function(){e.resetMessages();var n=t("login-old-password"),i=t("login-password");Accounts._loginButtons.validatePassword(i)&&l()&&Accounts.changePassword(n,i,function(t){t?e.errorMessage(t.reason||"Unknown error"):(e.set("inChangePasswordFlow",!1),e.set("inMessageOnlyFlow",!0),e.infoMessage("Password changed"))})},l=function(){var n=t("login-password-again");if(null!==n){var i=t("login-password");if(i!==n)return e.errorMessage("Passwords don't match"),!1}return!0},c=function(){for(var e=document.getElementById("login-dropdown-list").parentNode;"BODY"!==e.nodeName;e=e.parentNode)0===e.style.zIndex&&(e.style.zIndex=1)}}(),function(){var e=Accounts._loginButtonsSession;Accounts._resetPasswordToken&&e.set("resetPasswordToken",Accounts._resetPasswordToken),Accounts._enrollAccountToken&&e.set("enrollAccountToken",Accounts._enrollAccountToken),Meteor.startup(function(){Accounts._verifyEmailToken&&Accounts.verifyEmail(Accounts._verifyEmailToken,function(t){Accounts._enableAutoLogin(),t||e.set("justVerifiedEmail",!0)})}),Template._resetPasswordDialog.events({"click #login-buttons-reset-password-button":function(){t()},"keypress #reset-password-new-password":function(e){13===e.keyCode&&t()},"click #login-buttons-cancel-reset-password":function(){e.set("resetPasswordToken",null),Accounts._enableAutoLogin()}});var t=function(){e.resetMessages();var t=document.getElementById("reset-password-new-password").value;Accounts._loginButtons.validatePassword(t)&&Accounts.resetPassword(e.get("resetPasswordToken"),t,function(t){t?e.errorMessage(t.reason||"Unknown error"):(e.set("resetPasswordToken",null),Accounts._enableAutoLogin())})};Template._resetPasswordDialog.inResetPasswordFlow=function(){return e.get("resetPasswordToken")},Template._enrollAccountDialog.events({"click #login-buttons-enroll-account-button":function(){n()},"keypress #enroll-account-password":function(e){13===e.keyCode&&n()},"click #login-buttons-cancel-enroll-account":function(){e.set("enrollAccountToken",null),Accounts._enableAutoLogin()}});var n=function(){e.resetMessages();var t=document.getElementById("enroll-account-password").value;Accounts._loginButtons.validatePassword(t)&&Accounts.resetPassword(e.get("enrollAccountToken"),t,function(t){t?e.errorMessage(t.reason||"Unknown error"):(e.set("enrollAccountToken",null),Accounts._enableAutoLogin())})};Template._enrollAccountDialog.inEnrollAccountFlow=function(){return e.get("enrollAccountToken")},Template._justVerifiedEmailDialog.events({"click #just-verified-dismiss-button":function(){e.set("justVerifiedEmail",!1)}}),Template._justVerifiedEmailDialog.visible=function(){return e.get("justVerifiedEmail")},Template._loginButtonsMessagesDialog.events({"click #messages-dialog-dismiss-button":function(){e.resetMessages()}}),Template._loginButtonsMessagesDialog.visible=function(){var t=e.get("infoMessage")||e.get("errorMessage");return!Accounts._loginButtons.dropdown()&&t},Template._configureLoginServiceDialog.events({"click .configure-login-service-dismiss-button":function(){e.set("configureLoginServiceDialogVisible",!1)},"click #configure-login-service-dialog-save-configuration":function(){if(e.get("configureLoginServiceDialogVisible")&&!e.get("configureLoginServiceDialogSaveDisabled")){var t=e.get("configureLoginServiceDialogServiceName"),n={service:t};_.each(s(),function(e){n[e.property]=document.getElementById("configure-login-service-dialog-"+e.property).value.replace(/^\s*|\s*$/g,"")}),Meteor.call("configureLoginService",n,function(n){n?Meteor._debug("Error configuring login service "+t,n):e.set("configureLoginServiceDialogVisible",!1)})}},"input, keyup input":function(e){0===e.target.id.indexOf("configure-login-service-dialog")&&i()}});var i=function(){var t=_.any(s(),function(e){return""===document.getElementById("configure-login-service-dialog-"+e.property).value});e.set("configureLoginServiceDialogSaveDisabled",t)},o=function(){var t=e.get("configureLoginServiceDialogServiceName");return Template["configureLoginServiceDialogFor"+r(t)]},s=function(){var e=o();return e.fields()};Template._configureLoginServiceDialog.configurationFields=function(){return s()},Template._configureLoginServiceDialog.visible=function(){return e.get("configureLoginServiceDialogVisible")},Template._configureLoginServiceDialog.configurationSteps=function(){return o()()},Template._configureLoginServiceDialog.saveDisabled=function(){return e.get("configureLoginServiceDialogSaveDisabled")};var r=function(e){return e=null==e?"":e+"",e.charAt(0).toUpperCase()+e.slice(1)}}(),function(){(function(e){e.Jcrop=function(t,n){function i(e){return Math.round(e)+"px"}function o(e){return N.baseClass+"-"+e}function s(){return e.fx.step.hasOwnProperty("backgroundColor")}function r(t){var n=e(t).offset();return[n.left,n.top]}function a(e){return[e.pageX-L[0],e.pageY-L[1]]}function l(t){"object"!=typeof t&&(t={}),N=e.extend(N,t),e.each(["onChange","onSelect","onRelease","onDblClick"],function(e,t){"function"!=typeof N[t]&&(N[t]=function(){})})}function c(e,t,n){if(L=r(z),ft.setCursor("move"===e?e:e+"-resize"),"move"===e)return ft.activateHandlers(d(t),g,n);var i=dt.getFixed(),o=p(e),s=dt.getCorner(p(o));dt.setPressed(dt.getCorner(o)),dt.setCurrent(s),ft.activateHandlers(u(e,i),g,n)}function u(e,t){return function(n){if(N.aspectRatio)switch(e){case"e":n[1]=t.y+1;break;case"w":n[1]=t.y+1;break;case"n":n[0]=t.x+1;break;case"s":n[0]=t.x+1}else switch(e){case"e":n[1]=t.y2;break;case"w":n[1]=t.y2;break;case"n":n[0]=t.x2;break;case"s":n[0]=t.x2}dt.setCurrent(n),ht.update()}}function d(e){var t=e;return mt.watchKeys(),function(e){dt.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,ht.update()}}function p(e){switch(e){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function h(e){return function(t){return N.disabled?!1:"move"!==e||N.allowMove?(L=r(z),it=!0,c(e,a(t)),t.stopPropagation(),t.preventDefault(),!1):!1}}function f(e,t,n){var i=e.width(),o=e.height();i>t&&t>0&&(i=t,o=t/e.width()*e.height()),o>n&&n>0&&(o=n,i=n/e.height()*e.width()),tt=e.width()/i,nt=e.height()/o,e.width(i).height(o)}function m(e){return{x:e.x*tt,y:e.y*nt,x2:e.x2*tt,y2:e.y2*nt,w:e.w*tt,h:e.h*nt}}function g(){var e=dt.getFixed();e.w>N.minSelect[0]&&e.h>N.minSelect[1]?(ht.enableHandles(),ht.done()):ht.release(),ft.setCursor(N.allowSelect?"crosshair":"default")}function v(e){if(N.disabled)return!1;if(!N.allowSelect)return!1;it=!0,L=r(z),ht.disableHandles(),ft.setCursor("crosshair");var t=a(e);return dt.setPressed(t),ht.update(),ft.activateHandlers(b,g,"touch"===e.type.substring(0,5)),mt.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function b(e){dt.setCurrent(e),ht.update()}function _(){var t=e("<div></div>").addClass(o("tracker"));return B&&t.css({opacity:0,backgroundColor:"white"}),t}function y(e){V.removeClass().addClass(o("holder")).addClass(e)}function w(e,t){function n(){window.setTimeout(b,d)}var i=e[0]/tt,o=e[1]/nt,s=e[2]/tt,r=e[3]/nt;if(!ot){var a=dt.flipCoords(i,o,s,r),l=dt.getFixed(),c=[l.x,l.y,l.x2,l.y2],u=c,d=N.animationDelay,p=a[0]-c[0],h=a[1]-c[1],f=a[2]-c[2],m=a[3]-c[3],g=0,v=N.swingSpeed;i=u[0],o=u[1],s=u[2],r=u[3],ht.animMode(!0);var b=function(){return function(){g+=(100-g)/v,u[0]=Math.round(i+g/100*p),u[1]=Math.round(o+g/100*h),u[2]=Math.round(s+g/100*f),u[3]=Math.round(r+g/100*m),g>=99.8&&(g=100),100>g?(C(u),n()):(ht.done(),ht.animMode(!1),"function"==typeof t&&t.call(gt))}}();n()}}function x(e){C([e[0]/tt,e[1]/nt,e[2]/tt,e[3]/nt]),N.onSelect.call(gt,m(dt.getFixed())),ht.enableHandles()}function C(e){dt.setPressed([e[0],e[1]]),dt.setCurrent([e[2],e[3]]),ht.update()}function k(){return m(dt.getFixed())}function T(){return dt.getFixed()}function M(e){l(e),$()}function S(){N.disabled=!0,ht.disableHandles(),ht.setCursor("default"),ft.setCursor("default")}function I(){N.disabled=!1,$()}function D(){ht.done(),ft.activateHandlers(null,null)}function A(){V.remove(),j.show(),j.css("visibility","visible"),e(t).removeData("Jcrop")}function E(e,t){ht.release(),S();var n=new Image;n.onload=function(){var i=n.width,o=n.height,s=N.boxWidth,r=N.boxHeight;z.width(i).height(o),z.attr("src",e),Y.attr("src",e),f(z,s,r),W=z.width(),q=z.height(),Y.width(W).height(q),at.width(W+2*rt).height(q+2*rt),V.width(W).height(q),pt.resize(W,q),I(),"function"==typeof t&&t.call(gt)},n.src=e}function P(e,t,n){var i=t||N.bgColor;N.bgFade&&s()&&N.fadeTime&&!n?e.animate({backgroundColor:i},{queue:!1,duration:N.fadeTime}):e.css("backgroundColor",i)}function $(e){N.allowResize?e?ht.enableOnly():ht.enableHandles():ht.disableHandles(),ft.setCursor(N.allowSelect?"crosshair":"default"),ht.setCursor(N.allowMove?"move":"default"),N.hasOwnProperty("trueSize")&&(tt=N.trueSize[0]/W,nt=N.trueSize[1]/q),N.hasOwnProperty("setSelect")&&(x(N.setSelect),ht.done(),delete N.setSelect),pt.refresh(),N.bgColor!=lt&&(P(N.shade?pt.getShades():V,N.shade?N.shadeColor||N.bgColor:N.bgColor),lt=N.bgColor),ct!=N.bgOpacity&&(ct=N.bgOpacity,N.shade?pt.refresh():ht.setBgOpacity(ct)),K=N.maxSize[0]||0,X=N.maxSize[1]||0,Z=N.minSize[0]||0,et=N.minSize[1]||0,N.hasOwnProperty("outerImage")&&(z.attr("src",N.outerImage),delete N.outerImage),ht.refresh()}var L,N=e.extend({},e.Jcrop.defaults),O=navigator.userAgent.toLowerCase(),B=/msie/.test(O),R=/msie [1-6]\./.test(O);"object"!=typeof t&&(t=e(t)[0]),"object"!=typeof n&&(n={}),l(n);var H={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},j=e(t),U=!0;if("IMG"==t.tagName){if(0!=j[0].width&&0!=j[0].height)j.width(j[0].width),j.height(j[0].height);else{var F=new Image;F.src=j[0].src,j.width(F.width),j.height(F.height)}var z=j.clone().removeAttr("id").css(H).show();z.width(j.width()),z.height(j.height()),j.after(z).hide()}else z=j.css(H).show(),U=!1,null===N.shade&&(N.shade=!0);f(z,N.boxWidth,N.boxHeight);var W=z.width(),q=z.height(),V=e("<div />").width(W).height(q).addClass(o("holder")).css({position:"relative",backgroundColor:N.bgColor}).insertAfter(j).append(z);N.addClass&&V.addClass(N.addClass);var Y=e("<div />"),J=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),Q=e("<div />").width("100%").height("100%").css("zIndex",320),G=e("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=dt.getFixed();N.onDblClick.call(gt,e)}).insertBefore(z).append(J,Q);U&&(Y=e("<img />").attr("src",z.attr("src")).css(H).width(W).height(q),J.append(Y)),R&&G.css({overflowY:"hidden"});var K,X,Z,et,tt,nt,it,ot,st,rt=N.boundary,at=_().width(W+2*rt).height(q+2*rt).css({position:"absolute",top:i(-rt),left:i(-rt),zIndex:290}).mousedown(v),lt=N.bgColor,ct=N.bgOpacity;L=r(z);var ut=function(){function e(){var e,t={},n=["touchstart","touchmove","touchend"],i=document.createElement("div");try{for(e=0;n.length>e;e++){var o=n[e];o="on"+o;var s=o in i;s||(i.setAttribute(o,"return;"),s="function"==typeof i[o]),t[n[e]]=s}return t.touchstart&&t.touchend&&t.touchmove}catch(r){return!1}}function t(){return N.touchSupport===!0||N.touchSupport===!1?N.touchSupport:e()}return{createDragger:function(e){return function(t){return N.disabled?!1:"move"!==e||N.allowMove?(L=r(z),it=!0,c(e,a(ut.cfilter(t)),!0),t.stopPropagation(),t.preventDefault(),!1):!1}},newSelection:function(e){return v(ut.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:e,support:t()}}(),dt=function(){function e(e){e=r(e),f=p=e[0],m=h=e[1]}function t(e){e=r(e),u=e[0]-f,d=e[1]-m,f=e[0],m=e[1]}function n(){return[u,d]}function i(e){var t=e[0],n=e[1];0>p+t&&(t-=t+p),0>h+n&&(n-=n+h),m+n>q&&(n+=q-(m+n)),f+t>W&&(t+=W-(f+t)),p+=t,f+=t,h+=n,m+=n}function o(e){var t=s();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function s(){if(!N.aspectRatio)return l();var e,t,n,i,o=N.aspectRatio,s=N.minSize[0]/tt,r=N.maxSize[0]/tt,u=N.maxSize[1]/nt,d=f-p,g=m-h,v=Math.abs(d),b=Math.abs(g),_=v/b;return 0===r&&(r=10*W),0===u&&(u=10*q),o>_?(t=m,n=b*o,e=0>d?p-n:n+p,0>e?(e=0,i=Math.abs((e-p)/o),t=0>g?h-i:i+h):e>W&&(e=W,i=Math.abs((e-p)/o),t=0>g?h-i:i+h)):(e=f,i=v/o,t=0>g?h-i:h+i,0>t?(t=0,n=Math.abs((t-h)*o),e=0>d?p-n:n+p):t>q&&(t=q,n=Math.abs(t-h)*o,e=0>d?p-n:n+p)),e>p?(s>e-p?e=p+s:e-p>r&&(e=p+r),t=t>h?h+(e-p)/o:h-(e-p)/o):p>e&&(s>p-e?e=p-s:p-e>r&&(e=p-r),t=t>h?h+(p-e)/o:h-(p-e)/o),0>e?(p-=e,e=0):e>W&&(p-=e-W,e=W),0>t?(h-=t,t=0):t>q&&(h-=t-q,t=q),c(a(p,h,e,t))}function r(e){return 0>e[0]&&(e[0]=0),0>e[1]&&(e[1]=0),e[0]>W&&(e[0]=W),e[1]>q&&(e[1]=q),[Math.round(e[0]),Math.round(e[1])]}function a(e,t,n,i){var o=e,s=n,r=t,a=i;return e>n&&(o=n,s=e),t>i&&(r=i,a=t),[o,r,s,a]}function l(){var e,t=f-p,n=m-h;return K&&Math.abs(t)>K&&(f=t>0?p+K:p-K),X&&Math.abs(n)>X&&(m=n>0?h+X:h-X),et/nt&&et/nt>Math.abs(n)&&(m=n>0?h+et/nt:h-et/nt),Z/tt&&Z/tt>Math.abs(t)&&(f=t>0?p+Z/tt:p-Z/tt),0>p&&(f-=p,p-=p),0>h&&(m-=h,h-=h),0>f&&(p-=f,f-=f),0>m&&(h-=m,m-=m),f>W&&(e=f-W,p-=e,f-=e),m>q&&(e=m-q,h-=e,m-=e),p>W&&(e=p-q,m-=e,h-=e),h>q&&(e=h-q,m-=e,h-=e),c(a(p,h,f,m))}function c(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var u,d,p=0,h=0,f=0,m=0;return{flipCoords:a,setPressed:e,setCurrent:t,getOffset:n,moveOffset:i,getCorner:o,getFixed:s}}(),pt=function(){function t(e,t){f.left.css({height:i(t)}),f.right.css({height:i(t)})}function n(){return o(dt.getFixed())}function o(e){f.top.css({left:i(e.x),width:i(e.w),height:i(e.y)}),f.bottom.css({top:i(e.y2),left:i(e.x),width:i(e.w),height:i(q-e.y2)}),f.right.css({left:i(e.x2),width:i(W-e.x2)}),f.left.css({width:i(e.x)})}function s(){return e("<div />").css({position:"absolute",backgroundColor:N.shadeColor||N.bgColor}).appendTo(h)}function r(){p||(p=!0,h.insertBefore(z),n(),ht.setBgOpacity(1,0,1),Y.hide(),a(N.shadeColor||N.bgColor,1),ht.isAwake()?c(N.bgOpacity,1):c(1,1))}function a(e,t){P(d(),e,t)}function l(){p&&(h.remove(),Y.show(),p=!1,ht.isAwake()?ht.setBgOpacity(N.bgOpacity,1,1):(ht.setBgOpacity(1,1,1),ht.disableHandles()),P(V,0,1))}function c(e,t){p&&(N.bgFade&&!t?h.animate({opacity:1-e},{queue:!1,duration:N.fadeTime}):h.css({opacity:1-e}))}function u(){N.shade?r():l(),ht.isAwake()&&c(N.bgOpacity)}function d(){return h.children()}var p=!1,h=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),f={top:s(),left:s().height(q),right:s().height(q),bottom:s()};return{update:n,updateRaw:o,getShades:d,setBgColor:a,enable:r,disable:l,resize:t,refresh:u,opacity:c}}(),ht=function(){function t(t){var n=e("<div />").css({position:"absolute",opacity:N.borderOpacity}).addClass(o(t));return J.append(n),n}function n(t,n){var i=e("<div />").mousedown(h(t)).css({cursor:t+"-resize",position:"absolute",zIndex:n}).addClass("ord-"+t);return ut.support&&i.bind("touchstart.jcrop",ut.createDragger(t)),Q.append(i),i}function s(e){var t=N.handleSize,i=n(e,S++).css({opacity:N.handleOpacity}).addClass(o("handle"));return t&&i.width(t).height(t),i}function r(e){return n(e,S++).addClass("jcrop-dragbar")}function a(e){var t;for(t=0;e.length>t;t++)A[e[t]]=r(e[t])}function l(e){var n,i;for(i=0;e.length>i;i++){switch(e[i]){case"n":n="hline";break;case"s":n="hline bottom";break;case"e":n="vline right";break;case"w":n="vline"}I[e[i]]=t(n)}}function c(e){var t;for(t=0;e.length>t;t++)D[e[t]]=s(e[t])}function u(e,t){N.shade||Y.css({top:i(-t),left:i(-e)}),G.css({top:i(t),left:i(e)})}function d(e,t){G.width(Math.round(e)).height(Math.round(t))}function p(){var e=dt.getFixed();dt.setPressed([e.x,e.y]),dt.setCurrent([e.x2,e.y2]),f()}function f(e){return M?g(e):void 0}function g(e){var t=dt.getFixed();d(t.w,t.h),u(t.x,t.y),N.shade&&pt.updateRaw(t),M||b(),e?N.onSelect.call(gt,m(t)):N.onChange.call(gt,m(t))}function v(e,t,n){(M||t)&&(N.bgFade&&!n?z.animate({opacity:e},{queue:!1,duration:N.fadeTime}):z.css("opacity",e))}function b(){G.show(),N.shade?pt.opacity(ct):v(ct,!0),M=!0}function y(){C(),G.hide(),N.shade?pt.opacity(1):v(1),M=!1,N.onRelease.call(gt)}function w(){E&&Q.show()}function x(){return E=!0,N.allowResize?(Q.show(),!0):void 0}function C(){E=!1,Q.hide()}function k(e){e?(ot=!0,C()):(ot=!1,x())}function T(){k(!1),p()}var M,S=370,I={},D={},A={},E=!1;N.dragEdges&&e.isArray(N.createDragbars)&&a(N.createDragbars),e.isArray(N.createHandles)&&c(N.createHandles),N.drawBorders&&e.isArray(N.createBorders)&&l(N.createBorders),e(document).bind("touchstart.jcrop-ios",function(t){e(t.currentTarget).hasClass("jcrop-tracker")&&t.stopPropagation()});var P=_().mousedown(h("move")).css({cursor:"move",position:"absolute",zIndex:360});return ut.support&&P.bind("touchstart.jcrop",ut.createDragger("move")),J.append(P),C(),{updateVisible:f,update:g,release:y,refresh:p,isAwake:function(){return M},setCursor:function(e){P.css("cursor",e)},enableHandles:x,enableOnly:function(){E=!0},showHandles:w,disableHandles:C,animMode:k,setBgOpacity:v,done:T}}(),ft=function(){function t(t){at.css({zIndex:450}),t?e(document).bind("touchmove.jcrop",r).bind("touchend.jcrop",l):p&&e(document).bind("mousemove.jcrop",i).bind("mouseup.jcrop",o)}function n(){at.css({zIndex:290}),e(document).unbind(".jcrop")}function i(e){return u(a(e)),!1}function o(e){return e.preventDefault(),e.stopPropagation(),it&&(it=!1,d(a(e)),ht.isAwake()&&N.onSelect.call(gt,m(dt.getFixed())),n(),u=function(){},d=function(){}),!1}function s(e,n,i){return it=!0,u=e,d=n,t(i),!1}function r(e){return u(a(ut.cfilter(e))),!1}function l(e){return o(ut.cfilter(e))}function c(e){at.css("cursor",e)}var u=function(){},d=function(){},p=N.trackDocument;return p||at.mousemove(i).mouseup(o).mouseout(o),z.before(at),{activateHandlers:s,setCursor:c}}(),mt=function(){function t(){N.keySupport&&(s.show(),s.focus())}function n(){s.hide()}function i(e,t,n){N.allowMove&&(dt.moveOffset([t,n]),ht.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}function o(e){if(e.ctrlKey||e.metaKey)return!0;st=e.shiftKey?!0:!1;var t=st?10:1;switch(e.keyCode){case 37:i(e,-t,0);break;case 39:i(e,t,0);break;case 38:i(e,0,-t);break;case 40:i(e,0,t);break;case 27:N.allowSelect&&ht.release();break;case 9:return!0}return!1}var s=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),r=e("<div />").css({position:"absolute",overflow:"hidden"}).append(s);return N.keySupport&&(s.keydown(o).blur(n),R||!N.fixedSupport?(s.css({position:"absolute",left:"-20px"}),r.append(s).insertBefore(z)):s.insertBefore(z)),{watchKeys:t}}();ut.support&&at.bind("touchstart.jcrop",ut.newSelection),Q.hide(),$(!0);var gt={setImage:E,animateTo:w,setSelect:x,setOptions:M,tellSelect:k,tellScaled:T,setClass:y,disable:S,enable:I,cancel:D,release:ht.release,destroy:A,focus:mt.watchKeys,getBounds:function(){return[W*tt,q*nt]},getWidgetSize:function(){return[W,q]},getScaleFactor:function(){return[tt,nt]},getOptions:function(){return N},ui:{holder:V,selection:G}};return B&&V.bind("selectstart",function(){return!1}),j.data("Jcrop",gt),gt},e.fn.Jcrop=function(t,n){var i;return this.each(function(){if(e(this).data("Jcrop")){if("api"===t)return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(t)}else"IMG"==this.tagName?e.Jcrop.Loader(this,function(){e(this).css({display:"block",visibility:"hidden"}),i=e.Jcrop(this,t),e.isFunction(n)&&n.call(i)}):(e(this).css({display:"block",visibility:"hidden"}),i=e.Jcrop(this,t),e.isFunction(n)&&n.call(i))}),this},e.Jcrop.Loader=function(t,n,i){function o(){r.complete?(s.unbind(".jcloader"),e.isFunction(n)&&n.call(r)):window.setTimeout(o,50)}var s=e(t),r=s[0];s.bind("load.jcloader",o).bind("error.jcloader",function(){s.unbind(".jcloader"),e.isFunction(i)&&i.call(r)}),r.complete&&e.isFunction(n)&&(s.unbind(".jcloader"),n.call(r))},e.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}})(jQuery)}(),function(){(function(e,t){function n(t,n){var o,s,r,a=t.nodeName.toLowerCase();return"area"===a?(o=t.parentNode,s=o.name,t.href&&s&&"map"===o.nodeName.toLowerCase()?(r=e("img[usemap=#"+s+"]")[0],!!r&&i(r)):!1):(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var o=0,s=/^ui-id-\d+$/;e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return"number"==typeof t?this.each(function(){var i=this;setTimeout(function(){e(i).focus(),n&&n.call(i)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,o,s=e(this[0]);s.length&&s[0]!==document;){if(i=s.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(o=parseInt(s.css("zIndex"),10),!isNaN(o)&&0!==o))return o;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++o)})},removeUniqueId:function(){return this.each(function(){s.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),o=isNaN(i);return(o||i>=0)&&n(t,!o)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===n.offsetHeight,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,i){function o(t,n,i,o){return e.each(s,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),o&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var s="Width"===i?["Left","Right"]:["Top","Bottom"],r=i.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?a["inner"+i].call(this):this.each(function(){e(this).css(r,o(this,n)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?a["outer"+i].call(this,t):this.each(function(){e(this).css(r,o(this,t,!0,n)+"px")})}}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=6===parseFloat(t[1],10)}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var o,s=e.ui[t].prototype;for(o in i)s.plugins[o]=s.plugins[o]||[],s.plugins[o].push([n,i[o]])},call:function(e,t,n){var i,o=e.plugins[t];if(o&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;o.length>i;i++)e.options[o[i][0]]&&o[i][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",o=!1;return t[i]>0?!0:(t[i]=1,o=t[i]>0,t[i]=0,o)},isOverAxis:function(e,t,n){return e>t&&t+n>e},isOver:function(t,n,i,o,s,r){return e.ui.isOverAxis(t,i,s)&&e.ui.isOverAxis(n,o,r)}}))})(jQuery),function(e,t){var n=0,i=Array.prototype.slice,o=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(s){}o(t)},e.widget=function(n,i,o){var s,r,a,l,c=n.split(".")[0];n=n.split(".")[1],s=c+"-"+n,o||(o=i,i=e.Widget),e.expr[":"][s.toLowerCase()]=function(t){return!!e.data(t,s)},e[c]=e[c]||{},r=e[c][n],a=e[c][n]=function(e,n){return this._createWidget?(arguments.length&&this._createWidget(e,n),t):new a(e,n)},e.extend(a,r,{version:o.version,_proto:e.extend({},o),_childConstructors:[]}),l=new i,l.options=e.widget.extend({},l.options),e.each(o,function(t,n){e.isFunction(n)&&(o[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},o=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,s=this._superApply;return this._super=e,this._superApply=o,t=n.apply(this,arguments),this._super=i,this._superApply=s,t}}())}),a.prototype=e.widget.extend(l,{widgetEventPrefix:r?l.widgetEventPrefix:n},o,{constructor:a,namespace:c,widgetName:n,widgetBaseClass:s,widgetFullName:s}),r?(e.each(r._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete r._childConstructors):i._childConstructors.push(a),e.widget.bridge(n,a)},e.widget.extend=function(n){for(var o,s,r=i.call(arguments,1),a=0,l=r.length;l>a;a++)for(o in r[a])s=r[a][o],r[a].hasOwnProperty(o)&&s!==t&&(n[o]=e.isPlainObject(s)?e.isPlainObject(n[o])?e.widget.extend({},n[o],s):e.widget.extend({},s):s);return n},e.widget.bridge=function(n,o){var s=o.prototype.widgetFullName||n;e.fn[n]=function(r){var a="string"==typeof r,l=i.call(arguments,1),c=this;return r=!a&&l.length?e.widget.extend.apply(null,[r].concat(l)):r,a?this.each(function(){var i,o=e.data(this,s);return o?e.isFunction(o[r])&&"_"!==r.charAt(0)?(i=o[r].apply(o,l),i!==o&&i!==t?(c=i&&i.jquery?c.pushStack(i.get()):i,!1):t):e.error("no such method '"+r+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+r+"'")}):this.each(function(){var t=e.data(this,s);t?t.option(r||{})._init():e.data(this,s,new o(r,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetName,this),e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var o,s,r,a=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(a={},o=n.split("."),n=o.shift(),o.length){for(s=a[n]=e.widget.extend({},this.options[n]),r=0;o.length-1>r;r++)s[o[r]]=s[o[r]]||{},s=s[o[r]];if(n=o.pop(),i===t)return s[n]===t?null:s[n];s[n]=i}else{if(i===t)return this.options[n]===t?null:this.options[n];a[n]=i}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this
},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(n,i,o){var s,r=this;"boolean"!=typeof n&&(o=i,i=n,n=!1),o?(i=s=e(i),this.bindings=this.bindings.add(i)):(o=i,i=this.element,s=this.widget()),e.each(o,function(o,a){function l(){return n||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?r[a]:a).apply(r,arguments):t}"string"!=typeof a&&(l.guid=a.guid=a.guid||l.guid||e.guid++);var c=o.match(/^(\w+)\s*(.*)$/),u=c[1]+r.eventNamespace,d=c[2];d?s.delegate(d,u,l):i.bind(u,l)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var o,s,r=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent)for(o in s)o in n||(n[o]=s[o]);return this.element.trigger(n,i),!(e.isFunction(r)&&r.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,o,s){"string"==typeof o&&(o={effect:o});var r,a=o?o===!0||"number"==typeof o?n:o.effect||n:t;o=o||{},"number"==typeof o&&(o={duration:o}),r=!e.isEmptyObject(o),o.complete=s,o.delay&&i.delay(o.delay),r&&e.effects&&(e.effects.effect[a]||e.uiBackCompat!==!1&&e.effects[a])?i[t](o):a!==t&&i[a]?i[a](o.duration,o.easing,s):i.queue(function(n){e(this)[t](),s&&s.call(i[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,o=1===n.which,s="string"==typeof this.options.cancel&&n.target.nodeName?e(n.target).closest(this.options.cancel).length:!1;return o&&!s&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){function n(e,t,n){return[parseInt(e[0],10)*(p.test(e[0])?t/100:1),parseInt(e[1],10)*(p.test(e[1])?n/100:1)]}function i(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var o,s=Math.max,r=Math.abs,a=Math.round,l=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+%?/,d=/^\w+/,p=/%$/,h=e.fn.position;e.position={scrollbarWidth:function(){if(o!==t)return o;var n,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=s.children()[0];return e("body").append(s),n=r.offsetWidth,s.css("overflow","scroll"),i=r.offsetWidth,n===i&&(i=s[0].clientWidth),s.remove(),o=n-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),i=t.isWindow?"":t.element.css("overflow-y"),o="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,s="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:o?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]);return{element:n,isWindow:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return h.apply(this,arguments);t=e.extend({},t);var o,p,f,m,g,v=e(t.of),b=e.position.getWithinInfo(t.within),_=e.position.getScrollInfo(b),y=v[0],w=(t.collision||"flip").split(" "),x={};return 9===y.nodeType?(p=v.width(),f=v.height(),m={top:0,left:0}):e.isWindow(y)?(p=v.width(),f=v.height(),m={top:v.scrollTop(),left:v.scrollLeft()}):y.preventDefault?(t.at="left top",p=f=0,m={top:y.pageY,left:y.pageX}):(p=v.outerWidth(),f=v.outerHeight(),m=v.offset()),g=e.extend({},m),e.each(["my","at"],function(){var e,n,i=(t[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):c.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=c.test(i[1])?i[1]:"center",e=u.exec(i[0]),n=u.exec(i[1]),x[this]=[e?e[0]:0,n?n[0]:0],t[this]=[d.exec(i[0])[0],d.exec(i[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===t.at[0]?g.left+=p:"center"===t.at[0]&&(g.left+=p/2),"bottom"===t.at[1]?g.top+=f:"center"===t.at[1]&&(g.top+=f/2),o=n(x.at,p,f),g.left+=o[0],g.top+=o[1],this.each(function(){var l,c,u=e(this),d=u.outerWidth(),h=u.outerHeight(),y=i(this,"marginLeft"),C=i(this,"marginTop"),k=d+y+i(this,"marginRight")+_.width,T=h+C+i(this,"marginBottom")+_.height,M=e.extend({},g),S=n(x.my,u.outerWidth(),u.outerHeight());"right"===t.my[0]?M.left-=d:"center"===t.my[0]&&(M.left-=d/2),"bottom"===t.my[1]?M.top-=h:"center"===t.my[1]&&(M.top-=h/2),M.left+=S[0],M.top+=S[1],e.support.offsetFractions||(M.left=a(M.left),M.top=a(M.top)),l={marginLeft:y,marginTop:C},e.each(["left","top"],function(n,i){e.ui.position[w[n]]&&e.ui.position[w[n]][i](M,{targetWidth:p,targetHeight:f,elemWidth:d,elemHeight:h,collisionPosition:l,collisionWidth:k,collisionHeight:T,offset:[o[0]+S[0],o[1]+S[1]],my:t.my,at:t.at,within:b,elem:u})}),e.fn.bgiframe&&u.bgiframe(),t.using&&(c=function(e){var n=m.left-M.left,i=n+p-d,o=m.top-M.top,a=o+f-h,l={target:{element:v,left:m.left,top:m.top,width:p,height:f},element:{element:u,left:M.left,top:M.top,width:d,height:h},horizontal:0>i?"left":n>0?"right":"center",vertical:0>a?"top":o>0?"bottom":"middle"};d>p&&p>r(n+i)&&(l.horizontal="center"),h>f&&f>r(o+a)&&(l.vertical="middle"),l.important=s(r(n),r(i))>s(r(o),r(a))?"horizontal":"vertical",t.using.call(this,e,l)}),u.offset(e.extend(M,{using:c}))})},e.ui.position={fit:{left:function(e,t){var n,i=t.within,o=i.isWindow?i.scrollLeft:i.offset.left,r=i.width,a=e.left-t.collisionPosition.marginLeft,l=o-a,c=a+t.collisionWidth-r-o;t.collisionWidth>r?l>0&&0>=c?(n=e.left+l+t.collisionWidth-r-o,e.left+=l-n):e.left=c>0&&0>=l?o:l>c?o+r-t.collisionWidth:o:l>0?e.left+=l:c>0?e.left-=c:e.left=s(e.left-a,e.left)},top:function(e,t){var n,i=t.within,o=i.isWindow?i.scrollTop:i.offset.top,r=t.within.height,a=e.top-t.collisionPosition.marginTop,l=o-a,c=a+t.collisionHeight-r-o;t.collisionHeight>r?l>0&&0>=c?(n=e.top+l+t.collisionHeight-r-o,e.top+=l-n):e.top=c>0&&0>=l?o:l>c?o+r-t.collisionHeight:o:l>0?e.top+=l:c>0?e.top-=c:e.top=s(e.top-a,e.top)}},flip:{left:function(e,t){var n,i,o=t.within,s=o.offset.left+o.scrollLeft,a=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,d=c+t.collisionWidth-a-l,p="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,h="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(n=e.left+p+h+f+t.collisionWidth-a-s,(0>n||r(u)>n)&&(e.left+=p+h+f)):d>0&&(i=e.left-t.collisionPosition.marginLeft+p+h+f-l,(i>0||d>r(i))&&(e.left+=p+h+f))},top:function(e,t){var n,i,o=t.within,s=o.offset.top+o.scrollTop,a=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,d=c+t.collisionHeight-a-l,p="top"===t.my[1],h=p?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(i=e.top+h+f+m+t.collisionHeight-a-s,e.top+h+f+m>u&&(0>i||r(u)>i)&&(e.top+=h+f+m)):d>0&&(n=e.top-t.collisionPosition.marginTop+h+f+m-l,e.top+h+f+m>d&&(n>0||d>r(n))&&(e.top+=h+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,i,o,s,r=document.getElementsByTagName("body")[0],a=document.createElement("div");t=document.createElement(r?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in i)t.style[s]=i[s];t.appendChild(a),n=r||document.documentElement,n.insertBefore(t,n.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",o=e(a).offset().left,e.support.offsetFractions=o>10&&11>o,t.innerHTML="",n.removeChild(t)}(),e.uiBackCompat!==!1&&function(e){var n=e.fn.position;e.fn.position=function(i){if(!i||!i.offset)return n.call(this,i);var o=i.offset.split(" "),s=i.at.split(" ");return 1===o.length&&(o[1]=o[0]),/^\d/.test(o[0])&&(o[0]="+"+o[0]),/^\d/.test(o[1])&&(o[1]="+"+o[1]),1===s.length&&(/left|center|right/.test(s[0])?s[1]="center":(s[1]=s[0],s[0]="center")),n.call(this,e.extend(i,{at:s[0]+o[0]+" "+s[1]+o[1],offset:t}))}}(jQuery)}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",t,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);for(var i=this.element[0],o=!1;i&&(i=i.parentNode);)i==document&&(o=!0);if(!o&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!n||"valid"==this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=this.options.handle&&e(this.options.handle,this.element).length?!1:!0;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):"clone"==n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"==n.appendTo?this.element[0].parentNode:n.appendTo),i[0]==this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=["document"==t.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==t.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==t.containment?0:e(window).scrollLeft())+e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==t.containment?0:e(window).scrollTop())+(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(t.containment)||t.containment.constructor==Array)t.containment.constructor==Array&&(this.containment=t.containment);else{var n=e(t.containment),i=n[0];if(!i)return;n.offset();var o="hidden"!=e(i).css("overflow");this.containment=[(parseInt(e(i).css("borderLeftWidth"),10)||0)+(parseInt(e(i).css("paddingLeft"),10)||0),(parseInt(e(i).css("borderTopWidth"),10)||0)+(parseInt(e(i).css("paddingTop"),10)||0),(o?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e(i).css("borderLeftWidth"),10)||0)-(parseInt(e(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(o?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e(i).css("borderTopWidth"),10)||0)-(parseInt(e(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"==t?1:-1,o=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),s=/(html|body)/i.test(o[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():s?0:o.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():s?0:o.scrollLeft())*i}},_generatePosition:function(t){var n=this.options,i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(i[0].tagName),s=t.pageX,r=t.pageY;if(this.originalPosition){var a;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();a=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else a=this.containment;t.pageX-this.offset.click.left<a[0]&&(s=a[0]+this.offset.click.left),t.pageY-this.offset.click.top<a[1]&&(r=a[1]+this.offset.click.top),t.pageX-this.offset.click.left>a[2]&&(s=a[2]+this.offset.click.left),t.pageY-this.offset.click.top>a[3]&&(r=a[3]+this.offset.click.top)}if(n.grid){var c=n.grid[1]?this.originalPageY+Math.round((r-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;r=a?c-this.offset.click.top<a[1]||c-this.offset.click.top>a[3]?c-this.offset.click.top<a[1]?c+n.grid[1]:c-n.grid[1]:c:c;var u=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=a?u-this.offset.click.left<a[0]||u-this.offset.click.left>a[2]?u-this.offset.click.left<a[0]?u+n.grid[0]:u-n.grid[0]:u:u}}return{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:i.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:i.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var i=e(this).data("draggable"),o=i.options,s=e.extend({},n,{item:i.element});i.sortables=[],e(o.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var i=e(this).data("draggable"),o=e.extend({},n,{item:i.element});e.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,o))})},drag:function(t,n){var i=e(this).data("draggable"),o=this;e.each(i.sortables,function(){var s=!1,r=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,e.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!=r&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(r.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(o).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",t),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",t),i.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var i=e(n.helper),o=e(this).data("draggable").options;i.css("opacity")&&(o._opacity=i.css("opacity")),i.css("opacity",o.opacity)},stop:function(t,n){var i=e(this).data("draggable").options;i._opacity&&e(n.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("draggable");t.scrollParent[0]!=document&&"HTML"!=t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("draggable"),i=n.options,o=!1;n.scrollParent[0]!=document&&"HTML"!=n.scrollParent[0].tagName?(i.axis&&"x"==i.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?n.scrollParent[0].scrollTop=o=n.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-n.overflowOffset.top<i.scrollSensitivity&&(n.scrollParent[0].scrollTop=o=n.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"==i.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?n.scrollParent[0].scrollLeft=o=n.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-n.overflowOffset.left<i.scrollSensitivity&&(n.scrollParent[0].scrollLeft=o=n.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"==i.axis||(t.pageY-e(document).scrollTop()<i.scrollSensitivity?o=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(o=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"==i.axis||(t.pageX-e(document).scrollLeft()<i.scrollSensitivity?o=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(o=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed)))),o!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!=String?n.snap.items||":data(draggable)":n.snap).each(function(){var n=e(this),i=n.offset();this!=t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:i.top,left:i.left})})},drag:function(t,n){for(var i=e(this).data("draggable"),o=i.options,s=o.snapTolerance,r=n.offset.left,a=r+i.helperProportions.width,l=n.offset.top,c=l+i.helperProportions.height,u=i.snapElements.length-1;u>=0;u--){var d=i.snapElements[u].left,p=d+i.snapElements[u].width,h=i.snapElements[u].top,f=h+i.snapElements[u].height;if(r>d-s&&p+s>r&&l>h-s&&f+s>l||r>d-s&&p+s>r&&c>h-s&&f+s>c||a>d-s&&p+s>a&&l>h-s&&f+s>l||a>d-s&&p+s>a&&c>h-s&&f+s>c){if("inner"!=o.snapMode){var m=s>=Math.abs(h-c),g=s>=Math.abs(f-l),v=s>=Math.abs(d-a),b=s>=Math.abs(p-r);m&&(n.position.top=i._convertPositionTo("relative",{top:h-i.helperProportions.height,left:0}).top-i.margins.top),g&&(n.position.top=i._convertPositionTo("relative",{top:f,left:0}).top-i.margins.top),v&&(n.position.left=i._convertPositionTo("relative",{top:0,left:d-i.helperProportions.width}).left-i.margins.left),b&&(n.position.left=i._convertPositionTo("relative",{top:0,left:p}).left-i.margins.left)}var _=m||g||v||b;if("outer"!=o.snapMode){var m=s>=Math.abs(h-l),g=s>=Math.abs(f-c),v=s>=Math.abs(d-r),b=s>=Math.abs(p-a);m&&(n.position.top=i._convertPositionTo("relative",{top:h,left:0}).top-i.margins.top),g&&(n.position.top=i._convertPositionTo("relative",{top:f-i.helperProportions.height,left:0}).top-i.margins.top),v&&(n.position.left=i._convertPositionTo("relative",{top:0,left:d}).left-i.margins.left),b&&(n.position.left=i._convertPositionTo("relative",{top:0,left:p-i.helperProportions.width}).left-i.margins.left)}!i.snapElements[u].snapping&&(m||g||v||b||_)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[u].item})),i.snapElements[u].snapping=m||g||v||b||_}else i.snapElements[u].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[u].item})),i.snapElements[u].snapping=!1}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t=e(this).data("draggable").options,n=e.makeArray(e(t.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(n.length){var i=parseInt(n[0].style.zIndex)||0;e(n).each(function(e){this.style.zIndex=i+e}),this[0].style.zIndex=i+n.length}}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var i=e(n.helper),o=e(this).data("draggable").options;i.css("zIndex")&&(o._zIndex=i.css("zIndex")),i.css("zIndex",o.zIndex)},stop:function(t,n){var i=e(this).data("draggable").options;i._zIndex&&e(n.helper).css("zIndex",i._zIndex)}})}(jQuery),function(e){e.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=e.ui.ddmanager.droppables[this.options.scope],n=0;t.length>n;n++)t[n]==this&&t.splice(n,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){"accept"==t&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!=this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!=this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var i=n||e.ui.ddmanager.current;if(!i||(i.currentItem||i.element)[0]==this.element[0])return!1;var o=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope==i.options.scope&&t.accept.call(t.element[0],i.currentItem||i.element)&&e.ui.intersect(i,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(o=!0,!1):undefined}),o?!1:this.accept.call(this.element[0],i.currentItem||i.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(i)),this.element):!1
},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(t,n,i){if(!n.offset)return!1;var o=(t.positionAbs||t.position.absolute).left,s=o+t.helperProportions.width,r=(t.positionAbs||t.position.absolute).top,a=r+t.helperProportions.height,l=n.offset.left,c=l+n.proportions.width,u=n.offset.top,d=u+n.proportions.height;switch(i){case"fit":return o>=l&&c>=s&&r>=u&&d>=a;case"intersect":return o+t.helperProportions.width/2>l&&c>s-t.helperProportions.width/2&&r+t.helperProportions.height/2>u&&d>a-t.helperProportions.height/2;case"pointer":var p=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,h=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,f=e.ui.isOver(h,p,u,l,n.proportions.height,n.proportions.width);return f;case"touch":return(r>=u&&d>=r||a>=u&&d>=a||u>r&&a>d)&&(o>=l&&c>=o||s>=l&&c>=s||l>o&&s>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var i=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var r=0;i.length>r;r++)if(!(i[r].options.disabled||t&&!i[r].accept.call(i[r].element[0],t.currentItem||t.element))){for(var a=0;s.length>a;a++)if(s[a]==i[r].element[0]){i[r].proportions.height=0;continue e}i[r].visible="none"!=i[r].element.css("display"),i[r].visible&&("mousedown"==o&&i[r]._activate.call(i[r],n),i[r].offset=i[r].element.offset(),i[r].proportions={width:i[r].element[0].offsetWidth,height:i[r].element[0].offsetHeight})}},drop:function(t,n){var i=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(i=this._drop.call(this,n)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n)))}),i},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i=e.ui.intersect(t,this,this.options.tolerance),o=i||1!=this.isover?i&&0==this.isover?"isover":null:"isout";if(o){var s;if(this.options.greedy){var r=this.options.scope,a=this.element.parents(":data(droppable)").filter(function(){return e.data(this,"droppable").options.scope===r});a.length&&(s=e.data(a[0],"droppable"),s.greedyChild="isover"==o?1:0)}s&&"isover"==o&&(s.isover=0,s.isout=1,s._out.call(s,n)),this[o]=1,this["isout"==o?"isover":"isout"]=0,this["isover"==o?"_over":"_out"].call(this,n),s&&"isout"==o&&(s.isout=0,s.isover=1,s._over.call(s,n))}}})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e){e.widget("ui.resizable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,n=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var i=this.handles.split(",");this.handles={};for(var o=0;i.length>o;o++){var s=e.trim(i[o]),r="ui-resizable-"+s,a=e('<div class="ui-resizable-handle '+r+'"></div>');a.css({zIndex:n.zIndex}),"se"==s&&a.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(a)}}this._renderAxis=function(t){t=t||this.element;for(var n in this.handles){if(this.handles[n].constructor==String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var i=e(this.handles[n],this.element),o=0;o=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth();var s=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(s,o),this._proportionallyResize()}e(this.handles[n]).length}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),n.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){n.disabled||(e(this).removeClass("ui-resizable-autohide"),t._handles.show())}).mouseleave(function(){n.disabled||t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var n=this.element;this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")}).insertAfter(n),n.remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var n=!1;for(var i in this.handles)e(this.handles[i])[0]==t.target&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(n){var i=this.options,o=this.element.position(),s=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(s.is(".ui-draggable")||/absolute/.test(s.css("position")))&&s.css({position:"absolute",top:o.top,left:o.left}),this._renderProxy();var r=t(this.helper.css("left")),a=t(this.helper.css("top"));i.containment&&(r+=e(i.containment).scrollLeft()||0,a+=e(i.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:r,top:a},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:r,top:a},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:n.pageX,top:n.pageY},this.aspectRatio="number"==typeof i.aspectRatio?i.aspectRatio:this.originalSize.width/this.originalSize.height||1;var l=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor","auto"==l?this.axis+"-resize":l),s.addClass("ui-resizable-resizing"),this._propagate("start",n),!0},_mouseDrag:function(e){var t=this.helper,n=(this.options,this.originalMousePosition),i=this.axis,o=e.pageX-n.left||0,s=e.pageY-n.top||0,r=this._change[i];if(!r)return!1;var a=r.apply(this,[e,o,s]);return this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(a=this._updateRatio(a,e)),a=this._respectSize(a,e),this._propagate("resize",e),t.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(a),this._trigger("resize",e,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n=this.options,i=this;if(this._helper){var o=this._proportionallyResizeElements,s=o.length&&/textarea/i.test(o[0].nodeName),r=s&&e.ui.hasScroll(o[0],"left")?0:i.sizeDiff.height,a=s?0:i.sizeDiff.width,l={width:i.helper.width()-a,height:i.helper.height()-r},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;n.animate||this.element.css(e.extend(l,{top:u,left:c})),i.helper.height(i.size.height),i.helper.width(i.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,i,o,s,r,a=this.options;r={minWidth:n(a.minWidth)?a.minWidth:0,maxWidth:n(a.maxWidth)?a.maxWidth:1/0,minHeight:n(a.minHeight)?a.minHeight:0,maxHeight:n(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=r.minHeight*this.aspectRatio,o=r.minWidth/this.aspectRatio,i=r.maxHeight*this.aspectRatio,s=r.maxWidth/this.aspectRatio,t>r.minWidth&&(r.minWidth=t),o>r.minHeight&&(r.minHeight=o),r.maxWidth>i&&(r.maxWidth=i),r.maxHeight>s&&(r.maxHeight=s)),this._vBoundaries=r},_updateCache:function(e){this.options,this.offset=this.helper.offset(),n(e.left)&&(this.position.left=e.left),n(e.top)&&(this.position.top=e.top),n(e.height)&&(this.size.height=e.height),n(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=(this.options,this.position),i=this.size,o=this.axis;return n(e.height)?e.width=e.height*this.aspectRatio:n(e.width)&&(e.height=e.width/this.aspectRatio),"sw"==o&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"==o&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e,t){var i=(this.helper,this._vBoundaries),o=(this._aspectRatio||t.shiftKey,this.axis),s=n(e.width)&&i.maxWidth&&i.maxWidth<e.width,r=n(e.height)&&i.maxHeight&&i.maxHeight<e.height,a=n(e.width)&&i.minWidth&&i.minWidth>e.width,l=n(e.height)&&i.minHeight&&i.minHeight>e.height;a&&(e.width=i.minWidth),l&&(e.height=i.minHeight),s&&(e.width=i.maxWidth),r&&(e.height=i.maxHeight);var c=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,d=/sw|nw|w/.test(o),p=/nw|ne|n/.test(o);a&&d&&(e.left=c-i.minWidth),s&&d&&(e.left=c-i.maxWidth),l&&p&&(e.top=u-i.minHeight),r&&p&&(e.top=u-i.maxHeight);var h=!e.width&&!e.height;return h&&!e.left&&e.top?e.top=null:h&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){if(this.options,this._proportionallyResizeElements.length)for(var t=this.helper||this.element,n=0;this._proportionallyResizeElements.length>n;n++){var i=this._proportionallyResizeElements[n];if(!this.borderDif){var o=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],s=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=e.map(o,function(e,t){var n=parseInt(e,10)||0,i=parseInt(s[t],10)||0;return n+i})}i.css({height:t.height()-this.borderDif[0]-this.borderDif[2]||0,width:t.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;if(this.elementOffset=t.offset(),this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var i=e.ui.ie6?1:0,o=e.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+o,height:this.element.outerHeight()+o,position:"absolute",left:this.elementOffset.left-i+"px",top:this.elementOffset.top-i+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=(this.options,this.originalSize),i=this.originalPosition;return{left:i.left+t,width:n.width-t}},n:function(e,t,n){var i=(this.options,this.originalSize),o=this.originalPosition;return{top:o.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!=t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("resizable"),n=t.options,i=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof n.alsoResize||n.alsoResize.parentNode?i(n.alsoResize):n.alsoResize.length?(n.alsoResize=n.alsoResize[0],i(n.alsoResize)):e.each(n.alsoResize,function(e){i(e)})},resize:function(t,n){var i=e(this).data("resizable"),o=i.options,s=i.originalSize,r=i.originalPosition,a={height:i.size.height-s.height||0,width:i.size.width-s.width||0,top:i.position.top-r.top||0,left:i.position.left-r.left||0},l=function(t,i){e(t).each(function(){var t=e(this),o=e(this).data("resizable-alsoresize"),s={},r=i&&i.length?i:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,function(e,t){var n=(o[t]||0)+(a[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};"object"!=typeof o.alsoResize||o.alsoResize.nodeType?l(o.alsoResize):e.each(o.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("resizable"),i=n.options,o=n._proportionallyResizeElements,s=o.length&&/textarea/i.test(o[0].nodeName),r=s&&e.ui.hasScroll(o[0],"left")?0:n.sizeDiff.height,a=s?0:n.sizeDiff.width,l={width:n.size.width-a,height:n.size.height-r},c=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,u=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};o&&o.length&&e(o[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var n=e(this).data("resizable"),i=n.options,o=n.element,s=i.containment,r=s instanceof e?s.get(0):/parent/.test(s)?o.parent().get(0):s;if(r)if(n.containerElement=e(r),/document/.test(s)||s==document)n.containerOffset={left:0,top:0},n.containerPosition={left:0,top:0},n.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var a=e(r),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,n){l[e]=t(a.css("padding"+n))}),n.containerOffset=a.offset(),n.containerPosition=a.position(),n.containerSize={height:a.innerHeight()-l[3],width:a.innerWidth()-l[1]};var c=n.containerOffset,u=n.containerSize.height,d=n.containerSize.width,p=e.ui.hasScroll(r,"left")?r.scrollWidth:d,h=e.ui.hasScroll(r)?r.scrollHeight:u;n.parentData={element:r,left:c.left,top:c.top,width:p,height:h}}},resize:function(t){var n=e(this).data("resizable"),i=n.options,o=(n.containerSize,n.containerOffset),s=(n.size,n.position),r=n._aspectRatio||t.shiftKey,a={top:0,left:0},l=n.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(a=o),s.left<(n._helper?o.left:0)&&(n.size.width=n.size.width+(n._helper?n.position.left-o.left:n.position.left-a.left),r&&(n.size.height=n.size.width/n.aspectRatio),n.position.left=i.helper?o.left:0),s.top<(n._helper?o.top:0)&&(n.size.height=n.size.height+(n._helper?n.position.top-o.top:n.position.top),r&&(n.size.width=n.size.height*n.aspectRatio),n.position.top=n._helper?o.top:0),n.offset.left=n.parentData.left+n.position.left,n.offset.top=n.parentData.top+n.position.top;var c=Math.abs((n._helper?n.offset.left-a.left:n.offset.left-a.left)+n.sizeDiff.width),u=Math.abs((n._helper?n.offset.top-a.top:n.offset.top-o.top)+n.sizeDiff.height),d=n.containerElement.get(0)==n.element.parent().get(0),p=/relative|absolute/.test(n.containerElement.css("position"));d&&p&&(c-=n.parentData.left),c+n.size.width>=n.parentData.width&&(n.size.width=n.parentData.width-c,r&&(n.size.height=n.size.width/n.aspectRatio)),u+n.size.height>=n.parentData.height&&(n.size.height=n.parentData.height-u,r&&(n.size.width=n.size.height*n.aspectRatio))},stop:function(){var t=e(this).data("resizable"),n=t.options,i=(t.position,t.containerOffset),o=t.containerPosition,s=t.containerElement,r=e(t.helper),a=r.offset(),l=r.outerWidth()-t.sizeDiff.width,c=r.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:a.left-o.left-i.left,width:l,height:c}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:a.left-o.left-i.left,width:l,height:c})}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("resizable"),n=t.options,i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("resizable");t.options,t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("resizable");t.options,t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t){var n=e(this).data("resizable"),i=n.options,o=n.size,s=n.originalSize,r=n.originalPosition,a=n.axis;i._aspectRatio||t.shiftKey,i.grid="number"==typeof i.grid?[i.grid,i.grid]:i.grid;var l=Math.round((o.width-s.width)/(i.grid[0]||1))*(i.grid[0]||1),c=Math.round((o.height-s.height)/(i.grid[1]||1))*(i.grid[1]||1);/^(se|s|e)$/.test(a)?(n.size.width=s.width+l,n.size.height=s.height+c):/^(ne)$/.test(a)?(n.size.width=s.width+l,n.size.height=s.height+c,n.position.top=r.top-c):/^(sw)$/.test(a)?(n.size.width=s.width+l,n.size.height=s.height+c,n.position.left=r.left-l):(n.size.width=s.width+l,n.size.height=s.height+c,n.position.top=r.top-c,n.position.left=r.left-l)}});var t=function(e){return parseInt(e,10)||0},n=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{version:"1.9.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var n;this.refresh=function(){n=e(t.options.filter,t.element[0]),n.addClass("ui-selectee"),n.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=n.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this;if(this.opos=[t.pageX,t.pageY],!this.options.disabled){var i=this.options;this.selectees=e(i.filter,this.element[0]),this._trigger("start",t),e(i.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),i.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var i=e.data(this,"selectable-item");i.startselected=!0,t.metaKey||t.ctrlKey||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element}))}),e(t.target).parents().andSelf().each(function(){var i=e.data(this,"selectable-item");if(i){var o=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected");return i.$element.removeClass(o?"ui-unselecting":"ui-selected").addClass(o?"ui-selecting":"ui-unselecting"),i.unselecting=!o,i.selecting=o,i.selected=o,o?n._trigger("selecting",t,{selecting:i.element}):n._trigger("unselecting",t,{unselecting:i.element}),!1}})}},_mouseDrag:function(t){var n=this;if(this.dragged=!0,!this.options.disabled){var i=this.options,o=this.opos[0],s=this.opos[1],r=t.pageX,a=t.pageY;if(o>r){var l=r;r=o,o=l}if(s>a){var l=a;a=s,s=l}return this.helper.css({left:o,top:s,width:r-o,height:a-s}),this.selectees.each(function(){var l=e.data(this,"selectable-item");if(l&&l.element!=n.element[0]){var c=!1;"touch"==i.tolerance?c=!(l.left>r||o>l.right||l.top>a||s>l.bottom):"fit"==i.tolerance&&(c=l.left>o&&r>l.right&&l.top>s&&a>l.bottom),c?(l.selected&&(l.$element.removeClass("ui-selected"),l.selected=!1),l.unselecting&&(l.$element.removeClass("ui-unselecting"),l.unselecting=!1),l.selecting||(l.$element.addClass("ui-selecting"),l.selecting=!0,n._trigger("selecting",t,{selecting:l.element}))):(l.selecting&&((t.metaKey||t.ctrlKey)&&l.startselected?(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.$element.addClass("ui-selected"),l.selected=!0):(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.startselected&&(l.$element.addClass("ui-unselecting"),l.unselecting=!0),n._trigger("unselecting",t,{unselecting:l.element}))),l.selected&&(t.metaKey||t.ctrlKey||l.startselected||(l.$element.removeClass("ui-selected"),l.selected=!1,l.$element.addClass("ui-unselecting"),l.unselecting=!0,n._trigger("unselecting",t,{unselecting:l.element}))))}}),!1}},_mouseStop:function(t){var n=this;return this.dragged=!1,this.options,e(".ui-unselecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-unselecting"),i.unselecting=!1,i.startselected=!1,n._trigger("unselected",t,{unselected:i.element})}),e(".ui-selecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-selecting").addClass("ui-selected"),i.selecting=!1,i.selected=!0,i.startselected=!0,n._trigger("selected",t,{selected:i.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e){e.widget("ui.sortable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var i=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);var o=null;if(e(t.target).parents().each(function(){return e.data(this,i.widgetName+"-item")==i?(o=e(this),!1):undefined}),e.data(t.target,i.widgetName+"-item")==i&&(o=e(t.target)),!o)return!1;if(this.options.handle&&!n){var s=!1;if(e(this.options.handle,o).find("*").andSelf().each(function(){this==t.target&&(s=!0)}),!s)return!1}return this.currentItem=o,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,i){var o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",o.cursor)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(var s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var n=this.options,i=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?i=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(i=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?i=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(i=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),i!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var o=this.items.length-1;o>=0;o--){var s=this.items[o],r=s.item[0],a=this._intersectsWithPointer(s);if(a&&s.instance===this.currentContainer&&r!=this.currentItem[0]&&this.placeholder[1==a?"next":"prev"]()[0]!=r&&!e.contains(this.placeholder[0],r)&&("semi-dynamic"==this.options.type?!e.contains(this.element[0],r):!0)){if(this.direction=1==a?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,o=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,o=i+this.helperProportions.height,s=e.left,r=s+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,u=this.offset.click.left,d=i+c>a&&l>i+c&&t+u>s&&r>t+u;
return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?d:t+this.helperProportions.width/2>s&&r>n-this.helperProportions.width/2&&i+this.helperProportions.height/2>a&&l>o-this.helperProportions.height/2},_intersectsWithPointer:function(t){var n="x"===this.options.axis||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),i="y"===this.options.axis||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=n&&i,s=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return o?this.floating?r&&"right"==r||"down"==s?2:1:s&&("down"==s?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),o=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"==s&&i||"left"==s&&!i:o&&("down"==o&&n||"up"==o&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=[],i=[],o=this._connectWith();if(o&&t)for(var s=o.length-1;s>=0;s--)for(var r=e(o[s]),a=r.length-1;a>=0;a--){var l=e.data(r[a],this.widgetName);l&&l!=this&&!l.options.disabled&&i.push([e.isFunction(l.options.items)?l.options.items.call(l.element):e(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}i.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var s=i.length-1;s>=0;s--)i[s][0].each(function(){n.push(this)});return e(n)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;t.length>n;n++)if(t[n]==e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,i=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],o=this._connectWith();if(o&&this.ready)for(var s=o.length-1;s>=0;s--)for(var r=e(o[s]),a=r.length-1;a>=0;a--){var l=e.data(r[a],this.widgetName);l&&l!=this&&!l.options.disabled&&(i.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))}for(var s=i.length-1;s>=0;s--)for(var c=i[s][1],u=i[s][0],a=0,d=u.length;d>a;a++){var p=e(u[a]);p.data(this.widgetName+"-item",c),n.push({item:p,instance:c,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var i=this.items[n];if(i.instance==this.currentContainer||!this.currentContainer||i.item[0]==this.currentItem[0]){var o=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item;t||(i.width=o.outerWidth(),i.height=o.outerHeight());var s=o.offset();i.left=s.left,i.top=s.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var s=this.containers[n].element.offset();this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){t=t||this;var n=t.options;if(!n.placeholder||n.placeholder.constructor==String){var i=n.placeholder;n.placeholder={element:function(){var n=e(document.createElement(t.currentItem[0].nodeName)).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return i||(n.style.visibility="hidden"),n},update:function(e,o){(!i||n.forcePlaceholderSize)&&(o.height()||o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}}t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(t){for(var n=null,i=null,o=this.containers.length-1;o>=0;o--)if(!e.contains(this.currentItem[0],this.containers[o].element[0]))if(this._intersectsWith(this.containers[o].containerCache)){if(n&&e.contains(this.containers[o].element[0],n.element[0]))continue;n=this.containers[o],i=o}else this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",t,this._uiHash(this)),this.containers[o].containerCache.over=0);if(n)if(1===this.containers.length)this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1;else{for(var s=1e4,r=null,a=this.containers[i].floating?"left":"top",l=this.containers[i].floating?"width":"height",c=this.positionAbs[a]+this.offset.click[a],u=this.items.length-1;u>=0;u--)if(e.contains(this.containers[i].element[0],this.items[u].item[0])&&this.items[u].item[0]!=this.currentItem[0]){var d=this.items[u].item.offset()[a],p=!1;Math.abs(d-c)>Math.abs(d+this.items[u][l]-c)&&(p=!0,d+=this.items[u][l]),s>Math.abs(d-c)&&(s=Math.abs(d-c),r=this.items[u],this.direction=p?"up":"down")}if(!r&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[i],r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[i].element,!0),this._trigger("change",t,this._uiHash()),this.containers[i]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"==n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!=n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(""==i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],i=e(t.containment).offset(),o="hidden"!=e(n).css("overflow");this.containment=[i.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,i.left+(o?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(o?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"==t?1:-1,o=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),s=/(html|body)/i.test(o[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():s?0:o.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():s?0:o.scrollLeft())*i}},_generatePosition:function(t){var n=this.options,i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(i[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var s=t.pageX,r=t.pageY;if(this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),n.grid)){var a=this.originalPageY+Math.round((r-this.originalPageY)/n.grid[1])*n.grid[1];r=this.containment?a-this.offset.click.top<this.containment[1]||a-this.offset.click.top>this.containment[3]?a-this.offset.click.top<this.containment[1]?a+n.grid[1]:a-n.grid[1]:a:a;var l=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2]?l-this.offset.click.left<this.containment[0]?l+n.grid[0]:l-n.grid[0]:l:l}return{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:i.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:i.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o==this.counter&&this.refreshPositions(!i)})},_clear:function(t,n){this.reverting=!1;var i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var o in this._storedCSS)("auto"==this._storedCSS[o]||"static"==this._storedCSS[o])&&(this._storedCSS[o]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||n||i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(n||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(var o=this.containers.length-1;o>=0;o--)n||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[o])),this.containers[o].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[o])),this.containers[o].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var o=0;i.length>o;o++)i[o].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!n){for(var o=0;i.length>o;o++)i[o].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),function(e){var t=0,n={},i={};n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="hide",i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.9.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var n=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t),i=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.headers=this.element.find(i.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this._hoverable(this.headers),this._focusable(this.headers),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide(),i.collapsible||i.active!==!1&&null!=i.active||(i.active=0),0>i.active&&(i.active+=this.headers.length),this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this._createIcons(),this.refresh(),this.element.attr("role","tablist"),this.headers.attr("role","tab").each(function(t){var i=e(this),o=i.attr("id"),s=i.next(),r=s.attr("id");o||(o=n+"-header-"+t,i.attr("id",o)),r||(r=n+"-panel-"+t,s.attr("id",r)),i.attr("aria-controls",r),s.attr("aria-labelledby",o)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._on(this.headers,{keydown:"_keydown"}),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._setupEvents(i.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),undefined):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t),undefined)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var n=e.ui.keyCode,i=this.headers.length,o=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(o+1)%i];break;case n.LEFT:case n.UP:s=this.headers[(o-1+i)%i];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:s=this.headers[0];break;case n.END:s=this.headers[i-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t,n,i=this.options.heightStyle,o=this.element.parent();"fill"===i?(e.support.minHeight||(n=o.css("overflow"),o.css("overflow","hidden")),t=o.height(),this.element.siblings(":visible").each(function(){var n=e(this),i=n.css("position");"absolute"!==i&&"fixed"!==i&&(t-=n.outerHeight(!0))}),n&&o.css("overflow",n),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===i&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var n=this._findActive(t)[0];n!==this.active[0]&&(n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var n={};t&&(e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._on(this.headers,n))},_eventHandler:function(t){var n=this.options,i=this.active,o=e(t.currentTarget),s=o[0]===i[0],r=s&&n.collapsible,a=r?e():o.next(),l=i.next(),c={oldHeader:i,oldPanel:l,newHeader:r?e():o,newPanel:a};t.preventDefault(),s&&!n.collapsible||this._trigger("beforeActivate",t,c)===!1||(n.active=r?!1:this.headers.index(o),this.active=s?e():o,this._toggle(c),i.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),s||(o.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&o.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),o.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var n=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=i,this.options.animate?this._animate(n,i,t):(i.hide(),n.show(),this._toggleComplete(t)),i.attr({"aria-expanded":"false","aria-hidden":"true"}),i.prev().attr("aria-selected","false"),n.length&&i.length?i.prev().attr("tabIndex",-1):n.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),n.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,o){var s,r,a,l=this,c=0,u=e.length&&(!t.length||e.index()<t.index()),d=this.options.animate||{},p=u&&d.down||d,h=function(){l._toggleComplete(o)};return"number"==typeof p&&(a=p),"string"==typeof p&&(r=p),r=r||p.easing||d.easing,a=a||p.duration||d.duration,t.length?e.length?(s=e.show().outerHeight(),t.animate(n,{duration:a,easing:r,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(i,{duration:a,easing:r,complete:h,step:function(e,n){n.now=Math.round(e),"height"!==n.prop?c+=n.now:"content"!==l.options.heightStyle&&(n.now=Math.round(s-t.outerHeight()-c),c=0)}}),undefined):t.animate(n,a,r,h):e.animate(i,a,r,h)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.uiBackCompat!==!1&&(function(e,t){e.extend(t.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var n=t._create;t._create=function(){if(this.options.navigation){var t=this,i=this.element.find(this.options.header),o=i.next(),s=i.add(o).find("a").filter(this.options.navigationFilter)[0];s&&i.add(o).each(function(n){return e.contains(this,s)?(t.options.active=Math.floor(n/2),!1):undefined})}n.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var n=t._create,i=t._setOption;e.extend(t,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle(),n.call(this)},_setOption:function(e){("autoHeight"===e||"clearStyle"===e||"fillSpace"===e)&&(this.options.heightStyle=this._mergeHeightStyle()),i.apply(this,arguments)},_mergeHeightStyle:function(){var e=this.options;return e.fillSpace?"fill":e.clearStyle?"content":e.autoHeight?"auto":undefined}})}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var n=t._createIcons;t._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected),n.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){t.activate=t._activate;var n=t._findActive;t._findActive=function(e){return-1===e&&(e=!1),e&&"number"!=typeof e&&(e=this.headers.index(this.headers.filter(e)),-1===e&&(e=!1)),n.call(this,e)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(e,t){e.extend(t.options,{change:null,changestart:null});var n=t._trigger;t._trigger=function(e,t,i){var o=n.apply(this,arguments);return o?("beforeActivate"===e?o=n.call(this,"changestart",t,{oldHeader:i.oldHeader,oldContent:i.oldPanel,newHeader:i.newHeader,newContent:i.newPanel}):"activate"===e&&(o=n.call(this,"change",t,{oldHeader:i.oldHeader,oldContent:i.oldPanel,newHeader:i.newHeader,newContent:i.newPanel})),o):!1}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{animate:null,animated:"slide"});var n=t._create;t._create=function(){var e=this.options;null===e.animate&&(e.animate=e.animated?"slide"===e.animated?300:"bounceslide"===e.animated?{duration:200,down:{easing:"easeOutBounce",duration:1e3}}:e.animated:!1),n.call(this)}}(jQuery,jQuery.ui.accordion.prototype))}(jQuery),function(e){var t=0;e.widget("ui.autocomplete",{version:"1.9.2",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,i;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return t=!0,i=!0,n=!0,undefined;t=!1,i=!1,n=!1;var s=e.ui.keyCode;switch(o.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",o);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",o);break;case s.UP:t=!0,this._keyEvent("previous",o);break;case s.DOWN:t=!0,this._keyEvent("next",o);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,o.preventDefault(),this.menu.select(o));break;case s.TAB:this.menu.active&&this.menu.select(o);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(o),o.preventDefault());break;default:n=!0,this._searchTimeout(o)}},keypress:function(i){if(t)return t=!1,i.preventDefault(),undefined;if(!n){var o=e.ui.keyCode;switch(i.keyCode){case o.PAGE_UP:this._move("previousPage",i);break;case o.PAGE_DOWN:this._move("nextPage",i);break;case o.UP:this._keyEvent("previous",i);break;case o.DOWN:this._keyEvent("next",i)}}},input:function(e){return i?(i=!1,e.preventDefault(),undefined):(this._searchTimeout(e),undefined)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,undefined):(clearTimeout(this.searching),this.close(e),this._change(e),undefined)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(i){i.target===t.element[0]||i.target===n||e.contains(n,i.target)||t.close()})})},menufocus:function(t,n){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),undefined;var i=n.item.data("ui-autocomplete-item")||n.item.data("item.autocomplete");!1!==this._trigger("focus",t,{item:i})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value):this.liveRegion.text(i.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item")||t.item.data("item.autocomplete"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),e.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this.document.find(t||"body")[0]),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,o){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):undefined},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,n=++t;return function(i){n===t&&e.__response(i),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,function(e,n){i._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),this.menu.blur(),undefined):(this.menu[e](t),undefined):(this.search(null,t),undefined)
},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return i.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e){var t,n,i,o,s="ui-button ui-widget ui-state-default ui-corner-all",r="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},c=function(t){var n=t.name,i=t.form,o=e([]);return n&&(o=i?e(i).find("[name='"+n+"']"):e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),o};e.widget("ui.button",{version:"1.9.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var r=this,a=this.options,u="checkbox"===this.type||"radio"===this.type,d=u?"":"ui-state-active",p="ui-state-focus";null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(s).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){a.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){a.disabled||e(this).removeClass(d)}).bind("click"+this.eventNamespace,function(e){a.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){r.buttonElement.addClass(p)}).bind("blur"+this.eventNamespace,function(){r.buttonElement.removeClass(p)}),u&&(this.element.bind("change"+this.eventNamespace,function(){o||r.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){a.disabled||(o=!1,n=e.pageX,i=e.pageY)}).bind("mouseup"+this.eventNamespace,function(e){a.disabled||(n!==e.pageX||i!==e.pageY)&&(o=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return a.disabled||o?!1:(e(this).toggleClass("ui-state-active"),r.buttonElement.attr("aria-pressed",r.element[0].checked),undefined)}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled||o)return!1;e(this).addClass("ui-state-active"),r.buttonElement.attr("aria-pressed","true");var t=r.element[0];c(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return a.disabled?!1:(e(this).addClass("ui-state-active"),t=this,r.document.one("mouseup",function(){t=null}),undefined)}).bind("mouseup"+this.eventNamespace,function(){return a.disabled?!1:(e(this).removeClass("ui-state-active"),undefined)}).bind("keydown"+this.eventNamespace,function(t){return a.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),undefined)}).bind("keyup"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(s+" "+r+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1),undefined):(this._resetButton(),undefined)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?c(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),undefined;var t=this.buttonElement.removeClass(a),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),i=this.options.icons,o=i.primary&&i.secondary,s=[];i.primary||i.secondary?(this.options.text&&s.push("ui-button-text-icon"+(o?"s":i.primary?"-primary":"-secondary")),i.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(s.push(o?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.9.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var n in t)(null==t[n]||t[n]==undefined)&&(e[n]=t[n]);return e}$.extend($.ui,{datepicker:{version:"1.9.2"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]),n.hasClass(this.markerClassName)||(this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,i){t.settings[n]=i}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var n=this._get(t,"appendText"),i=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[i?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var o=this._get(t,"showOn");if(("focus"==o||"both"==o)&&e.focus(this._showDatepicker),"button"==o||"both"==o){var s=this._get(t,"buttonText"),r=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:r,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==r?s:$("<img/>").attr({src:r,alt:s,title:s}))),e[i?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var i=function(e){for(var t=0,n=0,i=0;e.length>i;i++)e[i].length>t&&(t=e[i].length,n=i);return n};t.setMonth(i(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(i(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,i){t.settings[n]=i}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,n,i,o){var s=this._dialogInst;if(!s){this.uuid+=1;var r="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+r+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}if(extendRemove(s.settings,i||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,!this._pos){var a=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[a/2-100+c,l/2-150+u]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var i=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),"input"==i?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==i||"span"==i)&&t.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var i=e.nodeName.toLowerCase();if("input"==i)e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==i||"span"==i){var o=t.children("."+this._inlineClass);o.children().removeClass("ui-state-disabled"),o.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})}},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var i=e.nodeName.toLowerCase();if("input"==i)e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==i||"span"==i){var o=t.children("."+this._inlineClass);o.children().addClass("ui-state-disabled"),o.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e}},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var i=this._getInst(e);if(2==arguments.length&&"string"==typeof t)return"defaults"==t?$.extend({},$.datepicker._defaults):i?"all"==t?$.extend({},i.settings):this._get(i,t):null;var o=t||{};if("string"==typeof t&&(o={},o[t]=n),i){this._curInst==i&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),r=this._getMinMaxDate(i,"min"),a=this._getMinMaxDate(i,"max");extendRemove(i.settings,o),null!==r&&o.dateFormat!==undefined&&o.minDate===undefined&&(i.settings.minDate=this._formatDate(i,r)),null!==a&&o.dateFormat!==undefined&&o.maxDate===undefined&&(i.settings.maxDate=this._formatDate(i,a)),this._attachments($(e),i),this._autoSize(i),this._setDate(i,s),this._updateAlternate(i),this._updateDatepicker(i)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,i=t.dpDiv.is(".ui-datepicker-rtl");if(t._keyEvent=!0,$.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var o=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);o[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,o[0]);var s=$.datepicker._get(t,"onSelect");if(s){var r=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[r,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,i?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,i?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else 36==e.keyCode&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),i=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||" ">i||!n||n.indexOf(i)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(i){$.datepicker.log(i)}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!=e.nodeName.toLowerCase()&&(e=$("input",e.parentNode)[0]),!$.datepicker._isDisabledDatepicker(e)&&$.datepicker._lastInput!=e){var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),i=n?n.apply(e,[e,t]):{};if(i!==!1){extendRemove(t.settings,i),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var o=!1;$(e).parents().each(function(){return o|="fixed"==$(this).css("position"),!o});var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,o),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":o?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"}),!t.inline){var r=$.datepicker._get(t,"showAnim"),a=$.datepicker._get(t,"duration"),l=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[r]||$.effects[r])?t.dpDiv.show(r,$.datepicker._get(t,"showOptions"),a,l):t.dpDiv[r||"show"](r?a:null,l),r&&a||l(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}}}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n=e.dpDiv.find("iframe.ui-datepicker-cover");n.length&&n.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i=this._getNumberOfMonths(e),o=i[1],s=17;if(e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),o>1&&e.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",s*o+"em"),e.dpDiv[(1!=i[0]||1!=i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus(),e.yearshtml){var r=e.yearshtml;setTimeout(function(){r===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),r=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var i=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,a=document.documentElement.clientWidth+(n?0:$(document).scrollLeft()),l=document.documentElement.clientHeight+(n?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?i-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+r?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+i>a&&a>i?Math.abs(t.left+i-a):0),t.top-=Math.min(t.top,t.top+o>l&&l>o?Math.abs(o+r):0),t},_findPos:function(e){for(var t=this._getInst(e),n=this._get(t,"isRTL");e&&("hidden"==e.type||1!=e.nodeType||$.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];var i=$(e).offset();return[i.left,i.top]},_hideDatepicker:function(e){var t=this._curInst;if(t&&(!e||t==$.data(e,PROP_NAME))&&this._datepickerShowing){var n=this._get(t,"showAnim"),i=this._get(t,"duration"),o=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[n]||$.effects[n])?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),i,o):t.dpDiv["slideDown"==n?"slideUp":"fadeIn"==n?"fadeOut":"hide"](n?i:null,o),n||o(),this._datepickerShowing=!1;var s=this._get(t,"onClose");s&&s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if($.datepicker._curInst){var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&0==t.parents("#"+$.datepicker._mainDivId).length&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()}},_adjustDate:function(e,t,n){var i=$(e),o=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(o,t+("M"==n?this._get(o,"showCurrentAtPos"):0),n),this._updateDatepicker(o))},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var i=new Date;n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var i=$(e),o=this._getInst(i[0]);o["selected"+("M"==n?"Month":"Year")]=o["draw"+("M"==n?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(i)},_selectDay:function(e,t,n,i){var o=$(e);if(!$(i).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(o[0])){var s=this._getInst(o[0]);s.selectedDay=s.currentDay=$("a",i).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))}},_clearDate:function(e){var t=$(e);this._getInst(t[0]),this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),i=this._getInst(n[0]);t=null!=t?t:this._formatDate(i),i.input&&i.input.val(t),this._updateAlternate(i);var o=this._get(i,"onSelect");o?o.apply(i.input?i.input[0]:null,[t,i]):i.input&&i.input.trigger("change"),i.inline?this._updateDatepicker(i):(this._hideDatepicker(),this._lastInput=i.input[0],"object"!=typeof i.input[0]&&i.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),i=this._getDate(e),o=this.formatDate(n,i,this._getFormatConfig(e));$(t).each(function(){$(this).val(o)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1},parseDate:function(e,t,n){if(null==e||null==t)throw"Invalid arguments";if(t="object"==typeof t?""+t:t+"",""==t)return null;var i=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;i="string"!=typeof i?i:(new Date).getFullYear()%100+parseInt(i,10);for(var o=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,r=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,a=(n?n.monthNames:null)||this._defaults.monthNames,l=-1,c=-1,u=-1,d=-1,p=!1,h=function(t){var n=e.length>b+1&&e.charAt(b+1)==t;return n&&b++,n},f=function(e){var n=h(e),i="@"==e?14:"!"==e?20:"y"==e&&n?4:"o"==e?3:2,o=RegExp("^\\d{1,"+i+"}"),s=t.substring(v).match(o);if(!s)throw"Missing number at position "+v;return v+=s[0].length,parseInt(s[0],10)},m=function(e,n,i){var o=$.map(h(e)?i:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),s=-1;if($.each(o,function(e,n){var i=n[1];return t.substr(v,i.length).toLowerCase()==i.toLowerCase()?(s=n[0],v+=i.length,!1):undefined}),-1!=s)return s+1;throw"Unknown name at position "+v},g=function(){if(t.charAt(v)!=e.charAt(b))throw"Unexpected literal at position "+v;v++},v=0,b=0;e.length>b;b++)if(p)"'"!=e.charAt(b)||h("'")?g():p=!1;else switch(e.charAt(b)){case"d":u=f("d");break;case"D":m("D",o,s);break;case"o":d=f("o");break;case"m":c=f("m");break;case"M":c=m("M",r,a);break;case"y":l=f("y");break;case"@":var _=new Date(f("@"));l=_.getFullYear(),c=_.getMonth()+1,u=_.getDate();break;case"!":var _=new Date((f("!")-this._ticksTo1970)/1e4);l=_.getFullYear(),c=_.getMonth()+1,u=_.getDate();break;case"'":h("'")?g():p=!0;break;default:g()}if(t.length>v){var y=t.substr(v);if(!/^\s+/.test(y))throw"Extra/unparsed characters found in date: "+y}if(-1==l?l=(new Date).getFullYear():100>l&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i>=l?0:-100)),d>-1)for(c=1,u=d;;){var w=this._getDaysInMonth(l,c-1);if(w>=u)break;c++,u-=w}var _=this._daylightSavingAdjust(new Date(l,c-1,u));if(_.getFullYear()!=l||_.getMonth()+1!=c||_.getDate()!=u)throw"Invalid date";return _},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,n){if(!t)return"";var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,o=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,r=(n?n.monthNames:null)||this._defaults.monthNames,a=function(t){var n=e.length>p+1&&e.charAt(p+1)==t;return n&&p++,n},l=function(e,t,n){var i=""+t;if(a(e))for(;n>i.length;)i="0"+i;return i},c=function(e,t,n,i){return a(e)?i[t]:n[t]},u="",d=!1;if(t)for(var p=0;e.length>p;p++)if(d)"'"!=e.charAt(p)||a("'")?u+=e.charAt(p):d=!1;else switch(e.charAt(p)){case"d":u+=l("d",t.getDate(),2);break;case"D":u+=c("D",t.getDay(),i,o);break;case"o":u+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=l("m",t.getMonth()+1,2);break;case"M":u+=c("M",t.getMonth(),s,r);break;case"y":u+=a("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=1e4*t.getTime()+this._ticksTo1970;break;case"'":a("'")?u+="'":d=!0;break;default:u+=e.charAt(p)}return u},_possibleChars:function(e){for(var t="",n=!1,i=function(t){var n=e.length>o+1&&e.charAt(o+1)==t;
return n&&o++,n},o=0;e.length>o;o++)if(n)"'"!=e.charAt(o)||i("'")?t+=e.charAt(o):n=!1;else switch(e.charAt(o)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":i("'")?t+="'":n=!0;break;default:t+=e.charAt(o)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!=e.lastVal){var n,i,o=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null;n=i=this._getDefaultDate(e);var r=this._getFormatConfig(e);try{n=this.parseDate(o,s,r)||i}catch(a){this.log(a),s=t?"":s}e.selectedDay=n.getDate(),e.drawMonth=e.selectedMonth=n.getMonth(),e.drawYear=e.selectedYear=n.getFullYear(),e.currentDay=s?n.getDate():0,e.currentMonth=s?n.getMonth():0,e.currentYear=s?n.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},o=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}for(var i=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,o=i.getFullYear(),s=i.getMonth(),r=i.getDate(),a=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=a.exec(t);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":s+=parseInt(l[1],10),r=Math.min(r,$.datepicker._getDaysInMonth(o,s));break;case"y":case"Y":o+=parseInt(l[1],10),r=Math.min(r,$.datepicker._getDaysInMonth(o,s))}l=a.exec(t)}return new Date(o,s,r)},s=null==t||""===t?n:"string"==typeof t?o(t):"number"==typeof t?isNaN(t)?n:i(t):new Date(t.getTime());return s=s&&"Invalid Date"==""+s?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var i=!t,o=e.selectedMonth,s=e.selectedYear,r=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=r.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=r.getMonth(),e.drawYear=e.selectedYear=e.currentYear=r.getFullYear(),o==e.selectedMonth&&s==e.selectedYear||n||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""==e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),i=this._get(e,"showButtonPanel"),o=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),r=this._getNumberOfMonths(e),a=this._get(e,"showCurrentAtPos"),l=this._get(e,"stepMonths"),c=1!=r[0]||1!=r[1],u=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),d=this._getMinMaxDate(e,"min"),p=this._getMinMaxDate(e,"max"),h=e.drawMonth-a,f=e.drawYear;if(0>h&&(h+=12,f--),p){var m=this._daylightSavingAdjust(new Date(p.getFullYear(),p.getMonth()-r[0]*r[1]+1,p.getDate()));for(m=d&&d>m?d:m;this._daylightSavingAdjust(new Date(f,h,1))>m;)h--,0>h&&(h=11,f--)}e.drawMonth=h,e.drawYear=f;var g=this._get(e,"prevText");g=s?this.formatDate(g,this._daylightSavingAdjust(new Date(f,h-l,1)),this._getFormatConfig(e)):g;var v=this._canAdjustMonth(e,-1,f,h)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+g+"</span></a>":o?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+g+"</span></a>",b=this._get(e,"nextText");b=s?this.formatDate(b,this._daylightSavingAdjust(new Date(f,h+l,1)),this._getFormatConfig(e)):b;var _=this._canAdjustMonth(e,1,f,h)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+b+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+b+"</span></a>":o?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+b+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+b+"</span></a>",y=this._get(e,"currentText"),w=this._get(e,"gotoCurrent")&&e.currentDay?u:t;y=s?this.formatDate(y,w,this._getFormatConfig(e)):y;var x=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",C=i?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?x:"")+(this._isInRange(e,w)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+y+"</button>":"")+(n?"":x)+"</div>":"",k=parseInt(this._get(e,"firstDay"),10);k=isNaN(k)?0:k;var T=this._get(e,"showWeek"),M=this._get(e,"dayNames");this._get(e,"dayNamesShort");var S=this._get(e,"dayNamesMin"),I=this._get(e,"monthNames"),D=this._get(e,"monthNamesShort"),A=this._get(e,"beforeShowDay"),E=this._get(e,"showOtherMonths"),P=this._get(e,"selectOtherMonths");this._get(e,"calculateWeek")||this.iso8601Week;for(var L=this._getDefaultDate(e),N="",O=0;r[0]>O;O++){var B="";this.maxRows=4;for(var R=0;r[1]>R;R++){var H=this._daylightSavingAdjust(new Date(f,h,e.selectedDay)),j=" ui-corner-all",U="";if(c){if(U+='<div class="ui-datepicker-group',r[1]>1)switch(R){case 0:U+=" ui-datepicker-group-first",j=" ui-corner-"+(n?"right":"left");break;case r[1]-1:U+=" ui-datepicker-group-last",j=" ui-corner-"+(n?"left":"right");break;default:U+=" ui-datepicker-group-middle",j=""}U+='">'}U+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+j+'">'+(/all|left/.test(j)&&0==O?n?_:v:"")+(/all|right/.test(j)&&0==O?n?v:_:"")+this._generateMonthYearHeader(e,h,f,d,p,O>0||R>0,I,D)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";for(var F=T?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"",z=0;7>z;z++){var W=(z+k)%7;F+="<th"+((z+k+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+M[W]+'">'+S[W]+"</span></th>"}U+=F+"</tr></thead><tbody>";var q=this._getDaysInMonth(f,h);f==e.selectedYear&&h==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,q));var V=(this._getFirstDayOfMonth(f,h)-k+7)%7,Y=Math.ceil((V+q)/7),J=c?this.maxRows>Y?this.maxRows:Y:Y;this.maxRows=J;for(var Q=this._daylightSavingAdjust(new Date(f,h,1-V)),G=0;J>G;G++){U+="<tr>";for(var K=T?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(Q)+"</td>":"",z=0;7>z;z++){var X=A?A.apply(e.input?e.input[0]:null,[Q]):[!0,""],Z=Q.getMonth()!=h,et=Z&&!P||!X[0]||d&&d>Q||p&&Q>p;K+='<td class="'+((z+k+6)%7>=5?" ui-datepicker-week-end":"")+(Z?" ui-datepicker-other-month":"")+(Q.getTime()==H.getTime()&&h==e.selectedMonth&&e._keyEvent||L.getTime()==Q.getTime()&&L.getTime()==H.getTime()?" "+this._dayOverClass:"")+(et?" "+this._unselectableClass+" ui-state-disabled":"")+(Z&&!E?"":" "+X[1]+(Q.getTime()==u.getTime()?" "+this._currentClass:"")+(Q.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+(Z&&!E||!X[2]?"":' title="'+X[2]+'"')+(et?"":' data-handler="selectDay" data-event="click" data-month="'+Q.getMonth()+'" data-year="'+Q.getFullYear()+'"')+">"+(Z&&!E?"&#xa0;":et?'<span class="ui-state-default">'+Q.getDate()+"</span>":'<a class="ui-state-default'+(Q.getTime()==t.getTime()?" ui-state-highlight":"")+(Q.getTime()==u.getTime()?" ui-state-active":"")+(Z?" ui-priority-secondary":"")+'" href="#">'+Q.getDate()+"</a>")+"</td>",Q.setDate(Q.getDate()+1),Q=this._daylightSavingAdjust(Q)}U+=K+"</tr>"}h++,h>11&&(h=0,f++),U+="</tbody></table>"+(c?"</div>"+(r[0]>0&&R==r[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),B+=U}N+=B}return N+=C+($.ui.ie6&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,N},_generateMonthYearHeader:function(e,t,n,i,o,s,r,a){var l=this._get(e,"changeMonth"),c=this._get(e,"changeYear"),u=this._get(e,"showMonthAfterYear"),d='<div class="ui-datepicker-title">',p="";if(s||!l)p+='<span class="ui-datepicker-month">'+r[t]+"</span>";else{var h=i&&i.getFullYear()==n,f=o&&o.getFullYear()==n;p+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var m=0;12>m;m++)(!h||m>=i.getMonth())&&(!f||o.getMonth()>=m)&&(p+='<option value="'+m+'"'+(m==t?' selected="selected"':"")+">"+a[m]+"</option>");p+="</select>"}if(u||(d+=p+(!s&&l&&c?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",s||!c)d+='<span class="ui-datepicker-year">'+n+"</span>";else{var g=this._get(e,"yearRange").split(":"),v=(new Date).getFullYear(),b=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?v+parseInt(e,10):parseInt(e,10);return isNaN(t)?v:t},_=b(g[0]),y=Math.max(_,b(g[1]||""));for(_=i?Math.max(_,i.getFullYear()):_,y=o?Math.min(y,o.getFullYear()):y,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';y>=_;_++)e.yearshtml+='<option value="'+_+'"'+(_==n?' selected="selected"':"")+">"+_+"</option>";e.yearshtml+="</select>",d+=e.yearshtml,e.yearshtml=null}return d+=this._get(e,"yearSuffix"),u&&(d+=(!s&&l&&c?"":"&#xa0;")+p),d+="</div>"},_adjustInstDate:function(e,t,n){var i=e.drawYear+("Y"==n?t:0),o=e.drawMonth+("M"==n?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(i,o))+("D"==n?t:0),r=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,o,s)));e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),("M"==n||"Y"==n)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),o=n&&n>t?n:t;return o=i&&o>i?i:o},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,i){var o=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,i+(0>t?t:o[0]*o[1]),1));return 0>t&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!i||t.getTime()<=i.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,i){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var o=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(i,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),o,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!=e&&"getDate"!=e&&"widget"!=e?"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.2",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(e,t){var n="ui-dialog ui-widget ui-widget-content ui-corner-all ",i={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},o={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;0>n&&e(this).css("top",t.top-n)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var i,o,s,r,a,l=this,c=this.options,u=c.title||"&#160;";i=(this.uiDialog=e("<div>")).addClass(n+c.dialogClass).css({display:"none",outline:0,zIndex:c.zIndex}).attr("tabIndex",-1).keydown(function(t){c.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE&&(l.close(t),t.preventDefault())}).mousedown(function(e){l.moveToTop(!1,e)}).appendTo("body"),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(i),o=(this.uiDialogTitlebar=e("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",function(){i.focus()}).prependTo(i),s=e("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(e){e.preventDefault(),l.close(e)}).appendTo(o),(this.uiDialogTitlebarCloseText=e("<span>")).addClass("ui-icon ui-icon-closethick").text(c.closeText).appendTo(s),r=e("<span>").uniqueId().addClass("ui-dialog-title").html(u).prependTo(o),a=(this.uiDialogButtonPane=e("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),(this.uiButtonSet=e("<div>")).addClass("ui-dialog-buttonset").appendTo(a),i.attr({role:"dialog","aria-labelledby":r.attr("id")}),o.find("*").add(o).disableSelection(),this._hoverable(s),this._focusable(s),c.draggable&&e.fn.draggable&&this._makeDraggable(),c.resizable&&e.fn.resizable&&this._makeResizable(),this._createButtons(c.buttons),this._isOpen=!1,e.fn.bgiframe&&i.bgiframe(),this._on(i,{keydown:function(n){if(c.modal&&n.keyCode===e.ui.keyCode.TAB){var o=e(":tabbable",i),s=o.filter(":first"),r=o.filter(":last");return n.target!==r[0]||n.shiftKey?n.target===s[0]&&n.shiftKey?(r.focus(1),!1):t:(s.focus(1),!1)}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var e,t=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(t){var n,i,o=this;if(this._isOpen&&!1!==this._trigger("beforeClose",t))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){o._trigger("close",t)}):(this.uiDialog.hide(),this._trigger("close",t)),e.ui.dialog.overlay.resize(),this.options.modal&&(n=0,e(".ui-dialog").each(function(){this!==o.uiDialog[0]&&(i=e(this).css("z-index"),isNaN(i)||(n=Math.max(n,i)))}),e.ui.dialog.maxZ=n),this},isOpen:function(){return this._isOpen},moveToTop:function(t,n){var i,o=this.options;return o.modal&&!t||!o.stack&&!o.modal?this._trigger("focus",n):(o.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=o.zIndex),this.overlay&&(e.ui.dialog.maxZ+=1,e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ,this.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ)),i={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},e.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",e.ui.dialog.maxZ),this.element.attr(i),this._trigger("focus",n),this)},open:function(){if(!this._isOpen){var t,n=this.options,i=this.uiDialog;return this._size(),this._position(n.position),i.show(n.show),this.overlay=n.modal?new e.ui.dialog.overlay(this):null,this.moveToTop(!0),t=this.element.find(":tabbable"),t.length||(t=this.uiDialogButtonPane.find(":tabbable"),t.length||(t=i)),t.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this}},_createButtons:function(t){var n=this,i=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),"object"==typeof t&&null!==t&&e.each(t,function(){return!(i=!0)}),i?(e.each(t,function(t,i){var o,s;i=e.isFunction(i)?{click:i,text:t}:i,i=e.extend({type:"button"},i),s=i.click,i.click=function(){s.apply(n.element[0],arguments)},o=e("<button></button>",i).appendTo(n.uiButtonSet),e.fn.button&&o.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var n=this,i=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,o){e(this).addClass("ui-dialog-dragging"),n._trigger("dragStart",i,t(o))},drag:function(e,i){n._trigger("drag",e,t(i))},stop:function(o,s){i.position=[s.position.left-n.document.scrollLeft(),s.position.top-n.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),n._trigger("dragStop",o,t(s)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(n){function i(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}n=n===t?this.options.resizable:n;var o=this,s=this.options,r=this.uiDialog.css("position"),a="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:a,start:function(t,n){e(this).addClass("ui-dialog-resizing"),o._trigger("resizeStart",t,i(n))},resize:function(e,t){o._trigger("resize",e,i(t))},stop:function(t,n){e(this).removeClass("ui-dialog-resizing"),s.height=e(this).height(),s.width=e(this).width(),o._trigger("resizeStop",t,i(n)),e.ui.dialog.overlay.resize()}}).css("position",r).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var n,i=[],o=[0,0];t?(("string"==typeof t||"object"==typeof t&&"0"in t)&&(i=t.split?t.split(" "):[t[0],t[1]],1===i.length&&(i[1]=i[0]),e.each(["left","top"],function(e,t){+i[e]===i[e]&&(o[e]=i[e],i[e]=t)}),t={my:i[0]+(0>o[0]?o[0]:"+"+o[0])+" "+i[1]+(0>o[1]?o[1]:"+"+o[1]),at:i.join(" ")}),t=e.extend({},e.ui.dialog.prototype.options.position,t)):t=e.ui.dialog.prototype.options.position,n=this.uiDialog.is(":visible"),n||this.uiDialog.show(),this.uiDialog.position(t),n||this.uiDialog.hide()},_setOptions:function(t){var n=this,s={},r=!1;e.each(t,function(e,t){n._setOption(e,t),e in i&&(r=!0),e in o&&(s[e]=t)}),r&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(t,i){var o,s,r=this.uiDialog;switch(t){case"buttons":this._createButtons(i);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+i);break;case"dialogClass":r.removeClass(this.options.dialogClass).addClass(n+i);break;case"disabled":i?r.addClass("ui-dialog-disabled"):r.removeClass("ui-dialog-disabled");break;case"draggable":o=r.is(":data(draggable)"),o&&!i&&r.draggable("destroy"),!o&&i&&this._makeDraggable();break;case"position":this._position(i);break;case"resizable":s=r.is(":data(resizable)"),s&&!i&&r.resizable("destroy"),s&&"string"==typeof i&&r.resizable("option","handles",i),s||i===!1||this._makeResizable(i);break;case"title":e(".ui-dialog-title",this.uiDialogTitlebar).html(""+(i||"&#160;"))}this._super(t,i)},_size:function(){var t,n,i,o=this.options,s=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),o.minWidth>o.width&&(o.width=o.minWidth),t=this.uiDialog.css({height:"auto",width:o.width}).outerHeight(),n=Math.max(0,o.minHeight-t),"auto"===o.height?e.support.minHeight?this.element.css({minHeight:n,height:"auto"}):(this.uiDialog.show(),i=this.element.css("height","auto").height(),s||this.uiDialog.hide(),this.element.height(Math.max(i,n))):this.element.height(Math.max(o.height-t,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(n){0===this.instances.length&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(n){return e(n.target).zIndex()<e.ui.dialog.overlay.maxZ?!1:t})},1),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var i=this.oldInstances.pop()||e("<div>").addClass("ui-widget-overlay");return e(document).bind("keydown.dialog-overlay",function(t){var o=e.ui.dialog.overlay.instances;0!==o.length&&o[o.length-1]===i&&n.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE&&(n.close(t),t.preventDefault())}),i.appendTo(document.body).css({width:this.width(),height:this.height()}),e.fn.bgiframe&&i.bgiframe(),this.instances.push(i),i},destroy:function(t){var n=e.inArray(t,this.instances),i=0;-1!==n&&this.oldInstances.push(this.instances.splice(n,1)[0]),0===this.instances.length&&e([document,window]).unbind(".dialog-overlay"),t.height(0).width(0).remove(),e.each(this.instances,function(){i=Math.max(i,this.css("z-index"))}),this.maxZ=i},height:function(){var t,n;return e.ui.ie?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),n>t?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,n;return e.ui.ie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),n>t?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(e){var t=!1;e.widget("ui.menu",{version:"1.9.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(n){var i=e(n.target).closest(".ui-menu-item");!t&&i.not(".ui-state-disabled").length&&(t=!0,this.select(n),i.has(".ui-menu").length?this.expand(n):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(n){e(n.target).closest(".ui-menu").length||this.collapseAll(n),t=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,o,s,r,a,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,o=this.previousFilter||"",s=String.fromCharCode(t.keyCode),r=!1,clearTimeout(this.filterTimer),s===o?r=!0:s=o+s,a=RegExp("^"+n(s),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())}),i=r&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(s=String.fromCharCode(t.keyCode),a=RegExp("^"+n(s),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())})),i.length?(this.focus(t,i),i.length>1?(this.previousFilter=s,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,i=this.element.find(this.options.menus);i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.prev("a"),o=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(o),t.attr("aria-labelledby",i.attr("id"))}),t=i.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-â€”â€“\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(e,t){var n,i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,o,s,r,a;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,o=t.offset().top-this.activeMenu.offset().top-n-i,s=this.activeMenu.scrollTop(),r=this.activeMenu.height(),a=t.height(),0>o?this.activeMenu.scrollTop(s+o):o+a>r&&this.activeMenu.scrollTop(s+o-r+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this.activeMenu=i},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length
},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(n,i)},nextPage:function(t){var n,i,o;return this.active?(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),0>n.offset().top-i-o}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),undefined):(this.next(t),undefined)},previousPage:function(t){var n,i,o;return this.active?(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-i+o>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())),undefined):(this.next(t),undefined)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.9.2",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this._value():(this._setOption("value",e),this)},_setOption:function(e,t){"value"===e&&(this.options.value=t,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),this._super(e,t)},_value:function(){var e=this.options.value;return"number"!=typeof e&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}})}(jQuery),function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var n,i,o=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),r="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",a=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(o.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),o.range&&(o.range===!0&&(o.values||(o.values=[this._valueMin(),this._valueMin()]),o.values.length&&2!==o.values.length&&(o.values=[o.values[0],o.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===o.range||"max"===o.range?" ui-slider-range-"+o.range:""))),i=o.values&&o.values.length||1,n=s.length;i>n;n++)a.push(r);this.handles=s.add(e(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(function(){o.disabled||e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).focus(function(){o.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)}),this._on(this.handles,{keydown:function(n){var i,o,s,r,a=e(n.target).data("ui-slider-handle-index");switch(n.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(n.target).addClass("ui-state-active"),i=this._start(n,a),i===!1))return}switch(r=this.options.step,o=s=this.options.values&&this.options.values.length?this.values(a):this.value(),n.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(o+(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(o-(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(o===this._valueMax())return;s=this._trimAlignValue(o+r);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(o===this._valueMin())return;s=this._trimAlignValue(o-r)}this._slide(n,a,s)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,i,o,s,r,a,l,c,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),o=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(i-u.values(t));o>n&&(o=n,s=e(this),r=t)}),d.range===!0&&this.values(1)===d.min&&(r+=1,s=e(this.handles[r])),a=this._start(t,r),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=r,s.addClass("ui-state-active").focus(),l=s.offset(),c=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-s.width()/2,top:t.pageY-l.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,r,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,i,o,s;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=n/t,i>1&&(i=1),0>i&&(i=0),"vertical"===this.orientation&&(i=1-i),o=this._valueMax()-this._valueMin(),s=this._valueMin()+i*o,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var i,o,s;this.options.values&&this.options.values.length?(i=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&n>i||1===t&&i>n)&&(n=i),n!==this.values(t)&&(o=this.values(),o[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:o}),i=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),undefined):this._value()},values:function(t,n){var i,o,s;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t),undefined;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,o=arguments[0],s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(o[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var i,o=0;switch(e.isArray(this.options.values)&&(o=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;o>i;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(n=this.options.values.slice(),i=0;n.length>i;i+=1)n[i]=this._trimAlignValue(n[i]);return n},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,i,o,s,r=this.options.range,a=this.options,l=this,c=this._animateOff?!1:a.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(i){n=100*((l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())),u["horizontal"===l.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[c?"animate":"css"](u,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[c?"animate":"css"]({left:n+"%"},a.animate),1===i&&l.range[c?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:a.animate})):(0===i&&l.range.stop(1,1)[c?"animate":"css"]({bottom:n+"%"},a.animate),1===i&&l.range[c?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:a.animate}))),t=n}):(i=this.value(),o=this._valueMin(),s=this._valueMax(),n=s!==o?100*((i-o)/(s-o)):0,u["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[c?"animate":"css"](u,a.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:n+"%"},a.animate),"max"===r&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:a.animate}),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:n+"%"},a.animate),"max"===r&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:a.animate}))}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.9.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],function(e,i){var o=n.attr(i);void 0!==o&&o.length&&(t[i]=o)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e),void 0)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function n(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i}))}var i;i=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,i=e.ui.keyCode;switch(t.keyCode){case i.UP:return this._repeat(null,1,t),!0;case i.DOWN:return this._repeat(null,-1,t),!0;case i.PAGE_UP:return this._repeat(null,n.page,t),!0;case i.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:n})===!1||(this._value(n),this.counter++)},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,n=t.indexOf(".");return-1===n?0:t.length-n-1},_adjustValue:function(e){var t,n,i=this.options;return t=null!==i.min?i.min:0,n=e-t,n=Math.round(n/i.step)*i.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),null!==i.max&&e>i.max?i.max:null!==i.min&&i.min>e?i.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var n=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(n)),void 0}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var n;""!==e&&(n=this._parse(e),null!==n&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._spin((e||1)*this.options.step)},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._spin((e||1)*-this.options.step)},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?(t(this._value).call(this,e),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function n(){return++o}function i(e){return e.hash.length>1&&e.href.replace(s,"")===location.href.replace(s,"").replace(/\s/g,"%20")}var o=0,s=/#.*$/;e.widget("ui.tabs",{version:"1.9.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var n=this,i=this.options,o=i.active,s=location.hash.substring(1);this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),null===o&&(s&&this.tabs.each(function(n,i){return e(i).attr("aria-controls")===s?(o=n,!1):t}),null===o&&(o=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===o||-1===o)&&(o=this.tabs.length?0:!1)),o!==!1&&(o=this.tabs.index(this.tabs.eq(o)),-1===o&&(o=i.collapsible?!1:0)),i.active=o,!i.collapsible&&i.active===!1&&this.anchors.length&&(i.active=0),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return n.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(this.options.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(n){var i=e(this.document[0].activeElement).closest("li"),o=this.tabs.index(i),s=!0;if(!this._handlePageNav(n)){switch(n.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:o++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:s=!1,o--;break;case e.ui.keyCode.END:o=this.anchors.length-1;break;case e.ui.keyCode.HOME:o=0;break;case e.ui.keyCode.SPACE:return n.preventDefault(),clearTimeout(this.activating),this._activate(o),t;case e.ui.keyCode.ENTER:return n.preventDefault(),clearTimeout(this.activating),this._activate(o===this.options.active?!1:o),t;default:return}n.preventDefault(),clearTimeout(this.activating),o=this._focusNextTab(o,s),n.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(o).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",o)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(n){return n.altKey&&n.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):n.altKey&&n.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):t},_findNextTab:function(t,n){function i(){return t>o&&(t=0),0>t&&(t=o),t}for(var o=this.tabs.length-1;-1!==e.inArray(i(),this.options.disabled);)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,n){return"active"===e?(this._activate(n),t):"disabled"===e?(this._setupDisabled(n),t):(this._super(e,n),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",n),n||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(n),"heightStyle"===e&&this._setupHeightStyle(n),t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+n()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,o){var s,r,a,l=e(o).uniqueId().attr("id"),c=e(o).closest("li"),u=c.attr("aria-controls");i(o)?(s=o.hash,r=t.element.find(t._sanitizeSelector(s))):(a=t._tabId(c),s="#"+a,r=t.element.find(s),r.length||(r=t._createPanel(a),r.insertAfter(t.panels[n-1]||t.tablist)),r.attr("aria-live","polite")),r.length&&(t.panels=t.panels.add(r)),u&&c.data("ui-tabs-aria-controls",u),c.attr({"aria-controls":s.substring(1),"aria-labelledby":l}),r.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n,i=0;n=this.tabs[i];i++)t===!0||-1!==e.inArray(i,t)?e(n).addClass("ui-state-disabled").attr("aria-disabled","true"):e(n).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,i,o=this.element.parent();"fill"===t?(e.support.minHeight||(i=o.css("overflow"),o.css("overflow","hidden")),n=o.height(),this.element.siblings(":visible").each(function(){var t=e(this),i=t.css("position");"absolute"!==i&&"fixed"!==i&&(n-=t.outerHeight(!0))}),i&&o.css("overflow",i),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,i=this.active,o=e(t.currentTarget),s=o.closest("li"),r=s[0]===i[0],a=r&&n.collapsible,l=a?e():this._getPanelForTab(s),c=i.length?this._getPanelForTab(i):e(),u={oldTab:i,oldPanel:c,newTab:a?e():s,newPanel:l};t.preventDefault(),s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||r&&!n.collapsible||this._trigger("beforeActivate",t,u)===!1||(n.active=a?!1:this.tabs.index(s),this.active=r?e():s,this.xhr&&this.xhr.abort(),c.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(s),t),this._toggle(t,u))},_toggle:function(t,n){function i(){s.running=!1,s._trigger("activate",t,n)}function o(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&s.options.show?s._show(r,s.options.show,i):(r.show(),i())}var s=this,r=n.newPanel,a=n.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),o()),a.attr({"aria-expanded":"false","aria-hidden":"true"}),n.oldTab.attr("aria-selected","false"),r.length&&a.length?n.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),r.attr({"aria-expanded":"true","aria-hidden":"false"}),n.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var n,i=this._findActive(t);i[0]!==this.active[0]&&(i.length||(i=this.active),n=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(n){var i=this.options.disabled;i!==!1&&(n===t?i=!1:(n=this._getIndex(n),i=e.isArray(i)?e.map(i,function(e){return e!==n?e:null}):e.map(this.tabs,function(e,t){return t!==n?t:null})),this._setupDisabled(i))},disable:function(n){var i=this.options.disabled;if(i!==!0){if(n===t)i=!0;else{if(n=this._getIndex(n),-1!==e.inArray(n,i))return;i=e.isArray(i)?e.merge([n],i).sort():[n]}this._setupDisabled(i)}},load:function(t,n){t=this._getIndex(t);var o=this,s=this.tabs.eq(t),r=s.find(".ui-tabs-anchor"),a=this._getPanelForTab(s),l={tab:s,panel:a};i(r[0])||(this.xhr=e.ajax(this._ajaxSettings(r,n,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(s.addClass("ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){a.html(e),o._trigger("load",n,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&o.panels.stop(!1,!0),s.removeClass("ui-tabs-loading"),a.removeAttr("aria-busy"),e===o.xhr&&delete o.xhr},1)})))},_ajaxSettings:function(t,n,i){var o=this;return{url:t.attr("href"),beforeSend:function(t,s){return o._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:s},i))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}}),e.uiBackCompat!==!1&&(e.ui.tabs.prototype._ui=function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},e.widget("ui.tabs",e.ui.tabs,{url:function(e,t){this.anchors.eq(e).attr("href",t)}}),e.widget("ui.tabs",e.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var n=this;this._on({tabsbeforeload:function(i,o){return e.data(o.tab[0],"cache.tabs")?(i.preventDefault(),t):(o.jqXHR.success(function(){n.options.cache&&e.data(o.tab[0],"cache.tabs",!0)}),t)}})},_ajaxSettings:function(t,n,i){var o=this.options.ajaxOptions;return e.extend({},o,{error:function(e,t){try{o.error(e,t,i.tab.closest("li").index(),i.tab[0])}catch(n){}}},this._superApply(arguments))},_setOption:function(e,t){"cache"===e&&t===!1&&this.anchors.removeData("cache.tabs"),this._super(e,t)},_destroy:function(){this.anchors.removeData("cache.tabs"),this._super()},url:function(e){this.anchors.eq(e).removeData("cache.tabs"),this._superApply(arguments)}}),e.widget("ui.tabs",e.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),e.widget("ui.tabs",e.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super(),this._on({tabsbeforeload:function(e,t){if(e.target===this.element[0]&&this.options.spinner){var n=t.tab.find("span"),i=n.html();n.html(this.options.spinner),t.jqXHR.complete(function(){n.html(i)})}}})}}),e.widget("ui.tabs",e.ui.tabs,{options:{enable:null,disable:null},enable:function(t){var n,i=this.options;(t&&i.disabled===!0||e.isArray(i.disabled)&&-1!==e.inArray(t,i.disabled))&&(n=!0),this._superApply(arguments),n&&this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t]))
},disable:function(t){var n,i=this.options;(t&&i.disabled===!1||e.isArray(i.disabled)&&-1===e.inArray(t,i.disabled))&&(n=!0),this._superApply(arguments),n&&this._trigger("disable",null,this._ui(this.anchors[t],this.panels[t]))}}),e.widget("ui.tabs",e.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(n,i,o){o===t&&(o=this.anchors.length);var s,r,a=this.options,l=e(a.tabTemplate.replace(/#\{href\}/g,n).replace(/#\{label\}/g,i)),c=n.indexOf("#")?this._tabId(l):n.replace("#","");return l.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),l.attr("aria-controls",c),s=o>=this.tabs.length,r=this.element.find("#"+c),r.length||(r=this._createPanel(c),s?o>0?r.insertAfter(this.panels.eq(-1)):r.appendTo(this.element):r.insertBefore(this.panels[o])),r.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),s?l.appendTo(this.tablist):l.insertBefore(this.tabs[o]),a.disabled=e.map(a.disabled,function(e){return e>=o?++e:e}),this.refresh(),1===this.tabs.length&&a.active===!1&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[o],this.panels[o])),this},remove:function(t){t=this._getIndex(t);var n=this.options,i=this.tabs.eq(t).remove(),o=this._getPanelForTab(i).remove();return i.hasClass("ui-tabs-active")&&this.anchors.length>2&&this._activate(t+(this.anchors.length>t+1?1:-1)),n.disabled=e.map(e.grep(n.disabled,function(e){return e!==t}),function(e){return e>=t?--e:e}),this.refresh(),this._trigger("remove",null,this._ui(i.find("a")[0],o[0])),this}}),e.widget("ui.tabs",e.ui.tabs,{length:function(){return this.anchors.length}}),e.widget("ui.tabs",e.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(t){var i=t.is("li")?t.find("a[href]"):t;return i=i[0],e(i).closest("li").attr("aria-controls")||i.title&&i.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+n()}}),e.widget("ui.tabs",e.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(t){return e(this.options.panelTemplate).attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),e.widget("ui.tabs",e.ui.tabs,{_create:function(){var e=this.options;null===e.active&&e.selected!==t&&(e.active=-1===e.selected?!1:e.selected),this._super(),e.selected=e.active,e.selected===!1&&(e.selected=-1)},_setOption:function(e,t){if("selected"!==e)return this._super(e,t);var n=this.options;this._super("active",-1===t?!1:t),n.selected=n.active,n.selected===!1&&(n.selected=-1)},_eventHandler:function(){this._superApply(arguments),this.options.selected=this.options.active,this.options.selected===!1&&(this.options.selected=-1)}}),e.widget("ui.tabs",e.ui.tabs,{options:{show:null,select:null},_create:function(){this._super(),this.options.active!==!1&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(e,t,n){var i,o,s=this._superApply(arguments);return s?("beforeActivate"===e?(i=n.newTab.length?n.newTab:n.oldTab,o=n.newPanel.length?n.newPanel:n.oldPanel,s=this._super("select",t,{tab:i.find(".ui-tabs-anchor")[0],panel:o[0],index:i.closest("li").index()})):"activate"===e&&n.newTab.length&&(s=this._super("show",t,{tab:n.newTab.find(".ui-tabs-anchor")[0],panel:n.newPanel[0],index:n.newTab.closest("li").index()})),s):!1}}),e.widget("ui.tabs",e.ui.tabs,{select:function(e){if(e=this._getIndex(e),-1===e){if(!this.options.collapsible||-1===this.options.selected)return;e=this.options.selected}this.anchors.eq(e).trigger(this.options.event+this.eventNamespace)}}),function(){var t=0;e.widget("ui.tabs",e.ui.tabs,{options:{cookie:null},_create:function(){var e,t=this.options;null==t.active&&t.cookie&&(e=parseInt(this._cookie(),10),-1===e&&(e=!1),t.active=e),this._super()},_cookie:function(n){var i=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++t)];return arguments.length&&(i.push(n===!1?-1:n),i.push(this.options.cookie)),e.cookie.apply(null,i)},_refresh:function(){this._super(),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super(),this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),e.widget("ui.tabs",e.ui.tabs,{_trigger:function(t,n,i){var o=e.extend({},i);return"load"===t&&(o.panel=o.panel[0],o.tab=o.tab.find(".ui-tabs-anchor")[0]),this._super(t,n,o)}}),e.widget("ui.tabs",e.ui.tabs,{options:{fx:null},_getFx:function(){var t,n,i=this.options.fx;return i&&(e.isArray(i)?(t=i[0],n=i[1]):t=n=i),i?{show:n,hide:t}:null},_toggle:function(e,n){function i(){s.running=!1,s._trigger("activate",e,n)}function o(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&l.show?r.animate(l.show,l.show.duration,function(){i()}):(r.show(),i())}var s=this,r=n.newPanel,a=n.oldPanel,l=this._getFx();return l?(s.running=!0,a.length&&l.hide?a.animate(l.hide,l.hide.duration,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),o()),t):this._super(e,n)}}))}(jQuery),function(e){function t(t,n){var i=(t.attr("aria-describedby")||"").split(/\s+/);i.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(i.join(" ")))}function n(t){var n=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),o=e.inArray(n,i);-1!==o&&i.splice(o,1),t.removeData("ui-tooltip-id"),i=e.trim(i.join(" ")),i?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")}var i=0;e.widget("ui.tooltip",{version:"1.9.2",options:{content:function(){return e(this).attr("title")},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,n){var i=this;return"disabled"===t?(this[n?"_disable":"_enable"](),this.options[t]=n,void 0):(this._super(t,n),"content"===t&&e.each(this.tooltips,function(e,t){i._updateContent(t)}),void 0)},_disable:function(){var t=this;e.each(this.tooltips,function(n,i){var o=e.Event("blur");o.target=o.currentTarget=i[0],t.close(o,!0)}),this.element.find(this.options.items).andSelf().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,i=e(t?t.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&i.parents().each(function(){var t,i=e(this);i.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,n.close(t,!0)),i.attr("title")&&(i.uniqueId(),n.parents[this.id]={element:this,title:i.attr("title")},i.attr("title",""))}),this._updateContent(i,t))},_updateContent:function(e,t){var n,i=this.options.content,o=this,s=t?t.type:null;return"string"==typeof i?this._open(t,e,i):(n=i.call(e[0],function(n){e.data("ui-tooltip-open")&&o._delay(function(){t&&(t.type=s),this._open(t,e,n)})}),n&&this._open(t,e,n),void 0)},_open:function(n,i,o){function s(e){c.of=e,r.is(":hidden")||r.position(c)}var r,a,l,c=e.extend({},this.options.position);if(o){if(r=this._find(i),r.length)return r.find(".ui-tooltip-content").html(o),void 0;i.is("[title]")&&(n&&"mouseover"===n.type?i.attr("title",""):i.removeAttr("title")),r=this._tooltip(i),t(i,r.attr("id")),r.find(".ui-tooltip-content").html(o),this.options.track&&n&&/^mouse/.test(n.type)?(this._on(this.document,{mousemove:s}),s(n)):r.position(e.extend({of:i},this.options.position)),r.hide(),this._show(r,this.options.show),this.options.show&&this.options.show.delay&&(l=setInterval(function(){r.is(":visible")&&(s(c.of),clearInterval(l))},e.fx.interval)),this._trigger("open",n,{tooltip:r}),a={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=i[0],this.close(n,!0)}},remove:function(){this._removeTooltip(r)}},n&&"mouseover"!==n.type||(a.mouseleave="close"),n&&"focusin"!==n.type||(a.focusout="close"),this._on(!0,i,a)}},close:function(t){var i=this,o=e(t?t.currentTarget:this.element),s=this._find(o);this.closing||(o.data("ui-tooltip-title")&&o.attr("title",o.data("ui-tooltip-title")),n(o),s.stop(!0),this._hide(s,this.options.hide,function(){i._removeTooltip(e(this))}),o.removeData("ui-tooltip-open"),this._off(o,"mouseleave focusout keyup"),o[0]!==this.element[0]&&this._off(o,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,n){e(n.element).attr("title",n.title),delete i.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:s}),this.closing=!1)},_tooltip:function(t){var n="ui-tooltip-"+i++,o=e("<div>").attr({id:n,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(o),o.appendTo(this.document[0].body),e.fn.bgiframe&&o.bgiframe(),this.tooltips[n]=t,o},_find:function(t){var n=t.data("ui-tooltip-id");return n?e("#"+n):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,i){var o=e.Event("blur");o.target=o.currentTarget=i[0],t.close(o,!0),e("#"+n).remove(),i.data("ui-tooltip-title")&&(i.attr("title",i.data("ui-tooltip-title")),i.removeData("ui-tooltip-title"))})}})}(jQuery),jQuery.effects||function(e,t){var n=e.uiBackCompat!==!1,i="ui-effects-";e.effects={effect:{}},function(t,n){function i(e,t,n){var i=p[t.type]||{};return null==e?n||!t.def?null:t.def:(e=i.floor?~~e:parseFloat(e),isNaN(e)?t.def:i.mod?(e+i.mod)%i.mod:0>e?0:e>i.max?i.max:e)}function o(e){var i=u(),o=i._rgba=[];return e=e.toLowerCase(),m(c,function(t,s){var r,a=s.re.exec(e),l=a&&s.parse(a),c=s.space||"rgba";return l?(r=i[c](l),i[d[c].cache]=r[d[c].cache],o=i._rgba=r._rgba,!1):n}),o.length?("0,0,0,0"===o.join()&&t.extend(o,r.transparent),i):r[e]}function s(e,t,n){return n=(n+1)%1,1>6*n?e+6*(t-e)*n:1>2*n?t:2>3*n?e+6*(t-e)*(2/3-n):e}var r,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),l=/^([\-+])=\s*(\d+\.?\d*)/,c=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],u=t.Color=function(e,n,i,o){return new t.Color.fn.parse(e,n,i,o)},d={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},p={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=u.support={},f=t("<p>")[0],m=t.each;f.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=f.style.backgroundColor.indexOf("rgba")>-1,m(d,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),u.fn=t.extend(u.prototype,{parse:function(s,a,l,c){if(s===n)return this._rgba=[null,null,null,null],this;(s.jquery||s.nodeType)&&(s=t(s).css(a),a=n);var p=this,h=t.type(s),f=this._rgba=[];return a!==n&&(s=[s,a,l,c],h="array"),"string"===h?this.parse(o(s)||r._default):"array"===h?(m(d.rgba.props,function(e,t){f[t.idx]=i(s[t.idx],t)}),this):"object"===h?(s instanceof u?m(d,function(e,t){s[t.cache]&&(p[t.cache]=s[t.cache].slice())}):m(d,function(t,n){var o=n.cache;m(n.props,function(e,t){if(!p[o]&&n.to){if("alpha"===e||null==s[e])return;p[o]=n.to(p._rgba)}p[o][t.idx]=i(s[e],t,!0)}),p[o]&&0>e.inArray(null,p[o].slice(0,3))&&(p[o][3]=1,n.from&&(p._rgba=n.from(p[o])))}),this):n},is:function(e){var t=u(e),i=!0,o=this;return m(d,function(e,s){var r,a=t[s.cache];return a&&(r=o[s.cache]||s.to&&s.to(o._rgba)||[],m(s.props,function(e,t){return null!=a[t.idx]?i=a[t.idx]===r[t.idx]:n})),i}),i},_space:function(){var e=[],t=this;return m(d,function(n,i){t[i.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=u(e),o=n._space(),s=d[o],r=0===this.alpha()?u("transparent"):this,a=r[s.cache]||s.to(r._rgba),l=a.slice();return n=n[s.cache],m(s.props,function(e,o){var s=o.idx,r=a[s],c=n[s],u=p[o.type]||{};null!==c&&(null===r?l[s]=c:(u.mod&&(c-r>u.mod/2?r+=u.mod:r-c>u.mod/2&&(r-=u.mod)),l[s]=i((c-r)*t+r,o)))}),this[o](l)},blend:function(e){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),o=u(e)._rgba;return u(t.map(n,function(e,t){return(1-i)*o[t]+i*e}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),i=n.pop();return e&&n.push(~~(255*i)),"#"+t.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),u.fn.parse.prototype=u.fn,d.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,i=e[0]/255,o=e[1]/255,s=e[2]/255,r=e[3],a=Math.max(i,o,s),l=Math.min(i,o,s),c=a-l,u=a+l,d=.5*u;return t=l===a?0:i===a?60*(o-s)/c+360:o===a?60*(s-i)/c+120:60*(i-o)/c+240,n=0===d||1===d?d:.5>=d?c/u:c/(2-u),[Math.round(t)%360,n,d,null==r?1:r]},d.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],i=e[2],o=e[3],r=.5>=i?i*(1+n):i+n-i*n,a=2*i-r;return[Math.round(255*s(a,r,t+1/3)),Math.round(255*s(a,r,t)),Math.round(255*s(a,r,t-1/3)),o]},m(d,function(e,o){var s=o.props,r=o.cache,a=o.to,c=o.from;u.fn[e]=function(e){if(a&&!this[r]&&(this[r]=a(this._rgba)),e===n)return this[r].slice();var o,l=t.type(e),d="array"===l||"object"===l?e:arguments,p=this[r].slice();return m(s,function(e,t){var n=d["object"===l?e:t.idx];null==n&&(n=p[t.idx]),p[t.idx]=i(n,t)}),c?(o=u(c(p)),o[r]=p,o):u(p)},m(s,function(n,i){u.fn[n]||(u.fn[n]=function(o){var s,r=t.type(o),a="alpha"===n?this._hsla?"hsla":"rgba":e,c=this[a](),u=c[i.idx];return"undefined"===r?u:("function"===r&&(o=o.call(this,u),r=t.type(o)),null==o&&i.empty?this:("string"===r&&(s=l.exec(o),s&&(o=u+parseFloat(s[2])*("+"===s[1]?1:-1))),c[i.idx]=o,this[a](c)))})})}),m(a,function(e,n){t.cssHooks[n]={set:function(e,i){var s,r,a="";if("string"!==t.type(i)||(s=o(i))){if(i=u(s||i),!h.rgba&&1!==i._rgba[3]){for(r="backgroundColor"===n?e.parentNode:e;(""===a||"transparent"===a)&&r&&r.style;)try{a=t.css(r,"backgroundColor"),r=r.parentNode}catch(l){}i=i.blend(a&&"transparent"!==a?a:"_default")}i=i.toRgbaString()}try{e.style[n]=i}catch(c){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=u(e.elem,n),e.end=u(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}}),t.cssHooks.borderColor={expand:function(e){var t={};return m(["Top","Right","Bottom","Left"],function(n,i){t["border"+i+"Color"]=e}),t}},r=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function n(){var t,n,i=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,o={};if(i&&i.length&&i[0]&&i[i[0]])for(n=i.length;n--;)t=i[n],"string"==typeof i[t]&&(o[e.camelCase(t)]=i[t]);else for(t in i)"string"==typeof i[t]&&(o[t]=i[t]);return o}function i(t,n){var i,o,r={};for(i in n)o=n[i],t[i]!==o&&(s[i]||(e.fx.step[i]||!isNaN(parseFloat(o)))&&(r[i]=o));return r}var o=["add","remove","toggle"],s={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,n,e.end),e.setAttr=!0)}}),e.effects.animateClass=function(t,s,r,a){var l=e.speed(s,r,a);return this.queue(function(){var s,r=e(this),a=r.attr("class")||"",c=l.children?r.find("*").andSelf():r;c=c.map(function(){var t=e(this);return{el:t,start:n.call(this)}}),s=function(){e.each(o,function(e,n){t[n]&&r[n+"Class"](t[n])})},s(),c=c.map(function(){return this.end=n.call(this.el[0]),this.diff=i(this.start,this.end),this}),r.attr("class",a),c=c.map(function(){var t=this,n=e.Deferred(),i=jQuery.extend({},l,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,i),n.promise()}),e.when.apply(e,c.get()).done(function(){s(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(r[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,i,o){return n?e.effects.animateClass.call(this,{add:t},n,i,o):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,i,o){return n?e.effects.animateClass.call(this,{remove:t},n,i,o):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,i,o,s,r){return"boolean"==typeof i||i===t?o?e.effects.animateClass.call(this,i?{add:n}:{remove:n},o,s,r):this._toggleClass(n,i):e.effects.animateClass.call(this,{toggle:n},i,o,s)},switchClass:function(t,n,i,o,s){return e.effects.animateClass.call(this,{add:n,remove:t},i,o,s)}})}(),function(){function o(t,n,i,o){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(o=n,i=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(o=i,i=n,n={}),e.isFunction(i)&&(o=i,i=null),n&&e.extend(t,n),i=i||n.duration,t.duration=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,t.complete=o||n.complete,t}function s(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?!1:n&&e.effects[t]?!1:!0}e.extend(e.effects,{version:"1.9.2",save:function(e,t){for(var n=0;t.length>n;n++)null!==t[n]&&e.data(i+t[n],e[0].style[t[n]])},restore:function(e,n){var o,s;for(s=0;n.length>s;s++)null!==n[s]&&(o=e.data(i+n[s]),o===t&&(o=""),e.css(n[s],o))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(r){s=document.body}return t.wrap(i),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),i=t.parent(),"static"===t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(o),i.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,i,o){return o=o||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(o[n]=s[0]*i+s[1])}),o}}),e.fn.extend({effect:function(){function t(t){function n(){e.isFunction(s)&&s.call(o[0]),e.isFunction(t)&&t()}var o=e(this),s=i.complete,r=i.mode;(o.is(":hidden")?"hide"===r:"show"===r)?n():a.call(o[0],i,n)}var i=o.apply(this,arguments),s=i.mode,r=i.queue,a=e.effects.effect[i.effect],l=!a&&n&&e.effects[i.effect];return e.fx.off||!a&&!l?s?this[s](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):a?r===!1?this.each(t):this.queue(r||"fx",t):l.call(this,{options:i,duration:i.duration,callback:i.complete,mode:i.mode})},_show:e.fn.show,show:function(e){if(s(e))return this._show.apply(this,arguments);var t=o.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(s(e))return this._hide.apply(this,arguments);var t=o.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(s(t)||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=o.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)},cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])}),i}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;((t=Math.pow(2,--n))-1)/11>e;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:1-n(-2*e+2)/2}})}()}(jQuery),function(e){var t=/up|down|vertical/,n=/up|left|vertical|horizontal/;e.effects.effect.blind=function(i,o){var s,r,a,l=e(this),c=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(l,i.mode||"hide"),d=i.direction||"up",p=t.test(d),h=p?"height":"width",f=p?"top":"left",m=n.test(d),g={},v="show"===u;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),c):e.effects.save(l,c),l.show(),s=e.effects.createWrapper(l).css({overflow:"hidden"}),r=s[h](),a=parseFloat(s.css(f))||0,g[h]=v?r:0,m||(l.css(p?"bottom":"right",0).css(p?"top":"left","auto").css({position:"absolute"}),g[f]=v?a:r+a),v&&(s.css(h,0),m||s.css(f,a+r)),s.animate(g,{duration:i.duration,easing:i.easing,queue:!1,complete:function(){"hide"===u&&l.hide(),e.effects.restore(l,c),e.effects.removeWrapper(l),o()}})}}(jQuery),function(e){e.effects.effect.bounce=function(t,n){var i,o,s,r=e(this),a=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(r,t.mode||"effect"),c="hide"===l,u="show"===l,d=t.direction||"up",p=t.distance,h=t.times||5,f=2*h+(u||c?1:0),m=t.duration/f,g=t.easing,v="up"===d||"down"===d?"top":"left",b="up"===d||"left"===d,_=r.queue(),y=_.length;for((u||c)&&a.push("opacity"),e.effects.save(r,a),r.show(),e.effects.createWrapper(r),p||(p=r["top"===v?"outerHeight":"outerWidth"]()/3),u&&(s={opacity:1},s[v]=0,r.css("opacity",0).css(v,b?2*-p:2*p).animate(s,m,g)),c&&(p/=Math.pow(2,h-1)),s={},s[v]=0,i=0;h>i;i++)o={},o[v]=(b?"-=":"+=")+p,r.animate(o,m,g).animate(s,m,g),p=c?2*p:p/2;c&&(o={opacity:0},o[v]=(b?"-=":"+=")+p,r.animate(o,m,g)),r.queue(function(){c&&r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),n()}),y>1&&_.splice.apply(_,[1,0].concat(_.splice(y,f+1))),r.dequeue()}}(jQuery),function(e){e.effects.effect.clip=function(t,n){var i,o,s,r=e(this),a=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(r,t.mode||"hide"),c="show"===l,u=t.direction||"vertical",d="vertical"===u,p=d?"height":"width",h=d?"top":"left",f={};e.effects.save(r,a),r.show(),i=e.effects.createWrapper(r).css({overflow:"hidden"}),o="IMG"===r[0].tagName?i:r,s=o[p](),c&&(o.css(p,0),o.css(h,s/2)),f[p]=c?s:0,f[h]=c?0:s/2,o.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){c||r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e){e.effects.effect.drop=function(t,n){var i,o=e(this),s=["position","top","bottom","left","right","opacity","height","width"],r=e.effects.setMode(o,t.mode||"hide"),a="show"===r,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l?"pos":"neg",d={opacity:a?1:0};e.effects.save(o,s),o.show(),e.effects.createWrapper(o),i=t.distance||o["top"===c?"outerHeight":"outerWidth"](!0)/2,a&&o.css("opacity",0).css(c,"pos"===u?-i:i),d[c]=(a?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+i,o.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&o.hide(),e.effects.restore(o,s),e.effects.removeWrapper(o),n()}})}}(jQuery),function(e){e.effects.effect.explode=function(t,n){function i(){_.push(this),_.length===d*p&&o()}function o(){h.css({visibility:"visible"}),e(_).remove(),m||h.hide(),n()}var s,r,a,l,c,u,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,p=d,h=e(this),f=e.effects.setMode(h,t.mode||"hide"),m="show"===f,g=h.show().css("visibility","hidden").offset(),v=Math.ceil(h.outerWidth()/p),b=Math.ceil(h.outerHeight()/d),_=[];for(s=0;d>s;s++)for(l=g.top+s*b,u=s-(d-1)/2,r=0;p>r;r++)a=g.left+r*v,c=r-(p-1)/2,h.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-r*v,top:-s*b}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:b,left:a+(m?c*v:0),top:l+(m?u*b:0),opacity:m?0:1}).animate({left:a+(m?0:c*v),top:l+(m?0:u*b),opacity:m?1:0},t.duration||500,t.easing,i)}}(jQuery),function(e){e.effects.effect.fade=function(t,n){var i=e(this),o=e.effects.setMode(i,t.mode||"toggle");i.animate({opacity:o},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}}(jQuery),function(e){e.effects.effect.fold=function(t,n){var i,o,s=e(this),r=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(s,t.mode||"hide"),l="show"===a,c="hide"===a,u=t.size||15,d=/([0-9]+)%/.exec(u),p=!!t.horizFirst,h=l!==p,f=h?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(s,r),s.show(),i=e.effects.createWrapper(s).css({overflow:"hidden"}),o=h?[i.width(),i.height()]:[i.height(),i.width()],d&&(u=parseInt(d[1],10)/100*o[c?0:1]),l&&i.css(p?{height:0,width:u}:{height:u,width:0}),g[f[0]]=l?o[0]:u,v[f[1]]=l?o[1]:0,i.animate(g,m,t.easing).animate(v,m,t.easing,function(){c&&s.hide(),e.effects.restore(s,r),e.effects.removeWrapper(s),n()})}}(jQuery),function(e){e.effects.effect.highlight=function(t,n){var i=e(this),o=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(i,t.mode||"show"),r={backgroundColor:i.css("backgroundColor")};"hide"===s&&(r.opacity=0),e.effects.save(i,o),i.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(r,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&i.hide(),e.effects.restore(i,o),n()}})}}(jQuery),function(e){e.effects.effect.pulsate=function(t,n){var i,o=e(this),s=e.effects.setMode(o,t.mode||"show"),r="show"===s,a="hide"===s,l=r||"hide"===s,c=2*(t.times||5)+(l?1:0),u=t.duration/c,d=0,p=o.queue(),h=p.length;for((r||!o.is(":visible"))&&(o.css("opacity",0).show(),d=1),i=1;c>i;i++)o.animate({opacity:d},u,t.easing),d=1-d;o.animate({opacity:d},u,t.easing),o.queue(function(){a&&o.hide(),n()}),h>1&&p.splice.apply(p,[1,0].concat(p.splice(h,c+1))),o.dequeue()}}(jQuery),function(e){e.effects.effect.puff=function(t,n){var i=e(this),o=e.effects.setMode(i,t.mode||"hide"),s="hide"===o,r=parseInt(t.percent,10)||150,a=r/100,l={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:o,complete:n,percent:s?r:100,from:s?l:{height:l.height*a,width:l.width*a,outerHeight:l.outerHeight*a,outerWidth:l.outerWidth*a}}),i.effect(t)},e.effects.effect.scale=function(t,n){var i=e(this),o=e.extend(!0,{},t),s=e.effects.setMode(i,t.mode||"effect"),r=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===s?0:100),a=t.direction||"both",l=t.origin,c={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()},u={y:"horizontal"!==a?r/100:1,x:"vertical"!==a?r/100:1};o.effect="size",o.queue=!1,o.complete=n,"effect"!==s&&(o.origin=l||["middle","center"],o.restore=!0),o.from=t.from||("show"===s?{height:0,width:0,outerHeight:0,outerWidth:0}:c),o.to={height:c.height*u.y,width:c.width*u.x,outerHeight:c.outerHeight*u.y,outerWidth:c.outerWidth*u.x},o.fade&&("show"===s&&(o.from.opacity=0,o.to.opacity=1),"hide"===s&&(o.from.opacity=1,o.to.opacity=0)),i.effect(o)},e.effects.effect.size=function(t,n){var i,o,s,r=e(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],c=["width","height","overflow"],u=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],p=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],h=e.effects.setMode(r,t.mode||"effect"),f=t.restore||"effect"!==h,m=t.scale||"both",g=t.origin||["middle","center"],v=r.css("position"),b=f?a:l,_={height:0,width:0,outerHeight:0,outerWidth:0};"show"===h&&r.show(),i={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},"toggle"===t.mode&&"show"===h?(r.from=t.to||_,r.to=t.from||i):(r.from=t.from||("show"===h?_:i),r.to=t.to||("hide"===h?_:i)),s={from:{y:r.from.height/i.height,x:r.from.width/i.width},to:{y:r.to.height/i.height,x:r.to.width/i.width}},("box"===m||"both"===m)&&(s.from.y!==s.to.y&&(b=b.concat(d),r.from=e.effects.setTransition(r,d,s.from.y,r.from),r.to=e.effects.setTransition(r,d,s.to.y,r.to)),s.from.x!==s.to.x&&(b=b.concat(p),r.from=e.effects.setTransition(r,p,s.from.x,r.from),r.to=e.effects.setTransition(r,p,s.to.x,r.to))),("content"===m||"both"===m)&&s.from.y!==s.to.y&&(b=b.concat(u).concat(c),r.from=e.effects.setTransition(r,u,s.from.y,r.from),r.to=e.effects.setTransition(r,u,s.to.y,r.to)),e.effects.save(r,b),r.show(),e.effects.createWrapper(r),r.css("overflow","hidden").css(r.from),g&&(o=e.effects.getBaseline(g,i),r.from.top=(i.outerHeight-r.outerHeight())*o.y,r.from.left=(i.outerWidth-r.outerWidth())*o.x,r.to.top=(i.outerHeight-r.to.outerHeight)*o.y,r.to.left=(i.outerWidth-r.to.outerWidth)*o.x),r.css(r.from),("content"===m||"both"===m)&&(d=d.concat(["marginTop","marginBottom"]).concat(u),p=p.concat(["marginLeft","marginRight"]),c=a.concat(d).concat(p),r.find("*[width]").each(function(){var n=e(this),i={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};f&&e.effects.save(n,c),n.from={height:i.height*s.from.y,width:i.width*s.from.x,outerHeight:i.outerHeight*s.from.y,outerWidth:i.outerWidth*s.from.x},n.to={height:i.height*s.to.y,width:i.width*s.to.x,outerHeight:i.height*s.to.y,outerWidth:i.width*s.to.x},s.from.y!==s.to.y&&(n.from=e.effects.setTransition(n,d,s.from.y,n.from),n.to=e.effects.setTransition(n,d,s.to.y,n.to)),s.from.x!==s.to.x&&(n.from=e.effects.setTransition(n,p,s.from.x,n.from),n.to=e.effects.setTransition(n,p,s.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){f&&e.effects.restore(n,c)
})})),r.animate(r.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===r.to.opacity&&r.css("opacity",r.from.opacity),"hide"===h&&r.hide(),e.effects.restore(r,b),f||("static"===v?r.css({position:"relative",top:r.to.top,left:r.to.left}):e.each(["top","left"],function(e,t){r.css(t,function(t,n){var i=parseInt(n,10),o=e?r.to.left:r.to.top;return"auto"===n?o+"px":i+o+"px"})})),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e){e.effects.effect.shake=function(t,n){var i,o=e(this),s=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(o,t.mode||"effect"),a=t.direction||"left",l=t.distance||20,c=t.times||3,u=2*c+1,d=Math.round(t.duration/u),p="up"===a||"down"===a?"top":"left",h="up"===a||"left"===a,f={},m={},g={},v=o.queue(),b=v.length;for(e.effects.save(o,s),o.show(),e.effects.createWrapper(o),f[p]=(h?"-=":"+=")+l,m[p]=(h?"+=":"-=")+2*l,g[p]=(h?"-=":"+=")+2*l,o.animate(f,d,t.easing),i=1;c>i;i++)o.animate(m,d,t.easing).animate(g,d,t.easing);o.animate(m,d,t.easing).animate(f,d/2,t.easing).queue(function(){"hide"===r&&o.hide(),e.effects.restore(o,s),e.effects.removeWrapper(o),n()}),b>1&&v.splice.apply(v,[1,0].concat(v.splice(b,u+1))),o.dequeue()}}(jQuery),function(e){e.effects.effect.slide=function(t,n){var i,o=e(this),s=["position","top","bottom","left","right","width","height"],r=e.effects.setMode(o,t.mode||"show"),a="show"===r,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,d={};e.effects.save(o,s),o.show(),i=t.distance||o["top"===c?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(o).css({overflow:"hidden"}),a&&o.css(c,u?isNaN(i)?"-"+i:-i:i),d[c]=(a?u?"+=":"-=":u?"-=":"+=")+i,o.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&o.hide(),e.effects.restore(o,s),e.effects.removeWrapper(o),n()}})}}(jQuery),function(e){e.effects.effect.transfer=function(t,n){var i=e(this),o=e(t.to),s="fixed"===o.css("position"),r=e("body"),a=s?r.scrollTop():0,l=s?r.scrollLeft():0,c=o.offset(),u={top:c.top-a,left:c.left-l,height:o.innerHeight(),width:o.innerWidth()},d=i.offset(),p=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.className).css({top:d.top-a,left:d.left-l,height:i.innerHeight(),width:i.innerWidth(),position:s?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){p.remove(),n()})}}(jQuery)}(),function(){var e=function(){};e.prototype.links=function(e,t,n){var i=this;e=""+e,i._setOptions(n);var o=i.totalPages(t,i.perPage());return i._checkVars(i.currentPage(),o)?i._createHTML(e,i.currentPage(),o):void 0},e.prototype.collection=function(e,t){this._setOptions(t);var n=this.perPage(),i=this.currentPage();return e.slice((i-1)*n,i*n)},e.prototype.totalPages=function(e,t){var n,i;return i=e/t%1,n=0!==i?e/t-i+1:e/t},e.prototype._setOptions=function(e){e&&(this.currentPage(e.currentPage),this.perPage(e.perPage),this.style(e.style))},e.prototype.style=function(e){return e?this._style=e:this._style},e.prototype.currentPage=function(e){return e?this._currentPage=e:this._currentPage},e.prototype.perPage=function(e){return e?this._perPage=e:this._perPage},e.prototype._checkVars=function(e,t){if(0>=t||0>=e||!e||!t)throw Error("Error: Illegal current page or total pages");if(e>t||0===e)throw Error("Error: Current page cannot be less than total pages and cannot equal 0");return!0},e.prototype._createHTML=function(e,t,n){var i="",o=/\/$/;o.test(e)||(e+="/");var s=parseInt(t)-1,r=parseInt(t)+1;return"bootstrap"===this._style?this._bootstrap(e,t,n,s,r,i):this._oneOfX(e,t,n,s,r,i)},e.prototype._oneOfX=function(e,t,n,i,o,s){return s+='<div class="pagination">',1!==n?(t>1&&(s+='<a href="'+e+i+'">Prev</a> '),s+=t+" of "+n,n>t&&(s+=' <a href="'+e+o+'">Next</a>')):s+=t+" of "+n,s+="</div>"},e.prototype._bootstrap=function(e,t,n,i,o,s){if(s+='<div class="pagination">',s+="<ul>",1!==n){t>1&&(s+='<li><a href="'+e+i+'">Â«</a></li>');for(var r=t-1;n>=r&&4>r-t;r++)1>r||(s+=r!==t?'<li><a href="'+e+r+'">'+r+"</a></li>":'<li><a href="'+e+r+'" class="active">'+r+"</a></li>");n>t&&(s+='<li><a href="'+e+o+'">Â»</a></li>')}return s+="</ul>",s+="</div>"};var e=new e}(),function(){Meteor.http=Meteor.http||{},Meteor.http._encodeParams=function(e){var t=[];return _.each(e,function(e,n){t.length&&t.push("&"),t.push(Meteor.http._encodeString(n),"=",Meteor.http._encodeString(e))}),t.join("").replace(/%20/g,"+")},Meteor.http._encodeString=function(e){return encodeURIComponent(e).replace(/[!'()]/g,escape).replace(/\*/g,"%2A")},Meteor.http._buildUrl=function(e,t,n,i){var o=e,s=t?t.slice(1):null;if("string"==typeof n&&(s=n+""),i){s=s||"";var r=Meteor.http._encodeParams(i);s&&r&&(s+="&"),s+=r}var a=o;return null!==s&&(a+="?"+s),a},Meteor.http._populateData=function(e){var t=(e.headers["content-type"]||";").split(";")[0];if(_.include(["application/json","text/javascript"],t))try{e.data=JSON.parse(e.content)}catch(n){e.data=null}else e.data=null},Meteor.http.get=function(){return Meteor.http.call.apply(this,["GET"].concat(_.toArray(arguments)))},Meteor.http.post=function(){return Meteor.http.call.apply(this,["POST"].concat(_.toArray(arguments)))},Meteor.http.put=function(){return Meteor.http.call.apply(this,["PUT"].concat(_.toArray(arguments)))},Meteor.http.del=function(){return Meteor.http.call.apply(this,["DELETE"].concat(_.toArray(arguments)))}}(),function(){Meteor.http=Meteor.http||{},Meteor.http.call=function(e,t,n,i){if(i||"function"!=typeof n||(i=n,n=null),n=n||{},"function"!=typeof i)throw Error("Can't make a blocking HTTP call from the client; callback required.");e=(e||"").toUpperCase();var o={},s=n.content;n.data&&(s=JSON.stringify(n.data),o["Content-Type"]="application/json");var r,a;s||"GET"===e||"HEAD"===e?r=n.params:a=n.params;var l=/^(.*?)(\?.*)?$/.exec(t);if(t=Meteor.http._buildUrl(l[1],l[2],n.query,r),n.followRedirects===!1)throw Error("Option followRedirects:false not supported on client.");var c,u;if(n.auth){var d=n.auth.indexOf(":");if(0>d)throw Error('auth option should be of the form "username:password"');c=n.auth.substring(0,d),u=n.auth.substring(d+1)}a&&(s=Meteor.http._encodeParams(a)),_.extend(o,n.headers||{}),i=function(e){return function(t,n){n=n||{},n.error=t,e(t,n)}}(i),i=_.once(i);try{var p;if("undefined"!=typeof XMLHttpRequest)p=new XMLHttpRequest;else{if("undefined"==typeof ActiveXObject)throw Error("Can't create XMLHttpRequest");p=new ActiveXObject("Microsoft.XMLHttp")}p.open(e,t,!0,c,u);for(var h in o)p.setRequestHeader(h,o[h]);var f,m=!1;n.timeout&&(f=Meteor.setTimeout(function(){m=!0,p.abort()},n.timeout)),p.onreadystatechange=function(){if(4===p.readyState)if(f&&Meteor.clearTimeout(f),m)i(Error("timeout"));else if(p.status){var e={};e.statusCode=p.status,e.content=p.responseText,e.headers={};var t=p.getAllResponseHeaders();""===t&&p.getResponseHeader("content-type")&&(t="content-type: "+p.getResponseHeader("content-type"));var n=t.split(/\r?\n/);_.each(n,function(t){var n=/^(.*?):(?:\s+)(.*)$/.exec(t);n&&3===n.length&&(e.headers[n[1].toLowerCase()]=n[2])}),Meteor.http._populateData(e);var o=null;p.status>=400&&(o=Error("failed")),i(o,e)}else i(Error("network"))},p.send(s)}catch(g){i(g)}}}(),function(){Meteor._def_template("formElementsBubble",Handlebars.json_ast_to_func(['<div class="visible-',["{",[[0,"hasLevel2Permissions"]]],' select-bubble-type">\n    <input type="hidden" name="bubbleType" value="normal"/>\n    <label class="first no-typing select-bubble-type-label">Bubble Type*</label>\n    <button class="pull-left btn-bubble-type std-btn-form super">super bubble</button>\n    <button class="active-true pull-left btn-bubble-type std-btn-form normal">normal bubble</button>\n  </div>\n\n  <div class="cb-form-row first">\n    <input class="required width-full" name="title" type="text" value="',["{",[[0,"systemBubble","selectedBubble","title"]]],'" placeholder="Name*"/>\n  </div>\n\n  <div class="cb-form-row">\n    <div class="bubble-category">\n      <label class="no-typing">select a category</label>\n      <input name="category" type="hidden" value="',["{",[[0,"systemBubble","selectedBubble","category"]]],'"/>\n      <ul class="nav nav-tabs large-boxes">\n        ',["#",[[0,"each"],[0,"systemCategory","categories"]],['\n          <li class="categoryBox" name="',["{",[[0,"nameShort"]]],'">\n            <a>\n              <div class="large-box-title category-',["{",[[0,"nameShort"]]],'-bg">\n                <div class="v-middle">\n                  <div class="v-inner">\n                    <div class="lbl-large-box">',["{",[[0,"nameLong"]]],'</div>\n                  </div>\n                </div>\n              </div>\n              <div class="large-box-info">\n                <div class="body">',["{",[[0,"body"]]],'</div>\n                <div class="cb-icon-check">',[">","icon-check"],"</div>\n              </div>\n            </a>\n          </li>\n        "]],"\n      </ul>\n    </div>\n  </div>\n\n  ",[">","wysiwyg2"]])),Meteor._def_template("formElementsBubbleCreate",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"systemForm","formParams","bubble","create"]],["\n    ",[">","formElementsBubble"],"\n  "]]])),Meteor._def_template("formElementsBubbleEdit",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"systemForm","formParams","bubble","edit"]],["\n    ",[">","formElementsBubble"],"\n  "]]]))}(),function(){Meteor._def_template("formElementsDiscussionCreate",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"systemForm","formParams","discussion","create"]],['\n    <input class="required width-full first" name="name" type="text" value="" placeholder="Discussion title*"/>\n    ',[">","wysiwyg2"],"\n  "]]]))}(),function(){Meteor._def_template("formElementsFileCreate",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"systemForm","formParams","file","create"]],['\n		<div class="attach-files">\n		  ',[">","dropZone"],"\n		</div>\n	"]]]))}(),function(){Meteor._def_template("generateForm",Handlebars.json_ast_to_func(['<div class="',["{",[[0,"isCollapsed"]]],' cb-form-container" id="cb-form-container-',["{",[[0,"objectNameDash"]]],'">\n    <div class="visible-',["{",[[0,"arrowVisible"]]],' top-arrow-container">\n      <div class="top-arrow">',[">","icon-arrow-up"],'</div>\n    </div>\n    <form class="cb-form ',["{",[[0,"objectNameDash"]]],'" name="',["{",[[0,"objectNameDash"]]],'">\n      ',["!",[[0,"formElements"],[0,"templateName"]]],'\n      <div class="cb-submit-container">\n        <button type="submit" class="pull-right std-btn-form cb-submit">\n          <span class="words-main">submit</span>\n          <span class="words-error">please fill in all fields before submitting</span>\n        </button>\n      </div>\n    </form>\n  </div>'])),Meteor._def_template("formBubbleCreate",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"systemForm","formParams","bubble","create"]],["\n    ",[">","generateForm"],"\n  "]]])),Meteor._def_template("formBubbleEdit",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"systemForm","formParams","bubble","edit"]],["\n    ",[">","generateForm"],"\n  "]]])),Meteor._def_template("formFileCreate",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"systemForm","formParams","file","create"]],["\n    ",[">","generateForm"],"\n  "]]])),Meteor._def_template("formFileEdit",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"systemForm","formParams","file","edit"]],["\n    ",[">","generateForm"],"\n  "]]])),Meteor._def_template("formDiscussionCreate",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"systemForm","formParams","discussion","create"]],["\n    ",[">","generateForm"],"\n  "]]])),Meteor._def_template("formDiscussionEdit",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"systemForm","formParams","discussion","edit"]],["\n    ",[">","generateForm"],"\n  "]]]))}(),function(){Meteor._def_template("wysiwyg2",Handlebars.json_ast_to_func(['<div class="controls wysiwyg_group">\n      <div class="wysiwyg-row">\n        <label class="pull-left wysiwyg-label">\n          ',["#",[[0,"if"],[0,"isPost"]],["\n            discussion body\n          "],["\n            description\n          "]],'\n        </label>\n        <div class="pull-right btn-toolbar btns-formatting" data-role="editor-toolbar" data-target=".wysiwyg">\n          <div class="btn-group">\n            <a class="std-btn-form btn-wysiwyg" data-edit="underline" title="Underline (Ctrl/Cmd+U)">',[">","icon-wysiwyg-underline"],'</a>\n            <a class="std-btn-form btn-wysiwyg" data-edit="italic" title="Italic (Ctrl/Cmd+I)">',[">","icon-wysiwyg-italic"],'</a>\n            <a class="std-btn-form btn-wysiwyg" data-edit="bold" title="Bold (Ctrl/Cmd+B)">',[">","icon-wysiwyg-bold"],'</a>\n          </div>\n          <div class="btn-group">\n            <a class="std-btn-form btn-wysiwyg" data-edit="insertorderedlist" title="Number list">',[">","icon-wysiwyg-list-numbered"],'</a>\n            <a class="std-btn-form btn-wysiwyg" data-edit="insertunorderedlist" title="Bullet list">',[">","icon-wysiwyg-list-bulleted"],'</a>\n          </div>\n          <div class="btn-group justify">\n            <a class="std-btn-form btn-wysiwyg" data-edit="justifyright" title="Align Right (Ctrl/Cmd+R)">',[">","icon-wysiwyg-justify-right"],'</a>\n            <a class="std-btn-form btn-wysiwyg" data-edit="justifycenter" title="Center (Ctrl/Cmd+E)">',[">","icon-wysiwyg-justify-center"],'</a>\n            <a class="std-btn-form btn-wysiwyg" data-edit="justifyleft" title="Align Left (Ctrl/Cmd+L)">',[">","icon-wysiwyg-justify-left"],'</a>\n          </div>\n        </div>\n      </div>\n      <div name="body" class="required wysiwyg">\n        ',["#",[[0,"if"],[0,"isBubble"]],["\n          ",["!",[[0,"description"]]],"\n        "],["\n          ",["#",[[0,"if"],[0,"isPost"]],["\n            ",["#",[[0,"if"],[0,"body"]],["\n              ",["!",[[0,"body"]]],"\n            "],['\n              <span class="wysiwyg-placeholder">Type here...</span>\n            ']],"\n          "],['\n            <span class="wysiwyg-placeholder">Type here...</span>\n          ']],"\n        "]],"\n      </div>\n  </div>"]))}(),function(){Meteor._def_template("bubbleAdminsList",Handlebars.json_ast_to_func(['<div class="bubble-users-list">\n    <div class="heading-container">\n      <div class="small-heading member-list-heading">\n      	admins\n      </div>\n    </div>\n    <div>\n      <div></div>\n      ',["#",[[0,"each"],[0,"getAdmins"]],["\n        ",[">","listItem"],"\n      "]],"\n    </div>\n  </div>"]))}(),function(){Meteor._def_template("bubbleApplicantsList",Handlebars.json_ast_to_func(['<div class="bubble-users-list">\n    <div class="heading-container">\n      <div class="small-heading member-list-heading">\n      	applicants\n      </div>\n    </div>\n    <div>\n      <div></div>\n      ',["#",[[0,"each"],[0,"getApplicants"]],["\n        ",[">","listItem"],"\n      "]],"\n    </div>\n  </div>"]))}(),function(){Meteor._def_template("bubbleMembersPage",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"getCurrentBubble"]],["\n      ",[">","bubbleCover"],"\n      ",[">","bubbleSectionSelector"],'\n\n      <div class="visible-',["{",[[0,"isLoading"]]],'">\n        ',[">","gifLoaderToParent"],'\n      </div>\n        \n      <div class="bubble-page-content bubble-members">\n        ',[">","bubbleMembersHeading"],"\n\n    	  ",[">","bubbleInvitation"],"\n\n        ",["#",[[0,"unless"],[0,"isSuperBubble"],[0]],["\n          ",["#",[[0,"if"],[0,"applicantsHasMembers"]],["\n            ",[">","bubbleApplicantsList"],"\n          "]],"\n        "]],"\n        ",["#",[[0,"if"],[0,"adminsHasMembers"]],["\n          ",[">","bubbleAdminsList"],"\n        "]],"\n        ",["#",[[0,"if"],[0,"membersHasMembers"]],["\n          ",[">","bubbleMembersList"],"\n        "]],"\n        ",["#",[[0,"if"],[0,"inviteesHasMembers"]],["\n          ",[">","bubbleInviteesList"],"\n        "]],"\n      </div>\n    "]]]))}(),function(){Meteor._def_template("bubbleInvitation",Handlebars.json_ast_to_func(['<div class="collapse ',["{",[[0,"inIfSearching"]]],' cb-form-container" id="cb-form-container-add-members">\n    <div class="top-arrow-container">\n      <div class="top-arrow">',[">","icon-arrow-up"],'</div>\n    </div>\n    <div class="cb-form cb-form-add-members">\n      <div class="control-group">\n        <div class="controls">\n            <input class="search-text" name="searchText" type="text" placeholder="Type anyone\'s name to invite..."/>\n        </div>\n      </div>\n      <div class="searchResults">\n      ',["#",[[0,"codeComment"]],["\n        ",["#",[[0,"if"],[0,"hasSearchText"]],["\n          ",["{",[[0,"findUsers"]]],"\n        "]],"\n      "]],"\n\n      ",["#",[[0,"each"],[0,"getFoundUsers"]],['\n        <div class="invitee shortlist-invitee select">\n            <span>\n              <div class="invitee-container ',["#",[[0,"if"],[0,"selected"]],["selected"]],'">\n                <div class="invitee-pic-container">\n                  <span class="fill cb-icon-bubble-big">',[">","icon-bubble-big"],'</span>\n                  <div class="pic-preview-wrapper-outer">\n                    <div class="pic-preview-wrapper-middle">\n                      <div class="pic-preview-wrapper-inner-invitee">\n                        <span class="visible-',["{",[[0,"selected"]]],' cb-icon-check">',[">","icon-check"],'</span>\n                        <span class="invisible-',["{",[[0,"selected"]]],'"><img src="',["{",[[0,"profilePicture"]]],'"></span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div class="v-middle">\n                  <div class="v-inner">\n                    <span class="pull-left invitee-text">\n                      ',["{",[[0,"name"]]],'\n                    </span><br>\n                    <span class="num-posts">\n                      ',["{",[[0,"pluralize"],[0,"numPosts"],"post",""]],"\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </span>\n        </div>\n      "]],"\n\n      </div>\n      ",["#",[[0,"if"],[0,"potentialInvitees"]],['\n        <div class="cancel-invitee-container">\n          ',["#",[[0,"each"],[0,"potentialInvitees"]],['\n              <div class="cancel-invitee remove-invitee">\n                <span class="cancel-invitee-icon">',[">","icon-cancel"],'</span>\n                <span class="cancel-invitee-text">',["{",[[0]]],"</span>\n              </div>\n          "]],"\n        </div>\n      "]],'\n      <div class="add-invitees">\n        <span class="add-invitees-btn">\n          ',["#",[[0,"if"],[0,"getNumSelected"]],['\n            <button class="std-btn-form pull-right add-users" type="button">\n              invite\n            </button>\n          '],['\n            <button class="std-btn-form pull-right" type="button">\n              search for and select at least 1 user to invite\n            </button>\n          ']],'\n        </span>\n        <span class="pull-right add-invitees-text">',["{",[[0,"pluralize"],[0,"getNumSelected"],"person",""]]," selected</span>\n      </div>\n    </div>\n  </div>"]))}(),function(){Meteor._def_template("potentialBubbleInvitee",Handlebars.json_ast_to_func([]))}(),function(){Meteor._def_template("bubbleInviteesList",Handlebars.json_ast_to_func(['<div class="bubble-users-list">\n    <div class="heading-container">\n      <div class="small-heading member-list-heading">\n        invitees\n      </div>\n    </div>\n    <div>\n      <div></div>\n      ',["#",[[0,"each"],[0,"getInvitees"]],["\n        ",[">","listItem"],"\n      "]],"\n    </div>\n  </div>"]))}(),function(){Meteor._def_template("bubbleMembersList",Handlebars.json_ast_to_func(['<div class="bubble-users-list">\n    <div class="heading-container">\n      <div class="small-heading member-list-heading">\n      	members\n      </div>\n    </div>\n    <div>\n      <div></div>\n      ',["#",[[0,"each"],[0,"getMembers"]],["\n        ",[">","listItem"],"\n      "]],"\n    </div>\n  </div>"]))}(),function(){Meteor._def_template("bubbleDiscussionPage",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"getCurrentBubble"]],["\n    ",[">","bubbleCover"],"\n    ",[">","bubbleSectionSelector"],'\n\n    <div class="visible-',["{",[[0,"isLoading"]]],'">\n      ',[">","gifLoaderToParent"],'\n    </div>\n    \n    <div class="bubble-page-content">\n      <div class="bubble-list">\n        <div></div>\n        ',["#",[[0,"with"],[0,"postProperties","discussion"]],["\n          ",[">","listHeading"],"\n        "]],"\n        ",["#",[[0,"each"],[0,"getDiscussionPosts"]],["\n          ",[">","listItem"],"\n        "],['\n          <div class="post-item">\n            <div class="v-middle">\n              <div class="v-inner">\n                No discussions? Start discussions for any topic here!\n              </div>\n            </div>\n          </div>\n        ']],"\n      </div>\n    </div>\n  "]]]))}(),function(){Meteor._def_template("bubbleEventPage",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"getCurrentBubble"]],["\n    ",[">","bubbleCover"],"\n    ",[">","bubbleSectionSelector"],'\n\n    <div class="visible-',["{",[[0,"isLoading"]]],'">\n      ',[">","gifLoaderToParent"],'\n    </div>\n    \n    <div class="bubble-page-content">\n      <div class="bubble-list">\n        <div></div>\n        ',["#",[[0,"with"],[0,"postProperties","event"]],["\n          ",[">","listHeading"],"\n        "]],"\n        ",["#",[[0,"each"],[0,"getEventPosts"]],["\n          ",[">","listItem"],"\n        "],['\n          <div class="post-item">\n            <div class="v-middle">\n              <div class="v-inner">\n                No events yet. Schedule meetings and other members-only events here!\n              </div>\n            </div>\n          </div>\n        ']],"\n      </div>\n    </div>\n  "]]]))}(),function(){Meteor._def_template("bubbleFilePage",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"getCurrentBubble"]],["\n    ",[">","bubbleCover"],"\n    ",[">","bubbleSectionSelector"],'\n\n    <div class="visible-',["{",[[0,"isLoading"]]],'">\n      ',[">","gifLoaderToParent"],'\n    </div>\n    \n    <div class="bubble-page-content">\n      <div class="bubble-list">\n        <div></div>\n        ',["#",[[0,"with"],[0,"postProperties","file"]],["\n          ",[">","listHeading"],"\n        "]],"\n        ",["#",[[0,"each"],[0,"getFilePosts"]],["\n          ",[">","listItem"],"\n        "],['\n          <div class="post-item">\n            <div class="v-middle">\n              <div class="v-inner">\n                No files? Add some here!\n              </div>\n            </div>\n          </div>\n        ']],"\n      </div>\n    </div>\n  "]]]))}(),function(){Meteor._def_template("bubblePage",Handlebars.json_ast_to_func(['<div class="visible-',["{",[[0,"isLoading"]]],'">\n    ',[">","gifLoaderToParent"],"\n  </div>\n    \n  ",["#",[[0,"with"],[0,"getCurrentBubble"]],["\n\n    ",[">","bubbleCover"],"\n    ",[">","bubbleSectionSelector"],'\n    \n    <div class="bubble-page-content">\n        ',["#",[[0,"if"],[0,"compressedUpdates"],[0,"_id"],"1"],['\n          <div class="bubble-list">\n            <div class="bubble-list-heading">\n              <h3 class="section-name pull-left">',["{",[[0,"compressedUpdatesCount"],[0,"","_id"]]],' updates</h3>\n\n              <button class="std-btn-light pull-right clear-updates">clear all</button> \n              \n              ',["#",[[0,"if"],[0,"showMoreUpdates"],[0,"compressedUpdatesCount"]],['\n                <button class="std-btn-light pull-right more-updates">see all</button>\n              ']],"\n              \n            </div>\n            ",[">","updatesList"],"\n          </div>\n        "]],'\n  \n        <div class="bubble-list">\n          ',["#",[[0,"with"],[0,"postProperties","event"]],["\n            <div></div>\n            ",[">","listHeading"],"\n            ",["#",[[0,"each"],[0,"posts"]],["\n              ",[">","listItem"],"\n            "],['\n              <div class="post-item">\n                <div class="v-middle">\n                  <div class="v-inner">\n                    No events yet. Schedule meetings and other members-only events here!\n                  </div>\n                </div>\n              </div>\n            ']],'\n            <a class="visible" href="',["{",[[0,"bubbleEventPagePath"],[0,"getCurrentBubble","_id"]]],'">\n              <button class="pull-left btn-tiny more-posts">+ view more events</button>\n            </a>\n          ']],'\n        </div>\n\n        <div class="bubble-list">\n          ',["#",[[0,"with"],[0,"postProperties","discussion"]],["\n            <div></div>\n            ",[">","listHeading"],"\n            ",["#",[[0,"each"],[0,"posts"]],["\n              ",[">","listItem"],"\n            "],['\n              <div class="post-item">\n                <div class="v-middle">\n                  <div class="v-inner">\n                    No discussions? Start discussions for any topic here!\n                  </div>\n                </div>\n              </div>\n            ']],'\n            <a class="visible" href="',["{",[[0,"bubbleDiscussionPagePath"],[0,"getCurrentBubble","_id"]]],'">\n              <button class="pull-left btn-tiny more-posts">+ view more discussions</button>\n            </a>\n          ']],'\n        </div>\n  \n        <div class="bubble-list">\n          ',["#",[[0,"with"],[0,"postProperties","file"]],["\n            <div></div>\n            ",[">","listHeading"],"\n            ",["#",[[0,"each"],[0,"posts"]],["\n              ",[">","listItem"],"\n            "],['\n              <div class="post-item">\n                <div class="v-middle">\n                  <div class="v-inner">\n                    No files? Add some here!\n                  </div>\n                </div>\n              </div>\n            ']],'\n            <a class="visible" href="',["{",[[0,"bubbleFilePagePath"],[0,"getCurrentBubble","_id"]]],'">\n              <button class="pull-left btn-tiny more-posts">+ view more files</button>\n            </a>\n          ']],"\n        </div>\n\n\n\n\n    </div>\n\n\n  "]]]))}(),function(){Meteor._def_template("bubblePublicPage",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"getCurrentBubble"]],["\n    ",[">","bubbleCover"],'\n\n    <div class="bubble-page-content bubble-page-content-search">\n      <div class="profile-content about-content">\n        ',["!",[[0,"description"]]],"\n      </div>\n    </div>\n  "]]]))}(),function(){Meteor._def_template("categorySelector",Handlebars.json_ast_to_func(['<select name="category">\n        ',["#",[[0,"each"],[0,"getCategories"]],["\n          <option ",["{",[[0,"checkSelected"],[0,"name_short"]]],' value="',["{",[[0,"name_short"]]],'">',["{",[[0,"name_long"]]],"</option>\n        "]],"\n    </select>"]))}(),function(){Meteor._def_template("exploreDiscussionPage",Handlebars.json_ast_to_func(['<div class="cb-form-container" id="cb-form-container-edit-discussion" style="margin-bottom: 20px;">\n    <div class="top-arrow-container">\n      <div class="top-arrow">',[">","icon-arrow-up"],'</div>\n    </div>\n    <form class="cb-form cb-editDiscussion-form" id="edit-discussion-form">\n      <input class="width-full first discussionTitle" name="name" type="text" value="" placeholder="Discussion title*"/>\n      ',[">","wysiwyg2"],'\n\n      <div class="cb-form-row discussion-attachments">\n        ',[">","discussionAttachments"],'\n      </div>\n\n      <div class="cb-form-row paperclip-attach-files">\n        ',[">","paperclipAttachments"],'\n      </div>\n\n      <div class="cb-submit-container">\n        <button type="submit" class="pull-right std-btn-form cb-submit add-comment submit-comment">\n          <span>submit</span>\n        </button>\n      </div>\n    </form>\n  </div>']))}(),function(){Meteor._def_template("exploreEventPage",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"getCurrentBubble"]],["\n    ",[">","bubbleCover"],"\n    ",[">","bubbleSectionSelector"],'\n    <div class="bubble-page-content">\n      <div class="bubble-list">\n        ',["#",[[0,"with"],[0,"postProperties","event"]],["\n          ",[">","listHeading"],"\n        "]],"\n        ",["#",[[0,"each"],[0,"getEventPosts"]],["\n          ",[">","listItem"],"\n        "],["\n          No events yet.\n        "]],"\n      </div>\n    </div>\n  "]]]))}(),function(){Meteor._def_template("explorePage",Handlebars.json_ast_to_func(['<div class="visible-',["{",[[0,"isLoading"]]],'">\n    ',[">","gifLoaderToParent"],"\n  </div>\n  \n  ",["#",[[0,"with"],[0,"currentExplore"]],["\n    ",[">","exploreCover"],'\n    <div class="explore-page-content">\n  \n      <div class="bubble-list">\n        <div></div>\n        ',["#",[[0,"each"],[0,"posts"]],["\n          ",[">","listItem"],"\n        "],['\n          <div class="post-item">\n            <div class="v-middle">\n              <div class="v-inner">\n                No posts yet. Add one now!\n              </div>\n            </div>\n          </div>\n        ']],"\n      </div>\n\n\n    </div>\n  "]]]))}(),function(){Meteor._def_template("exploreDiscussionEdit",Handlebars.json_ast_to_func(['<div class="cb-form-container" id="cb-form-container-edit-discussion" style="margin-bottom: 20px;">\n    <div class="top-arrow-container">\n      <div class="top-arrow">',[">","icon-arrow-up"],'</div>\n    </div>\n    <form class="cb-form cb-explore-editDiscussion-form" id="edit-discussion-form">\n\n\n\n\n\n    ',["#",[[0,"if"],[0,"getAdminBubbles"]],['\n      <input class="required post-as-type" type="hidden" name="post-as-type" value="postAsType"/>\n      <input class="required post-as-id" type="hidden" name="post-as-id" value="postAsId"/>\n    '],['\n      <input class="required post-as-type" type="hidden" name="post-as-type" value="user"/>\n      <input class="required post-as-id" type="hidden" name="post-as-id" value="',["{",[[0,"getCurrentUserId"]]],'"/>\n    ']],"\n\n\n\n    ",["#",[[0,"if"],[0,"getAdminBubbles"]],['\n      <div class="post-as-container first">\n        <label class="no-typing post-as-label">post as</label>\n        <div class="post-as-buttons-container">\n          <button class="active-false post-as-button me">\n            <div class="check-circle">\n              <span class="cb-icon check">',[">","icon-check"],'</span>\n              <span class="cb-icon x">',[">","icon-x"],'</span>\n            </div>\n            <div class="lbl-as">me</div>\n          </button>\n          <button class="active-false post-as-button bubble">\n            <div class="check-circle">\n              <span class="cb-icon check">',[">","icon-check"],'</span>\n              <span class="cb-icon x">',[">","icon-x"],'</span>\n            </div>\n            <div class="lbl-as selected-bubble-post-as">Select a bubble</div>\n            <div class="arrow-down">',[">","icon-arrow-down"],'</div>\n\n            <div class="independent-dropdown post-as-bubble-dropdown">\n              <div class="arrow-up">',[">","icon-arrow-up"],'</div>\n              <div class="dropdown-buttons-container">\n                ',["#",[[0,"each"],[0,"getAdminBubbles"]],['\n                  <div class="dropdown-button btn-select-post-as-bubble" name="',["{",[[0,"_id"]]],'">\n                    <input type="hidden" class="bubble-title" name="',["{",[[0,"title"]]],'"/>\n                    ',["{",[[0,"title"]]],"\n                  </div>\n                "]],"\n              </div>\n            </div>\n          </button>\n        </div>\n      </div>\n    "]],'\n\n\n\n\n\n\n      <input class="required width-full first discussionTitle" name="name" type="text" value="',["{",[[0,"name"]]],'" placeholder="Discussion title*"/>\n      ',[">","wysiwyg2"],'\n\n      <div class="cb-form-row discussion-attachments">\n        ',[">","discussionAttachments"],'\n      </div>\n\n      <div class="cb-form-row paperclip-attach-files">\n        ',[">","paperclipAttachments"],'\n      </div>\n\n      <div class="cb-submit-container">\n        <button type="submit" class="pull-right std-btn-form cb-submit add-comment submit-comment">\n          <span class="words-main">submit</span>\n          <span class="words-error">please fill in a title and body before submitting</span>\n        </button>\n      </div>\n    </form>\n  </div>']))
}(),function(){Meteor._def_template("exploreEditEvent",Handlebars.json_ast_to_func(['<div class="cb-form-container" id="cb-form-container-edit-event" style="margin-bottom: 20px;">\n    <div class="top-arrow-container">\n    	<div class="top-arrow">',[">","icon-arrow-up"],'</div>\n    </div>\n    <form class="cb-form cb-explore-edit-event-form">\n\n\n\n    ',["#",[[0,"if"],[0,"getAdminBubbles"]],['\n      <input class="required post-as-type" type="hidden" name="post-as-type" value="postAsType"/>\n      <input class="required post-as-id" type="hidden" name="post-as-id" value="postAsId"/>\n    '],['\n      <input class="required post-as-type" type="hidden" name="post-as-type" value="user"/>\n      <input class="required post-as-id" type="hidden" name="post-as-id" value="',["{",[[0,"getCurrentUserId"]]],'"/>\n    ']],"\n\n\n\n    ",["#",[[0,"if"],[0,"getAdminBubbles"]],['\n      <div class="post-as-container first">\n        <label class="no-typing post-as-label">post as</label>\n        <div class="post-as-buttons-container">\n          <button class="active-false post-as-button me">\n            <div class="check-circle">\n              <span class="cb-icon check">',[">","icon-check"],'</span>\n              <span class="cb-icon x">',[">","icon-x"],'</span>\n            </div>\n            <div class="lbl-as">me</div>\n          </button>\n          <button class="active-false post-as-button bubble">\n            <div class="check-circle">\n              <span class="cb-icon check">',[">","icon-check"],'</span>\n              <span class="cb-icon x">',[">","icon-x"],'</span>\n            </div>\n            <div class="lbl-as selected-bubble-post-as">Select a bubble</div>\n            <div class="arrow-down">',[">","icon-arrow-down"],'</div>\n\n            <div class="independent-dropdown post-as-bubble-dropdown">\n              <div class="arrow-up">',[">","icon-arrow-up"],'</div>\n              <div class="dropdown-buttons-container">\n                ',["#",[[0,"each"],[0,"getAdminBubbles"]],['\n                  <div class="dropdown-button btn-select-post-as-bubble" name="',["{",[[0,"_id"]]],'">\n                    <input type="hidden" class="bubble-title" name="',["{",[[0,"title"]]],'"/>\n                    ',["{",[[0,"title"]]],"\n                  </div>\n                "]],"\n              </div>\n            </div>\n          </button>\n        </div>\n      </div>\n    "]],'\n\n\n\n\n      <div class="cb-form-row first">\n        <input class="required half-width column-one title" name="name" type="text" value="" placeholder="Event title*"/> \n        <input class="required half-width column-two location" name="location" type="text" placeholder="Where?*"/>\n      </div>\n      <div class="cb-form-row third-width-container">\n        <input class="required third-width column-first date" name="date" type="text" placeholder="Date?* (ex: 10/25/13)"/>\n        <input class="required third-width column-second time" name="time" type="text" placeholder="Time? (ex: 5pm)*"/>\n        <label class="third-width column-third" name="picture" type="label" data-toggle="collapse" data-target="#add-picture-dropzone">Change picture?</label>\n      </div>\n      <canvas id="edit-event-main-canvas" width="340" height="230" class="visible-0"></canvas>\n      <canvas id="edit-event-retina-canvas" width="680" height="460" class="visible-0"></canvas>\n      <img class="visible-0" id="eventPhoto" />\n      <img class="visible-0" id="eventRetinaPhoto" />\n      <div class="collapse attach-files" id="add-picture-dropzone">\n        <div id="event_drop_zone" class="drop-zone">\n          <div class="dz-title">drag and drop</div>\n          <div class="dz-subtitle">or click here</div>\n          <input class="file-chooser-invisible" name="filesToUpload[]" id="eventFilesToUpload" type="file" multiple="">\n        </div>\n        <div class="edit-crop-container" style="text-align: center;">\n          <img class="crop"></img>\n        </div>\n      </div> \n      <input class="required search-text full-width body" name="body" type="text" placeholder="Details" />\n      <div class="cb-submit-container">\n        <button type="submit" class="pull-right std-btn-form cb-submit">\n                  <span class="words-main">submit</span>\n                  <span class="words-error">please fill in all fields before submitting</span>\n        </button>\n      </div>\n    </form>\n  </div>']))}(),function(){Meteor._def_template("exploreDiscussionSubmit",Handlebars.json_ast_to_func(['<div style="position: relative; top: -4px;" class="collapse cb-form-container" id="cb-form-container-discussion">\n    <div class="top-arrow-container explore">\n      <div class="top-arrow">',[">","icon-arrow-up"],'</div>\n    </div>\n    <form class="cb-form cb-explore-discussionSubmit-form">\n\n\n\n\n    ',["#",[[0,"if"],[0,"getAdminBubbles"]],['\n      <input class="required post-as-type" type="hidden" name="post-as-type"/>\n      <input class="required post-as-id" type="hidden" name="post-as-id"/>\n    '],['\n      <input class="required post-as-type" type="hidden" name="post-as-type" value="user"/>\n      <input class="required post-as-id" type="hidden" name="post-as-id" value="',["{",[[0,"getCurrentUserId"]]],'"/>\n    ']],"\n\n\n\n    ",["#",[[0,"if"],[0,"getAdminBubbles"]],['\n      <div class="post-as-container first">\n        <label class="no-typing post-as-label">post as</label>\n        <div class="post-as-buttons-container">\n          <button class="active-false post-as-button me">\n            <div class="check-circle">\n              <span class="cb-icon check">',[">","icon-check"],'</span>\n              <span class="cb-icon x">',[">","icon-x"],'</span>\n            </div>\n            <div class="lbl-as">me</div>\n          </button>\n          <button class="active-false post-as-button bubble">\n            <div class="check-circle">\n              <span class="cb-icon check">',[">","icon-check"],'</span>\n              <span class="cb-icon x">',[">","icon-x"],'</span>\n            </div>\n            <div class="lbl-as selected-bubble-post-as">Select a bubble</div>\n            <div class="arrow-down">',[">","icon-arrow-down"],'</div>\n\n            <div class="independent-dropdown post-as-bubble-dropdown">\n              <div class="arrow-up">',[">","icon-arrow-up"],'</div>\n              <div class="dropdown-buttons-container">\n                ',["#",[[0,"each"],[0,"getAdminBubbles"]],['\n                  <div class="dropdown-button btn-select-post-as-bubble" name="',["{",[[0,"_id"]]],'">\n                    <input type="hidden" class="bubble-title" name="',["{",[[0,"title"]]],'"/>\n                    ',["{",[[0,"title"]]],"\n                  </div>\n                "]],"\n              </div>\n            </div>\n          </button>\n        </div>\n      </div>\n    "]],'\n\n\n\n\n\n      <input class="required width-full first" name="name" type="text" value="" placeholder="Discussion title*"/>\n      ',[">","wysiwyg2"],'\n\n      <div class="cb-form-row paperclip-attach-files">\n        ',[">","paperclipAttachments"],'\n      </div>\n\n      <div class="cb-submit-container">\n        <button type="submit" class="pull-right std-btn-form cb-submit add-comment submit-comment">\n          <span class="words-main">submit</span>\n          <span class="words-error">please fill in all fields before submitting</span>\n        </button>\n      </div>\n    </form>\n  </div>']))}(),function(){Meteor._def_template("exploreEventSubmit",Handlebars.json_ast_to_func(['<div style="position: relative; top: -4px;" class="collapse cb-form-container" id="cb-form-container-event">\n    <div class="top-arrow-container explore">\n      <div class="top-arrow">',[">","icon-arrow-up"],'</div>\n    </div>\n    <form class="cb-form cb-explore-eventSubmit-form">\n\n\n\n    ',["#",[[0,"if"],[0,"getAdminBubbles"]],['\n      <input class="required post-as-type" type="hidden" name="post-as-type"/>\n      <input class="required post-as-id" type="hidden" name="post-as-id"/>\n    '],['\n      <input class="required post-as-type" type="hidden" name="post-as-type" value="user"/>\n      <input class="required post-as-id" type="hidden" name="post-as-id" value="',["{",[[0,"getCurrentUserId"]]],'"/>\n    ']],"\n\n\n\n    ",["#",[[0,"if"],[0,"getAdminBubbles"]],['\n      <div class="post-as-container first">\n        <label class="no-typing post-as-label">post as</label>\n        <div class="post-as-buttons-container">\n          <button class="active-false post-as-button me">\n            <div class="check-circle">\n              <span class="cb-icon check">',[">","icon-check"],'</span>\n              <span class="cb-icon x">',[">","icon-x"],'</span>\n            </div>\n            <div class="lbl-as">me</div>\n          </button>\n          <button class="active-false post-as-button bubble">\n            <div class="check-circle">\n              <span class="cb-icon check">',[">","icon-check"],'</span>\n              <span class="cb-icon x">',[">","icon-x"],'</span>\n            </div>\n            <div class="lbl-as selected-bubble-post-as">Select a bubble</div>\n            <div class="arrow-down">',[">","icon-arrow-down"],'</div>\n\n            <div class="independent-dropdown post-as-bubble-dropdown">\n              <div class="arrow-up">',[">","icon-arrow-up"],'</div>\n              <div class="dropdown-buttons-container">\n                ',["#",[[0,"each"],[0,"getAdminBubbles"]],['\n                  <div class="dropdown-button btn-select-post-as-bubble" name="',["{",[[0,"_id"]]],'">\n                    <input type="hidden" class="bubble-title" name="',["{",[[0,"title"]]],'"/>\n                    ',["{",[[0,"title"]]],"\n                  </div>\n                "]],"\n              </div>\n            </div>\n          </button>\n        </div>\n      </div>\n    "]],'\n\n\n\n\n\n      <div class="cb-form-row first">\n        <input class="required half-width column-one event-name" name="name" type="text" value="" placeholder="Event title*"/> \n        <input class="required half-width column-two event-location" name="location" type="text" placeholder="Where?*"/>\n      </div>\n      <div class="cb-form-row third-width-container margin-bottom-0">\n        <input class="required third-width column-first date" name="date" type="text" placeholder="Date?* (ex: 10/25/13)"/>\n        <input class="required third-width column-second time" name="time" type="text" placeholder="Time? (ex: 5pm)*"/>\n        <label class="third-width column-third" name="picture" type="label" data-toggle="collapse" data-target="#add-picture">Add picture?</label>\n      </div>\n      <canvas id="event-main-canvas" width="340" height="230" class="visible-0"></canvas>\n      <canvas id="event-retina-canvas" width="680" height="460" class="visible-0"></canvas>\n      <img src="/img/Event.jpg" class="visible-0" id="eventPhoto" />\n      <img src="/img/Event.jpg" class="visible-0" id="eventRetinaPhoto" />\n      <div class="collapse attach-files" id="add-picture">\n        <div id="event_drop_zone" class="drop-zone">\n          <div class="dz-title">drag and drop</div>\n          <div class="dz-subtitle">or click here</div>\n          <ul class="nav nav-tabs small-boxes attachments-list" id="list"></ul>\n          <input class="file-chooser-invisible" name="filesToUpload[]" id="eventFilesToUpload" type="file" multiple="">\n        </div>\n        <div class="crop-container" style="text-align: center;">\n          <img class="crop"></img>\n        </div>\n      </div> \n      <input class="required search-text full-width event-details" name="body" type="text" placeholder="Details" />\n\n\n\n\n\n\n\n\n\n      <div class="cb-submit-container">\n        <button type="submit" class="pull-right std-btn-form cb-submit">\n                  <span class="words-main">submit</span>\n                  <span class="words-error">please fill in all fields before submitting</span>\n        </button>\n      </div>\n    </form>\n  </div>']))}(),function(){Meteor._def_template("exploreIconSelector",Handlebars.json_ast_to_func(['<select name="exploreIcon">\n        ',["#",[[0,"each"],[0,"getCategories"]],["\n          <option ",["{",[[0,"checkSelected"],[0,"name_short"]]],' value="',["{",[[0,"name_short"]]],'">',["{",[[0,"name_long"]]],"</option>\n        "]],"\n    </select>"]))}(),function(){Meteor._def_template("exploreTypeSelector",Handlebars.json_ast_to_func(['<select name="category" class="exploretypeselector">\n        ',["#",[[0,"each"],[0,"getExploreTypes"]],['\n          <option value="',["{",[[0,"name_short"]]],'" id="',["{",[[0,"name_short"]]],'">',["{",[[0,"name_long"]]],"</option>\n        "]],"\n    </select>"]))}(),function(){Meteor._def_template("404NotFound",Handlebars.json_ast_to_func(["<h1>THIS PAGE DOES NOT EXIST</h1>"]))}(),function(){Meteor._def_template("adminActions",Handlebars.json_ast_to_func(['<button class="visible-',["{",[[0,"getApplicantStatus"]]],' pull-right post-action deny">\n    <span>deny</span>\n  </button>\n  <button class="visible-',["{",[[0,"getApplicantStatus"]]],' pull-right post-action left-action accept">\n    <span>accept</span>\n  </button>\n\n  <button class="visible-',["{",[[0,"getAdminStatus"]]],' pull-right post-action remove-admin">\n    <span>remove</span>\n  </button>\n  <button class="visible-',["{",[[0,"getAdminStatus"]]],' pull-right post-action left-action demote-admin">\n    <span>demote</span>\n  </button>\n\n  <button class="visible-',["{",[[0,"getMemberStatus"]]],' pull-right post-action remove-member">\n    <span>remove</span>\n  </button>\n  <button class="visible-',["{",[[0,"getMemberStatus"]]],' pull-right post-action left-action promote-member">\n    <span>promote</span>\n  </button>\n\n  <button class="visible-',["{",[[0,"getInviteeStatus"]]],' pull-right post-action uninvite">\n    <span>uninvite</span>\n  </button>']))}(),function(){Meteor._def_template("attachCoverPhoto",Handlebars.json_ast_to_func(['<div class="drop-zone">\n          <div class="dz-title">Drag Cover Photo</div>\n          <div class="dz-subtitle">or click here</div>\n          <ul class="nav nav-tabs small-boxes attachments-list" id="list"></ul>\n          <input class="file-chooser-invisible" name="filesToUpload[]" id="filesToUpload" type="file" multiple="">\n        </div>']))}(),function(){Meteor._def_template("attachProfilePicture",Handlebars.json_ast_to_func(['<div class="drop-zone">\n          <div class="dz-title">Drag Profile Picture</div>\n          <div class="dz-subtitle">or click here</div>\n          <ul class="nav nav-tabs small-boxes attachments-list" id="list"></ul>\n          <input class="file-chooser-invisible" name="filesToUpload[]" id="filesToUpload" type="file" multiple="">\n        </div>']))}(),function(){Meteor._def_template("connectBubble",Handlebars.json_ast_to_func(['<button class="pull-right post-action visible-',["{",[[0,"isInvitedToBubble"]]],' deny-invite">\n    <span>deny</span>\n  </button>\n  <button class="pull-right post-action accept-invite-',["{",[[0,"isInvitedToBubble"]]],' connect-bubble">\n    <span>',["{",[[0,"connectWords"]]],"</span>\n  </button>"]))}(),function(){Meteor._def_template("discussionAttachments",Handlebars.json_ast_to_func(['<div class="paperclip-attach">\n          <ul class="nav nav-tabs attachments-list" id="list"></ul>\n        </div>']))}(),function(){Meteor._def_template("download",Handlebars.json_ast_to_func(['<a href="',["{",[[0,"file"]]],'" download="',["{",[[0,"decodeURI"],[0,"name"]]],'">\n    <button class="post-action download">download</button>\n  </a>']))}(),function(){Meteor._def_template("dropZone",Handlebars.json_ast_to_func(['<div class="drop-zone">\n          <div class="dz-title">drag and drop</div>\n          <div class="dz-subtitle">or click here</div>\n          <ul class="nav nav-tabs small-boxes attachments-list" id="list"></ul>\n          <input class="file-chooser-invisible" name="filesToUpload[]" id="filesToUpload" type="file" multiple="">\n        </div>']))}(),function(){Meteor._def_template("errors",Handlebars.json_ast_to_func(['<div class="errors row-fluid">    \n    ',["#",[[0,"each"],[0,"errors"]],["\n      ",[">","error"],"\n    "]],"\n  </div>"])),Meteor._def_template("error",Handlebars.json_ast_to_func(['<div class="alert alert-error cb-error">\n    <button type="button" class="close" data-dismiss="alert">&times;</button>\n    ',["{",[[0,"message"]]],"\n  </div>"]))}(),function(){Meteor._def_template("imGoing",Handlebars.json_ast_to_func(['<button class="post-action im-going">\n    <span class="main-words">',["{",[[0,"mainWords"]]],"</span>\n  </button>"])),Meteor._def_template("imGoingSmall",Handlebars.json_ast_to_func(['<button class="std-btn-light im-going">\n    <span class="main-words">',["{",[[0,"mainWords"]]],"</span>\n  </button>"]))}(),function(){Meteor._def_template("listHeading",Handlebars.json_ast_to_func(['<div class="bubble-list-heading">\n    <h3 class="section-name pull-left">\n      <span class="section-icon-',["{",[[0,"postType"]]],'">\n        <span class="visible-',["{",[[0,"matchPostType"],"discussion"]],'">',[">","icon-discussion"],'</span>\n        <span class="visible-',["{",[[0,"matchPostType"],"event"]],'">',[">","icon-event"],'</span>\n        <span class="visible-',["{",[[0,"matchPostType"],"file"]],'">',[">","icon-file"],'</span>\n      </span>\n      <span class="word1">',["{",[[0,"word1"]]],'</span>\n      <span class="word2">',["{",[[0,"postType"]]],'s</span>\n    </h3>\n\n    <button class="visible-toggle-parent toggle-hide std-btn-light pull-right btn-add btn-add-',["{",[[0,"postType"]]],'" data-toggle="collapse" data-target="#cb-form-container-',["{",[[0,"postType"]]],'-create">\n      <span class="visible-toggle-child-start-show left-icon cb-icon-add">',[">","icon-add"],'</span>\n      <span class="visible-toggle-child-start-hide left-icon">',[">","icon-cancel"],'</span>\n      <span class="visible-toggle-child-start-show">add new ',["{",[[0,"postType"]]],'</span>\n      <span class="visible-toggle-child-start-hide">cancel</span>\n    </button>\n\n  </div>\n  ',["#",[[0,"if"],[0,"matchPostType"],"discussion"],[" ",[">","discussionSubmit"]," "]],"\n  ",["#",[[0,"if"],[0,"matchPostType"],"file"],[" ",[">","fileSubmit"]," "]],"\n  ",["#",[[0,"if"],[0,"matchPostType"],"event"],[" ",[">","eventSubmit"]," "]]]))}(),function(){Meteor._def_template("loading",Handlebars.json_ast_to_func([[">","spinner"]]))}(),function(){Meteor._def_template("paperclipAttachments",Handlebars.json_ast_to_func(['<div class="paperclip-attach">\n          <div class="float-left cb-paperclip-lbl">\n          	attach file(s)?\n          </div>\n	      <div class="cb-icon cb-icon-attachment">\n	          ',[">","icon-attachment"],'\n	      </div>\n          <ul class="nav nav-tabs attachments-list" id="list"></ul>\n          <input class="file-chooser-invisible" name="filesToUpload[]" id="filesToUpload" type="file" multiple="">\n        </div>']))}(),function(){Meteor._def_template("reply",Handlebars.json_ast_to_func(['<button class="post-action reply">reply</button>']))}(),function(){Meteor._def_template("selectPostType",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"getCurrentBubble"]],['\n	  <ul class="nav nav-pills">\n	    <li class="',["{",[[0,"activePostTypeClass"],"discussion"]],'">\n	    	<a href="',["{",[[0,"discussionSubmitPath"],[0]]],'">discussion</a>\n	    </li>\n	    <li class="',["{",[[0,"activePostTypeClass"],"event"]],'">\n	    	<a href="',["{",[[0,"eventSubmitPath"],[0]]],'">event</a>\n	    </li>\n	    <li class="',["{",[[0,"activePostTypeClass"],"file"]],'">\n	    	<a href="',["{",[[0,"fileSubmitPath"],[0]]],'">file</a>\n	    </li>\n	  </ul>\n	']]]))}(),function(){Meteor._def_template("userActions",Handlebars.json_ast_to_func([["#",[[0,"unless"],[0,"isSuperBubble"]],['\n    <button class="visible-',["{",[[0,"getAdminStatus"]]],' pull-right post-action remove-admin">\n      <span>leave bubble</span>\n    </button>\n    <button class="visible-',["{",[[0,"getMemberStatus"]]],' pull-right post-action left-action remove-member">\n      <span>leave bubble</span>\n    </button>\n  ']]]))}(),function(){Meteor._def_template("viewProfile",Handlebars.json_ast_to_func(['<button class="post-action view-profile">view profile</button>']))}(),function(){Meteor._def_template("wysiwyg",Handlebars.json_ast_to_func(['<div class="controls wysiwyg_group">\n      <div class="wysiwyg-row">\n        <label class="pull-left wysiwyg-label">Discussion body*</label>\n        <div class="pull-right btn-toolbar btns-formatting" data-role="editor-toolbar" data-target=".wysiwyg">\n        <!--\n          <div class="btn-group">\n            <a class="std-btn-form btn-wysiwyg" data-toggle="dropdown" title="Font Size"><i class="icon-text-height"></i>&nbsp;<b class="caret"></b></a>\n              <ul class="dropdown-menu">\n              <li><a data-edit="fontSize 5"><font size="5">Large</font></a></li>\n              <li><a data-edit="fontSize 3"><font size="3">Normal</font></a></li>\n              <li><a data-edit="fontSize 1"><font size="1">Small</font></a></li>\n              </ul>\n          </div>\n        -->\n          <div class="btn-group">\n            <a class="std-btn-form btn-wysiwyg" data-edit="underline" title="Underline (Ctrl/Cmd+U)">',[">","icon-wysiwyg-underline"],'</a>\n            <a class="std-btn-form btn-wysiwyg" data-edit="italic" title="Italic (Ctrl/Cmd+I)">',[">","icon-wysiwyg-italic"],'</a>\n            <a class="std-btn-form btn-wysiwyg" data-edit="bold" title="Bold (Ctrl/Cmd+B)">',[">","icon-wysiwyg-bold"],'</a>\n          </div>\n          <div class="btn-group">\n            <a class="std-btn-form btn-wysiwyg" data-edit="insertorderedlist" title="Number list">',[">","icon-wysiwyg-list-numbered"],'</a>\n            <a class="std-btn-form btn-wysiwyg" data-edit="insertunorderedlist" title="Bullet list">',[">","icon-wysiwyg-list-bulleted"],'</a>\n          </div>\n          <div class="btn-group justify">\n            <a class="std-btn-form btn-wysiwyg" data-edit="justifyright" title="Align Right (Ctrl/Cmd+R)">',[">","icon-wysiwyg-justify-right"],'</a>\n            <a class="std-btn-form btn-wysiwyg" data-edit="justifycenter" title="Center (Ctrl/Cmd+E)">',[">","icon-wysiwyg-justify-center"],'</a>\n            <a class="std-btn-form btn-wysiwyg" data-edit="justifyleft" title="Align Left (Ctrl/Cmd+L)">',[">","icon-wysiwyg-justify-left"],'</a>\n          <!--  <a class="std-btn-form btn-wysiwyg" title="Attachments" id="fileattachments"><i class="icon-paperclip"></i></a> -->\n          </div>\n\n        </div>\n      </div>\n    <!--\n      <div id="fileuploadtool">\n        <div class="attach-files in-post">\n          <div id="drop_zone" class="drop-zone">\n            <div class="dz-title">drag and drop</div>\n            <div class="dz-subtitle">or click here</div>\n            <ul class="nav nav-tabs small-boxes attachments-list" id="list"></ul>\n            <input class="file-chooser-invisible" name="filesToUpload[]" id="filesToUpload" type="file" multiple="">\n          </div>\n        </div>\n      </div>\n    -->\n      <div name="body" id="discussionBody" class="required wysiwyg wysiwyg-body">\n        ',["#",[[0,"unless"],[0,"body"]],['\n          <span class="wysiwyg-placeholder">Type here...</span>\n        ']],"\n        ",["!",[[0,"body"]]],'\n      </div>\n    <!--  <output id="list"></output>  -->\n  </div>']))}(),function(){Meteor._def_template("discussionEdit",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"getCurrentBubble"]],["\n    ",[">","bubbleCover"],"\n    ",[">","bubbleSectionSelector"],"\n  "]],"\n  ",["#",[[0,"with"],[0,"getCurrentPost"]],['\n    <form class="main">\n      <div class="control-group">\n          <div class="controls">\n              <input name="name" type="text" value="',["{",[[0,"name"]]],'"/>\n          </div>\n      </div>\n\n      <div class="control-group">\n          <div class="controls">\n              ',[">","wysiwyg"],'\n          </div>\n      </div>\n\n      <div class="control-group">\n          <div class="controls">\n              <input type="submit" value="Submit" class="btn btn-primary submit"/>\n          </div>\n      </div>\n      <hr/>\n      <div class="control-group">\n          <div class="controls">\n              <a class="btn btn-danger delete" href="#">Delete post</a>\n          </div>\n      </div>\n    </form>\n  ']]]))}(),function(){Meteor._def_template("eventEdit",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"getCurrentBubble"]],["\n    ",[">","bubbleCover"],"\n    ",[">","bubbleSectionSelector"],"\n  "]],"\n  ",["#",[[0,"with"],[0,"getCurrentPost"]],['\n    <form class="main">\n      <div class="control-group">\n          <div class="controls">\n              <input name="name" type="text" value="',["{",[[0,"name"]]],'"/>\n          </div>\n      </div>\n\n      <div class="control-group">\n          <div id="eventphoto_image">\n              <img id="eventphoto_upload" src="" />\n              <img id="eventphoto_preview" src="',["{",[[0,"eventPhoto"]]],'" />\n              <img id="eventphoto_retina" src="" />\n              <a href="#" class="btn btn-danger delete" id="change_eventphoto">Change</a>\n              <div id="eventphoto_dropzone" class="dropzone">Drop event photo here.</div>\n              <input name="filesToUpload[]" id="eventfilesToUpload" type="file">\n          </div>\n      </div>\n    \n      <div class="control-group">\n          <div class="controls">\n              <input class="date-picker" name="date" type="text" value="',["{",[[0,"getDate"]]],'"/>\n              <input class="input-small" name="time" type="text" value="',["{",[[0,"getTime"]]],'"/>\n          </div>\n      </div>\n    \n      <div class="control-group">\n          <div class="controls">\n              <input name="location" type="text" value="',["{",[[0,"location"]]],'" />\n          </div>\n      </div>\n\n      <div class="control-group">\n          <div class="controls">\n              <textarea name="body" type="text">',["{",[[0,"body"]]],"</textarea>\n          </div>\n      </div>\n\n      ",["#",[[0,"with"],[0,"getCurrentBubble"]],['\n        <span class="badge badge-inverse">',["{",[[0,"title"]]],"</span>\n      "]],'\n      <hr />\n    \n      <div class="control-group">\n          <div class="controls">\n              <input type="submit" value="Submit" class="btn btn-primary"/>\n          </div>\n      </div>\n      <hr/>\n      <div class="control-group">\n          <div class="controls">\n              <a class="btn btn-danger delete" id="delete_post" href="#">Delete post</a>\n          </div>\n      </div>\n    </form>\n  ']]]))}(),function(){Meteor._def_template("fileobjectEdit",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"getCurrentPost"]],['\n      <form class="main">\n\n\n      <div class="control-group">\n          <div id="uploaded_file">\n            ',["#",[[0,"if"],[0,"isImage"]],['\n              <img id="uploadedfile_preview" src="',["{",[[0,"file"]]],'" />\n            '],[" \n              ",["#",[[0,"if"],[0,"isPdf"]],['\n                <div id="uploadedfile_preview" class="pdf-icon">',["{",[[0,"name"]]],"</div>\n              "],['\n                <div id="uploadedfile_preview" class="word-icon">',["{",[[0,"name"]]],"</div>\n              "]],"\n            "]],'\n              <a href="#" class="btn btn-danger delete" id="change_uploadedfile">Change</a>\n              <div id="fileupload_dropzone" class="dropzone">Drop the replacement file here.</div>\n              <input name="filesToUpload" id="filesToUpload" type="file">\n              <output id="list"></output>\n          </div>\n      </div>\n      \n        <div class="control-group">\n            <div class="controls">\n                <input name="email" type="text" value="',["{",[[0,"getEmail"]]],'"/>\n            </div>\n        </div>\n        <hr />\n      \n        <div class="control-group">\n            <div class="controls">\n                <input type="submit" value="Submit" class="btn btn-primary"/>\n            </div>\n        </div>\n      </form>\n  ']]]))}(),function(){Meteor._def_template("listItem",Handlebars.json_ast_to_func(['<div class="post-item">\n    <div class="visible-',["{",[[0,"matchPostType"],"event"]],' pull-left post-date">\n      <div class="day">',["{",[[0,"timestampToDayLong"],[0,"dateTime"]]],'</div>\n      <div class="month">',["{",[[0,"timestampToMonthShort"],[0,"dateTime"]]],'</div>\n    </div>\n    <div class="visible-',["{",[[0,"matchPostType"],"discussion"]],' v-middle pull-left">\n      <div class="v-inner">\n        <div class="num-in-bubble comments-count">\n          <span class="cb-icon">',[">","icon-bubble-big"],'</span>\n          <span class="lbl">',["{",[[0,"commentsCount"]]],'</span>\n        </div>\n      </div>\n    </div>\n    <div class="visible-',["{",[[0,"matchPostType"],"file"]],' v-middle pull-left">\n      <div class="v-inner">\n        <div class="file-type">\n          <span class="cb-icon">',[">","icon-file-type"],'</span>\n          <span class="lbl">',["{",[[0,"getTextAfterDot"],[0,"name"]]],'</span>\n        </div>\n      </div>\n    </div>\n    <div class="visible-',["{",[[0,"matchObjectType"],"bubble"]],' v-middle pull-left bubble-icon-container">\n      <div class="v-inner">\n        <span class="category-',["{",[[0,"category"]]],'-fill">\n          ',[">","icon-bubble"],'\n        </span>\n      </div>\n    </div>\n\n\n    <div class="visible-',["{",[[0,"matchObjectType"],"user"]],' v-middle pull-left profile-pic-container">\n      <div class="v-inner">\n        <img class="pic-circle profile-pic" src="',["{",[[0,"profilePicture"]]],'"/> \n      </div>\n    </div>\n\n\n    <div class="visible-',["{",[[0,"matchObjectType"],"user"]],' pull-left v-middle update-time">\n      <div class="v-inner">\n        <div class="lbl">member of</div>\n        <div class="lbl">',["{",[[0,"pluralize"],[0,"membershipCount"],"bubble",""]],'</div>\n      </div>\n    </div>\n\n    <h4 class="visible-',["{",[[0,"matchObjectType"],"user"]],' post-name">\n      <span class="name-text">',["{",[[0,"name"]]],'</span>\n    </h4>\n\n\n    <h4 class="post-name visible-',["{",[[0,"matchObjectType"],"post"]],'">\n      <span class="name-text">',["{",[[0,"decodeURI"],[0,"name"]]],'</span>\n      <span class="visible-',["{",[[0,"hasChildren"]]],' cb-icon-attachment">',[">","icon-attachment"],'</span>\n    </h4>\n    <div class="bubble-name-and-description visible-',["{",[[0,"matchObjectType"],"bubble"]],' v-middle">\n      <div class="v-inner">\n        <h4 class="bubble-name">\n          <span class="name-text">',["{",[[0,"title"]]],'</span>\n        </h4>\n      </div>\n    </div>\n    <div class="post-item-attributes">\n      <div class="v-middle pull-right">\n        <div class="v-inner">\n        ',["#",[[0,"if"],[0,"exploreId"]],['\n        <div style="width: 165px">\n          ',["#",[[0,"with"],[0,"getPostAsBubble"]],['\n            <div class="pull-left category-',["{",[[0,"category"]]],'-fill post-as-bubble-list">\n              ',[">","icon-bubble"],"\n            </div>\n          "]],"\n          ",["#",[[0,"with"],[0,"getPostAsUser"]],['\n            <div class="pull-left profile-pic-container">\n              <img class="pic-circle profile-pic" src="',["{",[[0,"profilePicture"]]],'"/>\n            </div>\n          ']],'\n          <div style="position: relative; top: 2px;" class="pull-left">\n            <div class="list-item-post-as">',["{",[[0,"displayName"]]],'</div>\n            <div style="width: auto" class="update-time">',["{",[[0,"submittedText"],[0,"submitted"]]],"</div>\n          </div>\n        </div>\n        "],['\n          <span class="visible-',["{",[[0,"matchObjectType"],"bubble"]],' attribute-items">\n            <span class="attribute">\n              <div class="pull-right post-item-lbl going-',["{",[[0,"isGoing"]]]," category-",["{",[[0,"category"]]],'-color">\n                <span class="post-item-icon">\n                  <span class="category-',["{",[[0,"category"]]],'-fill">\n                    ',[">","icon-bubble"],"\n                  </span>\n                </span>\n                ",["{",[[0,"category"]]],'\n              </div>\n            </span>\n            <span class="attribute">\n              <div class="pull-right post-item-lbl going-',["{",[[0,"isGoing"]]],'">\n                <span class="post-item-icon">',[">","icon-member"],"</span>\n                ",["{",[[0,"numOfMembers"]]],'\n              </div>\n            </span>\n          </span>\n          <span class="visible-',["{",[[0,"matchPostType"],"event"]],' attribute-items">\n            <span class="attribute">\n              <div class="pull-right post-item-lbl">\n                <span class="post-item-icon">',[">","icon-time"],"</span>\n                ",["{",[[0,"timestampToTime"],[0,"dateTime"]]],'\n              </div>\n            </span>\n            <span class="attribute">\n              <div class="pull-right post-item-lbl going-',["{",[[0,"isGoing"]]],'">\n                <span class="post-item-icon">',[">","icon-member"],"</span>\n                ",["{",[[0,"numOfAttendees"]]],'\n              </div>\n            </span>\n            <span class="attribute">\n              <div class="pull-right post-item-lbl post-location">\n                <span class="post-item-icon">',[">","icon-location"],"</span>\n                ",["{",[[0,"location"]]],'\n              </div>\n            </span>\n          </span>\n          <span class="visible-',["{",[[0,"matchPostType"],"discussion"]],' attribute-items">\n            <span class="attribute">\n              <div class="pull-right post-item-lbl">\n                <span class="post-item-icon">',[">","icon-time"],"</span>\n                ",["{",[[0,"timestampToFromNow"],[0,"lastCommentTime"]]],'\n              </div>\n            </span>\n            <span class="attribute">\n              <div class="pull-right post-item-lbl">\n                <span class="post-item-icon icon-views">',[">","icon-views"],"</span>\n                ",["{",[[0,"viewCount"]]],'\n              </div>\n            </span>\n          </span>\n          <span class="visible-',["{",[[0,"matchPostType"],"file"]],' attribute-items">\n            <span class="attribute">\n              <div class="pull-right post-item-lbl">\n                <span class="post-item-icon">',[">","icon-time"],"</span>\n                ",["{",[[0,"timestampToFromNow"],[0,"lastCommentTime"]]],'\n              </div>\n            </span>\n            <span class="attribute">\n              <div class="pull-right post-item-lbl">\n                <span class="post-item-icon">',[">","icon-download"],"</span>\n                ",["{",[[0,"numDownloads"]]],'\n              </div>\n            </span>\n          </span>\n          <span class="post-actions">\n            <span class="visible-',["{",[[0,"matchPostType"],"event"]],'">',[">","imGoing"],'</span>\n            <span class="visible-',["{",[[0,"matchPostType"],"discussion"]],'">',[">","reply"],'</span>\n            <span class="visible-',["{",[[0,"matchPostType"],"file"]],'">',[">","download"],'</span>\n            <span class="visible-',["{",[[0,"matchObjectType"],"bubble"]],'">',[">","connectBubble"],"</span>\n            ",["#",[[0,"if"],[0,"inBubble"]],['\n              <span class="visible-',["{",[[0,"matchObjectType"],"user"]],'">\n                ',["#",[[0,"unless"],[0,"isMe"]],['\n                  <span class="invisible-',["{",[[0,"isAdmin"]]],'">',[">","viewProfile"],'</span>\n                  <span class="visible-',["{",[[0,"isAdmin"]]],'">',[">","adminActions"],"</span>\n                "]],"\n                ",["#",[[0,"if"],[0,"isMe"]],["\n                  <span>",[">","userActions"],"</span>\n                "]],"\n              </span>\n            "],['\n              <span class="visible-',["{",[[0,"matchObjectType"],"user"]],'">',[">","viewProfile"],"</span>\n            "]],"\n          </span>\n        "]],"\n        </div>\n      </div>\n    </div>\n  </div>"]))
}(),function(){Meteor._def_template("editDiscussion",Handlebars.json_ast_to_func(['<div class="cb-form-container" id="cb-form-container-edit-discussion" style="margin-bottom: 20px;">\n    <div class="top-arrow-container">\n      <div class="top-arrow">',[">","icon-arrow-up"],'</div>\n    </div>\n    <form class="cb-form cb-editDiscussion-form" id="edit-discussion-form">\n      <input class="required width-full first discussionTitle" name="name" type="text" value="',["{",[[0,"name"]]],'" placeholder="Discussion title*"/>\n      ',[">","wysiwyg2"],'\n\n      <div class="cb-form-row discussion-attachments">\n        ',[">","discussionAttachments"],'\n      </div>\n\n      <div class="cb-form-row paperclip-attach-files">\n        ',[">","paperclipAttachments"],'\n      </div>\n\n      <div class="cb-submit-container">\n        <button type="submit" class="pull-right std-btn-form cb-submit add-comment submit-comment">\n          <span class="words-main">submit</span>\n          <span class="words-error">please fill in all fields before submitting</span>\n        </button>\n      </div>\n    </form>\n  </div>']))}(),function(){Meteor._def_template("editEvent",Handlebars.json_ast_to_func(['<div class="cb-form-container" id="cb-form-container-edit-event" style="margin-bottom: 20px;">\n    <div class="top-arrow-container">\n    	<div class="top-arrow">',[">","icon-arrow-up"],'</div>\n    </div>\n    <form class="cb-form">\n      <div class="cb-form-row first">\n        <input class="required half-width column-one" name="name" type="text" value="" placeholder="Event title*"/> \n        <input class="required half-width column-two" name="location" type="text" placeholder="Where?*"/>\n      </div>\n      <div class="cb-form-row third-width-container">\n        <input class="required third-width column-first" name="date" type="text" placeholder="Date?*"/>\n        <input class="required third-width column-second" name="time" type="text" placeholder="Time? (ex: 5pm)*"/>\n        <label class="third-width column-third" name="picture" type="label" data-toggle="collapse" data-target="#add-picture">Change picture?</label>\n      </div>\n      <canvas id="event-main-canvas" width="340" height="230" class="visible-0"></canvas>\n      <canvas id="event-retina-canvas" width="680" height="460" class="visible-0"></canvas>\n      <div class="collapse attach-files" id="add-picture">\n        <div id="event_drop_zone" class="drop-zone">\n          <div class="dz-title">drag and drop</div>\n          <div class="dz-subtitle">or click here</div>\n          <input class="file-chooser-invisible" name="filesToUpload[]" id="eventFilesToUpload" type="file" multiple="">\n        </div>\n        <div class="crop-container" style="text-align: center;">\n          <img class="crop"></img>\n        </div>\n      </div> \n      <input class="required search-text full-width" name="body" type="text" placeholder="Details" />\n      <div class="cb-submit-container">\n        <button type="submit" class="pull-right std-btn-form cb-submit">\n                  <span class="words-main">submit</span>\n                  <span class="words-error">please fill in all fields before submitting</span>\n        </button>\n      </div>\n    </form>\n  </div>']))}(),function(){Meteor._def_template("editFile",Handlebars.json_ast_to_func(['<div class="cb-form-container" id="cb-form-container-upload-file" style="margin-bottom: 20px;">\n    <div class="top-arrow-container">\n      <div class="top-arrow">',[">","icon-arrow-up"],'</div>\n    </div>\n    <form class="cb-form">\n      <div class="attach-files">\n        <div id="drop_zone" class="drop-zone">\n          <div class="dz-title">drag and drop</div>\n          <div class="dz-subtitle">or click here</div>\n          <ul class="nav nav-tabs small-boxes attachments-list" id="list"></ul>\n          <input class="file-chooser-invisible" name="filesToUpload[]" id="filesToUpload" type="file" multiple="">\n        </div>\n      </div>\n      <div class="cb-submit-container">\n        <button type="submit" class="pull-right std-btn-form cb-submit add-comment submit-comment">submit</button>\n      </div>\n    </form>\n  </div>']))}(),function(){Meteor._def_template("discussionSubmit",Handlebars.json_ast_to_func(['<div class="collapse cb-form-container" id="cb-form-container-discussion-create">\n    <div class="top-arrow-container">\n      <div class="top-arrow">',[">","icon-arrow-up"],'</div>\n    </div>\n    <form class="cb-form cb-discussionSubmit-form">\n      <input class="required width-full first" name="name" type="text" value="" placeholder="Discussion title*"/>\n      ',[">","wysiwyg2"],'\n\n      <div class="cb-form-row paperclip-attach-files">\n        ',[">","paperclipAttachments"],'\n      </div>\n\n      <div class="cb-submit-container">\n        <button type="submit" class="pull-right std-btn-form cb-submit add-comment submit-comment">\n          <span class="words-main">submit</span>\n          <span class="words-error">please fill in a title and body before submitting</span>\n        </button>\n      </div>\n    </form>\n  </div>']))}(),function(){Meteor._def_template("eventSubmit",Handlebars.json_ast_to_func(['<div class="collapse cb-form-container" id="cb-form-container-event-create">\n    <div class="top-arrow-container">\n      <div class="top-arrow">',[">","icon-arrow-up"],'</div>\n    </div>\n    <form class="cb-form cb-eventSubmit-form">\n      <div class="cb-form-row first">\n        <input class="required half-width column-one event-name" name="name" type="text" value="" placeholder="Event title*"/> \n        <input class="required half-width column-two event-location" name="location" type="text" placeholder="Where?*"/>\n      </div>\n      <div class="cb-form-row third-width-container">\n        <input class="required third-width column-first date" name="date" type="text" placeholder="Date?* (ex: 10/25/13)"/>\n        <input class="required third-width column-second time" name="time" type="text" placeholder="Time? (ex: 5pm)*"/>\n        <label class="third-width column-third" name="picture" type="label" data-toggle="collapse" data-target="#add-picture">Add picture?</label>\n      </div>\n      <canvas id="event-main-canvas" width="340" height="230" class="visible-0"></canvas>\n      <canvas id="event-retina-canvas" width="680" height="460" class="visible-0"></canvas>\n      <div class="collapse attach-files" id="add-picture">\n        <div id="event_drop_zone" class="drop-zone">\n          <div class="dz-title">drag and drop</div>\n          <div class="dz-subtitle">or click here</div>\n          <ul class="nav nav-tabs small-boxes attachments-list" id="list"></ul>\n          <input class="file-chooser-invisible" name="filesToUpload[]" id="eventFilesToUpload" type="file" multiple="">\n        </div>\n        <div class="crop-container" style="text-align: center;">\n          <img class="crop"></img>\n        </div>\n      </div> \n      <input class="required search-text full-width event-details" name="body" type="text" placeholder="Details" />\n      <div class="cb-submit-container">\n        <button type="submit" class="pull-right std-btn-form cb-submit">\n                  <span class="words-main">submit</span>\n                  <span class="words-error">please fill in all fields before submitting</span>\n        </button>\n      </div>\n    </form>\n  </div>']))}(),function(){Meteor._def_template("fileSubmit",Handlebars.json_ast_to_func(['<div class="collapse cb-form-container" id="cb-form-container-file-create">\n    <div class="top-arrow-container">\n      <div class="top-arrow">',[">","icon-arrow-up"],'</div>\n    </div>\n    <form class="cb-form cb-fileSubmit-form">\n      <div class="attach-files">\n        ',[">","dropZone"],'\n      </div>\n      <div class="cb-submit-container">\n        <button type="submit" class="pull-right std-btn-form cb-submit add-comment submit-comment">submit</button>\n      </div>\n    </form>\n  </div>']))}(),function(){Meteor._def_template("bubbleCover",Handlebars.json_ast_to_func(['<div class="bubble-cover">\n    ',["#",[[0,"codeComment"]],['\n      <img class="cover-pic" src="',["{",[[0,"coverPhoto"]]],'"/>\n      <div class="cover-mask"></div>\n    ']],'\n      <div class="v-middle pull-left">\n        <div class="v-inner">\n          <div class="profile-pic-container">\n            <span class="category-',["{",[[0,"category"]]],'-fill profile-pic-bg">',[">","icon-bubble-big"],'</span>\n            <img src="',["{",[[0,"profilePicture"]]],'" class="profile-pic">\n          </div>\n        </div>\n      </div>\n      <div class="v-middle bubble-name-and-subtitle">\n        <div class="v-inner">\n          <h1 class="bubble-name">',["{",[[0,"title"]]],'</h1>\n          <h2 class="bubble-subtitle">\n            <span class="category-',["{",[[0,"category"]]],'-color">',["{",[[0,"getLongCategory"]]],"</span>\n            <span> | ",["{",[[0,"pluralize"],[0,"getBubbleUsersCount"],"member",""]],'</span>\n          </h2>\n        </div>\n      </div>\n      <div class="v-middle cover-btns">\n        <div class="v-inner">\n          ',["#",[[0,"if"],[0,"isAdmin"]],['\n            <a href="',["{",[[0,"bubbleEditPath"],[0]]],'">\n              <button class="std-btn-dark cover-btn">\n                <span class="cb-icon-xlight cb-icon-settings">',[">","icon-settings"],'</span>\n                <span class="lbl">edit bubble</span>\n              </button>\n            </a>\n          ']],"\n          ",["#",[[0,"unless"],[0,"isSuperBubble"]],["\n            ",["#",[[0,"unless"],[0,"hasJoinedBubble"]],["\n              ",["#",[[0,"if"],[0,"hasApplied"]],['\n                <button class="std-btn-dark cover-btn cancel-apply">Cancel Application</button>\n              '],["\n                ",["#",[[0,"if"],[0,"hasBeenInvited"]],['\n                  <button class="std-btn-dark cover-btn invite-accept">accept invite</button>\n                  <button class="std-btn-dark cover-btn invite-deny">deny invite</button>\n                '],['\n                  <button class="std-btn-dark cover-btn join-apply">Join Bubble</button>\n                ']],"\n              "]],"\n            "]],"\n          "]],"\n        </div>\n      </div>\n    </div>"]))}(),function(){Meteor._def_template("bubbleEdit",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"getCurrentBubble"]],['\n    <div class="bubble-page-content bubble-page-content-search">\n      \n      <div class="bubble-list member-heading">\n        <div class="bubble-list-heading">\n          <h3 class="section-name pull-left">\n            <span class="section-icon-bubble-create">',[">","icon-bubble-create"],"</span>\n            <span>edit ",["{",[[0,"title"]]],'</span>\n          </h3>\n        </div>\n      </div>\n\n\n      <div class="collapse-true cb-form-container" id="cb-form-container-bubble-edit">\n          <div class="visible-false top-arrow-container">\n            <div class="top-arrow">',[">","icon-arrow-up"],'</div>\n          </div>\n          <form class="cb-form bubble-edit" name="bubble-edit">\n            <div class="visible-',["{",[[0,"hasLevel2Permissions"]]],' select-bubble-type">\n              <input type="hidden" name="bubbleType" value="normal"/>\n              <label class="first no-typing select-bubble-type-label">Bubble Type*</label>\n              <button class="pull-left btn-bubble-type std-btn-form super">super bubble</button>\n              <button class="active-true pull-left btn-bubble-type std-btn-form normal">normal bubble</button>\n            </div>\n\n            <div class="cb-form-row first">\n              <input class="required width-full title" name="title" type="text" value="',["{",[[0,"title"]]],'" placeholder="Name*"/>\n            </div>\n\n            <div class="cb-form-row">\n              <div class="bubble-category">\n                <label class="no-typing">select a category</label>\n                <input class="required category" name="category" type="hidden" value="',["{",[[0,"category"]]],'"/>\n                <ul class="nav nav-tabs large-boxes">\n                  ',["#",[[0,"each"],[0,"systemCategory","categories"]],['\n                    <li class="categoryBox" name="',["{",[[0,"nameShort"]]],'">\n                      <a>\n                        <div class="large-box-title category-',["{",[[0,"nameShort"]]],'-bg">\n                          <div class="v-middle">\n                            <div class="v-inner">\n                              <div class="lbl-large-box">',["{",[[0,"nameLong"]]],'</div>\n                            </div>\n                          </div>\n                        </div>\n                        <div class="large-box-info">\n                          <div class="body">',["{",[[0,"body"]]],'</div>\n                          <div class="cb-icon-check">',[">","icon-check"],"</div>\n                        </div>\n                      </a>\n                    </li>\n                  "]],'\n                </ul>\n              </div>\n            </div>\n\n            <div>\n              <canvas id="cover-main-canvas" width="960" height="110" class="visible-0"></canvas>\n              <canvas id="cover-retina-canvas" width="1920" height="220" class="visible-0"></canvas>\n              <canvas id="profile-main-canvas" width="300" height="300" class="visible-0"></canvas>\n              <canvas id="profile-retina-canvas" width="600" height="600" class="visible-0"></canvas>\n            </div>\n\n            <label class="no-typing less-formatting">cover photo</label>\n            <div class="attach-files attach-cover-photo no-padding">\n              ',[">","attachCoverPhoto"],'\n              <div class="crop-container crop-cover" style="text-align: center;">\n                <img class="crop"></img>\n              </div>\n            </div>\n\n            <br><br><br>\n            <label class="no-typing less-formatting">profile picture</label>\n            <div class="attach-files attach-profile-photo no-padding">\n              ',[">","attachProfilePicture"],'\n              <div class="crop-container crop-profile" style="text-align: center;">\n                <img class="crop"></img>\n              </div>\n            </div>\n\n\n\n\n            <br><br><br>\n            ',[">","wysiwyg2"],'\n\n\n\n          <div class="cb-submit-container">\n                <button type="submit" class="pull-right std-btn-form cb-submit ladda-button" data-style="expand-right">\n                  <span class="words-main">submit</span>\n                  <span class="words-error">please fill in all fields before submitting</span>\n                </button>\n              </div>\n          </form>\n      </div>\n  \n      <img src="/img/Bubble-Profile.jpg" class="visible-0" id="profilePhoto" />\n      <img src="/img/Bubble-Profile.jpg" class="visible-0" id="profileRetinaPhoto" />\n      <img src="/img/Bubble-Coverphoto.jpg" class="visible-0" id="coverPhoto" />\n      <img src="/img/Bubble-Coverphoto.jpg" class="visible-0" id="coverRetinaPhoto" />\n    </div>\n  ']]]))}(),function(){Meteor._def_template("bubbleItem",Handlebars.json_ast_to_func(['<div class="post">\n    <div class="post-content">\n      <h3><a href="',["{",[[0,"bubblePagePath"],[0]]],'">',["{",[[0,"title"]]],"</a><span>",["{",[[0,"toUpperCase"],[0,"category"]]],"</span></h3>\n      <p>\n        ",["{",[[0,"description"]]],"\n        ",["#",[[0,"if"],[0,"isAdmin"]],['\n          <a href="',["{",[[0,"bubbleEditPath"],[0]]],'">Edit Bubble |</a>\n	  			<a href="',["{",[[0,"bubbleMembersPagePath"],[0]]],'">Member Page</a>\n        ']],"\n      </p>\n    </div>\n    ",["#",[[0,"if"],[0,"isAdmin"]],['\n      <div style="width: 100px;" class="pull-right">\n        <p style="line-height: 10px;">Admin</p>\n        <h4 style="line-height: 16px; text-transform: uppercase;">',["{",[[0,"isAdmin"]]],"</h4>\n      </div>\n    "]],"\n  </div>"]))}(),function(){Meteor._def_template("bubbleMembersHeading",Handlebars.json_ast_to_func(['<div class="bubble-list member-heading">\n    <div class="bubble-list-heading">\n      <h3 class="section-name pull-left">\n        <span class="section-icon-member">',[">","icon-member"],'</span>\n        <span>Members</span>\n      </h3>\n      <button class="std-btn-light pull-right btn-add" data-toggle="collapse" data-target="#cb-form-container-add-members">\n        <span class="left-icon cb-icon-add">',[">","icon-add"],"</span>\n        <span>add new member</span>\n      </button>\n    </div>\n  </div>"]))}(),function(){Meteor._def_template("bubbleSectionSelector",Handlebars.json_ast_to_func(['<div class="bubble-section-selector category-',["{",[[0,"category"]]],"-border-top-4 category-",["{",[[0,"category"]]],'-bg-opacity-80">\n    <div class="opacity-wrapper">\n      <a href="',["{",[[0,"bubblePagePath"],[0]]],'">\n        <button class="active-',["{",[[0,"isSelected"],"home"]]," btn-bubble-section category-",["{",[[0,"category"]]],"-bg-opacity-90 category-",["{",[[0,"category"]]],'-hover-fill">\n          <div class="cb-icon">',[">","icon-home"],'</div>\n          <div class="category-',["{",[[0,"category"]]],'-color lbl">home</div>\n        </button>\n      </a>\n      <a href="',["{",[[0,"bubbleEventPagePath"],[0]]],'">\n        <button class="active-',["{",[[0,"isSelected"],"event"]]," btn-bubble-section category-",["{",[[0,"category"]]],"-bg-opacity-80 category-",["{",[[0,"category"]]],'-hover-fill">\n          <div>',[">","icon-event"],'</div>\n          <div class="category-',["{",[[0,"category"]]],'-color lbl">events</div>\n        </button>\n      </a>\n      <a href="',["{",[[0,"bubbleDiscussionPagePath"],[0]]],'">\n        <button class="active-',["{",[[0,"isSelected"],"discussion"]]," btn-bubble-section category-",["{",[[0,"category"]]],"-bg-opacity-90 category-",["{",[[0,"category"]]],'-hover-fill">\n          <div>',[">","icon-discussion"],'</div>\n          <div class="category-',["{",[[0,"category"]]],'-color lbl">discussions</div>\n        </button>\n      </a>\n      <a href="',["{",[[0,"bubbleFilePagePath"],[0]]],'">\n        <button class="active-',["{",[[0,"isSelected"],"file"]]," btn-bubble-section category-",["{",[[0,"category"]]],"-bg-opacity-80 category-",["{",[[0,"category"]]],'-hover-fill">\n          <div>',[">","icon-file"],'</div>\n          <div class="category-',["{",[[0,"category"]]],'-color lbl">files</div>\n        </button>\n      </a>\n      <a href="',["{",[[0,"bubbleMembersPagePath"],[0]]],'">\n        <button class="active-',["{",[[0,"isSelected"],"members"]]," btn-bubble-section category-",["{",[[0,"category"]]],"-bg-opacity-90 category-",["{",[[0,"category"]]],'-hover-fill">\n          <div>',[">","icon-member"],'</div>\n          <div class="category-',["{",[[0,"category"]]],'-color lbl">members</div>\n        </button>\n      </a>\n    </div>\n  </div>']))}(),function(){Meteor._def_template("bubbleSubmit",Handlebars.json_ast_to_func(['<div class="bubble-page-content bubble-page-content-search">\n     \n    <div class="bubble-list member-heading">\n      <div class="bubble-list-heading">\n        <h3 class="section-name pull-left">\n          <span class="section-icon-bubble-create">',[">","icon-bubble-create"],'</span>\n          <span>create a bubble</span>\n        </h3>\n      </div>\n    </div>\n\n  <div class="collapse-true cb-form-container" id="cb-form-container-bubble-create">\n    <div class="visible-false top-arrow-container">\n      <div class="top-arrow">',[">","icon-arrow-up"],'</div>\n    </div>\n    <form class="cb-form bubble-create" name="bubble-create">\n\n      <div class="visible-',["{",[[0,"hasLevel2Permissions"]]],' select-bubble-type">\n        <input type="hidden" name="bubbleType" value="normal"/>\n        <label class="first no-typing select-bubble-type-label">Bubble Type*</label>\n        <button class="pull-left btn-bubble-type std-btn-form super">super bubble</button>\n        <button class="active-true pull-left btn-bubble-type std-btn-form normal">normal bubble</button>\n      </div>\n\n      <div class="cb-form-row first">\n        <input class="required width-full" name="title" type="text" value="',["{",[[0,"systemBubble","selectedBubble","title"]]],'" placeholder="Name*"/>\n      </div>\n\n      <div class="cb-form-row">\n        <div class="bubble-category">\n          <label class="no-typing">select a category</label>\n          <input class="required" name="category" type="hidden" value="',["{",[[0,"systemBubble","selectedBubble","category"]]],'"/>\n          <ul class="nav nav-tabs large-boxes">\n            ',["#",[[0,"each"],[0,"systemCategory","categories"]],['\n              <li class="categoryBox" name="',["{",[[0,"nameShort"]]],'">\n                <a>\n                  <div class="large-box-title category-',["{",[[0,"nameShort"]]],'-bg">\n                    <div class="v-middle">\n                      <div class="v-inner">\n                        <div class="lbl-large-box">',["{",[[0,"nameLong"]]],'</div>\n                      </div>\n                    </div>\n                  </div>\n                  <div class="large-box-info">\n                    <div class="body">',["{",[[0,"body"]]],'</div>\n                    <div class="cb-icon-check">',[">","icon-check"],"</div>\n                  </div>\n                </a>\n              </li>\n            "]],'\n          </ul>\n        </div>\n      </div>\n      \n      <div>\n        <canvas id="cover-main-canvas" width="960" height="110" class="visible-0"></canvas>\n        <canvas id="cover-retina-canvas" width="1920" height="220" class="visible-0"></canvas>\n        <canvas id="profile-main-canvas" width="300" height="300" class="visible-0"></canvas>\n        <canvas id="profile-retina-canvas" width="600" height="600" class="visible-0"></canvas>\n      </div>\n\n      <label class="no-typing less-formatting">cover photo</label>\n      <div class="attach-files attach-cover-photo no-padding">\n        ',[">","attachCoverPhoto"],'\n        <div class="crop-container crop-cover" style="text-align: center;">\n          <img class="crop"></img>\n        </div>\n      </div>\n\n      <br><br><br>\n      <label class="no-typing less-formatting">profile picture</label>\n      <div class="attach-files attach-profile-photo no-padding">\n        ',[">","attachProfilePicture"],'\n        <div class="crop-container crop-profile" style="text-align: center;">\n          <img class="crop"></img>\n        </div>\n      </div>\n\n\n      <br><br><br>\n      ',[">","wysiwyg2"],'\n\n\n      <div class="cb-submit-container">\n        <button type="submit" class="pull-right std-btn-form cb-submit">\n          <span class="words-main">submit</span>\n          <span class="words-error">please fill in all fields before submitting</span>\n        </button>\n      </div>\n    </form>\n  </div>\n\n<!--  <div class="cb-form-container" id="cb-form-container-event">\n    <form class="cb-form">\n        <div class="cb-form-row">\n          <div class="attach-files">\n            <label class="dropzone-label" name="picture" type="label">Add profile photo?</label>\n            <div id="drop_zone" class="drop-zone">\n              <div class="dz-title">drag and drop</div>\n              <div class="dz-subtitle">or click here</div>\n              <ul class="nav nav-tabs small-boxes attachments-list" id="list"></ul>\n              <input class="file-chooser-invisible" name="filesToUpload[]" id="profilefilesToUpload" type="file" multiple="">\n            </div>\n          </div>\n        </div>\n\n\n        <div class="cb-form-row last">\n          <div class="attach-files">\n            <label class="dropzone-label" name="picture" type="label">Add cover photo?</label>\n            <div id="drop_zone" class="drop-zone">\n              <div class="dz-title">drag and drop</div>\n              <div class="dz-subtitle">or click here</div>\n              <ul class="nav nav-tabs small-boxes attachments-list" id="list"></ul>\n              <input class="file-chooser-invisible" name="filesToUpload[]" id="coverfilesToUpload" type="file" multiple="">\n            </div>\n          </div>\n      </div>\n\n    </form>\n  </div>-->\n\n  <img src="/img/Bubble-Profile.jpg" class="visible-0" id="profilePhoto" />\n  <img src="/img/Bubble-Profile.jpg" class="visible-0" id="profileRetinaPhoto" />\n  <img src="/img/Bubble-Coverphoto.jpg" class="visible-0" id="coverPhoto" />\n  <img src="/img/Bubble-Coverphoto.jpg" class="visible-0" id="coverRetinaPhoto" />\n</div>']))}(),function(){Meteor._def_template("commentItem",Handlebars.json_ast_to_func(['<li class="comment-item">\n    <div>\n      <a href="',["{",[[0,"userProfilePath"],[0,"","userId"]]],'">\n        <div class="author-pic">\n          <div class="bubble-bg">',[">","icon-bubble"],'</div>\n          <img class="pic-circle author-circle" src="',["{",[[0,"getSelectedUserProfilePic"],[0,"","userId"]]],'"/>\n        </div>\n      </a>\n      <a href="',["{",[[0,"userProfilePath"],[0,"userId"]]],'">\n        <span class="user-name">',["{",[[0,"author"]]],'</span>\n      </a>\n      <span class="small-heading comment-time">',["{",[[0,"submittedText"],[0,"submitted"]]],'</span>\n    </div>\n    <pre class="comment-body">',["{",[[0,"body"]]],'</pre>\n    <button class="visible-',["{",[[0,"allowDelete"]]],' post-action delete-comment">\n      <span>delete</span>\n    </button>\n  </li>']))}(),function(){Meteor._def_template("commentSubmit",Handlebars.json_ast_to_func(['<div class="collapse cb-form-container" id="cb-form-container-comment">\n    <div class="top-arrow-container">\n      <div class="top-arrow">',[">","icon-arrow-up"],'</div>\n    </div>\n    <form class="cb-form comment-form" name="comment">\n      <div class="first"></div>\n      <hr class="break-bottom">\n      <textarea class="required body" name="body" placeholder="Type here..."></textarea>\n      <hr class="break-top">\n      <div class="cb-submit-container">\n        <button type="submit" class="pull-right std-btn-form cb-submit add-comment submit-comment">\n          <span class="words-main">submit</span>\n          <span class="words-error">please type a message before submitting</span>\n        </button>\n      </div>\n    </form>\n  </div>']))}(),function(){Meteor._def_template("commentsList",Handlebars.json_ast_to_func(['<div class="comments-list">\n    <div class="bubble-list comments-heading">\n      <div class="bubble-list-heading">\n        <h3 class="section-name pull-left">',["{",[[0,"pluralize"],[0,"commentsCount"],"comment",""]],'</h3>\n        <button class="visible-toggle-parent toggle-hide std-btn-light pull-right btn-add" data-toggle="collapse" data-target="#cb-form-container-comment">\n          <span class="visible-toggle-child-start-show left-icon cb-icon-add">',[">","icon-add"],'</span>\n          <span class="visible-toggle-child-start-hide left-icon">',[">","icon-cancel"],'</span>\n          <span class="visible-toggle-child-start-show">add new comment</span>\n          <span class="visible-toggle-child-start-hide">cancel</span>\n        </button>\n      </div>\n    </div>\n    <ul id="comments" class="comments">\n      ',[">","commentSubmit"],"\n      ",["#",[[0,"each"],[0,"comments"]],["\n        ",[">","commentItem"],"\n      "],['\n        <div class="post-item">\n          <div class="v-middle">\n            <div class="v-inner">\n              No comments yet. Be the first to comment!\n            </div>\n          </div>\n        </div>\n      ']],"\n    </ul>\n  </div>"]))}(),function(){Meteor._def_template("exploreCover",Handlebars.json_ast_to_func(['<div class="explore-cover">\n      <!-- <img class="cover-pic" src=""/> -->\n      <div class="cover-mask"></div>\n      <div class="v-middle pull-left">\n        <div class="v-inner">\n          <div class="profile-icon-container">\n            <span class="cb-profile-icon">',["!",[[0,"getExploreIcon"],[0]]],'</span>\n          </div>\n        </div>\n      </div>\n      <div class="v-middle explore-name-and-subtitle">\n        <div class="v-inner">\n          <h1 class="explore-name">',["{",[[0,"title"]]],'</h1>\n          <h2 class="explore-subtitle">',["{",[[0,"description"]]],'</h2>\n        </div>\n      </div>\n      <div class="v-middle cover-btns">\n        <div class="v-inner">\n            <a href="#">\n              <button class="visible-toggle-parent toggle-hide std-btn-dark cover-btn explore-btn" data-toggle="collapse" data-target="#cb-form-container-',["{",[[0,"exploreType"]]],'">\n                <span class="visible-toggle-child-start-show cb-icon-xlight cb-icon-add">',[">","icon-add"],'</span>\n                <span class="visible-toggle-child-start-show lbl cb-lbl-add">post</span>\n              <span class="visible-toggle-child-start-hide left-icon cb-icon-cancel">',[">","icon-cancel"],'</span>\n              <span class="visible-toggle-child-start-hide cb-lbl-cancel">cancel</span>\n              </button>\n            </a>\n        </div>\n      </div>\n    </div>\n    ',["#",[[0,"if"],[0,"isExploreType"],"discussion"],["\n      ",[">","exploreDiscussionSubmit"],"\n    "],["\n      ",["#",[[0,"if"],[0,"isExploreType"],"event"],["\n        ",[">","exploreEventSubmit"],"\n      "]],"\n    "]]]))}(),function(){Meteor._def_template("exploreEdit",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"getCurrentBubble"]],["\n    ",[">","bubbleCover"],'\n    <form class="main">\n      <div class="control-group">\n          <label class="control-label" for="title">Title</label>\n          <div class="controls">\n              <input name="title" type="text" value="',["{",[[0,"title"]]],'" placeholder="Title of Bubble"/>\n          </div>\n      </div>\n      <div class="control-group">\n          <label class="control-label" for="description">Description</label>\n          <div class="controls">\n              <input name="description" type="text" value="',["{",[[0,"description"]]],'" placeholder="Description of Bubble"/>\n          </div>\n      </div>\n\n      <div class="control-group">\n          <div id="bubble_image">\n                  <img id="coverphoto_upload" src="" />\n                  <img id="coverphoto_preview" src="',["{",[[0,"coverPhoto"]]],'" />\n                  <img id="coverphoto_retina" src="" />\n                  <a href="#" class="btn btn-danger delete" id="change_coverphoto">Change</a>\n              <div id="cover_dropzone" class="dropzone">Drop cover photo here.</div>\n              <input name="filesToUpload[]" id="coverfilesToUpload" type="file">\n          </div>\n      </div>\n\n      <div class="control-group">\n          <div id="bubble_profile">\n                 <img id="profilepicture_upload" src="" />\n                  <img id="profilepicture_preview" src="',["{",[[0,"profilePicture"]]],'" />\n                  <img id="profilepicture_retina" src="" />\n                  <a href="#" class="btn btn-danger delete" id="change_profilepicture">Change</a>\n              <div id="profile_dropzone" class="dropzone">Drop bubble profile picture here.</div>\n              <input name="filesToUpload[]" id="profilefilesToUpload" type="file">\n          </div>\n      </div>\n\n      <div class="control-group">\n        <label class="control-label" for="category">Category</label>\n        <div class="controls">\n            ',[">","categorySelector"],'\n        </div>\n      </div>\n\n      <hr>\n      <div class="control-group">\n          <div class="controls">\n              <input type="submit" value="Submit" class="btn btn-primary submit"/>\n          </div>\n      </div>\n\n      <hr/>\n      <div class="control-group">\n          <div class="controls">\n              <a class="btn btn-danger delete" id="delete_bubble" href="#">Delete Bubble</a>\n          </div>\n      </div>\n    </form>\n  ']]]))}(),function(){Meteor._def_template("explorePostPage",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"currentExplore"]],["\n    ",[">","exploreCover"],"\n  "]],"\n  ",["#",[[0,"with"],[0,"getCurrentPost"]],['\n    <div class="bubble-page-content post-page">\n      <div class="top-btns">\n        <a href="/explore/',["{",[[0,"currentExplore","_id"]]],'/home">\n          <button class="pull-left std-btn-light with-left-icon btn-back">\n            <span class="left-icon">',[">","icon-back"],'</span>\n            <span>back</span>\n          </button>\n        </a>\n\n        <button class="pull-right std-btn-light btn-flag">\n          <span>',[">","icon-flag"],'</span>\n          <span class="flag-text visible-',["{",[[0,"isFlagged"]]],'">flagged</span>\n        </button>\n\n        ',["#",[[0,"if"],[0,"returnFalse"]],['<!--This is commenting out code-->\n          <a class="visible-',["{",[[0,"isAdmin"]]],'" href="/mybubbles/',["{",[[0,"bubbleId"]]],"/posts/",["{",[[0,"_id"]]],"/edit/",["{",[[0,"postType"]]],'">\n            <button class="pull-right std-btn-light with-left-icon btn-edit">\n              <span class="left-icon">',[">","icon-edit"],"</span>\n              <span>edit</span>\n            </button>\n          </a>\n        "]],'\n        <button class="pull-right std-btn-light with-left-icon btn-edit" data-toggle="collapse" data-target="#edit-',["{",[[0,"postType"]]],'">\n          <span class="left-icon">',[">","icon-edit"],'</span>\n          <span>edit</span>\n        </button>\n\n        <button class="visible-',["{",[[0,"isAdmin"]]],' pull-right std-btn-light with-left-icon btn-delete">\n          <span class="left-icon">',[">","icon-cancel"],"</span>\n          <span>delete</span>\n        </button>\n      </div>\n\n      ",["#",[[0,"if"],[0,"isEvent"]],['\n        <div id="edit-event" class="collapse">\n          ',[">","exploreEditEvent"],"\n        </div>\n      "]],"\n     ",["#",[[0,"if"],[0,"notEvent"]],["\n        ",["#",[[0,"if"],[0,"isDiscussion"]],['\n          <div id="edit-discussion" class="collapse">\n            ',[">","exploreDiscussionEdit"],"\n          </div>\n        "]],"\n\n\n        ",["#",[[0,"if"],[0,"isFile"]],['\n          <div id="edit-file" class="collapse">\n            ',[">","editFile"],"\n          </div>\n        "]],"\n     "]],'\n      <div class="post-heading">\n      ',["#",[[0,"if"],[0,"postedAsUser"]],['\n        <a href="',["{",[[0,"userProfilePath"],[0,"","userId"]]],'">\n          <div class="author-pic">\n            <div class="bubble-bg">',[">","icon-bubble"],'</div>\n            <img class="pic-circle author-circle" src="',["{",[[0,"getAuthorProfilePicture"]]],'"/>\n          </div>\n        </a>\n      '],['\n        <div class="pull-left category-',["{",[[0,"getPostAsBubbleCategory"]]],'-fill post-as-bubble-single">\n          ',[">","icon-bubble"],"\n        </div>\n      "]],'\n        <div class="name">',["{",[[0,"decodeURI"],[0,"name"]]],'</div>\n        <div class="subtitle">posted ',["{",[[0,"timestampToFromNow"],[0,"submitted"]]]," by ",["{",[[0,"displayName"]]],"</div>\n      </div>\n\n      ",[">","postAttributes"],"\n      ",[">","commentsList"],"\n\n      ",["#",[[0,"if"],[0,"isEvent"]],["\n        \n        </br>\n        ",["#",[[0,"if"],[0,"notAttending"]],['\n          <button class="btn btn-small btn-success attending" type="button">I\'M GOING</button>\n        ']],"\n        ",["#",[[0,"if"],[0,"isAttending"]],['\n          <button class="btn btn-small btn-success attending" type="button">I\'M NOT GOING</button>\n        ']],"\n        ",["#",[[0,"with"],[0,"attendees"]],["\n          <br />\n        "]],"\n      "]],"\n    </div>\n  "]]]))
}(),function(){Meteor._def_template("exploreSectionSelector",Handlebars.json_ast_to_func(['<div class="bubble-section-selector category-',["{",[[0,"category"]]],"-border-top-4 category-",["{",[[0,"category"]]],'-bg-opacity-60">\n    <div class="opacity-wrapper">\n      <a href="',["{",[[0,"bubblePagePath"],[0]]],'"><button class="btn-bubble-section category-',["{",[[0,"category"]]],'-fill">',[">","icon-home"],'</button></a>\n      <a href="',["{",[[0,"bubbleEventPagePath"],[0]]],'"><button class="btn-bubble-section category-',["{",[[0,"category"]]],'-bg-opacity-100">',[">","icon-event"],'</button></a>\n      <a href="',["{",[[0,"bubbleDiscussionPagePath"],[0]]],'"><button class="btn-bubble-section category-',["{",[[0,"category"]]],'-bg-opacity-90">',[">","icon-discussion"],'</button></a>\n      <a href="',["{",[[0,"bubbleFilePagePath"],[0]]],'"><button class="btn-bubble-section category-',["{",[[0,"category"]]],'-bg-opacity-80">',[">","icon-file"],'</button></a>\n      <a href="',["{",[[0,"bubbleMembersPagePath"],[0]]],'"><button class="btn-bubble-section category-',["{",[[0,"category"]]],'-bg-opacity-70">',[">","icon-member"],"</button></a>\n    </div>\n  </div>"]))}(),function(){Meteor._def_template("exploreSubmit",Handlebars.json_ast_to_func(['<head>\n<style>\n.thumb {\nheight: 75px;\nborder: 1px solid #000;\nmargin: 10px 5px 0 0;\n}\n</style>\n</head>\n\n  <form class="main">\n    ',["#",[[0,"if"],[0,"hasLevel4Permission"]],['\n        <div class="control-group">\n            <label class="control-label" for="title">Title</label>\n            <div class="controls">\n                <input name="title" type="text" value="" placeholder="Title of Explore Section"/>\n            </div>\n        </div>\n\n        <div class="control-group">\n            <label class="control-label" for="category">Icon</label>\n            <div class="controls">\n                ',[">","exploreIconSelector"],'\n            </div>\n        </div>\n\n        <div class="control-group">\n            <label class="control-label" for="description">Description</label>\n            <div class="controls">\n                <input name="description" type="text" value="" placeholder="Description of Explore Section"/>\n            </div>\n        </div>\n\n        <div class="control-group">\n            <div id="bubble_image">\n                <div id="cover_dropzone" class="dropzone">Drop cover photo here.</div>\n                <input name="filesToUpload[]" id="coverfilesToUpload" type="file">\n                    <img id="coverphoto_upload" src="" />\n                    <img id="coverphoto_preview" src="" />\n            </div>\n        </div>\n\n\n        <div class="control-group">\n            <label class="control-label" for="category">Explore Type</label>\n            <div class="controls">\n                ',[">","exploreTypeSelector"],'\n            </div>\n        </div>\n\n        <hr>\n        <div class="control-group">\n            <div class="controls">\n                <input type="submit" value="Submit" class="btn btn-primary"/>\n            </div>\n        </div>\n      </form>\n      <img src="/img/Explore-Coverphoto.jpg" id="tempbubblecoverphoto" />\n    ']]]))}(),function(){Meteor._def_template("flagItem",Handlebars.json_ast_to_func([["{",[[0,"invokerName"]]]," || Investigate Post: \n	",["#",[[0,"with"],[0,"getPost"]],['\n		<a href="',["{",[[0,"postLink"]]],'">',["{",[[0,"name"]]],"</a>\n	"]]]))}(),function(){Meteor._def_template("flagsList",Handlebars.json_ast_to_func(["<h3>Unsolved Flags List</h3>\n	<br />\n	",["#",[[0,"each"],[0,"getUnsolvedFlags"]],["\n		",[">","flagItem"],'\n		<button class="btn btn-small resolve-flag">Issue Is Resolved</button>\n		<br />\n	']],"\n	<hr>\n	<h3>Solved Flags List</h3>\n	<br />\n	",["#",[[0,"each"],[0,"getSolvedFlags"]],["\n		",[">","flagItem"],"\n		<br />\n	"]]]))}(),function(){Meteor._def_template("gifLoader",Handlebars.json_ast_to_func(['<div class="gif-loader-container">\n    <div class="gif-loader">',[">","icon-logo-main"],"</div>\n  </div>"])),Meteor._def_template("gifLoaderSite",Handlebars.json_ast_to_func(['<div class="gif-loader-container-site">\n    <div class="gif-loader">',[">","icon-logo-main"],"</div>\n  </div>"])),Meteor._def_template("gifLoaderToParent",Handlebars.json_ast_to_func(['<div class="loading-container">\n	    <div class="loading">\n    		<div class="gif-loader">',[">","icon-logo-main"],"</div>\n	    </div>\n	</div>"]))}(),function(){Meteor._def_template("header",Handlebars.json_ast_to_func(['<header class="navbar navbar-main">\n    <div class="navbar-inner">\n      <a href="/dashboard" class="cb-logo-main cb-logo-main-mobile">\n        <span class="logo-main">',[">","icon-logo-main"],'</span>\n        <span class="logo-words">\n          <span class="left">emory</span><span class="right">bubble</span>\n        </span>\n      </a>\n      <ul class="nav visible-all pull-right user-dropdown">\n        <li class="dropdown">\n          ',[">","logoutDropdown"],'\n        </li>\n      </ul>\n      <ul class="nav pull-right">\n        ',["#",[[0,"if"],[0,"currentUser"]],['\n          <li class="',["{",[[0,"activeRouteClass"],"analytics"]]," visible-",["{",[[0,"checkUserType"],"3"]],'">\n            <a href="',["{",[[0,"userlogPath"]]],'" class="my-bubble">Analytics</a>\n          </li>\n          <li class="',["{",[[0,"activeRouteClass"],"flags"]]," visible-",["{",[[0,"checkUserType"],"3"]],'">\n            <a href="',["{",[[0,"flagsListPath"]]],'" class="my-bubble">Flag List</a>\n          </li>\n          <li>\n            <a href="http://support.emorybubble.com" target="_blank" class="my-bubble username-toggle">support</a>\n          </li>\n          <li class="dropdown cb-updates-dropdown">\n            ',[">","updatesDropdown"],"\n          </li>\n        "]],"\n      </ul>\n    </div>\n  </header>"]))}(),function(){Meteor._def_template("icon-bubble",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n           width="20px" height="20px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M0,9.76c0,5.38,4.37,9.75,9.76,9.75c1.53,0,2.981-0.35,4.27-0.979\n          C15.47,19.74,20,20,20,20c-2.25-1.16-3.11-2.56-3.42-3.27c1.81-1.77,2.93-4.24,2.93-6.97C19.51,4.37,15.14,0,9.76,0\n          C4.37,0,0,4.37,0,9.76z"/>\n  </svg>'])),Meteor._def_template("icon-bubble-create",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="22px" height="22px" viewBox="0 0 22 22" enable-background="new 0 0 22 22" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M0,10.729c0,5.931,4.8,10.73,10.73,10.73c1.69,0,3.28-0.38,4.7-1.08\n  	C17.01,21.72,22,22,22,22c-2.48-1.271-3.42-2.81-3.76-3.601c1.99-1.949,3.22-4.659,3.22-7.67C21.46,4.8,16.66,0,10.73,0\n  	S0,4.8,0,10.729z M9,5h3v4h4v3h-4v4H9v-4H5V9h4V5z"/>\n  </svg>'])),Meteor._def_template("icon-bubble-big",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="73px" height="73.999px" viewBox="0 0 73 73.999" enable-background="new 0 0 73 73.999" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M0,36.46c0,20.139,16.34,36.459,36.5,36.459c5.33,0,10.391-1.141,14.95-3.189\n  	c0.78,0.471,6.87,4.02,13.44,4.27c0,0-6.811-5.27-5.58-9.07C67.66,58.239,73,47.979,73,36.46C73,16.32,56.66,0,36.5,0\n  	S0,16.32,0,36.46z"/>\n  </svg>'])),Meteor._def_template("icon-two-bubbles",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="30px" height="22px" viewBox="0 0 30 22" enable-background="new 0 0 30 22" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="\n  	M15,19.76c1.16,0.49,2.42,0.75,3.76,0.75c1.53,0,2.98-0.35,4.27-0.98C24.471,20.74,29,21,29,21c-2.25-1.16-3.109-2.561-3.42-3.27\n  	c1.811-1.771,2.93-4.24,2.93-6.971c0-5.39-4.369-9.76-9.75-9.76c-1.34,0-2.6,0.27-3.76,0.75c3.52,1.47,6,4.95,6,9.01\n  	C21,14.811,18.52,18.29,15,19.76z"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="\n  	M21,10.76c0,5.381-4.37,9.75-9.76,9.75c-1.53,0-2.98-0.35-4.27-0.98C5.53,20.74,1,21,1,21c2.25-1.16,3.11-2.561,3.42-3.27\n  	c-1.81-1.771-2.93-4.24-2.93-6.971C1.49,5.37,5.86,1,11.24,1C16.63,1,21,5.37,21,10.76z"/>\n  </svg>'])),Meteor._def_template("icon-settings",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="17.51px" height="17.44px" viewBox="0 0 17.51 17.44" enable-background="new 0 0 17.51 17.44" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.74,10.489c-0.971,0-1.75-0.779-1.75-1.739C6.99,7.78,7.77,7,8.74,7\n  	c0.97,0,1.76,0.78,1.76,1.75C10.5,9.71,9.71,10.489,8.74,10.489z M8.699,5.78c-1.639,0-2.969,1.33-2.969,2.959\n  	c0,1.641,1.331,3.011,2.969,3.011c1.641,0,3.041-1.37,3.041-3.011C11.74,7.11,10.34,5.78,8.699,5.78z M15.1,10.51\n  	c-0.15,0.54-0.38,1.06-0.65,1.53L14.49,12c0,0,1.39,1.771,0.51,2.649l-0.43,0.431c-0.66,0.659-2.271-0.37-2.61-0.601\n  	c-0.5,0.291-1.05,0.5-1.62,0.65h0.16c0,0-0.311,2.311-1.561,2.311H8.52c-1,0-1.529-2.17-1.58-2.381\n  	c-0.58-0.16-1.129-0.41-1.629-0.72l0.15,0.17c0,0-1.8,1.479-2.68,0.601l-0.39-0.32c-0.7-0.7,0.48-2.631,0.61-2.83\n  	c-0.26-0.45-0.47-0.93-0.61-1.43C2.17,10.47,0,9.95,0,8.96V8.53C0,7.4,2.02,7.05,2.38,7c0.14-0.51,0.35-1,0.6-1.45\n  	c-0.1-0.14-1.41-2.03-0.7-2.74l0.41-0.35c0.81-0.8,2.5,0.37,2.79,0.58c0.46-0.26,0.95-0.47,1.469-0.62C7.04,2.04,7.57,0,8.52,0h0.42\n  	c1.09,0,1.461,1.91,1.541,2.4c0.529,0.15,1.029,0.36,1.5,0.62c0.33-0.2,2.09-1.23,2.76-0.56l0.39,0.41\n  	c0.771,0.76-0.36,2.28-0.649,2.64c0.27,0.47,0.479,0.97,0.629,1.5V6.99c0,0,2.4,0.3,2.4,1.541v0.43\n  	C17.51,9.88,15.54,10.409,15.1,10.51z"/>\n  </svg>'])),Meteor._def_template("icon-settings-big",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="15px" height="15px" viewBox="0 0 15 15" enable-background="new 0 0 15 15" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.819,7.506c0,0.78-0.668,1.336-1.329,1.336c-0.78,0-1.298-0.669-1.298-1.336\n  	c0-0.743,0.518-1.298,1.298-1.298C8.264,6.208,8.819,6.763,8.819,7.506z M9.863,7.506c0,1.411-1.225,2.341-2.373,2.341\n  	c-1.335,0-2.341-1.118-2.341-2.341c0-1.336,1.081-2.342,2.341-2.342C8.857,5.165,9.863,6.246,9.863,7.506z M8.376,1.044\n  	c0.188,0.48,0.188,1.073,0.518,1.486c0.227,0.292,0.743,0.331,1.074,0.48l1.486-0.706c0.443,0.406,0.886,0.856,1.225,1.224\n  	L12.01,5.015c0.15,0.375,0.15,0.856,0.48,1.081c0.375,0.331,1.007,0.368,1.485,0.556V8.4c-0.479,0.15-1.11,0.15-1.523,0.517\n  	C12.16,9.143,12.16,9.661,12.01,10l0.669,1.447c-0.368,0.442-0.819,0.894-1.225,1.261l-1.486-0.704\n  	C9.637,12.19,9.12,12.19,8.894,12.483c-0.329,0.375-0.329,1.006-0.518,1.524h-1.74c-0.15-0.482-0.331-0.999-0.556-1.524\n  	c-0.338-0.143-0.706-0.293-1.073-0.479l-1.449,0.704c-0.405-0.367-0.856-0.818-1.224-1.261L3.002,10\n  	c-0.15-0.339-0.15-0.857-0.443-1.083C2.147,8.587,1.554,8.587,1.036,8.4V6.651c0.48-0.188,1.073-0.226,1.486-0.556\n  	c0.292-0.225,0.33-0.705,0.48-1.081L2.334,3.566l1.224-1.261l1.449,0.706c0.368-0.15,0.773-0.188,1.036-0.443\n  	c0.331-0.413,0.405-1.006,0.593-1.524H8.376z M9.12,0C9.309,0.556,9.45,1.149,9.713,1.75c0.038,0.038,0.187,0.075,0.255,0.113\n  	l1.712-0.781l2.26,2.229l-0.817,1.704c0.036,0.075,0.036,0.225,0.187,0.263c0.517,0.263,1.148,0.443,1.703,0.63v3.197\n  	c-0.555,0.226-1.187,0.368-1.741,0.633C13.196,9.773,13.158,9.924,13.158,10l0.781,1.665l-2.26,2.304L9.968,13.15\n  	c-0.068,0.038-0.217,0.038-0.255,0.152c-0.225,0.523-0.404,1.155-0.593,1.71H5.893c-0.188-0.555-0.405-1.187-0.631-1.71\n  	c-0.037-0.114-0.15-0.114-0.255-0.152l-1.674,0.818l-2.259-2.304L1.892,10c-0.037-0.076-0.112-0.227-0.15-0.263\n  	C1.186,9.473,0.593,9.33,0,9.104V5.908c0.556-0.188,1.148-0.405,1.742-0.63c0.038-0.038,0.075-0.15,0.15-0.263L1.074,3.311\n  	l2.259-2.229l1.674,0.781C5.112,1.825,5.225,1.787,5.262,1.75C5.524,1.187,5.705,0.594,5.93,0H9.12z"/>\n  </svg>'])),Meteor._def_template("icon-home",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="32.041px" height="31.966px" viewBox="0 0 32.041 31.966" enable-background="new 0 0 32.041 31.966" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M6.02,30.011h4v-9c0-0.55,0.45-1,1-1h10c0.55,0,1,0.45,1,1v9h4v-11.62l-10-10\n  	l-10,10V30.011z M15.21,6.441c0.03-0.05,0.05-0.1,0.1-0.14c0.19-0.2,0.45-0.29,0.71-0.29s0.52,0.09,0.71,0.29\n  	c0.05,0.04,0.069,0.09,0.101,0.14l10.799,10.79c0.23,0.19,0.391,0.46,0.391,0.78v0.02v0.01v12.97c0,0.55-0.45,1-1,1h-6\n  	c-0.55,0-1-0.45-1-1v-9h-8v9c0,0.55-0.45,1-1,1h-6c-0.55,0-1-0.45-1-1v-12.97v-0.01v-0.02c0-0.32,0.16-0.59,0.39-0.78L15.21,6.441z\n  	 M26.02,2.011h4v8l-4-4V2.011z M31.741,16.701c-0.391,0.4-1.031,0.4-1.421,0l-14.3-14.29l-14.3,14.29c-0.39,0.4-1.03,0.4-1.42,0\n  	c-0.4-0.39-0.4-1.03,0-1.43l14.98-14.98c0.21-0.21,0.47-0.3,0.74-0.29c0.27-0.01,0.529,0.08,0.74,0.29l14.98,14.98\n  	C32.14,15.671,32.14,16.311,31.741,16.701z"/>\n  </svg>'])),Meteor._def_template("icon-event",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="32.041px" height="31.966px" viewBox="0 0 32.041 31.966" enable-background="new 0 0 32.041 31.966" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.28,13.09h3.88v3.88H7.28V13.09z M7.28,20.84h3.88v3.881H7.28V20.84z\n  	 M14.06,13.09h3.88v3.88h-3.88V13.09z M14.06,20.84h3.88v3.881h-3.88V20.84z M20.84,13.09h3.88v3.88h-3.88V13.09z M20.84,20.84h3.88\n  	v3.881h-3.88V20.84z M29.56,10.19V9.22V8.25H2.44v0.97v0.97v1.93v17.44h27.12V12.12V10.19z M29.56,2.44H2.44v3.87h27.12V2.44z\n  	 M30.53,31.5H1.47c-0.54,0-0.97-0.43-0.97-0.971V1.47c0-0.54,0.43-0.97,0.97-0.97h0.97h1.94h3.87h1.94h10.65h1.939h3.881h1.93h1.939\n  	c0.54,0,0.971,0.43,0.971,0.97v29.059C31.5,31.07,31.07,31.5,30.53,31.5z"/>\n  </svg>'])),Meteor._def_template("icon-discussion",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="32.041px" height="32.17px" viewBox="0 0 32.041 32.17" enable-background="new 0 0 32.041 32.17" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M2,26h6c0,0,4.59,3.439,6.02,3.6L14,26h8V10H2V26z M10,8h13c0.549,0,1,0.45,1,1v18\n  	c0,0.55-0.451,1-1,1h-7v3c0,0.82-1,1-1,1c-1.54,0-7-4-7-4H1c-0.55,0-1-0.45-1-1V9c0-0.55,0.45-1,1-1h7H10z M31,20h-5v-2h4V2H10v4H8\n  	V1c0-0.55,0.45-1,1-1h22c0.549,0,1,0.45,1,1v18C32,19.55,31.549,20,31,20z"/>\n  </svg>'])),Meteor._def_template("icon-file",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="32.041px" height="31.966px" viewBox="0 0 32.041 31.966" enable-background="new 0 0 32.041 31.966" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M30,7V6H12V2H2v8h10h18V7z M2,17v13h2h6h20V12H7H4H2V17z M31,32H13H7H1\n  	c-0.55,0-1-0.45-1-1V1c0-0.55,0.45-1,1-1h12c0.55,0,1,0.45,1,1v3h17c0.549,0,1,0.45,1,1v26C32,31.55,31.549,32,31,32z"/>\n  </svg>'])),Meteor._def_template("icon-member",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="44px" height="31.966px" viewBox="0 0 44 31.966" enable-background="new 0 0 44 31.966" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M42,23.984c0-2.881-0.67-5.401-4.67-6.811c-1.23,2.831-4.051,4.811-7.33,4.811\n  	c-3.28,0-6.101-1.98-7.33-4.811c-4,1.41-4.67,3.93-4.67,6.811v1v1v4h24V23.984z M36,7.984c0-3.31-2.69-6-6-6c-3.311,0-6,2.69-6,6v6\n  	c0,0.25,0.039,0.48,0.069,0.72c0.15,1.2,0.64,2.29,1.39,3.16l0.11,0.13c0.14,0.16,0.3,0.311,0.46,0.45\n  	c0.09,0.09,0.2,0.17,0.301,0.25c0.14,0.121,0.279,0.23,0.439,0.33c0.25,0.17,0.52,0.311,0.8,0.441c0.101,0.039,0.22,0.08,0.32,0.119\n  	c0.239,0.09,0.47,0.16,0.72,0.221l0.32,0.07c0.35,0.068,0.699,0.109,1.07,0.109c0.369,0,0.72-0.041,1.069-0.109l0.32-0.07\n  	c0.25-0.061,0.479-0.131,0.72-0.221c0.1-0.039,0.221-0.08,0.32-0.119c0.279-0.131,0.55-0.271,0.8-0.441\n  	c0.16-0.1,0.3-0.209,0.44-0.33c0.1-0.08,0.209-0.16,0.3-0.25c0.159-0.14,0.319-0.29,0.46-0.45l0.109-0.13\n  	c0.75-0.87,1.24-1.96,1.391-3.16c0.029-0.24,0.07-0.47,0.07-0.72V7.984z M43,31.984H17c-0.551,0-1-0.451-1-1v-5v-1v-1\n  	c0-3.73,1.27-6.981,6.12-8.701c-0.07-0.42-0.12-0.85-0.12-1.3v-6c0-4.42,3.581-8,8-8s8,3.58,8,8v6c0,0.45-0.051,0.88-0.121,1.3\n  	c4.851,1.72,6.121,4.97,6.121,8.701v7C44,31.533,43.549,31.984,43,31.984z"/>\n  <g>\n  	<defs>\n  		<polygon id="SVGID_1_" points="21.517,16.836 17.761,20.274 17.386,29.462 17.386,33.795 -2.031,32.962 -2.948,4.878 6.552,1.545 \n  			17.969,2.878 		"/>\n  	</defs>\n  	<clipPath id="SVGID_2_">\n  		<use xlink:href="#SVGID_1_"  overflow="visible"/>\n  	</clipPath>\n  	<path clip-path="url(#SVGID_2_)" fill-rule="evenodd" clip-rule="evenodd" d="M19.438,19.188c-0.472-1.043-1.388-1.918-3.11-2.525\n  		c-0.941,2.166-3.101,3.682-5.611,3.682s-4.67-1.516-5.611-3.682c-3.062,1.079-3.575,3.008-3.575,5.213v0.766v0.766v7.027h18.373\n  		 M15.31,9.628c0-2.534-2.059-4.593-4.593-4.593S6.124,7.094,6.124,9.628v4.593c0,0.191,0.03,0.367,0.053,0.551\n  		c0.115,0.919,0.489,1.753,1.063,2.418l0.084,0.101c0.107,0.122,0.229,0.237,0.352,0.344c0.069,0.068,0.153,0.13,0.23,0.191\n  		c0.107,0.093,0.214,0.176,0.336,0.252c0.191,0.131,0.397,0.238,0.612,0.338c0.077,0.03,0.168,0.062,0.245,0.092\n  		c0.183,0.068,0.359,0.122,0.551,0.169l0.245,0.054c0.268,0.052,0.536,0.084,0.819,0.084c0.283,0,0.551-0.032,0.818-0.084\n  		l0.246-0.054c0.191-0.047,0.366-0.101,0.551-0.169c0.076-0.03,0.169-0.062,0.245-0.092c0.214-0.1,0.421-0.207,0.612-0.338\n  		c0.122-0.076,0.229-0.159,0.337-0.252c0.076-0.062,0.16-0.123,0.229-0.191c0.122-0.106,0.244-0.222,0.353-0.344l0.083-0.101\n  		c0.574-0.665,0.949-1.499,1.064-2.418c0.022-0.184,0.054-0.36,0.054-0.551V9.628z M21.434,31.2c0,0.42-0.345,0.766-0.765,0.766\n  		H0.766C0.344,31.966,0,31.62,0,31.2v-7.793v-0.766v-0.766c0-2.855,0.972-5.343,4.685-6.66c-0.054-0.321-0.092-0.65-0.092-0.995\n  		V9.628c0-3.383,2.741-6.124,6.124-6.124c3.384,0,6.124,2.741,6.124,6.124v4.593c0,0.345-0.039,0.673-0.093,0.995\n  		c1.857,0.659,3.028,1.61,3.735,2.753"/>\n  </g>\n  </svg>'])),Meteor._def_template("icon-user",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="16.007px" height="16.003px" viewBox="0 0 16.007 16.003" enable-background="new 0 0 16.007 16.003" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M15.007,12.002c0-1.438-1.334-2.699-3.334-3.406\n  	c-0.616,1.416-2.026,2.406-3.666,2.406s-3.05-0.99-3.665-2.406c-2,0.707-3.335,1.967-3.335,3.406v0.5v0.5v2.001h14V12.002z\n  	 M11.007,4.001c0-1.655-1.345-3.001-3-3.001s-3,1.346-3,3.001v3c0,0.125,0.02,0.239,0.035,0.359c0.076,0.601,0.32,1.146,0.695,1.581\n  	l0.055,0.065c0.07,0.08,0.151,0.154,0.23,0.226c0.045,0.045,0.1,0.084,0.15,0.129c0.07,0.056,0.14,0.11,0.22,0.161\n  	c0.125,0.085,0.26,0.155,0.399,0.219c0.05,0.021,0.111,0.04,0.161,0.062c0.119,0.044,0.234,0.079,0.359,0.108l0.161,0.036\n  	c0.174,0.035,0.349,0.055,0.535,0.055s0.36-0.02,0.535-0.055l0.161-0.036c0.124-0.029,0.239-0.064,0.357-0.108\n  	c0.052-0.022,0.112-0.041,0.161-0.062c0.141-0.064,0.275-0.134,0.4-0.219c0.079-0.05,0.149-0.105,0.22-0.161\n  	c0.05-0.045,0.104-0.084,0.15-0.129c0.078-0.071,0.16-0.146,0.23-0.226l0.055-0.065c0.375-0.435,0.619-0.98,0.694-1.581\n  	c0.016-0.12,0.035-0.234,0.035-0.359V4.001z M15.507,16.003h-15c-0.275,0-0.5-0.227-0.5-0.5v-2.501v-0.5v-0.5\n  	c0-1.865,1.635-3.49,4.06-4.351c-0.035-0.21-0.06-0.425-0.06-0.65v-3c0-2.21,1.79-4.001,4-4.001c2.209,0,4,1.791,4,4.001v3\n  	c0,0.225-0.025,0.439-0.062,0.65c2.427,0.861,4.062,2.486,4.062,4.351v3.501C16.007,15.776,15.781,16.003,15.507,16.003z"/>\n  </svg>'])),Meteor._def_template("icon-search",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="15.983px" height="18.04px" viewBox="0 0 15.983 18.04" enable-background="new 0 0 15.983 18.04" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="none" stroke="#000000" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="\n  	M1.5,6.355c0-2.67,2.01-4.84,4.48-4.84c2.48,0,4.491,2.17,4.491,4.84s-2.011,4.84-4.491,4.84C3.51,11.195,1.5,9.025,1.5,6.355z\n  	 M9.09,10.625l5.41,5.891L9.09,10.625z"/>\n  </svg>'])),Meteor._def_template("icon-search-thin",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="27px" height="29px" viewBox="0 0 27 29" enable-background="new 0 0 27 29" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="\n  	M1,9.71C1,4.9,4.86,1,9.62,1c4.76,0,8.62,3.9,8.62,8.71c0,4.81-3.86,8.71-8.62,8.71C4.86,18.42,1,14.52,1,9.71z M15.6,17.391L26,28\n  	L15.6,17.391z"/>\n  </svg>'])),Meteor._def_template("icon-arrow-down",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="8px" height="7px" viewBox="0 0 8 7" enable-background="new 0 0 8 7" xml:space="preserve">\n  <polygon fill-rule="evenodd" clip-rule="evenodd" points="0,0 8,0 4,7 "/>\n  </svg>'])),Meteor._def_template("icon-arrow-up",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="12px" height="6px" viewBox="0 0 12 6" enable-background="new 0 0 12 6" xml:space="preserve">\n  <polygon fill-rule="evenodd" clip-rule="evenodd" points="12,6 6,0 0,6 "/>\n  </svg>'])),Meteor._def_template("icon-arrow-right",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="5px" height="18px" viewBox="0 0 5 18" enable-background="new 0 0 5 18" xml:space="preserve">\n  <polygon fill-rule="evenodd" clip-rule="evenodd" points="0,0 5,9 0,18 "/>\n  </svg>'])),Meteor._def_template("icon-logo-main",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="33px" height="33px" viewBox="0 0 33 33" enable-background="new 0 0 33 33" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="#95AFBF" d="M0,16.5C0,7.39,7.39,0,16.5,0C25.609,0,33,7.39,33,16.5\n  	C33,25.609,25.609,33,16.5,33C7.39,33,0,25.609,0,16.5z"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="#011126" d="M4,16.2c0,6.729,5.46,12.19,12.2,12.19\n  	c1.909,0,3.72-0.44,5.34-1.23C23.33,28.68,29,29,29,29c-2.82-1.439-3.891-3.2-4.27-4.09c2.26-2.221,3.66-5.301,3.66-8.71\n  	C28.391,9.46,22.93,4,16.2,4C9.46,4,4,9.46,4,16.2z"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="#F7F8F8" d="M5.8,16.09c0,2.51,0.9,4.811,2.4,6.6\n  	C8.19,21.391,10.77,7,24.779,10.58C22.95,7.71,19.74,5.8,16.09,5.8C10.41,5.8,5.8,10.41,5.8,16.09z"/>\n  </svg>'])),Meteor._def_template("icon-sidebar-arrow-right",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="25.514px" height="19.1px" viewBox="0 0 25.514 19.1" enable-background="new 0 0 25.514 19.1" xml:space="preserve">\n  <line fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" x1="0" y1="9.6" x2="23.671" y2="9.6"/>\n  <line fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" x1="24.711" y1="10.267" x2="14.961" y2="0.933"/>\n  <line fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" x1="24.711" y1="8.933" x2="14.961" y2="18.267"/>\n  </svg>'])),Meteor._def_template("icon-sidebar-arrow-left",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="25.514px" height="19.1px" viewBox="0 0 25.514 19.1" enable-background="new 0 0 25.514 19.1" xml:space="preserve">\n  <line fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" x1="25.355" y1="9.6" x2="1.684" y2="9.6"/>\n  <line fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" x1="0.644" y1="8.933" x2="10.394" y2="18.267"/>\n  <line fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" x1="0.644" y1="10.267" x2="10.394" y2="0.933"/>\n  </svg>'])),Meteor._def_template("icon-location",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="32.041px" height="31.966px" viewBox="0 0 32.041 31.966" enable-background="new 0 0 32.041 31.966" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M16,8c-1.1,0-2,0.9-2,2s0.9,2,2,2c1.101,0,2-0.9,2-2S17.1,8,16,8z M16,14\n  	c-2.21,0-4-1.79-4-4s1.79-4,4-4s4,1.79,4,4S18.209,14,16,14z M30,24V12h-4.19c-0.02,0.14-0.819,4.95-7.899,10.83\n  	c0,0-1.53,1.17-1.91,1.17s-1.91-1.17-1.91-1.17c-7.08-5.88-7.88-10.69-7.9-10.83H2v12v6h14h14V24z M16,2c-4.42,0-8,3.58-8,8\n  	c0,0.7,0.1,1.38,0.27,2.02H8.25l0.09,0.28c0.14,0.47,0.33,0.92,0.55,1.35c0.91,1.99,2.98,5.399,7.11,7.991\n  	c4.13-2.592,6.2-6,7.11-7.991c0.22-0.43,0.41-0.88,0.55-1.35l0.09-0.28h-0.021C23.899,11.38,24,10.7,24,10C24,5.58,20.419,2,16,2z\n  	 M31,32h-1H16H2H1c-0.55,0-1-0.451-1-1V11c0-0.55,0.45-1,1-1h5c0-5.43,4.28-9.81,9.67-9.98C15.779,0.01,15.89,0,16,0\n  	s0.22,0.01,0.33,0.02C21.719,0.19,26,4.57,26,10h5c0.55,0,1,0.45,1,1v20C32,31.549,31.549,32,31,32z"/>\n  </svg>'])),Meteor._def_template("icon-time",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="32.041px" height="31.966px" viewBox="0 0 32.041 31.966" enable-background="new 0 0 32.041 31.966" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M15,16v-2V6h2v8h6v2h-6H15z M16,2C8.27,2,2,8.27,2,16c0,7.73,6.27,14,14,14\n  	c7.729,0,14-6.27,14-14C30,8.27,23.729,2,16,2z M16,32C7.16,32,0,24.84,0,16C0,7.16,7.16,0,16,0s16,7.16,16,16\n  	C32,24.84,24.839,32,16,32z"/>\n  </svg>'])),Meteor._def_template("icon-add",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">\n  <circle fill-rule="evenodd" clip-rule="evenodd" cx="8" cy="8" r="8"/>\n  <g>\n  	<rect x="7" y="4" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="2" height="8"/>\n  	<rect x="4" y="7" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="8" height="2"/>\n  </g>\n  </svg>'])),Meteor._def_template("icon-download",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="21.967px" height="25.899px" viewBox="0 0 21.967 25.899" enable-background="new 0 0 21.967 25.899" xml:space="preserve">\n  <rect x="5.492" fill-rule="evenodd" clip-rule="evenodd" width="10.983" height="10.984"/>\n  <polygon fill-rule="evenodd" clip-rule="evenodd" points="0,9.984 10.984,20.966 21.967,9.984 "/>\n  <line fill-rule="evenodd" clip-rule="evenodd" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="1.373" y1="24.602" x2="20.593" y2="24.602"/>\n  </svg>'])),Meteor._def_template("icon-file-type",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="20px" height="23.001px" viewBox="0 0 20 23.001" enable-background="new 0 0 20 23.001" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M17.77,7.06h-4.98V2.22L17.77,7.06z M0,0h13.081L20,6.72V23H0 M1.76,21.289h16.54\n  	V8.77h-7.33V1.71H1.76"/>\n  </svg>'])),Meteor._def_template("icon-views",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="34.809px" height="22px" viewBox="0 0 34.809 22" enable-background="new 0 0 34.809 22" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M24.25,10.959c0,3.951-3.181,6.74-6.79,6.74c-2.38,0-5.05-1.15-6.35-4.3\n  	c-0.14-0.5-0.36-1.43-0.36-1.58v-1.64c0.58-4.09,3.76-5.88,6.71-5.88C21.431,4.3,24.25,7.38,24.25,10.959z M22.3,3.37\n  	c1.15,0.5,2.74,1.36,3.971,2.22c0.649,0.43,1.369,1,2.09,1.65c0.649,0.57,3.609,3.37,3.609,3.719c0,0.58-3.9,3.951-4.84,4.73\n  	c-1.439,1.15-2.88,2.01-4.33,2.66c-0.65,0.279-1.369,0.57-1.939,0.71c-1.01,0.29-2.311,0.58-3.4,0.58c-1.66,0-3.24-0.431-4.76-1.08\n  	c-1.23-0.5-2.81-1.36-3.97-2.22c-0.72-0.43-1.44-1-2.09-1.65c-0.72-0.57-3.61-3.37-3.61-3.73c0-0.14,0.29-0.35,0.43-0.569\n  	c1.09-1.36,2.82-2.94,4.12-3.94c1.37-1.15,3.17-2.29,4.62-2.87c0.72-0.36,1.58-0.64,2.45-0.86c0.87-0.21,2.67-0.36,2.81-0.36\n  	C19.12,2.36,20.71,2.72,22.3,3.37z M20.78,0.36c0.939,0.21,1.88,0.5,2.82,0.93c0.939,0.43,1.949,0.93,2.959,1.58\n  	c1.01,0.64,2.09,1.43,3.101,2.29c0.58,0.5,5.34,5.09,5.34,5.799c0,0.221-0.431,0.65-0.649,0.94c-1.511,2-3.82,4.22-5.841,5.8\n  	c-1.59,1.221-3.25,2.221-4.77,2.87c-1.08,0.5-2.23,0.79-3.25,1.07C19.479,21.86,18.399,22,17.46,22c-1.01,0-2.38-0.211-3.24-0.431\n  	c-0.94-0.21-1.95-0.569-2.82-0.93c-0.86-0.36-1.8-0.86-2.6-1.36c-1.15-0.72-2.38-1.51-3.46-2.51C4.69,16.27,0,11.68,0,10.959\n  	c0-0.14,0.51-0.859,0.79-1.14c1.52-1.94,3.68-4.09,5.7-5.59c1.59-1.22,3.18-2.22,4.77-2.87c1.01-0.5,2.16-0.79,3.25-1.07\n  	C15.52,0.07,16.53,0,17.46,0C18.55,0,19.92,0.14,20.78,0.36z"/>\n  </svg>'])),Meteor._def_template("icon-attachment",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="15.555px" height="17.043px" viewBox="0 0 15.555 17.043" enable-background="new 0 0 15.555 17.043" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M14.603,5.486l-8.021,8.02c-1.02,0.821-2.089,0.561-2.819-0.18\n  	c-0.07-0.061-0.24-0.36-0.38-0.49c-0.53-0.6-0.26-1.87,0.14-2.27l4.5-4.5l0.87,0.86l-4.5,4.51c-0.27,0.471-0.1,0.891,0.14,1.12\n  	c0.23,0.24,0.75,0.39,1.09,0.171l8.24-8.231c0.75-1.09,0.65-1.99-0.079-2.72c-1-1-2.291-0.51-2.91,0.11l-8.791,8.78\n  	c-1.25,1.59-1.16,3.029,0.07,4.27c1.17,1.16,2.55,1.311,4.23,0.1l5.31-5.309l0.83,0.84l-5.521,5.52\n  	c-2.209,1.48-4.149,1.15-5.649-0.35c-1.03-1.031-1.84-2.76-1.01-4.59c0.18-0.381,0.57-0.971,0.63-1.031l9.311-9.31\n  	c1.659-1.19,3.139-1,4.299,0.16C16.083,2.466,15.653,4.437,14.603,5.486z"/>\n  </svg>'])),Meteor._def_template("icon-cancel",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">\n  <circle fill-rule="evenodd" clip-rule="evenodd" cx="8" cy="8" r="8"/>\n  <g>\n  	\n  		<rect x="7.001" y="4" transform="matrix(-0.7151 -0.699 0.699 -0.7151 8.1297 19.3133)" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="2" height="8"/>\n  	\n  		<rect x="7" y="4" transform="matrix(-0.6989 0.7152 -0.7152 -0.6989 19.3134 7.869)" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="2" height="8"/>\n  </g>\n  </svg>'])),Meteor._def_template("icon-flag",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="11px" height="15px" viewBox="0 0 11 15" enable-background="new 0 0 11 15" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.6,3.08c0.871,0,0.48,0,1.7-0.22v5.33C8.73,8.45,8.12,8.54,7.6,8.54\n  	c-1.93,0-1.879-1.39-4.24-1.39c-0.52,0-1.13,0.13-1.66,0.26V2.12c0.61-0.34,1.01-0.43,1.66-0.43C5.02,1.69,5.15,3.08,7.6,3.08z\n  	 M7.6,1.39c1.351,0,2.09-0.65,2.57-0.65C10.35,0.74,11,0.87,11,1.3v7.67c-0.04,0.13-0.13,0.26-0.221,0.35\n  	c-0.959,0.69-2.139,0.91-3.18,0.91c-2.41,0-2.58-1.39-4.24-1.39c-0.52,0-1.26,0.13-1.7,0.48v5.031C1.57,14.74,1.05,15,0.83,15\n  	C0.52,15,0,14.649,0,14.26V1.47C0.17,0.43,2.44,0,3.36,0C5.54,0,5.891,1.39,7.6,1.39z"/>\n  </svg>'])),Meteor._def_template("icon-back",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">\n  <image overflow="visible" width="16" height="16" xlink:href="data:image/jpeg;base64,/9j/4AAQSkZJRgABAgEASABIAAD/7AARRHVja3kAAQAEAAAAHgAA/+4AIUFkb2JlAGTAAAAAAQMA\n  EAMCAwYAAAGdAAABwwAAAiD/2wCEABALCwsMCxAMDBAXDw0PFxsUEBAUGx8XFxcXFx8eFxoaGhoX\n  Hh4jJSclIx4vLzMzLy9AQEBAQEBAQEBAQEBAQEABEQ8PERMRFRISFRQRFBEUGhQWFhQaJhoaHBoa\n  JjAjHh4eHiMwKy4nJycuKzU1MDA1NUBAP0BAQEBAQEBAQEBAQP/CABEIABEAEQMBIgACEQEDEQH/\n  xAB/AAEBAAMBAAAAAAAAAAAAAAAAAwIEBQcBAQEBAQAAAAAAAAAAAAAAAAIDAQQQAAEDAwUAAAAA\n  AAAAAAAAAAUAEQQBIQMCQhQ0BhEAAgEDBAMAAAAAAAAAAAAAAQIDABEEITFBEhBRcRIAAgMAAAAA\n  AAAAAAAAAAAAEBFBgRL/2gAMAwEAAhEDEQAAANjCMr8/oCaN9WZp7AL/AP/aAAgBAgABBQBqNZbV\n  /9oACAEDAAEFAHq91vX/2gAIAQEAAQUALHSE+dANkRZDk4lLwzQJXFGzmivC0r0HR831F//aAAgB\n  AgIGPwCMoWP/2gAIAQMCBj8AnTFD/9oACAEBAQY/ADi4LMkQboix6MxHJIo42XKZolfpKrHtbWxI\n  J9VvRmRdAxaNiLq6HinaKMhZpC7nhFJubmt6P2m++P/Z" transform="matrix(1.0002 0 0 1.0002 -8183.001 -8183)">\n  </image>\n  <circle fill-rule="evenodd" clip-rule="evenodd" cx="8" cy="7.999" r="8"/>\n  <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#F7F8F8" points="9,4 5,8 9,12 "/>\n  </svg>'])),Meteor._def_template("icon-edit",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">\n  <circle fill-rule="evenodd" clip-rule="evenodd" cx="8" cy="8" r="8"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M5.35,11.74L4,12l0.29-1.39C4.69,10.66,5.34,11.33,5.35,11.74z\n  	 M12,5.84c0,0.41-0.26,0.51-0.681,0.95c-1.5,1.55-3.05,3.09-4.58,4.62V10.4H5.65V9.76l5.37-5.42C11.6,4.77,12,5.36,12,5.84z\n  	 M10.48,4.07c-0.29,0.29-0.61,0.6-0.899,0.91C8.129,6.43,6.68,7.92,5.23,9.37C5.19,9.4,5.16,9.39,5.11,9.39\n  	C5.08,9.39,5,9.37,4.58,9.37c0.16-0.29,0.6-0.67,0.87-0.95c1.4-1.45,2.81-2.9,4.259-4.31C9.81,4.02,9.97,4,10.1,4\n  	C10.129,4,10.35,4.03,10.48,4.07z"/>\n  </svg>'])),Meteor._def_template("icon-explore",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n     width="21px" height="21px" viewBox="0 0 21 21" enable-background="new 0 0 21 21" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M11.811,5.91c0,0.57-0.65,1.31-0.65,1.31H9.84C8.91,7.98,9.19,8.51,9.19,9.19\n    c0,0.67-0.66,0.65-0.66,0.65C7.82,8.7,6.56,8.53,6.56,8.53V7.22c-0.77,0-0.65-0.66-0.65-0.66c3.41-3.41,7.22-1.31,7.22-1.31\n    C13.13,5.93,11.811,5.91,11.811,5.91z M12.471,16.41c0,0-0.66-0.15-0.66-0.66s-0.141-1.459-1.311-2.629V10.5\n    c0,0,0.15-0.66,0.66-0.66c0.51,0,1.14-0.16,3.279,1.971h0.65c0,0,0.66,0.069,0.66,0.66C15.75,13.051,13.82,16.41,12.471,16.41z\n     M10.5,1.31c-5.07,0-9.19,4.12-9.19,9.19c0,5.07,4.12,9.19,9.19,9.19c5.07,0,9.19-4.119,9.19-9.19C19.69,5.43,15.57,1.31,10.5,1.31z\n     M10.5,21C4.7,21,0,16.301,0,10.5C0,4.7,4.7,0,10.5,0S21,4.7,21,10.5C21,16.301,16.3,21,10.5,21z"/>\n  </svg>'])),Meteor._def_template("icon-invite",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  width="16.002px" height="15.983px" viewBox="0 0 16.002 15.983" enable-background="new 0 0 16.002 15.983" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.512,6h1.49v1v1h4V7V6.5V6h1.49l-1.2-2h-4.58L4.512,6z M5.002,3h0.1V2.99\n  L5.112,3h5.79V2.99L10.913,3h0.09v0.15l2,3.35l-0.91,0.51l-0.09-0.16V7h-1v1v0.5V9h-5h-0.5h-0.5V7h-1V6.85l-0.09,0.16L3.002,6.5\n  l2-3.35V3z M15.002,8.5V8V7.14L11.243,1h-0.24h-6h-0.24l-3.76,6.14V7.5V8v0.5v2V15h14V8.5z M15.502,16h-15c-0.27,0-0.5-0.22-0.5-0.5\n  v-5v-2V8V7.07c-0.01-0.09,0.01-0.19,0.06-0.28l4.01-6.55c0.09-0.15,0.26-0.22,0.43-0.22V0h0.5h0.5h5h0.5h0.5v0.02\n  c0.17,0,0.34,0.07,0.43,0.22l3.97,6.48c0.03,0.05,0.06,0.1,0.07,0.15c0.03,0.06,0.03,0.13,0.03,0.19V8v0.5v7\n  C16.002,15.78,15.772,16,15.502,16z"/>\n  </svg>'])),Meteor._def_template("icon-classifieds",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n   width="22px" height="17px" viewBox="0 0 22 17" enable-background="new 0 0 22 17" xml:space="preserve">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M18.97,11.56v1.48H8.09v-1.48H18.97z M18.97,7.81v1.529H8.09V7.81H18.97z\n     M4.4,6.18v1.58H3.19V9.4H4.4v2.109H3.19v1.58H4.4c0,1.011,0.05,1.06,0.05,1.22c0,0.949-0.71,1.109-1.26,1.109\n    c-0.51,0-1.67-0.369-1.67-1.269V6.18H4.4z M18.97,4.07V5.6H8.09V4.07H18.97z M20.53,1.58v12.409c0.1,0.42-0.5,1.43-1.11,1.43H5.82\n    l0.15-0.529V1.58H20.53z M22,0v14.47c-0.149,1.16-1.42,2.529-2.479,2.529H2.78c-0.1-0.049-0.25-0.109-0.4-0.109\n    c-0.91,0-2.38-1.58-2.38-2.481V4.59h4.45V0H22z"/>\n  </svg>'])),Meteor._def_template("icon-controversial",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n   width="20px" height="18px" viewBox="0 0 20 18" enable-background="new 0 0 20 18" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.98,13.641c0,0.709-0.65,0.959-1.01,0.959c-0.65,0-0.95-0.5-0.95-0.959\n    c0-0.511,0.45-0.961,0.95-0.961C10.63,12.68,10.98,13.279,10.98,13.641z M10.98,6.64v4.209c-0.1,0.811-0.55,0.961-1.01,0.961\n    c-0.5,0-0.95-0.4-0.95-0.91V6.64c-0.05-0.61,0.6-0.96,0.95-0.96C10.48,5.68,10.98,6.14,10.98,6.64z M18.04,15.971H1.96L9.97,2.03\n    L18.04,15.971z M12.241,1.98c2.52,4.41,5.139,8.82,7.609,13.33c0.1,0.149,0.15,0.56,0.15,0.66C20,16.88,19.241,18,18.19,18H1.76\n    C0.4,17.7,0,16.83,0,15.971c0-0.91,0.81-1.921,1.31-2.841c0.4-0.81,0.91-1.569,1.36-2.38C4.63,7.4,6.45,3.95,8.56,0.61\n    C8.87,0.1,9.57,0,9.97,0C11.081,0,11.59,0.71,12.241,1.98z"/>\n  </svg>'])),Meteor._def_template("icon-deals",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n   width="28px" height="23px" viewBox="0 0 28 23" enable-background="new 0 0 28 23" xml:space="preserve">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M12.17,9.01c-0.13,0.34-0.33,0.73-0.46,1.059c0.2,0.07,1.57,0.801,1.57,1.201\n      c0,0.129-0.59,0.789-0.85,1.189c-0.59-0.46-1.64-1.32-2.29-1.32c-0.46,0-0.72,0.33-0.72,0.59c0,1.061,2.29,1.86,2.29,3.711\n      c0,1.66-1.31,2.459-2.49,2.459c-0.19,0-0.58-0.14-0.78-0.14c-0.13,0-0.39,0.87-0.59,1.261c-0.39-0.201-0.78-0.33-1.18-0.53\n      C6.8,18.16,7,17.76,7.2,17.37c-0.13-0.07-1.84-1.13-1.84-1.46c0-0.2,0.66-0.86,0.92-1.261c0.65,0.791,1.77,1.591,2.55,1.591\n      c0.39,0,0.85-0.33,0.85-0.73c0-0.86-2.35-2.191-2.35-3.71c0-1.59,1.44-2.26,2.42-2.26c0.19,0,0.52,0.14,0.65,0.14\n      c0.2,0,0.46-0.8,0.59-1.2C11.38,8.68,11.78,8.82,12.17,9.01z M16.16,5.17c-0.199,0.27-0.39,0.6-0.59,0.86\n      c-0.07,0.07-0.33,0.07-0.46,0.2c-0.52,0.33-0.46,0.46-0.46,0.93c0,0.6,0.53,0.99,0.99,0.99c0.58,0,1.04-0.59,1.04-1.06\n      c0-0.13-0.19-0.33-0.19-0.53c0-0.13,0.391-0.59,0.52-0.86c0.461,0.46,0.65,0.86,0.65,1.46c0,1.19-1.109,1.99-2.02,1.99\n      c-1.18,0-2.03-0.93-2.03-2.06c0-1.12,0.85-1.99,1.96-1.99C15.77,5.1,15.96,5.1,16.16,5.17z M28,0.4c0,0.53-1.369,2.18-1.64,2.38\n      c-0.39,0.2-0.72,0.47-1.04,0.53c-0.33,0.14-0.85,0.14-0.98,0.14c-0.199,0-3.01-0.33-3.139-0.33c-0.201,0-1.25,0.06-1.771,0.26\n      c-0.39,0.13-1.771,1.06-1.771,1.46c0,0.13,1.44,1.52,2.23,2.32v4.17L8.5,23L0,14.38L11.51,2.85h4.13l1.3,1.33\n      c1.181-1.66,2.95-1.93,4.261-1.93c0.189,0,3.01,0.33,3.199,0.33c2.1,0,2.551-2.58,3.141-2.58C27.93,0,28,0.2,28,0.4z"/>\n  </svg>'])),Meteor._def_template("icon-events",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n   width="18px" height="21px" viewBox="0 0 18 21" enable-background="new 0 0 18 21" xml:space="preserve">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M16.351,16.11c-0.41,1.36-2.4,2.24-3.371,2.58c0.83-1.771,0.761-1.63,0.761-2.989\n      V15.36L16.351,16.11z M9.62,9.65v5.91c-0.21,0.55-0.55,0.609-0.76,0.609c-0.27,0-0.68-0.059-0.68-0.609l-0.07-3.939\n      C7.63,11.89,7.63,12.1,7.28,12.1c-0.55,0-0.68-0.55-0.68-0.75c0-0.54,1.37-1.77,1.92-2.18c0-0.06,0.14-0.06,0.34-0.06\n      C9.14,9.11,9.62,9.24,9.62,9.65z M16.49,7.88v6.661l-3.78-1.02c-0.689,0-0.76,0.34-0.76,0.75c0,0.14,0.279,1.56,0.279,1.771\n      c0,0.129-0.069,0.539-0.14,0.81c-0.069,0.34-0.409,1.09-0.819,1.5C11.2,18.419,9.62,19.5,9.34,19.5H2.2\n      c-0.41-0.129-0.76-0.539-0.76-0.949V7.88H16.49z M2.95,3.19c0,0.28-0.27,1.57,0.76,1.57c0.89,0,0.82-1.02,0.82-1.57h8.87\n      c-0.069,0.55-0.069,1.57,0.82,1.57c0.961,0,0.691-1.29,0.76-1.57h0.551c0.199-0.06,0.96,0.48,0.96,0.89v2.24H1.44V4.08\n      c0-0.27,0.41-0.89,0.9-0.89H2.95z M4.47,1.77h9C13.53,1.22,13.12,0,14.22,0c0.961,0,0.551,1.22,0.691,1.63\n      c0.34,0.27,0.96,0.14,1.51,0.27c0.62,0.14,1.44,1.23,1.511,1.91L18,15.701c-0.14,0.409-0.34,1.219-0.62,1.699\n      c-0.48,0.75-1.37,1.43-2.061,1.83C14.7,19.64,10.99,21,9.69,21H2.06C1.37,20.93,0,19.78,0,19.1V3.67c0.14-1.36,1.85-2.24,3.02-1.9\n      V0.48C3.37,0,3.44,0,3.71,0C4.67,0,4.4,1.22,4.47,1.77z"/>\n  </svg>'])),Meteor._def_template("icon-nightlife",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n   width="20px" height="19px" viewBox="0 0 20 19" enable-background="new 0 0 20 19" xml:space="preserve">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M12.97,18.23c0.04,0.08,0.12,0.279,0.12,0.399V19H7.35v-0.41\n      c0.4-1.75,1.57-2.48,2.85-2.48C11.331,16.109,12.45,16.721,12.97,18.23z M19.64,17.29c0.12,0.36,0.319,1.021,0.319,1.14V19H13.17\n      c0.039-0.2,0.039-0.33,0.08-0.45v-0.94c-0.121-0.569-0.32-1.42-1.08-1.909c1-1.021,2.129-1.351,3.209-1.351\n      C16.911,14.35,18.799,15.13,19.64,17.29z M10.08,10.93c0.72,0.61,1.411,1.34,2.09,2.041v0.969c-0.36,0.25-1.01,0.9-1.09,0.9\n      c-0.121,0-0.761-0.119-0.88-0.119c-2.05,0-4.14,1.59-4.22,4.279H3.69l0.65-8.07H10.08z M2.77,9.54c0,0.569-0.56,0.94-0.96,0.94\n      c-0.57,0-0.89-0.451-0.89-0.94C0.92,9.05,1.29,8.6,1.81,8.6C2.41,8.6,2.77,9.13,2.77,9.54z M3.61,7.79V19H0V7.71l1.81-4.49\n      L3.61,7.79z M17.31,0v1.14H20v13.78l-1.24-1.1V2.36h-1.45v10.56H16.1V2.36h-1.359v10.56H13.53V2.36h-1.4v8.32\n      C11.77,10.32,11.37,9.95,10.96,9.54v-8.4h2.531V0H17.31z"/>\n  </svg>'])),Meteor._def_template("icon-official",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n     width="15.004px" height="20.003px" viewBox="0 0 15.004 20.003" enable-background="new 0 0 15.004 20.003" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.793,7.204h3.3c0.2,0.08,0.36,0.04,0.36,0.2c0,0.29-2.38,1.89-2.86,2.34\n    l1.03,3.37c-0.04,0.04-0.04,0.2-0.16,0.24l-2.98-2.091l-2.94,2.091c-0.08-0.04-0.16-0.12-0.16-0.24l1.03-3.37\n    c-0.51-0.45-2.86-2.05-2.86-2.34c0-0.16,0.2-0.2,0.32-0.2h3.34c0.28-0.87,0.95-3.53,1.27-3.53C7.803,3.673,8.443,6.173,8.793,7.204z\n     M14.362,0.013c0.24-0.08,0.641,0.21,0.641,0.54v14.811c0.04,0.539-0.76,0.99-1.12,1.189c-1.11,0.58-5.84,3.449-6.4,3.449\n    c-0.48,0-0.91-0.41-1.31-0.619c-1.95-1.061-3.94-2.09-5.81-3.279c-0.24-0.121-0.36-0.49-0.36-0.701V0.553\n    c-0.04-0.25,0.32-0.62,0.6-0.54H14.362z"/>\n  </svg>'])),Meteor._def_template("icon-professorreviews",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n     width="24px" height="18px" viewBox="0 0 24 18" enable-background="new 0 0 24 18" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M11.98,14.45l5.721-2.81v2.609c-0.102,0.45-0.49,0.84-0.881,1.141\n    C15.71,16.221,12.12,18,11.98,18c-0.15,0-3.11-1.33-4.61-2.07C6.79,15.68,6.3,14.7,6.3,14.25v-2.609L11.98,14.45z M24,6.41\n    L20.22,8.58v5.77c-0.1,0.44,0.77,1.18,1.26,1.131v1.24h-0.201c-0.67-0.101-1.889-0.591-2.129-1.58c0-0.101-0.1-0.301-0.1-0.391V9.32\n    c0,0-0.041-0.05-0.09-0.05l-6.98,3.55L0,6.41L11.98,0L24,6.41z"/>'])),Meteor._def_template("icon-check",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n   width="10px" height="8px" viewBox="0 0 10 8" enable-background="new 0 0 10 8" xml:space="preserve">\n  <polygon fill-rule="evenodd" clip-rule="evenodd" points="10,1.5 3.3,8 0,4.34 1.42,2.95 3.37,5.12 8.65,0 "/>'])),Meteor._def_template("icon-sidebar-collapse",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="18.343px" height="17.468px" viewBox="0 0 18.343 17.468" enable-background="new 0 0 18.343 17.468" xml:space="preserve">\n  <g>\n  	<g>\n  		<path d="M18.343,1.747c0-0.96-1.181-1.747-2.62-1.747H2.62C1.179,0,0,0.786,0,1.747c0,0.961,1.179,1.747,2.62,1.747h13.103\n  			C17.162,3.494,18.343,2.708,18.343,1.747z"/>\n  	</g>\n  	<g>\n  		<path d="M18.343,8.734c0-0.961-1.181-1.747-2.62-1.747H2.62C1.179,6.987,0,7.773,0,8.734s1.179,1.747,2.62,1.747h13.103\n  			C17.162,10.481,18.343,9.695,18.343,8.734z"/>\n  	</g>\n  	<g>\n  		<path d="M18.343,15.721c0-0.96-1.181-1.747-2.62-1.747H2.62c-1.441,0-2.62,0.787-2.62,1.747c0,0.962,1.179,1.747,2.62,1.747\n  			h13.103C17.162,17.468,18.343,16.683,18.343,15.721z"/>\n  	</g>\n  </g>\n  </svg>'])),Meteor._def_template("icon-about",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="19px" height="19px" viewBox="0 0 19 19" enable-background="new 0 0 19 19" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.05,7.04v7.95h-1.1V7.04H10.05z M10.05,4.55v1.26h-1.1V4.55H10.05z M17.85,9.49\n  	c0,4.739-3.74,8.37-8.37,8.37c-2.9,0-6.08-1.34-7.8-5.24c-0.15-0.42-0.53-1.721-0.53-2.29V8.681C1.22,8.189,1.26,7.65,1.41,7.19\n  	c1.53-4.47,4.9-6.04,8.07-6.04C14.22,1.15,17.85,4.86,17.85,9.49z M19,9.49c0,5.12-3.979,9.1-8.64,9.479\n  	c-0.73,0.04-0.96,0.04-1.72,0c-0.61-0.08-1.3-0.15-1.91-0.38C1.84,16.91,0,13,0,9.49C0,4.25,4.24,0,9.48,0C14.83,0,19,4.36,19,9.49z\n  	"/>\n  </svg>'])),Meteor._def_template("icon-support",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="19px" height="19px" viewBox="0 0 19 19" enable-background="new 0 0 19 19" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.17,13.85v1.49H8.75v-1.49H10.17z M12.879,7.19c0,2.26-2.629,2.6-2.83,4.71\n  	v0.649h-1.3v-0.31c-0.03-2.91,2.799-3.18,2.799-5.09c0-1.34-1-1.83-1.989-1.83c-1.3,0-2.11,0.72-2.11,2.44h-1.3V7.65\n  	C6.31,5.13,7.8,4.21,9.6,4.21C11.32,4.21,12.879,5.13,12.879,7.19z M17.85,9.49c0,4.74-3.74,8.369-8.37,8.369\n  	c-2.9,0-6.08-1.34-7.8-5.239c-0.15-0.42-0.53-1.72-0.53-2.29V8.68c0.07-0.49,0.11-1.03,0.26-1.49c1.53-4.47,4.9-6.04,8.07-6.04\n  	C14.22,1.15,17.85,4.86,17.85,9.49z M19,9.49c0,5.119-3.98,9.1-8.641,9.48c-0.73,0.039-0.96,0.039-1.72,0\n  	c-0.61-0.08-1.3-0.15-1.91-0.381C1.84,16.91,0,13,0,9.49C0,4.25,4.24,0,9.48,0C14.831,0,19,4.36,19,9.49z"/>\n  </svg>'])),Meteor._def_template("icon-wysiwyg-bold",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="9px" height="12px" viewBox="0 0 9 12" enable-background="new 0 0 9 12" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M3.42,5.61C3.72,5.2,4.11,5,4.58,5c0.39,0,0.72,0.2,1,0.58\n  	C5.859,5.97,6,6.58,6,7.41c0,0.93-0.141,1.609-0.42,2C5.3,9.811,4.94,10,4.53,10C4.08,10,3.7,9.811,3.42,9.41\n  	C3.13,9,2.98,8.34,2.98,7.439C2.98,6.62,3.13,6.02,3.42,5.61z M0,12h2.78v-1.641c0.41,0.591,0.8,1,1.16,1.221\n  	C4.41,11.859,4.92,12,5.48,12c0.66,0,1.25-0.17,1.789-0.529C7.8,11.12,8.221,10.59,8.529,9.87C8.84,9.16,9,8.33,9,7.37\n  	c0-1.4-0.34-2.48-1.02-3.23C7.311,3.39,6.471,3,5.45,3C4.95,3,4.5,3.12,4.09,3.34c-0.4,0.22-0.78,0.57-1.09,1V0H0V12z"/>\n  </svg>'])),Meteor._def_template("icon-wysiwyg-italic",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="4.08px" height="12px" viewBox="0 0 4.08 12" enable-background="new 0 0 4.08 12" xml:space="preserve">\n  <g>\n  	<path fill-rule="evenodd" clip-rule="evenodd" d="M0,12h2.05l1.511-9H1.52L0,12z M1.7,2h2.05l0.33-2H2.029L1.7,2z"/>\n  </g>\n  </svg>'])),Meteor._def_template("icon-wysiwyg-underline",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="10px" height="13px" viewBox="0 0 10 13" enable-background="new 0 0 10 13" xml:space="preserve">\n  <g>\n  	<path fill-rule="evenodd" clip-rule="evenodd" d="M1.11,5.2c0,1.09,0.05,1.909,0.19,2.47c0.09,0.38,0.28,0.74,0.56,1.08\n  		C2.14,9.09,2.5,9.37,2.99,9.59C3.47,9.8,4.181,9.91,5.12,9.91c0.77,0,1.37-0.09,1.859-0.29c0.49-0.19,0.871-0.45,1.16-0.79\n  		c0.28-0.34,0.49-0.75,0.59-1.23C8.84,7.12,8.89,6.3,8.89,5.13V0H6.67v5.84c0,0.83-0.04,1.439-0.09,1.79\n  		C6.53,8.01,6.39,8.3,6.149,8.55C5.899,8.8,5.54,8.92,5.05,8.92c-0.48,0-0.85-0.12-1.13-0.391C3.649,8.27,3.47,7.91,3.399,7.48\n  		C3.351,7.221,3.33,6.63,3.33,5.71V0H1.11V5.2z"/>\n  	<rect y="11.65" fill-rule="evenodd" clip-rule="evenodd" width="10" height="1.35"/>\n  </g>\n  </svg>'])),Meteor._def_template("icon-wysiwyg-justify-left",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="12px" height="10px" viewBox="0 0 12 10" enable-background="new 0 0 12 10" xml:space="preserve">\n  <g>\n  	\n  		<line fill-rule="evenodd" clip-rule="evenodd" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="0.5" y1="0.5" x2="7.5" y2="0.5"/>\n  	\n  		<line fill-rule="evenodd" clip-rule="evenodd" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="0.5" y1="3.5" x2="10.5" y2="3.5"/>\n  	\n  		<line fill-rule="evenodd" clip-rule="evenodd" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="0.5" y1="9.5" x2="11.5" y2="9.5"/>\n  	\n  		<line fill-rule="evenodd" clip-rule="evenodd" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="0.5" y1="6.5" x2="8.5" y2="6.5"/>\n  </g>\n  </svg>'])),Meteor._def_template("icon-wysiwyg-justify-center",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="12px" height="10px" viewBox="0 0 12 10" enable-background="new 0 0 12 10" xml:space="preserve">\n  <line fill-rule="evenodd" clip-rule="evenodd" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="1.5" y1="3.5" x2="10.5" y2="3.5"/>\n  <line fill-rule="evenodd" clip-rule="evenodd" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="0.5" y1="9.5" x2="11.5" y2="9.5"/>\n  <line fill-rule="evenodd" clip-rule="evenodd" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="2.5" y1="6.5" x2="9.5" y2="6.5"/>\n  <line fill-rule="evenodd" clip-rule="evenodd" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="2.5" y1="0.5" x2="9.5" y2="0.5"/>\n  </svg>'])),Meteor._def_template("icon-wysiwyg-justify-right",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="12px" height="10px" viewBox="0 0 12 10" enable-background="new 0 0 12 10" xml:space="preserve">\n  <line fill-rule="evenodd" clip-rule="evenodd" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="11.5" y1="0.5" x2="4.5" y2="0.5"/>\n  <line fill-rule="evenodd" clip-rule="evenodd" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="11.5" y1="3.5" x2="1.5" y2="3.5"/>\n  <line fill-rule="evenodd" clip-rule="evenodd" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="11.5" y1="9.5" x2="0.5" y2="9.5"/>\n  <line fill-rule="evenodd" clip-rule="evenodd" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="11.5" y1="6.5" x2="3.5" y2="6.5"/>\n  </svg>'])),Meteor._def_template("icon-wysiwyg-list-numbered",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="15px" height="10px" viewBox="0 0 15 10" enable-background="new 0 0 15 10" xml:space="preserve">\n  <rect x="5" fill-rule="evenodd" clip-rule="evenodd" width="10" height="2"/>\n  <rect x="5" y="4" fill-rule="evenodd" clip-rule="evenodd" width="10" height="2"/>\n  <rect x="5" y="8" fill-rule="evenodd" clip-rule="evenodd" width="10" height="2"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M1,7V6H0v1H1z M1,6h1V5H1V6z M2,6v1h1V6H2z M1,7v1h1V7H1z M0,8v1h1V8H0z M0,9v1h3\n  	V9H0z"/>\n  <polygon fill-rule="evenodd" clip-rule="evenodd" points="0,0 0,1 1,1 1,3 0,3 0,4 3,4 3,3 2,3 2,1 2,0 "/>\n  </svg>'])),Meteor._def_template("icon-wysiwyg-list-bulleted",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="14px" height="10px" viewBox="0 0 14 10" enable-background="new 0 0 14 10" xml:space="preserve">\n  <rect x="4" fill-rule="evenodd" clip-rule="evenodd" width="10" height="2"/>\n  <circle fill-rule="evenodd" clip-rule="evenodd" cx="1" cy="1" r="1"/>\n  <rect x="4" y="4" fill-rule="evenodd" clip-rule="evenodd" width="10" height="2"/>\n  <circle fill-rule="evenodd" clip-rule="evenodd" cx="1" cy="5" r="1"/>\n  <rect x="4" y="8" fill-rule="evenodd" clip-rule="evenodd" width="10" height="2"/>\n  <circle fill-rule="evenodd" clip-rule="evenodd" cx="1" cy="9" r="1"/>\n  </svg>'])),Meteor._def_template("icon-small-reply-right",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n     width="11.076px" height="11.87px" viewBox="0 0 11.076 11.87" enable-background="new 0 0 11.076 11.87" xml:space="preserve">\n  <g>\n      <defs>\n          <rect id="SVGID_1_" width="11.076" height="11.87"/>\n\n      </defs>\n      <clipPath id="SVGID_2_">\n          <use xlink:href="#SVGID_1_"  overflow="visible"/>\n      </clipPath>\n      <path clip-path="url(#SVGID_2_)" fill-rule="evenodd" clip-rule="evenodd" d="M11.076,4.95c0,0-3.19-3.45-5.021-4.95v2.96\n          c0,0-5.959,0.47-6.049,5.89c0,0-0.15,1.64,1.06,3.019c0,0-2.09-7.299,4.989-4.859L6.007,9.87C6.347,9.87,11.076,4.95,11.076,4.95"\n          />\n  </g>\n  </svg>'])),Meteor._def_template("icon-small-reply-left",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n     width="11.076px" height="11.87px" viewBox="0 0 11.076 11.87" enable-background="new 0 0 11.076 11.87" xml:space="preserve">\n  <g>\n      <g>\n          <defs>\n              <rect id="SVGID_1_" width="11.076" height="11.87"/>\n          </defs>\n          <clipPath id="SVGID_2_">\n              <use xlink:href="#SVGID_1_"  overflow="visible"/>\n          </clipPath>\n      </g>\n      <g>\n          <defs>\n              <rect id="SVGID_3_" width="11.076" height="11.87"/>\n          </defs>\n          <clipPath id="SVGID_4_">\n              <use xlink:href="#SVGID_3_"  overflow="visible"/>\n          </clipPath>\n          <path clip-path="url(#SVGID_4_)" fill-rule="evenodd" clip-rule="evenodd" d="M0,4.95C0,4.95,3.19,1.5,5.021,0v2.96\n              c0,0,5.959,0.47,6.049,5.89c0,0,0.15,1.64-1.061,3.019c0,0,2.091-7.299-4.988-4.859l0.048,2.86C4.729,9.87,0,4.95,0,4.95"/>\n      </g>\n      <g>\n          <defs>\n              <rect id="SVGID_5_" width="11.076" height="11.87"/>\n          </defs>\n          <clipPath id="SVGID_6_">\n              <use xlink:href="#SVGID_5_"  overflow="visible"/>\n          </clipPath>\n      </g>\n  </g>\n  </svg>'])),Meteor._def_template("icon-small-reply-top",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n     width="11.076px" height="11.87px" viewBox="0 0 11.076 11.87" enable-background="new 0 0 11.076 11.87" xml:space="preserve">\n  <g>\n      <g>\n          <defs>\n              <rect id="SVGID_1_" x="-0.397" y="0.397" width="11.87" height="11.077"/>\n\n          </defs>\n          <clipPath id="SVGID_2_">\n              <use xlink:href="#SVGID_1_"  overflow="visible"/>\n          </clipPath>\n      </g>\n      <g>\n          <defs>\n              <rect id="SVGID_3_" x="-0.397" y="0.397" width="11.87" height="11.077"/>\n          </defs>\n          <clipPath id="SVGID_4_">\n              <use xlink:href="#SVGID_3_"  overflow="visible"/>\n          </clipPath>\n          <path clip-path="url(#SVGID_4_)" fill-rule="evenodd" clip-rule="evenodd" d="M4.553,0.397c0,0-3.45,3.19-4.95,5.021h2.96\n              c0,0,0.47,5.958,5.89,6.048c0,0,1.641,0.15,3.02-1.06c0,0-7.299,2.09-4.86-4.989l2.86,0.048C9.473,5.126,4.553,0.397,4.553,0.397"\n              />\n      </g>\n      <g>\n          <defs>\n              <rect id="SVGID_5_" x="-0.397" y="0.397" width="11.87" height="11.077"/>\n          </defs>\n          <clipPath id="SVGID_6_">\n              <use xlink:href="#SVGID_5_"  overflow="visible"/>\n          </clipPath>\n      </g>\n  </g>\n  </svg>'])),Meteor._def_template("icon-android",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n     width="38.001px" height="45.004px" viewBox="0 0 38.001 45.004" enable-background="new 0 0 38.001 45.004" xml:space="preserve">\n  <g>\n      <defs>\n          <rect id="SVGID_1_" width="38" height="45.004"/>\n      </defs>\n      <clipPath id="SVGID_2_">\n          <use xlink:href="#SVGID_1_"  overflow="visible"/>\n      </clipPath>\n      <path clip-path="url(#SVGID_2_)" fill-rule="evenodd" clip-rule="evenodd" d="M33.04,21.504V3.154c0,0,4.96,0,4.96,5.01v8.33\n          C38,21.613,33.04,21.504,33.04,21.504 M26.379,37.604l0.051,4.9c0,1.381-1.099,2.5-2.471,2.5c-1.369,0-2.479-1.119-2.479-2.5\n          l-0.011-4.34c-1.84,0.14-3.35,0.119-3.35,0.119s-1.03-0.02-1.6-0.039v2.59c0,1.391-1.1,2.5-2.48,2.5c-1.37,0-2.47-1.109-2.47-2.5\n          l-0.03-3.12c-4.71-1.399-4.93-4.12-4.93-4.12v-15.37c0-1.57,1.65-1.671,1.65-1.671l21.431,0.051c1.59,0,1.649,1.67,1.649,1.67\n          v15.37C31.34,35.704,29.01,36.904,26.379,37.604 M6.61,14.834c0-3.95,1.77-7.7,4.56-10.2c0.33-0.3-1.93-3.03-1.13-4.61\n          c1.4-0.161,2.93,3.25,3.33,3.029c1.68-0.949,3.6-1.5,5.63-1.5c2.06,0,3.65,0.391,5.35,1.361c0.279,0.17,1.99-3.04,3.62-2.91\n          c0.311,3.17-1.83,4.06-1.54,4.299c3,2.5,4.91,6.401,4.91,10.531C31.34,14.834,6.61,14.964,6.61,14.834 M23.87,11.634\n          c1.38,0,2.49-1.13,2.49-2.51c0-1.4-1.11-2.52-2.49-2.52c-1.379,0-2.5,1.12-2.5,2.52C21.37,10.504,22.491,11.634,23.87,11.634\n           M16.47,9.073c0-1.359-1.1-2.469-2.45-2.469c-1.36,0-2.45,1.11-2.45,2.469c0,1.371,1.09,2.48,2.45,2.48\n          C15.37,11.553,16.47,10.444,16.47,9.073 M0,26.613v-8.339c0-5.11,4.96-5,4.96-5v18.339C4.96,31.613,0,31.613,0,26.613"/>\n  </g>\n  </svg>'])),Meteor._def_template("icon-iOS",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n     width="39.739px" height="48.89px" viewBox="0 0 39.739 48.89" enable-background="new 0 0 39.739 48.89" xml:space="preserve">\n  <g>\n      <defs>\n          <rect id="SVGID_1_" width="39.739" height="48.89"/>\n      </defs>\n      <clipPath id="SVGID_2_">\n          <use xlink:href="#SVGID_1_"  overflow="visible"/>\n      </clipPath>\n      <path clip-path="url(#SVGID_2_)" fill-rule="evenodd" clip-rule="evenodd" d="M29.569,0v1.86c-0.25,3.96-3.899,8.28-6.819,9\n          c-0.47,0.1-1.39,0.36-1.54,0.36h-1.39v-1.7c0.149-2.83,2.62-7.1,6.159-8.49c0.51-0.21,1.08-0.46,1.641-0.67\n          c0.57-0.15,1.181-0.26,1.8-0.36H29.569z M37.739,15.75l0.721,0.87c-4.11,2.42-5.29,6.08-5.29,9.209c0,4.74,2.56,8.24,6.569,10.09\n          c-0.92,2.622-2.209,5.201-4.06,7.872c-2.101,2.888-4.26,5.048-6.819,5.048c-2.781,0-4.931-1.959-8.06-1.959\n          c-2.98,0-5.702,2.01-8.17,2.01c-3.591,0-6.571-4.631-8.62-7.93c-1.34-2.11-2.21-4.58-2.831-6.69C0.67,32.32,0,29.33,0,27.28v-1.55\n          c0.21-8.03,5.699-13.79,12.119-13.79c2.821,0,6.361,2.16,8.011,2.16c1.59,0,5.39-2.31,8.83-2.31\n          C31.47,11.79,35.53,12.97,37.739,15.75"/>\n  </g>\n  </svg>'])),Meteor._def_template("icon-dashboard",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n     width="27.999px" height="19px" viewBox="0 0 27.999 19" enable-background="new 0 0 27.999 19" xml:space="preserve">\n  <g>\n      <defs>\n          <rect id="SVGID_1_" y="0" width="27.999" height="19"/>\n\n      </defs>\n      <clipPath id="SVGID_2_">\n          <use xlink:href="#SVGID_1_"  overflow="visible"/>\n      </clipPath>\n      <path clip-path="url(#SVGID_2_)" fill-rule="evenodd" clip-rule="evenodd" d="M27.981,16.17c0,0.81,0.28,2.831-1.41,2.831\n          c-0.79,0-1.35-0.642-1.35-1.392c0-0.108,0.11-1.561,0.06-2.59c-0.17-2.26-0.85-4.391-2.199-6.59l1.069-3\n          C27.082,9.01,27.981,12.59,27.981,16.17 M17.722,1.27c-0.62,0.75-1.24,1.56-1.921,2.37c-0.559-0.06-1.63-0.12-1.8-0.12\n          c-4.68,0-9.48,3.12-10.939,9.471c-0.4,1.559-0.291,2.139-0.291,3.529v1.38c-0.279,0.75-0.79,1.102-1.35,1.102\n          c-1.64,0-1.41-2.142-1.41-2.892c0-8.02,5.361-14.84,12.91-15.36c0.911-0.11,1.19-0.06,2.201,0C15.861,0.87,16.932,0.98,17.722,1.27\n           M22.791,0.23c-0.279,1.16-0.67,2.25-1.069,3.35c-1.63,4.45-3.38,9.07-5.47,13.629c-0.11,0.23-0.28,0.521-0.51,0.75\n          c-0.561,0.641-1.241,0.871-1.801,0.871c-1.299,0-2.989-1.271-2.989-2.781c0-1.67,2.429-4.379,3.439-5.77c1.021-1.5,2.2-3,3.38-4.45\n          c1.529-1.9,3.109-4.16,5.02-5.83V0.23z"/>\n  </g>\n  </svg>'])),Meteor._def_template("icon-dashboard-big",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n     width="30px" height="20px" viewBox="0 0 30 20" enable-background="new 0 0 30 20" xml:space="preserve">\n  <g>\n      <defs>\n          <rect id="SVGID_1_" y="0" width="30" height="20"/>\n\n      </defs>\n      <clipPath id="SVGID_2_">\n          <use xlink:href="#SVGID_1_"  overflow="visible"/>\n      </clipPath>\n      <path clip-path="url(#SVGID_2_)" fill-rule="evenodd" clip-rule="evenodd" d="M29.981,17.02c0,0.851,0.3,2.979-1.51,2.979\n          c-0.85,0-1.45-0.67-1.45-1.459c0-0.121,0.12-1.641,0.06-2.73c-0.18-2.38-0.91-4.62-2.359-6.93l1.15-3.17\n          C29.011,9.48,29.981,13.25,29.981,17.02 M18.981,1.34c-0.66,0.79-1.33,1.64-2.05,2.49c-0.6-0.06-1.75-0.12-1.93-0.12\n          c-5.02,0-10.15,3.28-11.73,9.97c-0.42,1.64-0.3,2.25-0.3,3.71v1.46C2.671,19.64,2.131,20,1.522,20c-1.75,0-1.511-2.25-1.511-3.039\n          c0-8.45,5.741-15.62,13.841-16.17c0.96-0.12,1.27-0.06,2.35,0C16.991,0.91,18.142,1.03,18.981,1.34 M24.421,0.24\n          c-0.299,1.22-0.719,2.37-1.149,3.53c-1.75,4.68-3.62,9.54-5.86,14.351c-0.119,0.239-0.3,0.539-0.539,0.789\n          c-0.601,0.66-1.33,0.91-1.93,0.91c-1.391,0-3.21-1.34-3.21-2.92c0-1.76,2.6-4.62,3.689-6.08c1.09-1.58,2.36-3.16,3.621-4.68\n          c1.64-2.01,3.33-4.38,5.379-6.14V0.24z"/>\n  </g>\n  </svg>'])),Meteor._def_template("icon-sign-out",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="16.007px" height="17px" viewBox="0 0 16.007 17" enable-background="new 0 0 16.007 17" xml:space="preserve">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M5.49,3.63c0,0.27,0,0.37-0.25,0.71c-0.18,0.21-0.42,0.31-0.6,0.48\n  	C3.87,5.37,3.09,6.33,2.81,7.08C2.71,7.35,2.57,7.7,2.5,8.04C2.43,8.35,2.39,9.03,2.39,9.1c0,3.04,2.53,5.51,5.59,5.51\n  	c3.17,0,5.629-2.57,5.629-5.51c0-0.51-0.109-1.2-0.319-1.68c-0.24-0.68-0.67-1.4-1.33-2.05c-0.39-0.41-0.88-0.65-1.229-1.03\n  	c-0.291-0.3-0.221-0.44-0.221-0.71c0-0.76,0.53-1.17,1.2-1.17c0.39,0,0.56,0.07,1.09,0.45c1.931,1.43,2.851,3.32,3.091,4.99\n  	C15.96,8.28,16,9.03,16,9.1c0,4.31-3.55,7.9-8.02,7.9c-2.92,0-6.61-1.78-7.7-5.71C0.14,10.77,0,9.82,0,9.75V8.48\n  	c0.04-0.2,0.04-0.44,0.07-0.61c0.07-0.45,0.25-0.93,0.39-1.41c0.35-1.3,2.53-4,3.83-4C5.03,2.46,5.49,2.98,5.49,3.63z M9.21,1.06\n  	v7.56C9,9.41,8.51,9.68,7.98,9.68c-0.49,0-1.19-0.41-1.19-1.03V1.06C6.86,0.31,7.49,0,7.98,0C8.471,0,9.21,0.44,9.21,1.06z"/>\n  </svg>'])),Meteor._def_template("icon-x",Handlebars.json_ast_to_func(['<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  	 width="7.12px" height="7.12px" viewBox="0 0 7.12 7.12" enable-background="new 0 0 7.12 7.12" xml:space="preserve">\n  <g>\n  	\n  		<rect x="2.56" y="-0.44" transform="matrix(-0.7152 -0.6989 0.6989 -0.7152 3.6191 8.5947)" fill-rule="evenodd" clip-rule="evenodd" width="2" height="8"/>\n  	\n  		<rect x="2.56" y="-0.44" transform="matrix(-0.6989 0.7152 -0.7152 -0.6989 8.5944 3.5018)" fill-rule="evenodd" clip-rule="evenodd" width="2" height="8"/>\n  </g>\n  </svg>']))
}(),function(){Meteor._def_template("sidebar",Handlebars.json_ast_to_func(['<div class="visible-0">\n    ',[">","icon-iOS"],"\n    ",[">","icon-android"],'\n  </div>\n  <div class="navbar desktop-logo-container">\n    <div class="navbar-inner">\n      <a href="/dashboard" class="cb-logo-main">\n        <span class="logo-main">',[">","icon-logo-main"],'</span>\n        <span class="logo-words">\n          <span class="left">emory</span><span class="right">bubble</span>\n        </span>\n      </a>\n      <button class="sidebar-collapse-new">\n        <span class="cb-icon">',[">","icon-sidebar-collapse"],'</span>\n      </button>\n    </div>\n  </div>\n  <div class="sidebar-new sidebar-visible-',["{",[[0,"sidebarOpen"]]],'" id="sidebar-new">\n    <div class="navbar">\n      <div class="navbar-inner">\n      </div>\n    </div>\n    <div class="pane section">\n      <a href="',["{",[[0,"dashboardLink"]]],'">\n        <button class="btn-nav btn-nav-section active-',["{",[[0,"selectedSection"],"dashboard"]],'">\n          <div class="inner">\n            <div class="cb-icon dashboard-icon">',[">","icon-dashboard-big"],'</div>\n            <div class="lbl">dashboard</div>\n          </div>\n          <div class="selected-arrow">',[">","icon-arrow-right"],'</div>\n        </button>\n      </a>\n      <a href="',["{",[[0,"myBubblesLink"]]],'">\n        <button class="btn-nav btn-nav-section active-',["{",[[0,"selectedSection"],"mybubbles"]],'">\n          <div class="inner">\n            <div class="cb-icon">',[">","icon-two-bubbles"],'</div>\n            <div class="lbl">my bubbles</div>\n          </div>\n          <div class="selected-arrow">',[">","icon-arrow-right"],'</div>\n        </button>\n      </a>\n      <a href="',["{",[[0,"exploreLink"]]],'">\n        <button class="btn-nav btn-nav-section btn-nav-subsection active-',["{",[[0,"selectedSection"],"explore"]],'">\n          <div class="inner">\n            <div class="cb-icon explore">',[">","icon-explore"],'</div>\n            <div class="lbl">explore</div>\n          </div>\n          <div class="selected-arrow">',[">","icon-arrow-right"],'</div>\n        </button>\n      </a>\n      <a href="',["{",[[0,"searchAllPath"]]],'">\n        <button class="btn-nav btn-nav-section btn-nav-subsection active-',["{",[[0,"selectedSection"],"search"]],'">\n          <div class="inner">\n            <div class="cb-icon">',[">","icon-search-thin"],'</div>\n            <div class="lbl">search</div>\n          </div>\n          <div class="selected-arrow">',[">","icon-arrow-right"],'</div>\n        </button>\n      </a>\n      <a href="',["{",[[0,"userProfilePath"],[0,"Meteor","userId"]]],'">\n        <button class="btn-nav btn-nav-section active-',["{",[[0,"selectedSection"],"settings"]],'">\n          <div class="inner">\n            <div class="cb-icon-settings">',[">","icon-settings-big"],'</div>\n            <div class="lbl">settings</div>\n          </div>\n          <div class="selected-arrow">',[">","icon-arrow-right"],'</div>\n        </button>\n      </a>\n      <div class="grouping-about">\n        <div class="txt-about">licensed by emory university</div>\n        <div class="btn-about">\n          <span class="cb-icon">',[">","icon-logo-main"],'</span>\n          <span class="lbl">Â© 2013</span>\n        </div>\n      </div>\n    </div>\n    <div class="pane subsection visible-',["{",[[0,"subsectionPaneVisible"]]],'">\n      <div class="visible-',["{",[[0,"selectedSection"],"mybubbles"]],'">\n        <div class="heading">\n          <div class="pull-left section-name">my bubbles</div>\n          <div class="pull-right v-middle">\n            <div class="v-inner">\n              <a class="add-bubble" href="',["{",[[0,"bubbleSubmitPath"]]],'">\n                <button class="btn-heading">\n                  <span class="cb-icon-add">',[">","icon-add"],"</span>\n                  <span>new</span>\n                </button>\n              </a>\n            </div>\n          </div>\n        </div>\n        ",["#",[[0,"each"],[0,"userBubbles"]],['\n          <a href="',["{",[[0,"bubblePagePath"],[0]]],'" class="set-loading">\n            <button class="btn-nav btn-nav-subsection category-',["{",[[0,"category"]]],"-border-right-3 active-",["{",[[0,"selectedSubsection"]]],'">\n              ',["#",[[0,"if"],[0,"compressedUpdatesCount"],[0,"","_id"]],['\n                <div class="pull-left num-in-bubble updates-count">\n                  <span class="cb-icon cb-icon-bubble">',[">","icon-bubble"],'</span>\n                  <span class="num">',["{",[[0,"compressedUpdatesCount"],[0,"","_id"]]],"</span>\n                </div>\n              "]],'\n              <div class="lbl">',["{",[[0,"title"]]],'</div>\n              <div class="selected-arrow section-mybubbles">\n                <span class="category-',["{",[[0,"category"]]],'-fill">',[">","icon-arrow-right"],"</span>\n              </div>\n            </button>\n          </a>\n        "]],'\n      </div>\n      <div class="visible-',["{",[[0,"selectedSection"],"explore"]],'">\n        <div class="heading">\n          <div class="pull-left v-middle">\n            <div class="v-inner">\n              <span class="cb-icon explore">',[">","icon-explore"],'</span>\n            </div>\n          </div>\n          <div class="pull-left section-name explore">explore</div>\n          ',["#",[[0,"if"],[0,"hasLevel4Permission"]],['\n            <div class="pull-right v-middle">\n              <div class="v-inner">\n                <a href="',["{",[[0,"exploreSubmitPath"]]],'">\n                  <button class="btn-heading">\n                    <span class="cb-icon-add">',[">","icon-add"],"</span>\n                    <span>new</span>\n                  </button>\n                </a>\n              </div>\n            </div>\n          "]],"\n        </div>\n        ",["#",[[0,"each"],[0,"publicExplores"]],['\n          <a href="',["{",[[0,"explorePagePath"],[0,"","_id"]]],'" class="set-loading">\n            <button class="btn-nav btn-nav-subsection category-',["{",[[0,"category"]]],"-border-right-3 active-",["{",[[0,"selectedExploreSubsection"],[0,"","_id"]]],'">\n\n            <span class="cb-icon cb-icon-other ',["{",[[0,"getExploreIconName"],[0]]],'">\n              ',["!",[[0,"getExploreIcon"],[0]]],'\n            </span>\n\n            <span class="lbl">',["{",[[0,"title"]]],'</span>\n\n              <!--<div class="pull-left lbl">',["{",[[0,"title"]]],'</div>-->\n              <div class="selected-arrow">',[">","icon-arrow-right"],"</div>\n            </button>\n          </a>\n        "]],'\n      </div>\n      <div class="visible-',["{",[[0,"selectedSection"],"settings"]],'">\n        <div class="heading">\n          <div class="pull-left section-name">\n            <span class="cb-icon-settings">',[">","icon-settings-big"],'</span>\n            <span class="lbl">settings</span>\n          </div>\n        </div>\n        <a href="',["{",[[0,"userProfilePath"],[0,"Meteor","userId"]]],'">\n          <button class="btn-nav btn-nav-subsection category-',["{",[[0,"category"]]],"-border-right-3 active-",["{",[[0,"selectedSubsectionName"],"userprofile"]],'">\n            <span class="cb-icon cb-icon-other">',[">","icon-user"],'</span>\n            <span class="lbl">Profile</span>\n            <div class="selected-arrow">',[">","icon-arrow-right"],'</div>\n          </button>\n        </a>\n        <a href="',["{",[[0,"invitationsPagePath"]]],'">\n          <button class="btn-nav btn-nav-subsection category-',["{",[[0,"category"]]],"-border-right-3 active-",["{",[[0,"selectedSubsectionName"],"invites"]],'">\n            <span class="cb-icon cb-icon-other">',[">","icon-invite"],'</span>\n            <span class="lbl">Invitations</span>\n            <div class="selected-arrow">',[">","icon-arrow-right"],'</div>\n          </button>\n        </a>\n        <a href="',["{",[[0,"aboutPath"]]],'">\n          <button class="btn-nav btn-nav-subsection category-',["{",[[0,"category"]]],"-border-right-3 active-",["{",[[0,"selectedSubsectionName"],"about"]],'">\n            <span class="cb-icon cb-icon-other">',[">","icon-about"],'</span>\n            <span class="lbl">About</span>\n            <div class="selected-arrow">',[">","icon-arrow-right"],'</div>\n          </button>\n        </a>\n        <a href="http://support.emorybubble.com" target="_blank">\n          <button class="btn-nav btn-nav-subsection category-',["{",[[0,"category"]]],'-border-right-3">\n            <span class="cb-icon cb-icon-other">',[">","icon-support"],'</span>\n            <span class="lbl">Support & Feedback</span>\n            <div class="selected-arrow">',[">","icon-arrow-right"],"</div>\n          </button>\n        </a>\n      </div>\n    </div>\n  </div>"]))}(),function(){Meteor._def_template("sidebarOld",Handlebars.json_ast_to_func(['<header class="navbar">\n    <div class="navbar-inner"></div>\n  </header>\n \n  <section class="sidebar">\n    <div class="top-btns">\n        <a href="',["{",[[0,"getSearchUrl"]]],'">\n        <button class="top-btn left">\n          <span class="cb-icon-light-stroke">',[">","icon-search"],'</span>\n          <span class="lbl">search</span>\n        </button>\n      </a>\n      <a href="',["{",[[0,"bubbleSubmitPath"]]],'">\n        <button class="top-btn right">\n          <span class="cb-icon-light-fill">',[">","icon-bubble-create"],'</span>\n          <span class="lbl">create</span>\n        </button>\n      </a>\n    </div>\n\n\n    <div class="main-btns">\n      ',["#",[[0,"each"],[0,"getSidebarBubbles"]],[' \n        <a href="',["{",[[0,"bubblePagePath"],[0]]],'">\n          <button class="main-btn category-',["{",[[0,"category"]]],'-border-left-3">\n            ',["#",[[0,"if"],[0,"compressedUpdatesCount"],[0,"","_id"]],['\n              <span class="badge badge-inverse">\n                ',["{",[[0,"compressedUpdatesCount"],[0,"","_id"]]]," \n              </span>\n            "]],"\n            ",["{",[[0,"title"]]],"\n          </button>\n        </a>\n      "]],"\n      ",["#",[[0,"if"],[0,"hasInvitations"]],['\n        <div class="row">\n          <div class="span9"> \n            <span class="label label-success">\n              YOU HAVE INVITATIONS \n            </span>\n          </div>\n          ',["#",[[0,"each"],[0,"getInvitations"]],['\n            <div class="span2">\n              <a href="',["{",[[0,"bubblePagePath"],[0]]],'">\n                ',["{",[[0,"title"]]],'\n              </a>\n            </div>\n            <div class="span1">\n            <a class="btn btn-mini btn-alert pull-right accept-invitation">accept</a>\n            <a class="btn btn-mini btn-alert pull-right reject-invitation">reject</a>\n            </div>\n          ']],"\n        </div>\n      "]],'\n      <div id="getsat-widget-6125"></div>\n    </div>\n  </section>']))}(),function(){Meteor._def_template("invitationsPage",Handlebars.json_ast_to_func(['<div class="bubble-page-content bubble-page-content-search">\n    <div class="bubble-list member-heading">\n      <div class="bubble-list-heading">\n        <h3 class="section-name pull-left">\n          <span class="section-icon-invitations">',[">","icon-invite"],"</span>\n          <span>",["{",[[0,"pluralize"],[0,"numInvites"],"invitation",""]],"</span>\n        </h3>\n      </div>\n    </div>\n  \n    ",["#",[[0,"each"],[0,"getInvites"]],["\n      ",[">","listItem"],"\n    "]],"\n  </div>"]))}(),function(){Meteor._def_template("fileData",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"currentPost"]],["\n		",["{",[[0,"file"]]],"\n	"]]]))}(),function(){Meteor._def_template("fileObject",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"isPDF"]],["\n        <object data=",["{",[[0,"file"]]],' type="application/pdf" width="100%" height="400px"></object>\n    '],['\n        <img src="',["{",[[0,"file"]]],'" width="300px" height="400px">\n    ']]]))}(),function(){Meteor._def_template("filePreview",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"isPDF"]],['\n        <div class="pdf-icon"><a href="',["{",[[0,"","file"]]],'" download="',["{",[[0,"","name"]]],'">',["{",[[0,"","name"]]],"</a></div>\n    "],["\n	    ",["#",[[0,"if"],[0,"isImage"]],['\n	        <a href="',["{",[[0,"","file"]]],'"><img src="',["{",[[0,"file"]]],'" class="previewthumb" title="',["{",[[0,"","name"]]],'" download="',["{",[[0,"","name"]]],'"></a>\n	    '],["\n		    ",["#",[[0,"if"],[0,"isDoc"]],['\n			    <div class="word-icon"><a href="',["{",[[0,"","file"]]],'" download="',["{",[[0,"","name"]]],">",["{",[[0,"","name"]]],'"</a></div>\n			'],['\n				<div><a href="',["{",[[0,"","file"]]],'" download="',["{",[[0,"","name"]]],'">',["{",[[0,"","name"]]],"</a></div>\n			"]],"\n		"]],"\n    "]]]))}(),function(){Meteor._def_template("postAttachments",Handlebars.json_ast_to_func(['<script language="JavaScript" src="js/pdfobject.js"></script>\n  <script language="JavaScript" src="js/FileSaver.js"></script>\n  \n  <div class="post-attachments">\n    <h4 class="small-heading attachments-heading">attachments:</h4>\n    ',["#",[[0,"each"],[0,"attachmentList"]],['\n      <a href="',["{",[[0,"file"]]],'" download="',["{",[[0,"decodeURI"],[0,"name"]]],'">\n	      ',[">","listItem"],"\n	  </a>\n    "]],"\n  </div>"]))}(),function(){Meteor._def_template("postAttributes",Handlebars.json_ast_to_func(['<script language="JavaScript" src="js/pdfobject.js"></script>\n  <script language="JavaScript" src="js/FileSaver.js"></script>\n\n  <div class="post-main post-type-',["{",[[0,"postType"]]],'">\n    <div class="visible-',["{",[[0,"matchPostType"],"event"]],' event-controls">\n      <div class="left"><img src="',["{",[[0,"eventPhoto"]]],'"/></div>\n      <div class="right">\n        <div class="right-controls">\n          <div class="attributes">\n            <div class="small-heading attribute">\n              <div class="pull-left cb-icon">',[">","icon-time"],'</div>\n              <div class="lbl">',["{",[[0,"timestampToTime"],[0,"dateTime"]]]," | ",["{",[[0,"timestampToDateLong"],[0,"dateTime"]]],'</div>\n            </div>\n            <div class="small-heading attribute">\n              <div class="pull-left cb-icon">',[">","icon-location"],'</div>\n              <div class="lbl">',["{",[[0,"location"]]],'</div>\n            </div>\n            <div class="small-heading attribute attribute-going">\n              <div class="pull-left cb-icon cb-icon-member">',[">","icon-member"],'</div>\n              <div class="lbl lbl-member">',["{",[[0,"pluralize"],[0,"numOfAttendees"],"person",""]]," going</div>\n            </div>\n          </div>\n          <div>",[">","imGoing"],'</div>\n        </div>\n      </div>\n    </div>\n\n    <div class="visible-',["{",[[0,"matchPostType"],"event"]],' small-heading event-body-heading">details:</div>\n    <pre class="invisible-',["{",[[0,"matchPostType"],"file"]]," post-body post-body-",["{",[[0,"postType"]]],'">',["!",[[0,"body"]]],'</pre>\n    <span class="visible-',["{",[[0,"hasChildren"]]],'">',[">","postAttachments"],'</span>\n\n    <div class="visible-',["{",[[0,"matchPostType"],"file"]],'">\n      <a href="',["{",[[0,"file"]]],'" download="',["{",[[0,"decodeURI"],[0,"name"]]],'">\n        <div class="attachment">\n          <div class="pull-left v-middle">\n            <div class="v-inner">\n              <div class="file-type file-type-attachment">\n                <span class="cb-icon">',[">","icon-file-type"],'</span>\n                <span class="lbl">',["{",[[0,"getTextAfterDot"],[0,"name"]]],'</span>\n              </div>\n            </div>\n          </div>\n          <span class="attachment-name">',["{",[[0,"decodeURI"],[0,"","name"]]],'</span>\n          <span class="attachment-size">',["{",[[0,"fileSizeWords"]]],'</span>\n          <button class="std-btn-xdark post-action">download</button>\n        </div>\n      </a>\n    </div>\n  </div>\n\n  <div class="visible-',["{",[[0,"matchPostType"],"event"]],' bubble-list people-going">\n    <div class="bubble-list-heading">\n      <h3 class="section-name pull-left">',["{",[[0,"pluralize"],[0,"numOfAttendees"],"person",""]],' going</h3>\n      <span class="pull-right">',[">","imGoingSmall"],'</span>\n    </div>\n    <div class="people-list">\n      ',["#",[[0,"each"],[0,"reverseAttendees"]],['\n        <a href="',["{",[[0,"userProfilePath"],[0]]],'">\n          <div class="author-pic person-going">\n            <div class="bubble-bg">',[">","icon-bubble"],'</div>\n            <img class="pic-circle author-circle" src="',["{",[[0,"getSelectedUserProfilePic"],[0]]],'"/>\n            <div class="user-name">',["{",[[0,"getSelectedName"],[0]]],"</div>\n          </div>\n        </a>\n      "]],"\n    </div>\n  </div>"]))}(),function(){Meteor._def_template("postItem",Handlebars.json_ast_to_func(['<div class="post">\n    <div class="pull-left" style="width: 130px;">\n      <h4 style="line-height: 16px; text-transform: uppercase;">',["{",[[0,"postType"]]],'</h4>\n    </div>\n    <div class="post-content">\n      ',["#",[[0,"if"],[0,"","parent"]],['\n        <h3><a href="',["{",[[0,"postPagePath"],[0,"","bubbleId"],[0,"","parent"]]],'">',["{",[[0,"name"]]],"</a></h3>\n      "],['\n        <h3><a href="',["{",[[0,"postPagePath"],[0,"","bubbleId"],[0,"","_id"]]],'">',["{",[[0,"name"]]],"</a></h3>\n      "]],'\n      <p>\n        <a href="',["{",[[0,"postPagePath"],[0]]],'">',["{",[[0,"pluralize"],[0,"commentsCount"],"comment"]],'</a>\n      </p>\n    </div>\n    <div style="width: 100px;" class="pull-right">\n      <p style="line-height: 10px;">Posted by</p>\n      <h4><a href="',["{",[[0,"userProfilePath"],[0,"userId"]]],'">',["{",[[0,"author"]]],'</a></h4>\n    </div>\n    <div style="width: 100px;" class="pull-right">\n      <p style="line-height: 10px;">View Count: ',["{",[[0,"viewCount"]]],"</p>\n    </div>\n  </div>"]))}(),function(){Meteor._def_template("postPage",Handlebars.json_ast_to_func([["#",[[0,"with"],[0,"getCurrentBubble"]],["\n    ",[">","bubbleCover"],"\n    ",[">","bubbleSectionSelector"],"\n  "]],'\n\n  <div class="visible-',["{",[[0,"isLoading"]]],'">\n    ',[">","gifLoaderToParent"],"\n  </div>\n  \n  ",["#",[[0,"with"],[0,"getCurrentPost"]],['\n    <div class="bubble-page-content post-page">\n      <div class="top-btns">\n        <a href="/mybubbles/',["{",[[0,"bubbleId"]]],"/",["{",[[0,"postType"]]],'">\n          <button class="pull-left std-btn-light with-left-icon btn-back">\n            <span class="left-icon">',[">","icon-back"],'</span>\n            <span>back</span>\n            <span class="to-post-types">to ',["{",[[0,"postType"]]],'s</span>\n          </button>\n        </a>\n\n        <button class="pull-right std-btn-light btn-flag">\n          <span>',[">","icon-flag"],'</span>\n          <span class="flag-text visible-',["{",[[0,"isFlagged"]]],'">flagged</span>\n        </button>\n\n        <button class="pull-right std-btn-light with-left-icon btn-edit" data-toggle="collapse" data-target="#edit-',["{",[[0,"postType"]]],'">\n          <span class="left-icon">',[">","icon-edit"],'</span>\n          <span>edit</span>\n        </button>\n\n        <button class="visible-',["{",[[0,"isAdmin"]]],' pull-right std-btn-light with-left-icon btn-delete">\n          <span class="left-icon">',[">","icon-cancel"],"</span>\n          <span>delete</span>\n        </button>\n      </div>\n\n      ",["#",[[0,"if"],[0,"isEvent"]],['\n        <div id="edit-event" class="collapse">\n          ',[">","editEvent"],"\n        </div>\n      "]],"\n\n     \n      ",["#",[[0,"if"],[0,"isDiscussion"]],['\n        <div id="edit-discussion" class="collapse">\n          ',[">","editDiscussion"],"\n        </div>\n      "]],"\n\n\n      ",["#",[[0,"if"],[0,"isFile"]],['\n        <div id="edit-file" class="collapse">\n          ',[">","editFile"],"\n        </div>\n      "]],'\n   \n      <div class="post-heading">\n        <a href="',["{",[[0,"userProfilePath"],[0,"","userId"]]],'">\n          <div class="author-pic">\n            <div class="bubble-bg">',[">","icon-bubble"],'</div>\n            <img class="pic-circle author-circle" src="',["{",[[0,"getAuthorProfilePicture"]]],'"/>\n          </div>\n        </a>\n        <div class="name">',["{",[[0,"decodeURI"],[0,"name"]]],'</div>\n        <div class="subtitle">posted ',["{",[[0,"timestampToFromNow"],[0,"submitted"]]]," by ",["{",[[0,"author"]]],"</div>\n      </div>\n\n      ",[">","postAttributes"],"\n      ",[">","commentsList"],"\n\n      ",["#",[[0,"if"],[0,"isEvent"]],["\n        \n        </br>\n        ",["#",[[0,"if"],[0,"notAttending"]],['\n          <button class="btn btn-small btn-success attending" type="button">I\'M GOING</button>\n        ']],"\n        ",["#",[[0,"if"],[0,"isAttending"]],['\n          <button class="btn btn-small btn-success attending" type="button">I\'M NOT GOING</button>\n        ']],"\n        ",["#",[[0,"with"],[0,"attendees"]],["\n          <br />\n        "]],"\n      "]],"\n    </div>\n  "]]]))}(),function(){Meteor._def_template("searchAll",Handlebars.json_ast_to_func(['<div class="bubble-page-content bubble-page-content-search">\n    ',[">","searchPage"],'\n\n  <div class="visible-',["{",[[0,"typing"]]],'" style="margin-top: -6px">\n      ',[">","gifLoaderToParent"],"\n  </div>\n\n    ",["#",[[0,"each"],[0,"getSearchedBubbles"]],["\n      ",[">","listItem"],"\n    "]],"\n    ",["#",[[0,"each"],[0,"getSearchedUsers"]],["\n      ",[">","listItem"],"\n    "]],"\n    ",["#",[[0,"each"],[0,"getSearchedEvents"]],["\n      ",[">","listItem"],"\n    "]],"\n    ",["#",[[0,"each"],[0,"getSearchedDiscussions"]],["\n      ",[">","listItem"],"\n    "]],"\n    ",["#",[[0,"each"],[0,"getSearchedFiles"]],["\n      ",[">","listItem"],"\n    "]],"\n  </div>"]))}(),function(){Meteor._def_template("searchBubbles",Handlebars.json_ast_to_func(['<div class="bubble-page-content bubble-page-content-search">\n    ',[">","searchPage"],'\n\n	<div class="visible-',["{",[[0,"typing"]]],'" style="margin-top: -6px">\n	    ',[">","gifLoaderToParent"],"\n	</div>\n  \n    ",["#",[[0,"each"],[0,"getSearchedBubbles"]],["\n    	",[">","listItem"],"\n    "]],"\n  </div>"]))}(),function(){Meteor._def_template("searchDiscussions",Handlebars.json_ast_to_func(['<div class="bubble-page-content bubble-page-content-search">\n    ',[">","searchPage"],'\n\n	<div class="visible-',["{",[[0,"typing"]]],'" style="margin-top: -6px">\n	    ',[">","gifLoaderToParent"],"\n	</div>\n\n    ",["#",[[0,"each"],[0,"getSearchedDiscussions"]],["\n      ",[">","listItem"],"\n    "]],"\n  </div>"]))}(),function(){Meteor._def_template("searchEvents",Handlebars.json_ast_to_func(['<div class="bubble-page-content bubble-page-content-search">\n    ',[">","searchPage"],'\n\n	<div class="visible-',["{",[[0,"typing"]]],'" style="margin-top: -6px">\n	    ',[">","gifLoaderToParent"],"\n	</div>\n\n    ",["#",[[0,"each"],[0,"getSearchedEvents"]],["\n      ",[">","listItem"],"\n    "]],"\n  </div>"]))}(),function(){Meteor._def_template("searchFiles",Handlebars.json_ast_to_func(['<div class="bubble-page-content bubble-page-content-search">\n    ',[">","searchPage"],'\n\n	<div class="visible-',["{",[[0,"typing"]]],'" style="margin-top: -6px">\n	    ',[">","gifLoaderToParent"],"\n	</div>\n    \n    ",["#",[[0,"each"],[0,"getSearchedFiles"]],["\n  		",[">","listItem"],"\n    "]],"\n  </div>"]))}(),function(){Meteor._def_template("searchPage",Handlebars.json_ast_to_func(['<div class="bubble-list member-heading">\n    <div class="bubble-list-heading">\n      <h3 class="section-name pull-left">\n        <span class="section-icon-search">',[">","icon-search-thin"],'</span>\n        <span>Search</span>\n      </h3>\n    </div>\n  </div>\n  \n  <div class="cb-form-container cb-form-container-search">\n    <form class="cb-form comment-form">\n      <input class="search-text first" name="searchText" type="text" placeholder="Type an organizaton, person, topic, etc..." autofocus/>\n        <ul class="nav nav-tabs small-boxes">\n            <li class="',["{",[[0,"isActive"],"all"]]," all\">\n                <a href='",["{",[[0,"searchAllPath"]]],'\' class="all">\n                    <div class="v-middle lbl-all-container">\n                        <div class="v-inner">\n                            <div class="lbl-all">all</div>\n                        </div>\n                    </div>\n                </a>\n            </li>\n            <li class="',["{",[[0,"isActive"],"bubbles"]]," bubbles\">\n                <a href='",["{",[[0,"searchBubblesPath"]]],'\' class="bubbles">\n                    <div class="cb-icon cb-icon-bubble">',[">","icon-two-bubbles"],'</div>\n                    <div class="cb-icon-lbl">bubbles</div>\n                </a>\n            </li>\n            <li class="',["{",[[0,"isActive"],"users"]]," users\">\n                <a href='",["{",[[0,"searchUsersPath"]]],'\' class="users">\n                    <div class="cb-icon cb-icon-member">',[">","icon-member"],'</div>\n                    <div class="cb-icon-lbl">users</div>\n                </a>\n            </li>\n            <li class="',["{",[[0,"isActive"],"events"]]," events\">\n                <a href='",["{",[[0,"searchEventsPath"]]],'\' class="events">\n                    <div class="cb-icon cb-icon-event">',[">","icon-event"],'</div>\n                    <div class="cb-icon-lbl">events</div>\n                </a>\n            </li>\n            <li class="',["{",[[0,"isActive"],"discussions"]]," discussions\">\n                <a href='",["{",[[0,"searchDiscussionsPath"]]],'\' class="discussions">\n                    <div class="cb-icon cb-icon-discussion">',[">","icon-discussion"],'</div>\n                    <div class="cb-icon-lbl">threads</div>\n                </a>\n            </li>\n            <li class="',["{",[[0,"isActive"],"files"]]," files\">\n                <a href='",["{",[[0,"searchFilesPath"]]],'\' class="files">\n                    <div class="cb-icon cb-icon-file">',[">","icon-file"],'</div>\n                    <div class="cb-icon-lbl">files</div>\n                </a>\n            </li>\n        </ul>\n        <button class="std-btn-form search-btn" type="submit">\n            Search\n        </button>\n    </form>\n    <div class="bottom-arrow-container">\n      <div class="bottom-arrow">',[">","icon-arrow-down"],"</div>\n    </div>\n  </div>"]))}(),function(){Meteor._def_template("searchUsers",Handlebars.json_ast_to_func(['<div class="bubble-page-content bubble-page-content-search">\n    ',[">","searchPage"],'\n\n	<div class="visible-',["{",[[0,"typing"]]],'" style="margin-top: -6px">\n	    ',[">","gifLoaderToParent"],"\n	</div>\n\n    ",["#",[[0,"each"],[0,"getSearchedUsers"]],["\n      ",[">","listItem"],"\n    "]],"\n  </div>"]))}(),function(){Meteor._def_template("about",Handlebars.json_ast_to_func(['<div class="bubble-page-content bubble-page-content-search">\n    <div class="bubble-list member-heading">\n      <div class="bubble-list-heading">\n        <h3 class="section-name pull-left">\n          <span>about</span>\n        </h3>\n      </div>\n    </div>\n    <div class="profile-content about-content">\n      <div>\n        <a href="http://thecampusbubble.com" target="_blank">Campus Bubble, LLC</a> is an Atlanta-based company founded by five proud Emory alumni. We created and maintain the Emory Bubble platform. We built it using the <a href="http://meteor.com" target="_blank">Meteor</a> web app framework.\n      </div>\n      <a onclick="window.open(\'/pdf/privacyPolicy.pdf\', \'_blank\')">\n        <button class="pull-left post-action">privacy policy</button>\n      </a>\n      <a onclick="window.open(\'/pdf/termsOfUse.pdf\', \'_blank\')">\n        <button class="pull-left post-action">terms of use</button>\n      </a>\n    </div>\n  </div>']))}(),function(){Meteor._def_template("updateItem",Handlebars.json_ast_to_func(['<div class="post-item update-item">\n    <div class="pull-left profile-pic-container">\n      <img class="pic-circle profile-pic" src="',["{",[[0,"getProfilePicture"]]],'"/> \n    </div>\n    <div class="pull-left v-middle update-time">\n      <div class="v-inner">\n        <div class="lbl">',["{",[[0,"updateType"]]],'</div>\n        <div class="lbl">',["{",[[0,"submittedText"],[0,"submitted"]]],'</div>\n      </div>\n    </div>\n\n    <div class="pull-left v-middle update-icon-container">\n      <div class="v-inner">\n        ',["#",[[0,"with"],[0,"getDisplayInfo"]],['\n          <span class="visible-',["{",[[0,"matchPostType"],"discussion"]],' cb-icon-discussion">',[">","icon-discussion"],'</span>\n          <span class="visible-',["{",[[0,"matchPostType"],"member"]],' cb-icon-member">',[">","icon-member"],'</span>      \n          <span class="visible-',["{",[[0,"matchPostType"],"event"]],' cb-icon-event">',[">","icon-event"],'</span>\n          <span class="visible-',["{",[[0,"matchPostType"],"file"]],' cb-icon-file">',[">","icon-file"],"</span>      \n        "]],'\n      </div>\n    </div>\n\n    <h4 class="post-name update-name">\n      <span class="name-text">',["{",[[0,"decodeURI"],[0,"getDisplayInfo","name"]]],'</span>\n    </h4>\n    \n    <div class="post-item-attributes updates-comments">\n      <div class="v-middle">\n        <div class="v-inner">\n          <div class="num-in-bubble comments-count">\n            <span class="cb-icon">',[">","icon-bubble-big"],'</span>\n            <span class="lbl">',["{",[[0,"getNewCommentsCount"]]],'</span>\n          </div>\n        </div>\n      <div class="v-inner">\n    </div>\n  </div>']))}(),function(){Meteor._def_template("updatesDropdown",Handlebars.json_ast_to_func(['<a href="#" class="dropdown-toggle" data-toggle="dropdown">\n    Updates\n    ',["#",[[0,"if"],[0,"compressedCount"]],['\n      <span class="badge badge-inverse">',["{",[[0,"compressedCount"]]],"</span>\n    "]],"\n    ",[">","icon-arrow-down"],'\n  </a>\n  <ul class="update dropdown-menu">\n    ',["#",[[0,"each"],[0,"compressUpdates"]],["\n      ",[">","updateBubble"],"\n    "],["\n      <li><span>No Updates</span></li>\n    "]],"\n  </ul>"])),Meteor._def_template("update",Handlebars.json_ast_to_func(['<li>\n\n    <a href="',["{",[[0,"url"]]],'" class="set-loading">\n      ',["{",[[0,"getContent"]]],"\n    </a>\n\n  </li>"])),Meteor._def_template("updateBubble",Handlebars.json_ast_to_func(["<li>    \n    ",["#",[[0,"with"],[0,"getBubble"],[0]],['\n      <a href="',["{",[[0,"bubblePagePath"],[0]]],'">\n        ',["{",[[0,"title"]]],"\n      </a>\n    "]],"\n    ",["#",[[0,"each"],[0]],["\n      ",[">","update"],"\n    "]],"\n  </li>"]))}(),function(){Meteor._def_template("updatesList",Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"compressedUpdates"],[0,"","_id"],[0,"getNumUpdates"]],["\n    ",[">","updateItem"],"\n  "]]]))}(),function(){Meteor._def_template("userProfileEdit",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"hasPermission"]],["\n		",["#",[[0,"with"],[0,"getProfile"]],["\n			<h1>",["{",[[0,"username"]]],'</h1>\n	    <form class="main">\n		    <div class="control-group">\n		        <div id="userprofile_image">\n		            <img id="userprofilepicture_upload" src="" />\n		            <img id="userprofilepicture_preview" src="',["{",[[0,"profilePicture"]]],'" />\n		            <img id="userprofilepicture_retina" src="" />\n		            <a href="#" class="btn btn-danger delete" id="change_profile_picture">Change</a>\n		            <div id="userprofilepicture_dropzone" class="dropzone">Drop user profile picture here.</div>\n		            <input name="filesToUpload[]" id="filesToUpload" type="file">\n		            <input type="text" id="cropx">\n		            <input type="text" id="cropy">\n		        </div>\n		    </div>\n		    \n	      <div class="control-group">\n	          <div class="controls">\n	              <input name="email" type="text" value="',["{",[[0,"getEmail"]]],'"/>\n	          </div>\n	      </div>\n				',["#",[[0,"if"],[0,"hasLevel4Permission"]],['\n		      <select name="userType">\n	          <option ',["{",[[0,"checkUserType"],"1"]],' value="1">',["{",[[0,"getUserTypeName"],1]],"</option>\n	          <option ",["{",[[0,"checkUserType"],"2"]],' value="2">',["{",[[0,"getUserTypeName"],2]],"</option>\n	          <option ",["{",[[0,"checkUserType"],"3"]],' value="3">',["{",[[0,"getUserTypeName"],3]],"</option>\n		    	</select>\n		      <hr />\n	     	"]],'\n	    \n	      <div class="control-group">\n	          <div class="controls">\n	              <input type="submit" value="Submit" class="btn btn-primary"/>\n	          </div>\n	      </div>\n	    </form>\n		']],"\n	"],["\n		<h1>You do not have permission to edit this profile.</h1>\n	"]]]))
}(),function(){Meteor._def_template("userProfile",Handlebars.json_ast_to_func(['<div class="bubble-page-content">\n		',["#",[[0,"with"],[0,"getUser"]],['\n			<div class="bubble-list member-heading">\n		    	<div class="bubble-list-heading">\n					<h3 class="section-name pull-left">\n			        	<span class="section-icon-member">',[">","icon-member"],'</span>\n			        	<span>Profile</span>\n			        </h3>\n				        <button class="std-btn-light pull-right btn-add" data-toggle="collapse" data-target="#cb-form-container-edit-profile">\n				        	<span class="left-icon cb-icon-add">',[">","icon-edit"],'</span>\n				        	<span>edit</span>\n				      	</button>\n				</div>\n			</div>\n			<canvas id="main-canvas" width="160" height="160" class="visible-0"></canvas>\n			<canvas id="retina-canvas" width="320" height="320" class="visible-0"></canvas>\n			<div class="collapse cb-form-container" id="cb-form-container-edit-profile">\n			    <div class="top-arrow-container">\n			    	<div class="top-arrow">',[">","icon-arrow-up"],'</div>\n			    </div>\n			    <form class="cb-form">\n			      <div class="attach-files">\n			        <div id="drop_zone" class="drop-zone">\n			          <div class="dz-title">drag and drop</div>\n			          <div class="dz-subtitle">or click here</div>\n			          <ul class="nav nav-tabs small-boxes attachments-list" id="list"></ul>\n			          <input class="file-chooser-invisible" name="filesToUpload[]" id="filesToUpload" type="file" multiple="">\n			        </div>\n			      	</div>\n					<div class="crop-container" style="text-align: center;">\n			      		<img class="crop"></img>\n			      	</div>\n			      	',["#",[[0,"if"],[0,"hasLevel4Permission"]],['\n				      <select name="userType">\n			          <option ',["{",[[0,"checkUserType"],"1"]],' value="1">',["{",[[0,"getUserTypeName"],1]],"</option>\n			          <option ",["{",[[0,"checkUserType"],"2"]],' value="2">',["{",[[0,"getUserTypeName"],2]],"</option>\n			          <option ",["{",[[0,"checkUserType"],"3"]],' value="3">',["{",[[0,"getUserTypeName"],3]],"</option>\n				    	</select>\n				      <hr />\n			     	"]],'\n			      <div class="cb-submit-container">\n			        <button type="submit" class="pull-right std-btn-form cb-submit add-comment submit-comment">submit</button>\n			      </div>\n			    </form>\n			</div>\n		    <div class="profile-content bubble-cover">\n				<img class="cover-pic" src="',["{",[[0,"coverPhoto"]]],'"/>\n				<div class="v-middle pull-left">\n					<div class="v-inner">\n						<div class="profile-pic-container">\n							<span class="profile-fill profile-pic-bg">',[">","icon-bubble-big"],'</span>\n							<div class="pic-preview-wrapper-outer">\n								<div class="pic-preview-wrapper-middle">\n									<div class="pic-preview-wrapper-inner">\n										<img src="',["{",[[0,"profilePicture"]]],'" class="profile-pic-preview">\n									</div>\n								</div>\n							</div>\n						</div>\n					</div>\n				</div>\n					<div class="v-middle bubble-name-and-subtitle">\n						<div class="v-inner">\n							<h1 class="profile-name">',["{",[[0,"name"]]],'</h1>\n							<h2 class="profile-subtitle">\n								<span>',["{",[[0,"pluralize"],[0,"numBubbles"]," bubble",""]],"</span>\n								<span> | ",["{",[[0,"pluralize"],[0,"numPosts"]," post",""]],"</span>\n							</h2>\n		        		</div>\n		    		</div>\n				</div>\n			</div>\n			",["#",[[0,"if"],[0,"numAdmins"]],['\n				<div class="bubble-list member-heading">\n			    	<div class="bubble-list-heading">\n						<h3 class="section-name pull-left">\n						admin of ',["{",[[0,"pluralize"],[0,"numAdmins"]," bubble",""]],"\n						</h3>\n					</div>\n				</div>\n                          <div>\n                            <div></div>\n			    ",["#",[[0,"each"],[0,"getBubblesAdminList"]],["\n					",[">","listItem"],"\n				"]],"\n                          </div>\n			"]],"\n			",["#",[[0,"if"],[0,"numMembers"]],['\n				<div class="profile-list-header bubble-list member-heading">\n			    	<div class="bubble-list-heading">\n						<h3 class="section-name pull-left">\n							member of ',["{",[[0,"pluralize"],[0,"numMembers"]," bubble",""]],"\n						</h3>\n					</div>\n				</div>\n                          <div>\n                            <div></div>\n			    ",["#",[[0,"each"],[0,"getBubblesMemberList"]],["\n					",[">","listItem"],"\n			    "]],"\n                          </div>\n			"]],"\n	    "]],'\n	</div>\n	<img id="testImage"></img>']))}(),function(){Meteor._def_template("browserCheck",Handlebars.json_ast_to_func([]))}(),function(){Meteor._def_template("browserUnsupported",Handlebars.json_ast_to_func(['<div class="bubble-page-content bubble-page-content-search">\n    <div class="bubble-list member-heading">\n      <div class="bubble-list-heading">\n        <h3 class="section-name pull-left">\n          <span>browser not supported</span>\n        </h3>\n      </div>\n    </div>\n    <div class="profile-content about-content">\n      <div>\n        We\'re sorry. Emory Bubble does not currently support this web browser. We are working hard to support all browsers as soon as we can. In the mean time, please use any of the following supported browsers to accesss Emory Bubble.\n      </div>\n      <div class="browser-icon-container">\n        <a target="_blank" href="https://www.google.com/intl/en/chrome/browser/">\n          <div class="browser-icon">\n            <img class="browser-img" src="/img/browser-chrome.png"/>\n            <div class="browser-lbl">chrome</div>\n          </div>\n        </a>\n      </div>\n      <div class="browser-icon-container">\n        <a target="_blank" href="http://www.apple.com/safari/">\n          <div class="browser-icon">\n            <img class="browser-img" src="/img/browser-safari.png"/>\n            <div class="browser-lbl">safari</div>\n          </div>\n        </a>\n      </div>\n      <div class="browser-icon-container">\n        <a target="_blank" href="http://www.mozilla.org/en-US/firefox/new/">\n          <div class="browser-icon">\n            <img class="browser-img" src="/img/browser-firefox.png"/>\n            <div class="browser-lbl">firefox</div>\n          </div>\n        </a>\n      </div>\n    </div>\n  </div>']))}(),function(){Meteor._def_template("googleAnalytics",Handlebars.json_ast_to_func([]))}(),function(){Meteor._def_template("bubblevisor",Handlebars.json_ast_to_func(['<h1>Bubblevisor</h1>\n  <canvas id="viewport" width="800" height="600"></canvas>\n  <p id="bubbles">',["{",[[0,"bubbles"]]],'</p>\n  <p id="users">',["{",[[0,"users"]]],"</p>"]))}(),function(){Meteor._def_template("dashboard",Handlebars.json_ast_to_func(['<div class="dashboard-cover">		\n		<div id="carousel-dashboard" class="carousel slide">\n		  <!-- Indicators -->\n		  <ol class="carousel-indicators">\n		    <li data-target="#carousel-dashboard" data-slide-to="0" class="active"></li>\n		    <li data-target="#carousel-dashboard" data-slide-to="1"></li>\n		    <li data-target="#carousel-dashboard" data-slide-to="2"></li>\n		  </ol>\n\n		  <!-- Wrapper for slides -->\n		  <div class="carousel-inner">\n		    <div class="item active">\n		    	<div class="item-inner" id="slide-1">\n					<div class="dashboard-cover-text-1a">\n						welcome to bubble\n					</div>\n					<div class="dashboard-cover-text-1b">\n						Get involved.  Stay on top of your groups.  Collaborate.\n					</div>\n		    		<div class="dashboard-cover-text-1c">\n		    			<div class="pull-left" style="margin-right: 5px;">',[">","icon-small-reply-left"],'</div>\n						<div class="pull-left">Find and<br>create your<br>Bubbles</div>\n					</div>\n					<div class="dashboard-cover-text-1d">\n						<div class="pull-left" style="margin-right: 5px;">',[">","icon-small-reply-top"],'</div>\n						<div class="pull-left">Get updates from your<br>Bubbles (on your phone too!)</div>\n					</div>\n		    	</div>\n		    </div>\n		    <div class="item">\n		    	<div class="item-inner" id="slide-2">\n		    		<div class="dashboard-cover-text-1a">\n						go mobile\n					</div>\n					<div class="dashboard-cover-text-1b">\n						Download the free EB app on your phone\n					</div>\n					<div class="v-middle dashboard-icon-container">\n						<div class="v-inner dashboard-icon" id="dashboard-icon-2a">\n							<div>',[">","icon-android"],'</div>\n							<div class="dashboard-icon-text">Android</div>\n						</div>\n					</div>\n					<div class="v-middle dashboard-icon-container">\n						<div class="v-inner dashboard-icon" id="dashboard-icon-2b">\n							<div>',[">","icon-iOS"],'</div>\n							<div class="dashboard-icon-text">iOS</div>\n						</div>\n					</div>\n		    	</div>\n		    </div>\n		    <div class="item">\n		    	<div class="item-inner" id="slide-3">\n		    		<div class="dashboard-cover-text-1a">\n						explore emory\n					</div>\n					<div class="dashboard-cover-text-1b">\n						Check out professor reviews,<br>classifieds, and more\n					</div>\n					<div class="v-middle dashboard-icon-container">\n						<div class="v-inner dashboard-icon" id="dashboard-icon-3a">\n							<div>',[">","icon-official"],'</div>\n							<div class="dashboard-icon-text">Official<br>Events</div>\n						</div>\n						<div class="v-inner dashboard-icon" id="dashboard-icon-3b">\n							<div>',[">","icon-classifieds"],'</div>\n							<div class="dashboard-icon-text">Classifieds</div>\n						</div>\n						<div class="v-inner dashboard-icon" id="dashboard-icon-3c">\n							<div>',[">","icon-professorreviews"],'</div>\n							<div class="dashboard-icon-text">Professor<br>Reviews</div>\n						</div>\n						<div class="v-inner dashboard-icon" id="dashboard-icon-3d">\n							<div>',[">","icon-controversial"],'</div>\n							<div class="dashboard-icon-text">Controversial<br>Topics</div>\n						</div>\n					</div>\n		    	</div>\n		    </div>\n		  </div>\n		</div>\n	</div>\n\n',["#",[[0,"codeComment"]],['\n	<div class="dashboard-section-header">\n		',[">","icon-dashboard-big"],' dashboard\n	</div> \n\n	<div class="dashboard-item-container">\n		<div class="dashboard-item-container-inner">\n			<div class="dashboard-item-spacer">\n				&nbsp;\n			</div>\n			<div class="dashboard-item-outer">\n				<div class="pull-left v-middle dashboard-item item-1">\n					<div class="v-inner">\n						<div class="number">',["{",[[0,"numEvents"]]],'</div>\n						<div class="word">events</div>\n					</div>\n				</div>\n			</div>\n			<div class="dashboard-item-outer">\n				<div class="pull-left v-middle dashboard-item item-2">\n					<div class="v-inner">\n						<div class="number">',["{",[[0,"numUpdates"]]],'</div>\n						<div class="word">updates</div>\n					</div>\n				</div>\n			</div>\n			<div class="dashboard-item-outer">\n				<div class="pull-left v-middle dashboard-item item-3">\n					<div class="v-inner">\n						<div class="number">',["{",[[0,"numBubbles"]]],'</div>\n						<div class="word">bubbles</div>\n					</div>\n				</div>\n			</div>\n			<div class="dashboard-item-outer">\n				<div class="pull-left v-middle dashboard-item item-4">\n					<div class="v-inner">\n						<div class="number">',["{",[[0,"numInvites"]]],'</div>\n						<div class="word">invites</div>\n					</div>\n				</div>\n			</div>\n			<div class="dashboard-item-outer">\n				<div class="pull-left v-middle dashboard-item item-5">\n					<div class="v-inner">\n						<div class="number">',["{",[[0,"numComments"]]],'</div>\n						<div class="word">comments</div>\n					</div>\n				</div>\n			</div>\n			<div class="dashboard-item-outer">\n				<div class="pull-left v-middle dashboard-item item-6">\n					<div class="v-inner">\n						<div class="number">',["{",[[0,"numPosts"]]],'</div>\n						<div class="word">posts</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n']],'\n\n\n        <div class="visible-',["{",[[0,"numUpdates"]]],'">\n          <div class="dashboard-section-header">\n          	',["{",[[0,"pluralize"],[0,"numUpdates"],"update",""]],'\n          	<button class="std-btn-light pull-right clear-updates">clear all</button> \n          </div>\n          <div class="dashboard-updates">\n          	<div class="threeUpdates">\n                    <div></div>\n          		',["#",[[0,"each"],[0,"getUpdates"],3],["\n          			",[">","updateItem"],"\n          		"]],'\n          	</div>\n          	<div class="allUpdates visible-0">\n          		',["#",[[0,"each"],[0,"getUpdates"],0],["\n          			",[">","updateItem"],"\n          		"]],"\n          	</div>\n          	",["#",[[0,"if"],[0,"showMoreUpdates"],[0,"numUpdates"]],['\n          		<div class="dashboard-more-updates">\n          			+',["{",[[0,"pluralize"],[0,"numUpdatesMinusThree"],"update","more"]],"\n          		</div>\n          	"]],'\n          </div>\n        </div>\n        <div>\n          <div class="dashboard-section-header">\n            latest posts from explore\n          </div>\n          <div>\n            <div></div>\n            ',["#",[[0,"each"],[0,"getFiveExplorePosts"]],["\n              ",[">","listItem"],"\n            "]],"\n          </div>\n        </div>"]))}(),function(){Meteor._def_template("exploreAll",Handlebars.json_ast_to_func(["<h1>No Explores right now. Coming soon!!!"]))}(),function(){Meteor._def_template("loggedOut",Handlebars.json_ast_to_func(['<div class="bubble-page-content bubble-page-content-search">\n    <div class="bubble-list member-heading">\n      <div class="bubble-list-heading">\n        <h3 class="section-name pull-left">\n          <span>one more step</span>\n        </h3>\n      </div>\n    </div>\n    <div class="profile-content about-content">\n      To complete your logout, please close your browser window. (A temporary bug in our system makes this step necessary. We promise to fix the bug soon.)\n    </div>\n  </div>']))}(),function(){Meteor._def_template("loginPage",Handlebars.json_ast_to_func(['<form class="login" style="width:220px; margin:0 auto" >\n    <h1>Login<h1>\n    <div class="control-group">\n        <div class="controls">\n            <input name="username" id="username" type="text" placeholder="Username"/>\n        </div>\n    </div>\n\n    <div class="control-group" style="display:',["{",[[0,"isSignup"]]],'">\n        <div class="controls">\n            <input name="email" type="text" placeholder="Email"/>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <div class="controls">\n            <input name="password" type="password" placeholder="Password"/>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <div class="controls">\n            <input type="submit" value="',["{",[[0,"getSubmitText"]]],'" class="btn btn-primary"/>\n            ',["#",[[0,"codeComment"]],['\n              <button class="btn signup">',["{",[[0,"getSignupText"]]],"</button>\n            "]],'\n        </div>\n    </div>\n  </form>\n  <!--<img src="/img/User-Profile.jpg" id="tempprofile">-->\n  <img src="" id="profilePicture">\n  <img src="" id="retinaProfilePicture">']))}(),function(){Meteor._def_template("logoutDropdown",Handlebars.json_ast_to_func(['<a href="#" class="dropdown-toggle username-toggle" data-toggle="dropdown">\n    <span class="visible-desktop">',["{",[[0,"getUsername"]]]," ",[">","icon-arrow-down"],'</span>\n    <span class="visible-mobile">',[">","icon-arrow-down"],'</span>\n  </a>\n  <ul class="dropdown-menu dropdown-logout">\n    <li class="view-profile">\n      <div class="pull-left cb-icon-dropdown">',[">","icon-user"],'</div>\n      <div class="pull-left lbl">profile</div>\n    </li>  \n    <li class="support">\n      <div class="pull-left cb-icon-dropdown">',[">","icon-support"],'</div>\n      <div class="pull-left lbl">support</div>\n    </li>  \n    <li class="signout">\n      <div class="pull-left cb-icon-dropdown">',[">","icon-sign-out"],'</div>\n      <div class="pull-left lbl">sign out</div>\n    </li>   \n  </ul>']))}(),function(){Meteor._def_template("secretLogin",Handlebars.json_ast_to_func(['<div class="gif-loader-wrapper">',[">","gifLoaderSite"],"</div>"]))}(),function(){Meteor._def_template("welcomePage",Handlebars.json_ast_to_func([]))}(),function(){Meteor._def_template("onboarding",Handlebars.json_ast_to_func(['<div id="main">\n  ',["#",[[0,"if"],[0,"isLoggedIn"]],['\n    <div style="position: relative;" class="navbar navbar-onboarding">\n      <div class="navbar-inner">\n        <a class="cb-logo-main">\n          <span class="logo-main">',[">","icon-logo-main"],'</span>\n          <span class="logo-words">\n            <span class="left">emory</span><span class="right">bubble</span>\n          </span>\n        </a>\n      </div>\n    </div>\n  \n    <div class="onboarding">\n      <div class="heading-onboarding">\n        Hey ',["{",[[0,"getCurrentName"]]],', customize your profile\n      </div>\n  \n      <canvas id="main-canvas" width="160" height="160" class="visible-0"></canvas>\n      <canvas id="retina-canvas" width="320" height="320" class="visible-0"></canvas>\n  \n      <div class="cb-form-container" id="cb-form-container-onboarding">\n        <form class="cb-form cb-form-onboarding visible-0">\n          <div class="attach-files">\n            <label class="first no-typing less-formatting">add profile photo</label>\n  \n  \n  \n             <div class="attach-files no-padding">\n               <div id="drop_zone" class="drop-zone">\n                 <div class="dz-title">drag and drop</div>\n                 <div class="dz-subtitle">or click here</div>\n                 <ul class="nav nav-tabs small-boxes attachments-list" id="list"></ul>\n                 <input class="file-chooser-invisible" name="filesToUpload[]" id="filesToUpload" type="file" multiple="">\n               </div>\n             </div>\n             <div class="crop-container" style="text-align: center;">\n               <img class="crop"></img>\n             </div>\n  \n          </div>\n          <label class="no-typing margin-top-35">Read our <a onclick="window.open(\'/pdf/termsOfUse.pdf\', \'_blank\')">terms of use</a>, <a onclick="window.open(\'/pdf/privacyPolicy.pdf\', \'_blank\')">privacy policy</a>, and our <a onclick="window.open(\'/pdf/ferpaNotice.pdf\', \'_blank\')">FERPA notice</a>.</label>\n    \n          <div id="accept-terms" class="accept-terms invitee-container ',["{",[[0,"acceptTermsSelected"]]],'">\n            <div class="invitee-pic-container">\n              <span class="fill cb-icon-bubble-big">',[">","icon-bubble-big"],'</span>\n              <div class="pic-preview-wrapper-outer">\n                <div class="pic-preview-wrapper-middle">\n                  <div class="pic-preview-wrapper-inner-invitee accept-check-container">\n                    <span class="invisible-false cb-icon-check">',[">","icon-check"],'</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class="v-middle">\n              <div class="v-inner">\n                <span class="pull-left invitee-text">\n                  Click here to agree to the Terms of Use and Privacy Policy.\n                </span>\n              </div>\n            </div>\n          </div>\n    \n    \n          <hr>\n    \n          <div class="cb-submit-container">\n            <button type="submit" class="pull-right std-btn-form cb-submit">\n              <span class="words-main">submit</span>\n              <span class="words-error">Please agree to the Terms of Use and Privacy Policy</span>\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  '],['\n    <div class="gif-loader-wrapper">',[">","gifLoaderSite"],"</div>\n  "]],"\n</div>"]))}(),function(){Meteor._def_template("userlog",Handlebars.json_ast_to_func(['<div class="control-group">\n    <label class="control-label" for="title">Search</label>\n    <div class="controls">\n      <input class="search-text" name="searchText" type="text" placeholder="Name"/>\n    </div>\n  </div>\n  <hr>\n\n  <h4>Number of Users Logged In More Than Once</h4>\n  Count: ',["{",[[0,"countUsersWithMultipleLogin"]]],"\n  <hr>\n\n  <h4>Users Login Count</h4>\n  ",["#",[[0,"each"],[0,"getUsersWithMultipleLogin"]],["\n    ",["{",[[0,"getUsername"]]],":",["{",[[0,"getLoginCount"]]],"\n    <br />\n  "]],"\n  <hr>\n  \n  <h4>Overall UserLog</h4>\n  ",["#",[[0,"each"],[0,"getUserlogs"]],["\n    <b>Username: ",["{",[[0,"getUsername"]]],"</b>\n    <p>\n    ",["#",[[0,"each"],[0,"groupByPage"]],["\n      Page Name : ",["{",[[0,"getPageName"]]],"\n      <p>\n      Page Count: ",["{",[[0,"getPageCount"]]],"\n\n    "]],"\n    <hr>\n  "]]]))}(),function(){Meteor.startup(function(){document.body.appendChild(Spark.render(Meteor._def_template(null,Handlebars.json_ast_to_func([[">","googleAnalytics"],"\n   \n  ",["#",[[0,"unless"],[0,"isLoggedIn2"]],['\n    <div class="gif-loader-wrapper">',[">","gifLoaderSite"],"</div>\n  "]],'\n\n  <div class="viewport">\n    <div class="frame">\n      ',["#",[[0,"if"],[0,"isLoggedIn"]],["\n        ",["#",[[0,"unless"],[0,"isOnboarding"]],["\n          ",[">","sidebar"],"\n        "]],"\n      "]],'\n      <div class="view">\n        ',["#",[[0,"if"],[0,"isLoggedIn"]],["\n          ",["#",[[0,"unless"],[0,"isOnboarding"]],["\n            ",[">","header"],"\n          "]],"\n        "]],'\n        <div id="main" class="row-fluid">\n          ',[">","errors"],"\n          ",["{",[[0,"renderPage"]]],"\n        </div>\n      </div>\n    </div>\n  </div>"]))))})}(),function(){ownsUpdate=function(e,t){return t&&t.invokerId===e},ownsProfile=function(e,t){return"4"==Meteor.user().userType||e===t._id},ownsPost=function(e,t){if(t.bubbleId!==void 0){var n=Bubbles.findOne(t.bubbleId);return"3"==Meteor.user().userType||t.author==Meteor.user().username||_.contains(n.users.admins,Meteor.userId())}return"3"==Meteor.user().userType||t.userId==Meteor.userId()},ownsComment=function(e,t){var n=Posts.findOne(t.postId),i=Bubbles.findOne(n.bubbleId);if(i){var o=i.users.admins;if(Meteor.userId()){var e=Meteor.userId();return"3"==Meteor.user().userType||e==n.userId||e==t.userId||_.contains(o,e)?!0:!1}}},ownsBubble=function(e,t){return _.contains("3"==Meteor.user().userType||t.users.admins,Meteor.userId())},isConnectedToBubble=function(e,t){if(Meteor.userId()){var e=Meteor.userId(),n=Bubbles.findOne(t._id);return"3"==Meteor.user().userType||_.contains(n.users.applicants,e)||_.contains(n.users.invitees,e)||_.contains(n.users.members,e)||_.contains(n.users.admins,e)?!0:!1}},ownsExplore=function(){return!0},exploreAdmin=function(e,t){return Explore.findOne(t._id),"3"==Meteor.user().userType}}(),function(){Template.generateForm.created=function(){this.validateForm=function(){for(var e=this.data.validate,t=0,n=0;e.length>n;n++){var i=$("[name="+e[n]+"]"),o=i.prop("tagName");if("INPUT"==o)var s=i.val();else if("DIV"==o)var s=i.html().trim().replace("<br>","").replace('<span class="wysiwyg-placeholder">Type here...</span>',"");else var s="";""==s&&t++,0==t?($(".cb-submit").prop("disabled",!1),$(".cb-submit").removeClass("ready-false")):($(".cb-submit").prop("disabled",!0),$(".cb-submit").addClass("ready-false"))}}},Template.generateForm.rendered=function(){this.validateForm()},Template.generateForm.events({"keyup, propertychange, input, paste, click, mouseout li":function(e,t){t.validateForm()}})}(),function(){Template.formElementsBubble.events({"click .select-bubble-type > .normal":function(e){e.preventDefault(),$("input[name=bubbleType]").val("normal"),selectedBubbleType="normal",$(".select-bubble-type > .super").removeClass("active-true"),$(".select-bubble-type > .normal").addClass("active-true")},"click .select-bubble-type > .super":function(e){e.preventDefault(),$("input[name=bubbleType]").val("super"),$(".select-bubble-type > .normal").removeClass("active-true"),$(".select-bubble-type > .super").addClass("active-true")}}),Template.formElementsBubble.rendered=function(){var e=$("[name=category]").val();$("[name="+e+"]").addClass("active"),$(".categoryBox").click(function(){var e=$(this).attr("name");$("[name=category]").val(e),$(".categoryBox").removeClass("active"),$(this).addClass("active")})}}(),function(){Template.formElementsFileCreate.rendered=function(){},Template.formElementsFileCreate.helpers({"submit form":function(e){e.preventDefault(),alert("Hi"),console.log("File submitted.")}})}(),function(){Template.wysiwyg2.rendered=function(){$(".wysiwyg").wysiwyg()},Template.wysiwyg2.events({"click .wysiwyg":function(){$(".wysiwyg").children(".wysiwyg-placeholder").remove()}}),Template.wysiwyg2.helpers({isBubble:function(){return this.bubbleType!==void 0?!0:!1},isPost:function(){return this.postType!==void 0?!0:!1}})}(),function(){Template.bubbleAdminsList.helpers({getAdmins:function(){var e=this.users.admins;return Meteor.users.find({_id:{$in:e}}).fetch()}})}(),function(){Template.bubbleApplicantsList.helpers({getApplicants:function(){var e=this.users.applicants;return Meteor.users.find({_id:{$in:e}}).fetch()}})}(),function(){Template.bubbleMembersPage.created=function(){virtualPage=0,max_scrolltop=700,Session.set("isLoading",!0)},Template.bubbleMembersPage.rendered=function(){var e=window.location.pathname.split("/")[2];Meteor.subscribe("singleBubble",e,function(){Session.set("isLoading",!1)}),console.log(e);var t=Bubbles.findOne({_id:e}),n=t.users.admins,i=t.users.members,o=t.users.applicants,s=t.users.invitees,r=o.concat(n,i,s);Meteor.subscribe("findUsersById",r.slice(0,20));var a=Session.get("selectedUserIdList"),l=[];_.each(a,function(e){l.push(e)});var c=Bubbles.findOne({_id:Session.get("currentBubbleId")});_.each(c.users.admins,function(e){l.push(e)}),_.each(c.users.applicants,function(e){l.push(e)}),_.each(c.users.members,function(e){l.push(e)}),_.each(c.users.invitees,function(e){l.push(e)}),Session.set("selectedUserIdList",l),$("#main").scroll(function(){if(console.log("Scrolltop, mainheight, documentheight, windowheight: ",$("#main").scrollTop(),$("#main").height(),$(document).height(),$(window).height()),$("#main").scrollTop()>max_scrolltop){max_scrolltop=$("#main").scrollTop()+200,virtualPage+=1;var e=r.slice(5*virtualPage,5*(virtualPage+1));Meteor.subscribe("findUsersById",e),console.log("Paginating: ",5*virtualPage,5*(virtualPage+1)),console.log("End of Page")}})},Template.bubbleMembersPage.helpers({applicantsHasMembers:function(){return 0==this.users.applicants.length?!1:!0},adminsHasMembers:function(){return 0==this.users.admins.length?!1:!0},membersHasMembers:function(){return 0==this.users.members.length?!1:!0},inviteesHasMembers:function(){return 0==this.users.invitees.length?!1:!0}})}(),function(){Template.bubbleInvitation.created=function(){findResponse=!1,rejectList=[];var e=Bubbles.findOne({_id:Session.get("currentBubbleId")}).users;rejectList=rejectList.concat(e.invitees,e.admins,e.members,e.invitees,e.applicants),rejectList.push(Meteor.userId()),mto=[],Session.set("potentialUserIdList",[])},Template.bubbleInvitation.rendered=function(){Meteor.subscribe("findUsersById",Session.get("potentialUserIdList")),Session.set("currentlySearching","true"),$(".search-text").unbind("propertychange keyup input paste"),$(".search-text").bind("propertychange keyup input paste",function(){Meteor.clearTimeout(mto),mto=Meteor.setTimeout(function(){Meteor.call("search_users",$(".search-text").val(),function(e,t){e?console.log(e):(console.log("response"),Session.set("potentialUserIdList",t))})},500)})},Template.bubbleInvitation.helpers({findUsers:function(){Session.get("selectedUsername").length>3&&(console.log("searching users"),Meteor.call("search_users",Session.get("selectedUsername"),function(e,t){e?console.log(e):(console.log(t[0]),Session.set("potentialUserIdList",t),findResponse=!0)}))},getFoundUsers:function(){return Meteor.users.find({_id:{$in:Session.get("potentialUserIdList"),$nin:rejectList}},{limit:6})},hasSearchResponse:function(){return findResponse?(console.log("hasSearchResponse: true"),!0):(console.log("hasSearchResponse: false"),!1)},getInvitees:function(){return this.users.invitees},potentialInvitees:function(){return Session.get("inviteeList"+Session.get("currentBubbleId"))},hasSearchText:function(){return Session.get("selectedUsername")},inIfSearching:function(){return Session.get("currentlySearching")?"in":""},returnFalse:function(){return!1},getProfilePicture:function(){var e=Meteor.users.findOne({_id:Session.get(this._id)});return e.profilePicture},getNumSelected:function(){return Session.get("inviteeList"+Session.get("currentBubbleId"))?Session.get("inviteeList"+Session.get("currentBubbleId")).length:0},selected:function(){return inviteeIdList=_.map(Session.get("inviteeList"+Session.get("currentBubbleId")),function(e){return Meteor.users.findOne({username:e})?Meteor.users.findOne({username:e})._id:void 0}),_.contains(inviteeIdList,this._id)},numPosts:function(){var e=this._id,t=Posts.find({userId:e}).count();return t},userId:function(){return this._id}}),Template.bubbleInvitation.events({"click .shortlist-invitee":function(e){e.preventDefault();var t=Session.get("inviteeList"+Session.get("currentBubbleId"));t||(t=[]),_.contains(t,this.username)||(t.push(this.username),$("#"+this._id).addClass("selected")),Session.set("inviteeList"+Session.get("currentBubbleId"),t)},"click .remove-invitee":function(e){e.preventDefault();var t=""+this,n=Session.get("inviteeList"+Session.get("currentBubbleId"));n=_.reject(n,function(e){return e==t}),Session.set("inviteeList"+Session.get("currentBubbleId"),n)},"click .add-users":function(e){e.preventDefault(),Session.set("currentlySearching",void 0),usernameList=Session.get("inviteeList"+Session.get("currentBubbleId")),userIdList=[],_.each(usernameList,function(e){tmp=Meteor.users.findOne({username:e})._id,userIdList.push(tmp),Meteor.call("sendInvitedEmail",Meteor.userId(),tmp,Session.get("currentBubbleId"))});var t=Bubbles.findOne(Session.get("currentBubbleId"));"super"==t.bubbleType?Bubbles.update({_id:t._id},{$addToSet:{"users.members":{$each:userIdList}}}):Meteor.call("addInvitee",Session.get("currentBubbleId"),userIdList),"super"==this.bubbleType?_.each(userIdList,function(e){createNewMemberUpdate(e)}):createInvitationUpdate(userIdList),Session.set("selectedUsername",void 0),Session.set("inviteeList"+Session.get("currentBubbleId"),[]),Session.set(Session.get("currentBubbleId")+(""+this),void 0)}})}(),function(){Template.bubbleInviteesList.helpers({getInvitees:function(){var e=this.users.invitees;return Meteor.users.find({_id:{$in:e}}).fetch()}})}(),function(){Template.bubbleMembersList.helpers({getMembers:function(){var e=this.users.members;return Meteor.users.find({_id:{$in:e}}).fetch()}})}(),function(){Template.bubbleDiscussionPage.helpers({getDiscussionPosts:function(){var e=window.location.pathname,t=e.split("/"),n=t[2];return Posts.find({bubbleId:n,postType:"discussion"},{sort:{lastCommentTime:-1}})}}),Template.bubbleDiscussionPage.rendered=function(){var e=window.location.pathname,t=e.split("/"),n=t[2];discussionsHandle=Meteor.subscribe("discussions",n,function(){Session.set("isLoading",!1)})},Template.bubbleDiscussionPage.created=function(){Session.set("isLoading",!0)}}(),function(){Template.bubbleEventPage.helpers({getEventPosts:function(){var e=window.location.pathname,t=e.split("/"),n=t[2];return Posts.find({bubbleId:n,postType:"event",dateTime:{$gt:moment().add("hours",-4).valueOf()}},{sort:{dateTime:1}})}}),Template.bubbleEventPage.rendered=function(){var e=window.location.pathname,t=e.split("/"),n=t[2];eventsHandle=Meteor.subscribe("events",n,function(){Session.set("isLoading",!1)})},Template.bubbleEventPage.created=function(){Session.set("isLoading",!0)}}(),function(){Template.bubbleFilePage.helpers({getFilePosts:function(){var e=window.location.pathname,t=e.split("/"),n=t[2];return Posts.find({bubbleId:n,postType:"file"},{sort:{lastDownloadTime:-1}})}}),Template.bubbleFilePage.rendered=function(){var e=window.location.pathname,t=e.split("/"),n=t[2];filesHandle=Meteor.subscribe("files",n,function(){Session.set("isLoading",!1)})},Template.bubbleFilePage.created=function(){Session.set("isLoading",!0)}}(),function(){referenceDateTime=moment().add("hours",-4).valueOf(),Template.bubblePage.created=function(){Session.set("isLoading",!0);
var e=Bubbles.findOne(Session.get("currentBubbleId"));void 0===e||_.contains(e.users.admins,Meteor.userId())||_.contains(e.users.members,Meteor.userId())||Meteor.Router.to("bubblePublicPage",e._id)},Template.bubblePage.rendered=function(){var e=window.location.pathname.split("/")[2];Meteor.subscribe("singleBubble",e,function(){Session.set("isLoading",!1)}),Bubbles.findOne({_id:e}),Meteor.subscribe("bubbleHomeDiscussions",e),Meteor.subscribe("bubbleHomeEvents",e),Meteor.subscribe("bubbleHomeFiles",e),Meteor.subscribe("bubbleHomeUpdates",e)},Template.bubblePage.helpers({eventsCount:function(){return Meteor.call("getNumOfEvents","event")},discussionsCount:function(){return Posts.find({bubbleId:Session.get("currentBubbleId"),postType:"discussion"}).count()-3},filesCount:function(){return Posts.find({bubbleId:Session.get("currentBubbleId"),postType:"file"}).count()-3},hasMoreEvents:function(){var e=Posts.find({bubbleId:Session.get("currentBubbleId"),postType:"event",dateTime:{$gt:referenceDateTime}}).count()-3;return e>0?!0:!1},numMoreEvents:function(){var e=Posts.find({bubbleId:Session.get("currentBubbleId"),postType:"event",dateTime:{$gt:referenceDateTime}}).count()-3;return e},hasMoreDiscussions:function(){var e=Posts.find({bubbleId:Session.get("currentBubbleId"),postType:"discussion"}).count()-3;return e>0?!0:!1},numMoreDiscussionsCount:function(){var e=Posts.find({bubbleId:Session.get("currentBubbleId"),postType:"discussion"}).count()-3;return e},hasMoreFiles:function(){var e=Posts.find({bubbleId:Session.get("currentBubbleId"),postType:"file"}).count()-3;return e>0?!0:!1},filePosts:function(){return Posts.find({bubbleId:Session.get("currentBubbleId"),postType:"file"},{limit:3}).fetch()},getNumUpdates:function(){return Session.get("numUpdates")},showMoreUpdates:function(e){return 0!=Session.get("numUpdates")&&e>Session.get("numUpdates")?!0:!1}}),Template.bubblePage.events({"click .clear-updates":function(){var e=Updates.find({bubbleId:Session.get("currentBubbleId"),userId:Meteor.userId(),read:!1}).fetch();_.each(e,function(e){Meteor.call("setRead",e)})},"click .more-updates":function(){Session.set("numUpdates",0),console.log(Session.get("numUpdates"))}})}(),function(){Template.categorySelector.helpers({checkSelected:function(e){if("bubbleSubmit"!=Meteor.Router.page()){var t=Bubbles.findOne(Session.get("currentBubbleId"));if(t&&e==t.category)return"selected"}return!1},getCategories:function(){return categories}})}(),function(){Template.exploreDiscussionPage.helpers({getDiscussionPosts:function(){return Posts.find({bubbleId:Session.get("currentBubbleId"),postType:"discussion"},{limit:discussionsHandle.limit()})}}),Template.exploreDiscussionPage.rendered=function(){$(window).scroll(function(){$(window).scrollTop()==$(document).height()-$(window).height()&&"bubbleDiscussionPage"==Meteor.Router._page&&this.discussionsHandle.loadNextPage()})}}(),function(){Template.exploreEventPage.helpers({getEventPosts:function(){return Posts.find({bubbleId:Session.get("currentBubbleId"),postType:"event",dateTime:{$gt:moment().add("hours",-4).valueOf()}},{limit:eventsHandle.limit(),sort:{dateTime:1}})}}),Template.exploreEventPage.rendered=function(){$(window).scroll(function(){$(window).scrollTop()==$(document).height()-$(window).height()&&"bubbleEventPage"==Meteor.Router._page&&this.discussionsHandle.loadNextPage()})}}(),function(){referenceDateTime=moment().add("hours",-4).valueOf(),Template.explorePage.created=function(){Session.set("isLoading",!0),max_scrolltop=100,virtualPage=0;var e=window.location.pathname.split("/")[2];postIds=[],Meteor.subscribe("currentExplorePostIds",e,function(){console.log("Explore Page Created: ",e,Posts.find({exploreId:e}).fetch()),posts=Posts.find({exploreId:e}).fetch(),postIds=_.pluck(posts,"_id"),virtualPagePostIds=postIds.slice(0,10)})},Template.explorePage.rendered=function(){var e=window.location.pathname.split("/")[2];console.log("Explore Page Rendered: ",e,Posts.find({exploreId:e}).fetch()),Meteor.subscribe("currentExplorePostIds",e,function(){console.log("Explore Page Created: ",e,Posts.find({exploreId:e}).fetch()),posts=Posts.find({exploreId:e}).fetch(),postIds=_.pluck(posts,"_id"),virtualPagePostIds=postIds.slice(0,10),Meteor.subscribe("findExplorePostsById",virtualPagePostIds,function(){Session.set("isLoading",!1),console.log("DONE")})}),$("#main").scroll(function(){if(console.log("Scrolltop, mainheight, documentheight, windowheight: ",$("#main").scrollTop(),$("#main").height(),$(document).height(),$(window).height()),$("#main").scrollTop()>max_scrolltop){max_scrolltop=$("#main").scrollTop()+200,virtualPage+=1;var e=postIds.slice(10*virtualPage,10*(virtualPage+1));Meteor.subscribe("findExplorePostsById",e)}})},Template.explorePage.helpers({currentExplore:function(){var e=Session.get("currentExploreId"),t=Explores.findOne({_id:e});return t},eventsCount:function(){return Meteor.call("getNumOfEvents","event")},discussionsCount:function(){return Posts.find({bubbleId:Session.get("currentBubbleId"),postType:"discussion"}).count()-3},filesCount:function(){return Posts.find({bubbleId:Session.get("currentBubbleId"),postType:"file"}).count()-3},hasMoreEvents:function(){var e=Posts.find({bubbleId:Session.get("currentBubbleId"),postType:"event",dateTime:{$gt:referenceDateTime}}).count()-3;return e>0?!0:!1},hasMoreDiscussions:function(){var e=Posts.find({bubbleId:Session.get("currentBubbleId"),postType:"discussion"}).count()-3;return e>0?!0:!1},hasMoreFiles:function(){var e=Posts.find({bubbleId:Session.get("currentBubbleId"),postType:"file"}).count()-3;return e>0?!0:!1},filePosts:function(){return Posts.find({bubbleId:Session.get("currentBubbleId"),postType:"file"},{limit:3}).fetch()},posts:function(){for(var e=Explores.findOne(Session.get("currentExploreId")),t=Posts.find({exploreId:Session.get("currentExploreId"),postType:e.exploreType},{sort:{lastCommentTime:-1}}).fetch(),n=[],i=0;t.length>i;i++){var o=t[i].postAsId;(Bubbles.find({_id:o}).count()>0||Meteor.users.find({_id:o}).count()>0)&&n.push(t[i]._id)}return Posts.find({_id:{$in:n},postType:e.exploreType},{sort:{lastCommentTime:-1}})}}),Template.explorePage.events({"btn .clear-updates":function(){Meteor.call("clearUpdates",Session.get("currentBubbleId"))}})}(),function(){function e(e){return console.log("File type: ",e),e.match("vnd.*")||e.match("csv.*")||e.match("pdf.*")||e.match("zip.*")||e.match("postscript.*")||e.match("msword.*")||e.match("plain.*")||e.match("image.*")?!0:!1}function t(t){for(var n=0;t.length>n;n++)discussionNewAttachments.push(t[n]);console.log(discussionNewAttachments),discussionNewAttachments.length>0&&($(".cb-explore-editDiscussion-form > .paperclip-attach-files").hide(),$(".cb-explore-editDiscussion-form > .paperclip-attach-files > .paperclip-attach > .cb-paperclip-lbl").hide(),$(".cb-explore-editDiscussion-form > .paperclip-attach-files > .paperclip-attach > .cb-icon-attachment").hide(),$(".cb-explore-editDiscussion-form > .paperclip-attach-files > .paperclip-attach > .file-chooser-invisible").width(1),$(".cb-explore-editDiscussion-form > .paperclip-attach-files > .paperclip-attach > .file-chooser-invisible").height(1)),$(".cb-explore-editDiscussion-form > .discussion-attachments > .paperclip-attach > .attachments-list").html("");for(var n=0;discussionAttachments.length>n;n++)-1==discussionDeletedAttachmentIds.indexOf(discussionAttachments[n]._id)&&(console.log("Attachment: ",discussionAttachments[n].name),$(".cb-explore-editDiscussion-form > .discussion-attachments > .paperclip-attach > .attachments-list").append('<li><span class="attachment-cancel-icon" id="'+discussionAttachments[n]._id+'"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><circle fill-rule="evenodd" clip-rule="evenodd" cx="8" cy="8" r="8"/><g><rect x="7.001" y="4" transform="matrix(-0.7151 -0.699 0.699 -0.7151 8.1297 19.3133)" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="2" height="8"/><rect x="7" y="4" transform="matrix(-0.6989 0.7152 -0.7152 -0.6989 19.3134 7.869)" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="2" height="8"/></g></span><span class="attachment-list-filename">'+discussionAttachments[n].name+"</span></li>"),$(".cb-explore-editDiscussion-form > .discussion-attachments > .paperclip-attach > .attachments-list > li > #"+discussionAttachments[n]._id).click(function(){discussionDeletedAttachmentIds.push(this.id),$(this).parent().remove()}));for(var i,n=0;i=discussionNewAttachments[n];n++)if(e(i.type)){var o=new FileReader;o.onload=function(e,t,n){return function(){$(".cb-explore-editDiscussion-form > .discussion-attachments > .paperclip-attach > .attachments-list").append('<li><span class="attachment-cancel-icon" id="file-'+n+'"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><circle fill-rule="evenodd" clip-rule="evenodd" cx="8" cy="8" r="8"/><g><rect x="7.001" y="4" transform="matrix(-0.7151 -0.699 0.699 -0.7151 8.1297 19.3133)" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="2" height="8"/><rect x="7" y="4" transform="matrix(-0.6989 0.7152 -0.7152 -0.6989 19.3134 7.869)" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="2" height="8"/></g></span><span class="attachment-list-filename">'+escape(e.name).replace(/%20/g,"_")+"</span></li>"),$(".cb-explore-editDiscussion-form > .discussion-attachments > .paperclip-attach > .attachments-list > li > #file-"+n).click(function(){var e=this.id.split("-");discussionDeletedNewAttachmentIndices.push(parseInt(e[1])),$(this).parent().remove()})}}(i,discussionNewAttachments,n),o.readAsDataURL(i)}else{console.log("Else");var o=new FileReader;o.onload=function(){return function(){}}(i),o.readAsDataURL(i)}}function n(){for(var t=[],n=0;discussionNewAttachments.length>n;n++)-1==discussionDeletedNewAttachmentIndices.indexOf(n)&&e(discussionNewAttachments[n].type)&&t.push(discussionNewAttachments[n]);var i=[];console.log(discussionDeletedAttachmentIds);for(var o=0;discussionDeletedAttachmentIds.length>o;o++)Posts.remove({_id:discussionDeletedAttachmentIds[o]});console.log(discussionDeletedAttachmentIds),console.log(discussionDeletedAttachmentIds);for(var n=0;discussionAttachmentIds.length>n;n++)console.log("Remove or not: ",discussionAttachmentIds[n],discussionDeletedAttachmentIds.indexOf(discussionAttachmentIds[n])),-1==discussionDeletedAttachmentIds.indexOf(discussionAttachmentIds[n])&&(console.log("Not removing: ",discussionAttachmentIds[n]),i.push(discussionAttachmentIds[n]));console.log(i),discussionAttachments=[],discussionDeletedAttachmentIndices=[];var s=Session.get("currentPostId");Session.get("currentExploreId");var r={name:$(".cb-explore-editDiscussion-form > .discussionTitle").val(),body:$(".cb-explore-editDiscussion-form > .wysiwyg_group").find("[name=body]").html(),postAsType:$(".cb-explore-editDiscussion-form .post-as-type").val(),postAsId:$(".cb-explore-editDiscussion-form .post-as-id").val(),children:i};console.log(r),updatePostWithAttachments(s,r,t),discussionDeletedAttachmentIndices=[],discussionDeletedAttachmentIds=[],discussionNewAttachments=[],discussionDeletedNewAttachmentIndices=[]}Template.exploreDiscussionEdit.helpers({getCurrentUserId:function(){return Meteor.userId()},getAdminBubbles:function(){return adminBubblesCount=Bubbles.find({"users.admins":Meteor.userId()}).count(),adminBubbles=Bubbles.find({"users.admins":Meteor.userId()}),adminBubblesCount>0?adminBubbles:!1}}),Template.exploreDiscussionEdit.created=function(){this.validateForm=function(){var e=0;$("#cb-form-container-edit-discussion .required").each(function(){$(this).hasClass("wysiwyg")||""!==$(this).val()||void 0==$(this).attr("name")?$(this).hasClass("wysiwyg")&&""==$(this).html().trim().replace("<br>","").replace('<span class="wysiwyg-placeholder">Type here...</span>',"")&&e++:e++,0==e?($("#cb-form-container-edit-discussion .cb-submit").prop("disabled",!1),$("#cb-form-container-edit-discussion .cb-submit").removeClass("ready-false")):($("#cb-form-container-edit-discussion .cb-submit").prop("disabled",!0),$("#cb-form-container-edit-discussion .cb-submit").addClass("ready-false"))})},console.log("Children: ",this.data.children),console.log($(".cb-editDiscussion-form")),discussionAttachmentIds=this.data.children,discussionAttachments=Posts.find({_id:{$in:discussionAttachmentIds}}).fetch(),discussionDeletedAttachmentIndices=[],discussionDeletedAttachmentIds=[],discussionNewAttachments=[],discussionDeletedNewAttachmentIndices=[]},Template.exploreDiscussionEdit.rendered=function(){this.validateForm(),$(".cb-explore-editDiscussion-form > .discussion-attachments > .paperclip-attach > .attachments-list > li").remove(),discussionAttachmentIds=this.data.children,discussionAttachments=Posts.find({_id:{$in:discussionAttachmentIds}}).fetch();for(var e=0;discussionAttachments.length>e;e++)console.log("Existing Attachment: ",discussionAttachments[e]._id),$(".cb-explore-editDiscussion-form > .discussion-attachments > .paperclip-attach > .attachments-list").append('<li><span class="attachment-cancel-icon" id="'+discussionAttachments[e]._id+'"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><circle fill-rule="evenodd" clip-rule="evenodd" cx="8" cy="8" r="8"/><g><rect x="7.001" y="4" transform="matrix(-0.7151 -0.699 0.699 -0.7151 8.1297 19.3133)" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="2" height="8"/><rect x="7" y="4" transform="matrix(-0.6989 0.7152 -0.7152 -0.6989 19.3134 7.869)" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="2" height="8"/></g></span><span class="attachment-list-filename">'+discussionAttachments[e].name+"</span></li>"),$(".cb-explore-editDiscussion-form > .discussion-attachments > .paperclip-attach > .attachments-list > li > #"+discussionAttachments[e]._id).click(function(){discussionDeletedAttachmentIds.push(this.id),console.log("Removing: ",this.id),$(this).parent().remove()})},Template.exploreDiscussionEdit.events({"click .post-as-button":function(e){e.preventDefault()},"keyup .required, propertychange .required, input .required, paste .required, click button":function(e,t){t.validateForm()}}),Template.exploreDiscussionEdit.events({"click .cb-explore-editDiscussion-form > .cb-submit-container > .cb-submit":function(e){e.preventDefault(),e.stopPropagation(),_gaq.push(["_trackEvent","Post","Create Discussion",$(e.target).find("[name=name]").val()]),n()},"change .cb-explore-editDiscussion-form > .paperclip-attach-files > .paperclip-attach > .file-chooser-invisible":function(e){console.log("Paperclip attach"),e.stopPropagation(),e.preventDefault(),t(e.target.files)}})}(),function(){Template.exploreEditEvent.helpers({getCurrentUserId:function(){return Meteor.userId()},getAdminBubbles:function(){return adminBubblesCount=Bubbles.find({"users.admins":Meteor.userId()}).count(),adminBubbles=Bubbles.find({"users.admins":Meteor.userId()}),adminBubblesCount>0?adminBubbles:!1}}),Template.exploreEditEvent.created=function(){this.validateForm=function(){var e=0;$("#cb-form-container-edit-event .required").each(function(){$(this).hasClass("wysiwyg")||""!==$(this).val()||void 0==$(this).attr("name")?$(this).hasClass("wysiwyg")&&""==$(this).html().trim().replace("<br>","").replace('<span class="wysiwyg-placeholder">Type here...</span>',"")&&e++:e++,0==e?($("#cb-form-container-edit-event .cb-submit").prop("disabled",!1),$("#cb-form-container-edit-event .cb-submit").removeClass("ready-false")):($("#cb-form-container-edit-event .cb-submit").prop("disabled",!0),$("#cb-form-container-edit-event .cb-submit").addClass("ready-false"))})}},Template.exploreEditEvent.rendered=function(){768>$(window).width()?Session.set("DisableCrop","1"):Session.set("DisableCrop",""),this.validateForm();var e=this.data,t=new Date(e.dateTime),n=t.getHours()+":"+t.getMinutes(),i=t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear();if($(".cb-explore-edit-event-form > .first > .title").val(e.name),$(".cb-explore-edit-event-form > .first > .location").val(e.location),$(".cb-explore-edit-event-form > .cb-form-row > .date").val(i),$(".cb-explore-edit-event-form > .body").val(e.body),$("#eventPhoto").attr("src",this.eventPhoto),$("eventRetinaPhoto").attr("src",this.eventRetinaPhoto),editEventMainURL=this.eventPhoto,editEventRetinaURL=this.eventRetinaPhoto,n){var o=parseInt(n[0]);n.length>9||!o?$(".cb-explore-edit-event-form > .cb-form-row > .time").val(""):(formatedTime=moment(n,"h:mm a").format("h:mm a"),$(".cb-explore-edit-event-form > .cb-form-row > .time").val(formatedTime))}$(".date-picker").glDatePicker({cssName:"flatwhite",allowMonthSelect:!1,allowYearSelect:!1}),$(".cb-explore-edit-event-form > .cb-form-row > .time").change(function(){console.log("Time changing...");var e=$(".cb-explore-edit-event-form > .cb-form-row > .time").val();if(e){var t=parseInt(e[0]);e.length>9||!t?$(".cb-explore-edit-event-form > .cb-form-row > .time").val(""):(formatedTime=moment(e,"h:mm a").format("h:mm a"),console.log("Formatted time: ",formatedTime),$(".cb-explore-edit-event-form > .cb-form-row > .time").val(formatedTime))}})},Template.exploreEditEvent.events({"click .post-as-button":function(e){e.preventDefault()},"keyup .required, propertychange .required, input .required, paste .required, click button":function(e,t){t.validateForm()}}),Template.exploreEditEvent.events({"click .cb-explore-edit-event-form > .cb-submit-container > .cb-submit":function(e){e.preventDefault(),_gaq.push(["_trackEvent","Post","Create Event",$(e.target).find("[name=name]").val()]);var t=$(".cb-explore-edit-event-form > .cb-form-row > .date").val()+" "+$(".cb-explore-edit-event-form > .cb-form-row > .time").val(),n={author:Meteor.userId(),dateTime:moment(t).valueOf(),location:$(".cb-explore-edit-event-form > .first > .location").val(),name:$(".cb-explore-edit-event-form > .first > .title").val(),body:$(".cb-explore-edit-event-form > .body").val(),postAsType:$(".cb-explore-edit-event-form .post-as-type").val(),postAsId:$(".cb-explore-edit-event-form .post-as-id").val()};console.log(n),console.log("event attributes: "+JSON.stringify(n));var i=Session.get("currentPostId"),o=Session.get("currentExploreId");Posts.update(i,{$set:n},function(e){e?throwError(e.reason):(createEditEventUpdate(Meteor.userId(),i),Meteor.Router.to("explorePostPage",o,i))})},"dragover .cb-explore-edit-event-form > .attach-files > .drop-zone":function(e){console.log("Dragover"),e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},"change .cb-explore-edit-event-form .attach-files > .drop-zone > .file-chooser-invisible":function(e){if(files=e.target.files,files.length>1)error=new Meteor.Error(422,"Please choose only one image as the bubble image."),throwError(error.reason);else if(f=files[0],f.type.match("image.*")){var t=new FileReader,n=document.getElementById("edit-event-main-canvas"),i=document.getElementById("edit-event-retina-canvas"),o=n.getContext("2d"),s=i.getContext("2d"),r=new Image,a=68,l=46;t.onload=function(){return function(e){$("#cb-form-container-edit-event > .cb-form > .attach-files > .drop-zone").hide(),$("#cb-form-container-edit-event > .cb-form > .attach-files > .drop-zone > .file-chooser-invisible").width(1),$("#cb-form-container-edit-event > .cb-form > .attach-files > .drop-zone > .file-chooser-invisible").height(1),$(".edit-crop-container > .crop").attr("src",e.target.result).load(function(){r.src=e.target.result,editEventCropArea=$(".edit-crop-container > .crop").imgAreaSelect({instance:!0,aspectRatio:"34:23",imageHeight:r.height,imageWidth:r.width,x1:"10",y1:"10",x2:10+a,y2:10+l,parent:"#cb-form-container-edit-event > .cb-form",handles:!0,onInit:function(e,t){o.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,340,230),s.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,680,460),editEventMainURL=n.toDataURL(),editEventRetinaURL=i.toDataURL(),"1"==Session.get("DisableCrop")&&(34/23>=r.width/r.height?(x1=0,y1=0,width=r.width,height=r.width*(23/34)):(y1=0,x1=0,height=r.height,width=r.height*(34/23)),o.drawImage(r,x1,y1,width,height,0,0,340,230),s.drawImage(r,x1,y1,width,height,0,0,680,460),editEventMainURL=n.toDataURL(),editEventRetinaURL=i.toDataURL(),editEventCropArea.cancelSelection())},onSelectChange:function(e,t){0!=t.width?(o.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,340,230),console.log(t.y1),s.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,680,460),editEventMainURL=n.toDataURL(),editEventRetinaURL=i.toDataURL()):(editEventCropArea.setSelection(10,10,10+a,10+l),editEventCropArea.setOptions({show:!0}),editEventCropArea.update())},onSelectEnd:function(e,t){(a>t.width||l>t.height)&&(t.x1>eventImage.width-a||t.y1>eventImage.height-l?a>t.x1?(editEventCropArea.setSelection(0,t.y2-l,a,t.y2),editEventCropArea.update()):l>t.y1?(editEventCropArea.setSelection(t.x2-a,0,t.x2,l),editEventCropArea.update()):(editEventCropArea.setSelection(t.x2-a,t.y2-l,t.x2,t.y2),editEventCropArea.update()):(editEventCropArea.setSelection(t.x1,t.y1,t.x1+a,t.y1+l),editEventCropArea.update()))}})})}}(f),t.readAsDataURL(f)}else error=new Meteor.Error(422,"Please choose a valid image."),throwError(error.reason)}})}(),function(){function e(e){discussionFiles=e,discussionFiles.length>0&&($(".cb-explore-discussionSubmit-form > .paperclip-attach-files > .paperclip-attach > .cb-paperclip-lbl").hide(),$(".cb-explore-discussionSubmit-form > .paperclip-attach-files > .paperclip-attach > .cb-icon-attachment").hide(),$(".cb-explore-discussionSubmit-form > .paperclip-attach-files > .paperclip-attach > .file-chooser-invisible").width(1),$(".cb-explore-discussionSubmit-form > .paperclip-attach-files > .paperclip-attach > .file-chooser-invisible").height(1));for(var t,i=0;t=discussionFiles[i];i++)if(n(t.type)){var o=new FileReader;o.onload=function(e,t,n){return function(){$(".cb-explore-discussionSubmit-form > .paperclip-attach-files > .paperclip-attach > .attachments-list").append('<li><span class="attachment-cancel-icon" id="file-'+n+'"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><circle fill-rule="evenodd" clip-rule="evenodd" cx="8" cy="8" r="8"/><g><rect x="7.001" y="4" transform="matrix(-0.7151 -0.699 0.699 -0.7151 8.1297 19.3133)" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="2" height="8"/><rect x="7" y="4" transform="matrix(-0.6989 0.7152 -0.7152 -0.6989 19.3134 7.869)" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="2" height="8"/></g></span><span class="attachment-list-filename">'+escape(e.name).replace(/%20/g,"_")+"</span></li>"),$(".cb-explore-discussionSubmit-form > .paperclip-attach-files > .paperclip-attach > .attachments-list > li > #file-"+n).click(function(){var e=this.id.split("-");discussionDeletedFileIndices.push(parseInt(e[1])),$(this).parent().remove()})}}(t,discussionFiles,i),o.readAsDataURL(t)}else{console.log("Else");var o=new FileReader;o.onload=function(){return function(){}}(t),o.readAsDataURL(t)}}function t(){var e={name:$(".cb-explore-discussionSubmit-form").find("[name=name]").val(),body:$(".cb-explore-discussionSubmit-form").find(".wysiwyg").html(),postAsType:$(".cb-explore-discussionSubmit-form .post-as-type").val(),postAsId:$(".cb-explore-discussionSubmit-form .post-as-id").val(),postType:"discussion",exploreId:Session.get("currentExploreId"),children:[]};if("user"==e.postAsType){var t=Meteor.userId(),i=Meteor.users.findOne({_id:t});e.author=i.name}else e.author=Bubbles.findOne({_id:e.postAsId}).title;console.log("Post Attributes",e);for(var o=[],s=0;discussionFiles.length>s;s++)-1==discussionDeletedFileIndices.indexOf(s)&&n(discussionFiles[s].type)&&o.push(discussionFiles[s]);createPostWithAttachments(e,o)}function n(e){return console.log("File type: ",e),e.match("vnd.*")||e.match("csv.*")||e.match("pdf.*")||e.match("zip.*")||e.match("postscript.*")||e.match("msword.*")||e.match("plain.*")||e.match("image.*")?!0:!1}Template.exploreDiscussionSubmit.created=function(){discussionFiles=[],discussionDeletedFileIndices=[],this.validateForm=function(){var e=0;$("#cb-form-container-discussion .required").each(function(){$(this).hasClass("wysiwyg")||""!==$(this).val()||void 0==$(this).attr("name")?$(this).hasClass("wysiwyg")&&""==$(this).html().trim().replace("<br>","").replace('<span class="wysiwyg-placeholder">Type here...</span>',"")&&e++:e++,0==e?($("#cb-form-container-discussion .cb-submit").prop("disabled",!1),$("#cb-form-container-discussion .cb-submit").removeClass("ready-false")):($("#cb-form-container-discussion .cb-submit").prop("disabled",!0),$("#cb-form-container-discussion .cb-submit").addClass("ready-false"))})}},Template.exploreDiscussionSubmit.rendered=function(){$("[name=post-as-type]").val(),$(".post-as-button.bubble").mouseover(function(){$(".post-as-bubble-dropdown").show()}),$(".post-as-button.bubble").mouseout(function(){$(".post-as-bubble-dropdown").hide()}),$(".btn-select-post-as-bubble").click(function(){var e=$(this).attr("name");$("[name=post-as-id]").val(e),$("[name=post-as-type]").val("bubble");var t=$(this).children(".bubble-title").attr("name");$(".selected-bubble-post-as").html(t),$(".post-as-button.bubble").removeClass("active-false"),$(".post-as-button.bubble").addClass("active-true"),$(".post-as-button.me").removeClass("active-true"),$(".post-as-button.me").addClass("active-false"),$(".post-as-bubble-dropdown").hide()}),$(".post-as-button.me").click(function(){$("[name=post-as-id]").val(Meteor.userId()),$("[name=post-as-type]").val("user"),$(".post-as-button.bubble").removeClass("active-true"),$(".post-as-button.bubble").addClass("active-false"),$(".post-as-button.me").removeClass("active-false"),$(".post-as-button.me").addClass("active-true"),$(".selected-bubble-post-as").html("Select a bubble")}),this.validateForm()},Template.exploreDiscussionSubmit.helpers({getCurrentUserId:function(){return Meteor.userId()},getAdminBubbles:function(){return adminBubblesCount=Bubbles.find({"users.admins":Meteor.userId()}).count(),adminBubbles=Bubbles.find({"users.admins":Meteor.userId()}),adminBubblesCount>0?adminBubbles:!1}}),Template.exploreDiscussionSubmit.events({"click .post-as-button":function(e){e.preventDefault()},"keyup .required, propertychange .required, input .required, paste .required, click button":function(e,t){t.validateForm()},"click .cb-explore-discussionSubmit-form > .cb-submit-container > .cb-submit":function(e){e.preventDefault(),_gaq.push(["_trackEvent","Post","Create Discussion",$(e.target).find("[name=name]").val()]),t()},"change .cb-explore-discussionSubmit-form > .paperclip-attach-files > .paperclip-attach > .file-chooser-invisible":function(t){console.log("Paperclip attach"),t.stopPropagation(),t.preventDefault(),e(t.target.files)}})}(),function(){Template.exploreEventSubmit.created=function(){eventMainURL="/img/Event.jpg",eventRetinaURL="/img/Event.jpg",this.validateForm=function(){var e=0;$("#cb-form-container-event .required").each(function(){$(this).hasClass("wysiwyg")||""!==$(this).val()||void 0==$(this).attr("name")?$(this).hasClass("wysiwyg")&&""==$(this).html().trim().replace("<br>","").replace('<span class="wysiwyg-placeholder">Type here...</span>',"")&&e++:e++,0==e?($("#cb-form-container-event .cb-submit").prop("disabled",!1),$("#cb-form-container-event .cb-submit").removeClass("ready-false")):($("#cb-form-container-event .cb-submit").prop("disabled",!0),$("#cb-form-container-event .cb-submit").addClass("ready-false"))})}},Template.exploreEventSubmit.events({"keyup .required, propertychange .required, input .required, paste .required, click button":function(e,t){t.validateForm()}}),Template.exploreEventSubmit.helpers({getCurrentUserId:function(){return Meteor.userId()},getAdminBubbles:function(){return adminBubblesCount=Bubbles.find({"users.admins":Meteor.userId()}).count(),adminBubbles=Bubbles.find({"users.admins":Meteor.userId()}),adminBubblesCount>0?adminBubbles:!1}}),Template.exploreEventSubmit.events({"click .post-as-button":function(e){e.preventDefault()},"click .cb-explore-eventSubmit-form > .cb-submit-container > .cb-submit":function(e){e.preventDefault(),_gaq.push(["_trackEvent","Post","Create Event",$(e.target).find("[name=name]").val()]);var t=$(".cb-explore-eventSubmit-form > .cb-form-row > .date").val()+" "+$(".cb-explore-eventSubmit-form > .cb-form-row > .time").val(),n={dateTime:moment(t).valueOf(),location:$(".cb-explore-eventSubmit-form > .first > .event-location").val(),name:$(".cb-explore-eventSubmit-form > .first > .event-name").val(),body:$(".cb-explore-eventSubmit-form > .event-details").val(),postAsType:$(".cb-explore-eventSubmit-form .post-as-type").val(),postAsId:$(".cb-explore-eventSubmit-form .post-as-id").val(),postType:"event",exploreId:Session.get("currentExploreId"),attendees:[Meteor.userId()],eventPhoto:eventMainURL,retinaEventPhoto:eventRetinaURL};createPost(n)},"dragover .cb-explore-eventSubmit-form .attach-files > .drop-zone":function(e){console.log("Dragover"),e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},"change .cb-explore-eventSubmit-form .attach-files > .drop-zone > .file-chooser-invisible":function(e){if(files=e.target.files,files.length>1)error=new Meteor.Error(422,"Please choose only one image as the bubble image."),throwError(error.reason);else if(f=files[0],f.type.match("image.*")){var t=new FileReader,n=document.getElementById("event-main-canvas"),i=document.getElementById("event-retina-canvas"),o=n.getContext("2d"),s=i.getContext("2d"),r=new Image,a=68,l=46;t.onload=function(){return function(e){$(".cb-explore-eventSubmit-form > .attach-files > .drop-zone").hide(),$(".cb-explore-eventSubmit-form > .attach-files > .drop-zone > .file-chooser-invisible").width(1),$(".cb-explore-eventSubmit-form > .attach-files > .drop-zone > .file-chooser-invisible").height(1),$(".crop-container > .crop").attr("src",e.target.result).load(function(){r.src=e.target.result,eventCropArea=$(".crop-container > .crop").imgAreaSelect({instance:!0,aspectRatio:"34:23",imageHeight:r.height,imageWidth:r.width,x1:"10",y1:"10",x2:10+a,y2:10+l,parent:".cb-explore-eventSubmit-form",handles:!0,onInit:function(e,t){o.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,340,230),s.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,680,460),eventMainURL=n.toDataURL(),eventRetinaURL=i.toDataURL(),"1"==Session.get("DisableCrop")&&(34/23>=r.width/r.height?(x1=0,y1=0,width=r.width,height=r.width*(23/34)):(y1=0,x1=0,height=r.height,width=r.height*(34/23)),o.drawImage(r,x1,y1,width,height,0,0,340,230),s.drawImage(r,x1,y1,width,height,0,0,680,460),eventMainURL=n.toDataURL(),eventRetinaURL=i.toDataURL(),eventCropArea.cancelSelection())},onSelectChange:function(e,t){0!=t.width?(o.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,340,230),console.log(t.y1),s.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,680,460),eventMainURL=n.toDataURL(),eventRetinaURL=i.toDataURL()):(eventCropArea.setSelection(10,10,10+a,10+l),eventCropArea.setOptions({show:!0}),eventCropArea.update())},onSelectEnd:function(e,t){(a>t.width||l>t.height)&&(t.x1>r.width-a||t.y1>r.height-l?a>t.x1?(eventCropArea.setSelection(0,t.y2-l,a,t.y2),eventCropArea.update()):l>t.y1?(eventCropArea.setSelection(t.x2-a,0,t.x2,l),eventCropArea.update()):(eventCropArea.setSelection(t.x2-a,t.y2-l,t.x2,t.y2),eventCropArea.update()):(eventCropArea.setSelection(t.x1,t.y1,t.x1+a,t.y1+l),eventCropArea.update()))}})})}}(f),t.readAsDataURL(f)}else error=new Meteor.Error(422,"Please choose a valid image."),throwError(error.reason)}}),Template.exploreEventSubmit.rendered=function(){768>$(window).width()?Session.set("DisableCrop","1"):Session.set("DisableCrop",""),$("[name=post-as-type]").val(),$(".post-as-button.bubble").mouseover(function(){$(".post-as-bubble-dropdown").show()
}),$(".post-as-button.bubble").mouseout(function(){$(".post-as-bubble-dropdown").hide()}),$(".btn-select-post-as-bubble").click(function(){var e=$(this).attr("name");$("[name=post-as-id]").val(e),$("[name=post-as-type]").val("bubble");var t=$(this).children(".bubble-title").attr("name");$(".selected-bubble-post-as").html(t),$(".post-as-button.bubble").removeClass("active-false"),$(".post-as-button.bubble").addClass("active-true"),$(".post-as-button.me").removeClass("active-true"),$(".post-as-button.me").addClass("active-false"),$(".post-as-bubble-dropdown").hide()}),$(".post-as-button.me").click(function(){$("[name=post-as-id]").val(Meteor.userId()),$("[name=post-as-type]").val("user"),$(".post-as-button.bubble").removeClass("active-true"),$(".post-as-button.bubble").addClass("active-false"),$(".post-as-button.me").removeClass("active-false"),$(".post-as-button.me").addClass("active-true"),$(".selected-bubble-post-as").html("Select a bubble")}),this.validateForm(),$(".date-picker").glDatePicker({cssName:"flatwhite",allowMonthSelect:!1,allowYearSelect:!1}),$(".cb-explore-eventSubmit-form > .cb-form-row > .time").change(function(){var e=$(".cb-explore-eventSubmit-form > .cb-form-row > .time").val();if(e){var t=parseInt(e[0]);e.length>9||!t?$(".cb-explore-eventSubmit-form > .cb-form-row > .time").val(""):(formatedTime=moment(e,"h:mm a").format("h:mm a"),$(".cb-explore-eventSubmit-form > .cb-form-row > .time").val(formatedTime))}})}}(),function(){Template.exploreIconSelector.helpers({checkSelected:function(e){if("bubbleSubmit"!=Meteor.Router.page()){var t=Bubbles.findOne(Session.get("currentBubbleId"));if(t&&e==t.category)return"selected"}return!1},getCategories:function(){return exploreProfileIcons}})}(),function(){Template.exploreTypeSelector.helpers({getExploreTypes:function(){return exploreTypes}}),Template.exploreTypeSelector.events({"change .exploretypeselector":function(e){selectedExploreType=e.target.selectedOptions[0].id}}),Template.exploreTypeSelector.rendered=function(){selectedExploreType="event"}}(),function(){Template.adminActions.helpers({getAdminStatus:function(){return Bubbles.find({"users.admins":this._id,_id:Session.get("currentBubbleId")}).count()},getApplicantStatus:function(){return Bubbles.find({"users.applicants":this._id,_id:Session.get("currentBubbleId")}).count()},getMemberStatus:function(){return Bubbles.find({"users.members":this._id,_id:Session.get("currentBubbleId")}).count()},getInviteeStatus:function(){return Bubbles.find({"users.invitees":this._id,_id:Session.get("currentBubbleId")}).count()}}),Template.adminActions.events({"click .demote-admin":function(e){e.stopPropagation();var t=Bubbles.findOne(Session.get("currentBubbleId")),n=t.users.admins;n.length>1?(Bubbles.update({_id:Session.get("currentBubbleId")},{$addToSet:{"users.members":this._id},$pull:{"users.admins":this._id}}),createAdminDemoteUpdate(this._id)):alert("You are the last remaining admin. Please promote another member before demoting yourself.")},"click .remove-admin":function(e){e.stopPropagation();var t=Bubbles.findOne(Session.get("currentBubbleId")),n=t.users.admins,i=t.users.members,o=n.length+i.length;if(o>1)Bubbles.update({_id:Session.get("currentBubbleId")},{$pull:{"users.admins":this._id}}),1==n.length&&confirm("If you remove yourself, the earliest member of the bubble will be promoted to admin.  Are you sure you want to remove yourself from this bubble?")&&Bubbles.update({_id:Session.get("currentBubbleId")},{$addToSet:{"users.admins":i[0]},$pull:{"users.members":i[0]}});else if(confirm("You are the last remaining member.  Removing yourself will delete this bubble.  Are you sure you want to delete this bubble?")){var s=Updates.find({bubbleId:Session.get("currentBubbleId")},{read:!1}).fetch();_.each(s,function(e){Updates.update({_id:e._id},{read:!0})}),Bubbles.remove({_id:Session.get("currentBubbleId")});var t=Bubbles.find({$or:[{"users.members":Meteor.userId()},{"users.admins":Meteor.userId()}]},{sort:{submitted:-1}}).fetch();t.length>0?Meteor.Router.to("/mybubbles/"+t[0]._id+"/home"):Meteor.Router.to("/mybubbles/search/bubbles")}},"click .accept":function(e){e.stopPropagation(),e.preventDefault(),Bubbles.update({_id:Session.get("currentBubbleId")},{$addToSet:{"users.members":this._id},$pull:{"users.applicants":this._id}}),createNewMemberUpdate(this._id)},"click .deny":function(e){e.stopPropagation(),e.preventDefault(),Bubbles.update({_id:Session.get("currentBubbleId")},{$pull:{"users.applicants":this._id}}),createRejectApplicationUpdate(this._id)},"click .promote-member":function(e){e.stopPropagation(),e.preventDefault(),Bubbles.update({_id:Session.get("currentBubbleId")},{$addToSet:{"users.admins":this._id},$pull:{"users.members":this._id}}),Session.set(Session.get("currentBubbleId")+this._id,void 0),createMemberPromoteUpdate(this._id)},"click .remove-member":function(e){e.stopPropagation(),e.preventDefault(),Bubbles.update({_id:Session.get("currentBubbleId")},{$pull:{"users.members":this._id}}),Session.set(Session.get("currentBubbleId")+this._id,void 0),this._id!=Meteor.userId()&&createRemoveMemberUpdate(this._id)},"click .uninvite":function(e){e.stopPropagation(),e.preventDefault(),Bubbles.update({_id:Session.get("currentBubbleId")},{$pull:{"users.invitees":this._id}}),Session.set(Session.get("currentBubbleId")+this._id,void 0),this._id!=Meteor.userId()&&createRemoveMemberUpdate(this._id)}})}(),function(){Template.connectBubble.helpers({connectWords:function(){return this.users?_.contains(this.users.admins,Meteor.userId())||_.contains(this.users.members,Meteor.userId())?"view bubble":_.contains(this.users.applicants,Meteor.userId())?"cancel application":_.contains(this.users.invitees,Meteor.userId())?"accept invite":"join bubble":-1}}),Template.connectBubble.events({"click .connect-bubble":function(e){e.stopPropagation(),e.preventDefault(),_.contains(this.users.admins,Meteor.userId())||_.contains(this.users.members,Meteor.userId())?Meteor.Router.to("/mybubbles/"+this._id+"/home"):_.contains(this.users.applicants,Meteor.userId())?(console.log("Trying to cancel"),Meteor.call("cancelJoinBubble",this._id)):_.contains(this.users.invitees,Meteor.userId())?Meteor.call("acceptInvitation",this._id):(Meteor.call("sendApplicantEmail",Meteor.userId(),this._id),Meteor.call("joinBubble",this._id))},"click .deny-invite":function(e){e.stopPropagation();var t=Meteor.userId();Meteor.call("removeInvitee",this._id,t)}})}(),function(){Template.download.events({"click .download":function(e){e.stopPropagation(),_gaq.push(["_trackEvent","File","Download",this.name]),Posts.update(this._id,{$set:{lastDownloadTime:(new Date).getTime()},$inc:{numDownloads:1}},function(e){e?throwError(e.reason):Meteor.Router.to("postPage",currentPostId)})}})}(),function(){Template.errors.helpers({errors:function(){return Errors.find()}}),Template.error.rendered=function(){var e=this.data;Meteor.defer(function(){Errors.update(e._id,{$set:{seen:!0}})})}}(),function(){Template.imGoing.helpers({mainWords:function(){return _.contains(this.attendees,Meteor.userId())?"not going":"i'm going"}}),Template.imGoing.events({"click .im-going":function(e){e.stopPropagation(),Meteor.call("attendEvent",this._id,Meteor.userId()),_gaq.push(["_trackEvent","Post","Attending Event",this.name])}}),Template.imGoingSmall.helpers({mainWords:function(){return _.contains(this.attendees,Meteor.userId())?"not going":"i'm going"}}),Template.imGoingSmall.events({"click .im-going":function(e){e.stopPropagation(),Meteor.call("attendEvent",this._id,Meteor.userId()),_gaq.push(["_trackEvent","Post","Attending Event",this.name])}})}(),function(){Template.reply.events({"click .reply":function(){}})}(),function(){Template.selectPostType.helpers({activePostTypeClass:function(){var e=window.location.pathname.split("/"),t=e[4],n=arguments[0];return t===n&&"active"}})}(),function(){Template.userActions.helpers({getAdminStatus:function(){return Bubbles.find({"users.admins":this._id,_id:Session.get("currentBubbleId")}).count()},getMemberStatus:function(){return Bubbles.find({"users.members":this._id,_id:Session.get("currentBubbleId")}).count()},isSuperBubble:function(){var e=Bubbles.findOne({_id:Session.get("currentBubbleId")}),t=e.bubbleType;return"super"==t?!0:!1}}),Template.userActions.events({"click .remove-admin":function(){if(event.stopPropagation(),confirm("Are you sure you want to leave this bubble?")){var e=Bubbles.findOne(Session.get("currentBubbleId")),t=e.users.admins,n=e.users.members,i=t.length+n.length;if(i>1)Bubbles.update({_id:Session.get("currentBubbleId")},{$pull:{"users.admins":this._id}}),1==t.length&&confirm("If you remove yourself, the earliest member of the bubble will be promoted to admin.  Are you sure you want to remove yourself from this bubble?")&&Bubbles.update({_id:Session.get("currentBubbleId")},{$addToSet:{"users.admins":n[0]},$pull:{"users.members":n[0]}});else if(confirm("You are the last remaining member.  Removing yourself will delete this bubble.  Are you sure you want to delete this bubble?")){var o=Updates.find({bubbleId:Session.get("currentBubbleId")},{read:!1}).fetch();_.each(o,function(e){Updates.update({_id:e._id},{read:!0})}),_.pluck(o,"_id");var s=Session.get("currentBubbleId"),r=Posts.find({postAsId:s}).fetch(),a=Posts.find({bubbleId:s}).fetch(),l=a.concat(r);_.pluck(l,"_id"),Bubbles.remove({_id:Session.get("currentBubbleId")});var e=Bubbles.find({$or:[{"users.members":Meteor.userId()},{"users.admins":Meteor.userId()}]},{sort:{submitted:-1}}).fetch();e.length>0?Meteor.Router.to("/mybubbles/"+e[0]._id+"/home"):Meteor.Router.to("/mybubbles/search/bubbles")}}},"click .remove-member":function(){event.stopPropagation(),confirm("Are you sure you want to leave this bubble?")&&(Bubbles.update({_id:Session.get("currentBubbleId")},{$pull:{"users.members":this._id}}),Session.set(Session.get("currentBubbleId")+this._id,void 0),this._id!=Meteor.userId()&&createRemoveMemberUpdate(this._id))}})}(),function(){Template.viewProfile.events({"click .view-profile":function(){}})}(),function(){Template.wysiwyg.events({"click .wysiwyg":function(){$(".wysiwyg").children(".wysiwyg-placeholder").remove()}}),Template.wysiwyg.created=function(){this.currentPostId=Session.get("currentPostId"),this.addToDropZone=function(e){(e.fileType.match("image.*")||e.fileType.match("pdf.*")||e.fileType.match("msword.*")||e.fileType.match("ms-excel.*")||e.fileType.match("officedocument.*"))&&$("#list").append("<li><div class='add-padding'><div class='cb-icon cb-icon-file'> <svg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='32.041px' height='31.966px' viewBox='0 0 32.041 31.966' enable-background='new 0 0 32.041 31.966' xml:space='preserve'> <path fill-rule='evenodd' clip-rule='evenodd' d='M30,7V6H12V2H2v8h10h18V7z M2,17v13h2h6h20V12H7H4H2V17z M31,32H13H7H1 c-0.55,0-1-0.45-1-1V1c0-0.55,0.45-1,1-1h12c0.55,0,1,0.45,1,1v3h17c0.549,0,1,0.45,1,1v26C32,31.55,31.549,32,31,32z'/></svg></div><div class='cb-icon-lbl file-name'>"+e.name+"</div></div></li>")}},Template.wysiwyg.rendered=function(){$(".wysiwyg").wysiwyg(),$(".btn-add-discussion").click(function(){$("[name=name]").focus()}),$("#fileuploadtool").slideToggle();var e=300,t=300;removed=[],files=[],dom_modified_findimages=function(e){images=$(e.srcElement).find("img");for(var t=0;images.length>t;t++){var n=images[t];"parsed"!=$(n).attr("class")&&$(n).attr("class","unparsed")}},dom_modified_parseimages=function(n){images=$(n.srcElement).find("img");for(var i=0;images.length>i;i++){var o=images[i];"parsed"!=$(o).attr("class")&&($(o).attr("class","parsed"),$(o).load(function(){var n=document.createElement("canvas");width=$(this).width(),height=$(this).height();var i=1;if(width>t?i=t/width:height>e&&(i=e/height),n.width=width*i,n.height=height*i,console.log(width,height),width>t||height>e){var o=n.getContext("2d");o.drawImage(this,0,0,n.width,n.height);var s=n.toDataURL();$(this).attr("src",s)}}))}},$(".wysiwyg").bind("DOMSubtreeModified",dom_modified_parseimages),$(".wysiwyg").bind("DOMSubtreeModified",dom_modified_findimages),this.currentPostId&&this.addToDropZone(Posts.findOne({_id:this.currentPostId}))},Template.wysiwyg.events({"click #fileattachments":function(){$("#fileuploadtool").slideToggle()},"dragover #drop_zone":function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},"drop #drop_zone":function(e,t){if(e.stopPropagation(),e.preventDefault(),"undefined"==typeof files){files=[];for(var n,i=0;n=e.dataTransfer.files[i];i++)files.push(e.target.files[i])}else for(var n,i=0;n=e.dataTransfer.files[i];i++)files.push(e.dataTransfer.files[i]);if(this.currentPostId)for(var o=Posts.findOne({_id:this.currentPostId}),i=0;o.children.length>i;i++){for(var s=!1,r=0;removed.length>r;r++)if(o.children[i]==removed[r]){s=!0;break}0==s&&this.addToDropZone(Posts.findOne({_id:this.currentPostId}))}for(var n,i=0;n=files[i];i++){var a=new FileReader;a.tmpl=t,a.tmpl.fileType=n.type,a.onload=function(e){return function(t){e.name,e.fileType=a.tmpl.fileType,e.file=t.target.result,this.tmpl.addToDropZone(e)}}(n),a.readAsDataURL(n)}},"change #filesToUpload":function(e,t){if("undefined"==typeof files){files=[];for(var n,i=0;n=e.target.files[i];i++)files.push(e.target.files[i])}else for(var n,i=0;n=e.target.files[i];i++)files.push(e.target.files[i]);if(this.currentPostId){console.log("Editing");for(var o=Posts.findOne({_id:this.currentPostId}),i=0;o.children.length>i;i++){for(var s=!1,r=0;removed.length>r;r++)if(o.children[i]==removed[r]){s=!0;break}if(0==s){var a=Posts.findOne({_id:o.children[i]});this.addToDropZone(a)}}}for(var n,i=0;n=files[i];i++){var l=new FileReader;l.tmpl=t,l.tmpl.fileType=n.type,l.onload=function(e){return function(t){e.name,e.fileType=l.tmpl.fileType,e.file=t.target.result,this.tmpl.addToDropZone(e)}}(n),l.readAsDataURL(n)}},"click .unsaved-remove":function(e){console.log(e.target.id);for(var t=[],n=0;files.length>n;n++)console.log(files[n].name,e.target.id),files[n].name!=e.target.id&&t.push(files[n]);$(e.target).parent().remove(),files=t},"click .saved-remove":function(e){console.log(e.target.id),"undefined"==typeof removed?(removed=[],removed.push(e.target.id)):removed.push(e.target.id),$(e.target).parent().remove()}})}(),function(){Template.discussionEdit.events({"submit form":function(e){e.preventDefault(),_gaq.push(["_trackEvent","Post","Edit Discussion",this.name]);var t=Session.get("currentPostId"),n=Session.get("currentBubbleId");$(event.target).find("[name=date]").val()+" "+$(event.target).find("[name=time]").val();var i=Posts.findOne({_id:t}),o=i.children;console.log("Current children: ",o);for(var s,r=[],a=0;s=files[a];a++){var l=new FileReader;l.onload=function(e){return function(i){var o={name:escape(e.name),file:i.target.result,fileType:e.type,postType:"file",parent:t,bubbleId:n};Meteor.call("post",o,function(e,t){if(e)throwError(e.reason);else{console.log("Discussion edit new filepost id: ",t._id);var n=t.parent,i=Posts.findOne({_id:n}),o=i.children;o.push(t._id),console.log("Updated children: ",o),Posts.update(n,{$addToSet:{children:{$each:o}}},function(e){e&&throwError(e.reason)})}})}}(s),l.readAsDataURL(s)}console.log("Removed: ",removed),console.log("Current: ",o);for(var a=0;o.length>a;a++){for(var c=!1,u=0;removed.length>u;u++)if(o[a]==removed[u]){c=!0;break}0==c&&r.push(o[a])}console.log("newChildren: ",r);var d={children:r,name:$(e.target).find("[name=name]").val(),body:$(e.target).find(".wysiwyg").html()};Posts.update(t,{$set:d},function(e){e?throwError(e.reason):Meteor.Router.to("postPage",n,t)})},"click .delete":function(e){_gaq.push(["_trackEvent","Post","Delete Discussion",this.name]),e.preventDefault(),confirm("Delete this post?")&&(Meteor.call("deletePost",Session.get("currentPostId")),Meteor.Router.to("bubblePage",Session.get("currentBubbleId")))}})}(),function(){Template.eventEdit.helpers({getDate:function(){return moment(this.dateTime).format("M/DD/YYYY")},getTime:function(){return moment(this.dateTime).format("hh:mm a")}}),Template.eventEdit.events({"submit form":function(e){e.preventDefault(),_gaq.push(["_trackEvent","Post","Edit Event",this.name]);var t=Session.get("currentPostId"),n=Session.get("currentBubbleId"),i={name:$(e.target).find("[name=name]").val(),body:$(e.target).find("[name=body]").val(),location:$(e.target).find("[name=location]").val(),eventPhoto:$(e.target).find("[id=eventphoto_preview]").attr("src"),retinaEventPhoto:$(e.target).find("[id=eventphoto_retina]").attr("src"),lastUpdated:(new Date).getTime()};if($(event.target).find("[name=date]").val().length>0&&$(event.target).find("[name=time]").val()>0){var o=$(event.target).find("[name=date]").val()+" "+$(event.target).find("[name=time]").val();i.dateTime=o}Posts.update(t,{$set:i},function(e){e?throwError(e.reason):(createEditEventUpdate(Meteor.userId(),t),Meteor.Router.to("postPage",n,t))})},"dragover .dropzone":function(e){console.log("Dragover"),e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},"drop .dropzone":function(e){console.log("Drop"),e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.files;if(t.length>1)error=new Meteor.Error(422,"Please choose only one image as the bubble image."),throwError(error.reason);else if(f=t[0],f.type.match("image.*")){var n=new FileReader;n.onload=function(e){return function(t){var n=340,i=230,o=680,s=460;$("#eventphoto_dropzone").hide(),$("#eventfilesToUpload").hide(),$("#eventphoto_upload").attr("src",t.target.result),$("#eventphoto_preview").attr("src",t.target.result),$("#eventphoto_upload").attr("title",escape(e.name)),$("#eventphoto_upload").show(),$("#eventphoto_preview").show(),$(document).ready(function(){$(function(){function e(e){var t=document.createElement("canvas"),r=document.createElement("canvas");t.width=n,t.height=i,r.width=o,r.height=s,console.log(e);var a=t.getContext("2d"),l=r.getContext("2d");a.drawImage($("#eventphoto_upload")[0],e.x,e.y,e.x2-e.x,e.y2-e.y,0,0,n,i),l.drawImage($("#eventphoto_upload")[0],e.x,e.y,e.x2-e.x,e.y2-e.y,0,0,o,s);var c=t.toDataURL(),u=r.toDataURL();$("#eventphoto_preview").attr("src",c),$("#eventphoto_preview").attr("width",n/2),$("#eventphoto_preview").attr("height",i/2),$("#eventphoto_retina").attr("src",u)}$("#eventphoto_upload").Jcrop({onChange:e,onSelect:e,setSelect:[50,50,n,i],aspectRatio:n/i},function(){jcrop_api=this,jcrop_api.setOptions({allowResize:!1})})})})}}(f),n.readAsDataURL(f)}else error=new Meteor.Error(422,"Please choose a valid image."),throwError(error.reason)},"change #eventfilesToUpload":function(e){var t=e.target.files;if(t.length>1)error=new Meteor.Error(422,"Please choose only one image as the bubble image."),throwError(error.reason);else if(f=t[0],f.type.match("image.*")){var n=new FileReader;n.onload=function(e){return function(t){var n=340,i=230,o=680,s=460;$("#eventphoto_dropzone").hide(),$("#eventfilesToUpload").hide(),$("#eventphoto_upload").attr("src",t.target.result),$("#eventphoto_preview").attr("src",t.target.result),$("#eventphoto_upload").attr("title",escape(e.name)),$("#eventphoto_upload").show(),$("#eventphoto_preview").show(),$(document).ready(function(){$(function(){function e(e){var t=document.createElement("canvas"),r=document.createElement("canvas");t.width=n,t.height=i,r.width=o,r.height=s,console.log(e);var a=t.getContext("2d"),l=r.getContext("2d");a.drawImage($("#eventphoto_upload")[0],e.x,e.y,e.x2-e.x,e.y2-e.y,0,0,n,i),l.drawImage($("#eventphoto_upload")[0],e.x,e.y,e.x2-e.x,e.y2-e.y,0,0,o,s);var c=t.toDataURL(),u=r.toDataURL();$("#eventphoto_preview").attr("src",c),$("#eventphoto_preview").attr("width",n/2),$("#eventphoto_preview").attr("height",i/2),$("#eventphoto_retina").attr("src",u)}$("#eventphoto_upload").Jcrop({onChange:e,onSelect:e,setSelect:[50,50,n,i],aspectRatio:n/i},function(){jcrop_api=this,jcrop_api.setOptions({allowResize:!1})})})})}}(f),n.readAsDataURL(f)}else error=new Meteor.Error(422,"Please choose a valid image."),throwError(error.reason)},"click #delete_post":function(e){if(e.preventDefault(),_gaq.push(["_trackEvent","Post","Delete Event",this.name]),confirm("Delete this post?")){var t=Session.get("currentPostId");Posts.remove({_id:t}),createDeleteEventUpdate(this),Meteor.Router.to("bubblePage",Session.get("currentBubbleId"))}}}),Template.eventEdit.rendered=function(){$("#eventphoto_retina").hide(),$("#eventfilesToUpload").hide(),$(".date-picker").glDatePicker({cssName:"flatwhite",selectedDate:new Date($(".date-picker").val()),allowMonthSelect:!1,allowYearSelect:!1}),$(".input-small").change(function(){var e=$(".input-small").val();if(e){var t=parseInt(e[0]);e.length>9||!t?($(".input-small").val(""),$(".input-small").attr("placeholder","Time (ex: 9am)")):(formatedTime=moment(e,"h:mm a").format("h:mm a"),$(".input-small").val(formatedTime))}}),$("#change_eventphoto").click(function(){$("#eventphoto_preview").hide(),$("#change_eventphoto").hide(),$(".dropzone").show(),$("#eventfilesToUpload").show()});var e=Session.get("currentPostId"),t=Posts.findOne({_id:e});0==t.eventPhoto.length?($("#eventphoto_preview").attr("src","/img/default_eventphoto.jpg"),$(".dropzone").hide()):$(".dropzone").hide()}}(),function(){Template.fileobjectEdit.events({"submit form":function(e){e.preventDefault(),_gaq.push(["_trackEvent","Post","Edit File",this.name]);var t=Session.get("currentPostId"),n=Session.get("currentBubbleId"),i=$(event.target).find("[name=date]").val()+" "+$(event.target).find("[name=time]").val(),o=files[0],s=new FileReader;s.onload=function(e){return function(o){console.log(e.type);var s={dateTime:i,name:escape(e.name),file:o.target.result,fileType:e.type,lastUpdated:(new Date).getTime()};Posts.update(t,{$set:s},function(e){e?throwError(e.reason):Meteor.Router.to("postPage",n,t)})}}(o),s.readAsDataURL(o),Posts.update(t,{$set:postProperties},function(e){e?throwError(e.reason):Meteor.Router.to("postPage",n,t)})},"click #delete_post":function(e){e.preventDefault(),confirm("Delete this post?")&&(Meteor.call("deletePost",Session.get("currentPostId")),Meteor.Router.to("bubblePage",Session.get("currentBubbleId")))},"dragover .dropzone":function(e){console.log("Dragover"),e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},"drop .dropzone":function(e){if($(".dropzone").hide(),$("#filesToUploade").hide(),console.log("Drop"),e.stopPropagation(),e.preventDefault(),files=e.dataTransfer.files,files.length>1)error=new Meteor.Error(422,"Please choose only one file."),throwError(error.reason);else for(var t,n=0;t=files[n];n++)if(t.type.match("image.*")){var i=new FileReader;i.onload=function(e){return function(t){var n=document.createElement("span");n.innerHTML=['<img class="thumb" src="',t.target.result,'" title="',escape(e.name),'"/>'].join(""),document.getElementById("list").insertBefore(n,null)}}(t),i.readAsDataURL(t)}else if(t.type.match("pdf.*")){var i=new FileReader;i.onload=function(e){return function(){var t=document.createElement("span");t.innerHTML=['<div class="pdf-icon">',"PDF",escape(e.name),"</div>"].join(""),document.getElementById("list").insertBefore(t,null)}}(t),i.readAsDataURL(t)}else if(t.type.match("msword.*")||t.type.match("ms-excel.*")||t.type.match("officedocument.*")){var i=new FileReader;i.onload=function(e){return function(){var t=document.createElement("span");t.innerHTML=['<div class="word-icon">',"Word Document: ",escape(e.name),"</div>"].join(""),document.getElementById("list").insertBefore(t,null)}}(t),i.readAsDataURL(t)}else{console.log("Else");var i=new FileReader;i.onload=function(){return function(e){console.log(e.target.result)}}(t),i.readAsDataURL(t)}},"change #filesToUpload":function(e){if(files=e.target.files,$(".dropzone").hide(),files.length>1)error=new Meteor.Error(422,"Please choose only one file."),throwError(error.reason);else{for(l=document.getElementById("list");l.hasChildNodes();)l.removeChild(l.lastChild);for(var t,n=0;t=files[n];n++)if(t.type.match("image.*")){var i=new FileReader;i.onload=function(e){return function(t){var n=document.createElement("span");n.innerHTML=['<img class="thumb" src="',t.target.result,'" title="',escape(e.name),'"/>'].join(""),document.getElementById("list").insertBefore(n,null)}}(t),i.readAsDataURL(t)}else if(t.type.match("pdf.*")){var i=new FileReader;i.onload=function(e){return function(){var t=document.createElement("span");t.innerHTML=['<div class="pdf-icon">',"PDF",escape(e.name),"</div>"].join(""),document.getElementById("list").insertBefore(t,null)}}(t),i.readAsDataURL(t)}else if(t.type.match("msword.*")||t.type.match("ms-excel.*")||t.type.match("officedocument.*")){var i=new FileReader;i.onload=function(e){return function(){var t=document.createElement("span");t.innerHTML=['<div class="word-icon">',"Word Document: ",escape(e.name),"</div>"].join(""),document.getElementById("list").insertBefore(t,null)}}(t),i.readAsDataURL(t)}else{console.log("Else");var i=new FileReader;i.onload=function(){return function(e){console.log(e.target.result)}}(t),i.readAsDataURL(t)}}}}),Template.fileobjectEdit.helpers({isImage:function(){var e=Session.get("currentPostId"),t=Posts.findOne({_id:e});return console.log(t.fileType),t.fileType.match("image.*")?!0:!1},isPdf:function(){var e=Session.get("currentPostId"),t=Posts.findOne({_id:e});return console.log(t.fileType),t.fileType.match("pdf.*")?!0:!1}}),Template.fileobjectEdit.rendered=function(){$("#change_uploadedfile").click(function(){$("#uploadedfile_preview").hide(),$("#change_uploadedfile").hide(),$(".dropzone").show(),$("#filesToUpload").show()}),$(".dropzone").hide(),$("#filesToUpload").hide()}}(),function(){Template.listItem.helpers({getPostAsUser:function(){return Meteor.users.findOne(this.postAsId)},getPostAsBubble:function(){var e=Bubbles.findOne(this.postAsId);return e},postedAsUser:function(){return"user"==this.postAsType?!0:!1},postedAsBubble:function(){return"bubble"==this.postAsType?!0:!1},displayName:function(){if("user"==this.postAsType)return this.author;if("bubble"==this.postAsType){var e=Bubbles.findOne(this.postAsId);return e.title}},isGoing:function(){return _.contains(this.attendees,Meteor.user().username)},hasChildren:function(){return void 0!=this.children&&""!=this.children?!0:!1},membershipCount:function(){var e=this._id;return this.userType!==void 0?Bubbles.find({$or:[{"users.members":e},{"users.admins":e}]}).count():-1},isMe:function(){return this._id==Meteor.userId()},inBubble:function(){return"bubbleMembersPage"==Meteor.Router.page()},isFile:function(){return"file"==this.postType?!0:void 0},isDiscussion:function(){return"discussion"==this.postType?!0:void 0}}),Template.listItem.events({"click .post-item":function(e){e.preventDefault(),e.stopPropagation(),this.bubbleId!==void 0?"file"==this.postType&&this.parent?Meteor.Router.to("postPage",this.bubbleId,this.parent):"file"==this.postType?(console.log("List item click."),Meteor.Router.to("postPage",this.bubbleId,this._id)):this.postType!==void 0&&(console.log(this._id),Meteor.Router.to("postPage",this.bubbleId,this._id)):this.exploreId!==void 0?Meteor.Router.to("explorePostPage",this.exploreId,this._id):this.userType!==void 0?Meteor.Router.to("userProfile",this._id):this.category!==void 0?Meteor.Router.to("bubblePage",this._id):Meteor.Router.to("404NotFoundPage")}}),Template.listItem.rendered=function(){}}(),function(){function e(e){return console.log("File type: ",e),e.match("vnd.*")||e.match("csv.*")||e.match("pdf.*")||e.match("zip.*")||e.match("postscript.*")||e.match("msword.*")||e.match("plain.*")||e.match("image.*")?!0:!1}function t(t){for(var n=0;t.length>n;n++)discussionNewAttachments.push(t[n]);console.log(discussionNewAttachments),discussionNewAttachments.length>0&&($(".cb-editDiscussion-form > .paperclip-attach-files").hide(),$(".cb-editDiscussion-form > .paperclip-attach-files > .paperclip-attach > .cb-paperclip-lbl").hide(),$(".cb-editDiscussion-form > .paperclip-attach-files > .paperclip-attach > .cb-icon-attachment").hide(),$(".cb-editDiscussion-form > .paperclip-attach-files > .paperclip-attach > .file-chooser-invisible").width(1),$(".cb-editDiscussion-form > .paperclip-attach-files > .paperclip-attach > .file-chooser-invisible").height(1)),$(".cb-editDiscussion-form > .discussion-attachments > .paperclip-attach > .attachments-list").html("");for(var n=0;discussionAttachments.length>n;n++)-1==discussionDeletedAttachmentIds.indexOf(discussionAttachments[n]._id)&&(console.log("Attachment: ",discussionAttachments[n].name),$(".cb-editDiscussion-form > .discussion-attachments > .paperclip-attach > .attachments-list").append('<li><span class="attachment-cancel-icon" id="'+discussionAttachments[n]._id+'"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><circle fill-rule="evenodd" clip-rule="evenodd" cx="8" cy="8" r="8"/><g><rect x="7.001" y="4" transform="matrix(-0.7151 -0.699 0.699 -0.7151 8.1297 19.3133)" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="2" height="8"/><rect x="7" y="4" transform="matrix(-0.6989 0.7152 -0.7152 -0.6989 19.3134 7.869)" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="2" height="8"/></g></span><span class="attachment-list-filename">'+discussionAttachments[n].name+"</span></li>"),$(".cb-editDiscussion-form > .discussion-attachments > .paperclip-attach > .attachments-list > li > #"+discussionAttachments[n]._id).click(function(){discussionDeletedAttachmentIds.push(this.id),$(this).parent().remove()}));for(var i,n=0;i=discussionNewAttachments[n];n++)if(e(i.type)){var o=new FileReader;o.onload=function(e,t,n){return function(){$(".cb-editDiscussion-form > .discussion-attachments > .paperclip-attach > .attachments-list").append('<li><span class="attachment-cancel-icon" id="file-'+n+'"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><circle fill-rule="evenodd" clip-rule="evenodd" cx="8" cy="8" r="8"/><g><rect x="7.001" y="4" transform="matrix(-0.7151 -0.699 0.699 -0.7151 8.1297 19.3133)" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="2" height="8"/><rect x="7" y="4" transform="matrix(-0.6989 0.7152 -0.7152 -0.6989 19.3134 7.869)" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="2" height="8"/></g></span><span class="attachment-list-filename">'+escape(e.name).replace(/%20/g,"_")+"</span></li>"),$(".cb-editDiscussion-form > .discussion-attachments > .paperclip-attach > .attachments-list > li > #file-"+n).click(function(){var e=this.id.split("-");discussionDeletedNewAttachmentIndices.push(parseInt(e[1])),$(this).parent().remove()})}}(i,discussionNewAttachments,n),o.readAsDataURL(i)}else{console.log("Else");var o=new FileReader;o.onload=function(){return function(){}}(i),o.readAsDataURL(i)}}function n(){for(var t=[],n=0;discussionNewAttachments.length>n;n++)-1==discussionDeletedNewAttachmentIndices.indexOf(n)&&e(discussionNewAttachments[n].type)&&t.push(discussionNewAttachments[n]);var i=[];console.log(discussionDeletedAttachmentIds);for(var o=0;discussionDeletedAttachmentIds.length>o;o++)Posts.remove({_id:discussionDeletedAttachmentIds[o]});console.log(discussionDeletedAttachmentIds),console.log(discussionDeletedAttachmentIds);for(var n=0;discussionAttachmentIds.length>n;n++)console.log("Remove or not: ",discussionAttachmentIds[n],discussionDeletedAttachmentIds.indexOf(discussionAttachmentIds[n])),-1==discussionDeletedAttachmentIds.indexOf(discussionAttachmentIds[n])&&(console.log("Not removing: ",discussionAttachmentIds[n]),i.push(discussionAttachmentIds[n]));console.log("The new kids: ",i),discussionAttachments=[],discussionDeletedAttachmentIndices=[];var s=Session.get("currentPostId");Session.get("currentBubbleId");var r={name:$(".cb-editDiscussion-form > .discussionTitle").val(),body:$.trim($(".cb-editDiscussion-form > .wysiwyg_group").find(".wysiwyg").html())};
r.children=i.length>0?i:[],console.log(r),updatePostWithAttachments(s,r,t),discussionDeletedAttachmentIndices=[],discussionDeletedAttachmentIds=[],discussionNewAttachments=[],discussionDeletedNewAttachmentIndices=[]}Template.editDiscussion.events({"keyup .required, propertychange .required, input .required, paste .required":function(e,t){t.validateForm()}}),Template.editDiscussion.created=function(){discussionFiles=[],discussionDeletedFileIndices=[],this.validateForm=function(){var e=0;$("#cb-form-container-edit-discussion .required").each(function(){$(this).hasClass("wysiwyg")||""!==$(this).val()||void 0==$(this).attr("name")?$(this).hasClass("wysiwyg")&&""==$(this).html().trim().replace("<br>","").replace('<span class="wysiwyg-placeholder">Type here...</span>',"")&&e++:e++,0==e?($("#cb-form-container-edit-discussion .cb-submit").prop("disabled",!1),$("#cb-form-container-edit-discussion .cb-submit").removeClass("ready-false")):($("#cb-form-container-edit-discussion .cb-submit").prop("disabled",!0),$("#cb-form-container-edit-discussion .cb-submit").addClass("ready-false"))})},console.log("Children: ",this.data.children),console.log($(".cb-editDiscussion-form")),discussionAttachmentIds=this.data.children,discussionAttachments=Posts.find({_id:{$in:discussionAttachmentIds}}).fetch(),discussionDeletedAttachmentIndices=[],discussionDeletedAttachmentIds=[],discussionNewAttachments=[],discussionDeletedNewAttachmentIndices=[]},Template.editDiscussion.rendered=function(){this.validateForm(),$(".cb-editDiscussion-form > .discussion-attachments > .paperclip-attach > .attachments-list > li").remove(),discussionAttachmentIds=this.data.children,discussionAttachments=Posts.find({_id:{$in:discussionAttachmentIds}}).fetch();for(var e=0;discussionAttachments.length>e;e++)console.log("Attachment: ",discussionAttachments[e].name),$(".cb-editDiscussion-form > .discussion-attachments > .paperclip-attach > .attachments-list").append('<li><span class="attachment-cancel-icon" id="'+discussionAttachments[e]._id+'"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><circle fill-rule="evenodd" clip-rule="evenodd" cx="8" cy="8" r="8"/><g><rect x="7.001" y="4" transform="matrix(-0.7151 -0.699 0.699 -0.7151 8.1297 19.3133)" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="2" height="8"/><rect x="7" y="4" transform="matrix(-0.6989 0.7152 -0.7152 -0.6989 19.3134 7.869)" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="2" height="8"/></g></span><span class="attachment-list-filename">'+discussionAttachments[e].name+"</span></li>"),$(".cb-editDiscussion-form > .discussion-attachments > .paperclip-attach > .attachments-list > li > #"+discussionAttachments[e]._id).click(function(){discussionDeletedAttachmentIds.push(this.id),$(this).parent().remove()})},Template.editDiscussion.events({"click .cb-editDiscussion-form > .cb-submit-container > .cb-submit":function(e){e.preventDefault(),e.stopPropagation(),_gaq.push(["_trackEvent","Post","Create Discussion",$(e.target).find("[name=name]").val()]),n()},"change .cb-editDiscussion-form > .paperclip-attach-files > .paperclip-attach > .file-chooser-invisible":function(e){console.log("Paperclip attach"),e.stopPropagation(),e.preventDefault(),t(e.target.files)}})}(),function(){Template.editEvent.created=function(){this.validateForm=function(){var e=0;$("#cb-form-container-edit-event .required").each(function(){$(this).hasClass("wysiwyg")||""!==$(this).val()||void 0==$(this).attr("name")?$(this).hasClass("wysiwyg")&&""==$(this).html().trim().replace("<br>","").replace('<span class="wysiwyg-placeholder">Type here...</span>',"")&&e++:e++,0==e?($("#cb-form-container-edit-event .cb-submit").prop("disabled",!1),$("#cb-form-container-edit-event .cb-submit").removeClass("ready-false")):($("#cb-form-container-edit-event .cb-submit").prop("disabled",!0),$("#cb-form-container-edit-event .cb-submit").addClass("ready-false"))})}},Template.editEvent.rendered=function(){768>$(window).width()?Session.set("DisableCrop","1"):Session.set("DisableCrop",""),this.validateForm();var e=this.data,t=new Date(e.dateTime),n=t.getHours()+":"+t.getMinutes(),i=t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear();if($("input[name='name']").val(e.name),$("input[name='location']").val(e.location),$("input[name='date']").val(i),$("input[name='body']").val(e.body),$("#eventPhoto").attr("src",this.eventPhoto),$("eventRetinaPhoto").attr("src",this.eventRetinaPhoto),n){var o=parseInt(n[0]);n.length>9||!o?$("[name=time]").val(""):(formatedTime=moment(n,"h:mm a").format("h:mm a"),$("[name=time]").val(formatedTime))}$(".date-picker").glDatePicker({cssName:"flatwhite",allowMonthSelect:!1,allowYearSelect:!1}),$("[name=time]").change(function(){var e=$("[name=time]").val();if(e){var t=parseInt(e[0]);e.length>9||!t?$("[name=time]").val(""):(formatedTime=moment(e,"h:mm a").format("h:mm a"),$("[name=time]").val(formatedTime))}})},Template.editEvent.events({"keyup .required, propertychange .required, input .required, paste .required":function(e,t){t.validateForm()}}),Template.editEvent.events({"submit form":function(e){e.preventDefault(),_gaq.push(["_trackEvent","Post","Create Event",$(e.target).find("[name=name]").val()]);var t=$(e.target).find("[name=date]").val()+" "+$(e.target).find("[name=time]").val(),n={dateTime:moment(t).valueOf(),location:$(e.target).find("[name=location]").val(),name:$(e.target).find("[name=name]").val(),body:$(e.target).find("[name=body]").val()};"undefined"!=typeof eventMainURL&&(n.eventPhoto=eventMainURL),"undefined"!=typeof eventRetinaURL&&(n.retinaEventPhoto=eventRetinaURL),console.log("event attributes: "+JSON.stringify(n));var i=Session.get("currentPostId"),o=Session.get("currentBubbleId");Posts.update(i,{$set:n},function(e){e?throwError(e.reason):(createEditEventUpdate(Meteor.userId(),i),Meteor.Router.to("postPage",o,i))})},"dragover .dropzone":function(e){console.log("Dragover"),e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},"change #eventFilesToUpload":function(e){if(files=e.target.files,files.length>1)error=new Meteor.Error(422,"Please choose only one image as the bubble image."),throwError(error.reason);else if(f=files[0],f.type.match("image.*")){var t=new FileReader,n=document.getElementById("event-main-canvas"),i=document.getElementById("event-retina-canvas"),o=n.getContext("2d"),s=i.getContext("2d"),r=new Image,a=68,l=46;t.onload=function(){return function(e){$(".attach-files > .drop-zone").hide(),$(".attach-files > .drop-zone > .file-chooser-invisible").width(1),$(".attach-files > .drop-zone > .file-chooser-invisible").height(1),$(".crop-container > .crop").attr("src",e.target.result).load(function(){r.src=e.target.result,eventCropArea=$(".crop-container > .crop").imgAreaSelect({instance:!0,aspectRatio:"34:23",imageHeight:r.height,imageWidth:r.width,x1:"10",y1:"10",x2:10+a,y2:10+l,parent:"#add-picture",handles:!0,onInit:function(e,t){o.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,340,230),s.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,680,460),eventMainURL=n.toDataURL(),eventRetinaURL=i.toDataURL(),"1"==Session.get("DisableCrop")&&(34/23>=r.width/r.height?(x1=0,y1=0,width=r.width,height=r.width*(23/34)):(y1=0,x1=0,height=r.height,width=r.height*(34/23)),o.drawImage(r,x1,y1,width,height,0,0,340,230),s.drawImage(r,x1,y1,width,height,0,0,680,460),eventMainURL=n.toDataURL(),eventRetinaURL=i.toDataURL(),eventCropArea.cancelSelection())},onSelectChange:function(e,t){0!=t.width?(o.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,340,230),console.log(t.y1),s.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,680,460),eventMainURL=n.toDataURL(),eventRetinaURL=i.toDataURL()):(eventCropArea.setSelection(10,10,10+a,10+l),eventCropArea.setOptions({show:!0}),eventCropArea.update())},onSelectEnd:function(e,t){(a>t.width||l>t.height)&&(t.x1>r.width-a||t.y1>r.height-l?a>t.x1?(eventCropArea.setSelection(0,t.y2-l,a,t.y2),eventCropArea.update()):l>t.y1?(eventCropArea.setSelection(t.x2-a,0,t.x2,l),eventCropArea.update()):(eventCropArea.setSelection(t.x2-a,t.y2-l,t.x2,t.y2),eventCropArea.update()):(eventCropArea.setSelection(t.x1,t.y1,t.x1+a,t.y1+l),eventCropArea.update()))}})})}}(f),t.readAsDataURL(f)}else error=new Meteor.Error(422,"Please choose a valid image."),throwError(error.reason)}})}(),function(){Template.editFile.rendered=function(){},Template.editFile.events({"submit form":function(e){e.preventDefault(),_gaq.push(["_trackEvent","Post","Create File",$(event.target).find("[name=name]").val()]);for(var t,n=0;t=files[n];n++){var i=new FileReader;i.onload=function(e){return function(t){console.log(e.type,e.size);var n={name:escape(e.name),file:t.target.result,fileType:e.type,fileSize:e.size};console.log(n);var i=Session.get("currentPostId"),o=Session.get("currentBubbleId");Posts.update(i,{$set:n},function(e){e?throwError(e.reason):(createEditEventUpdate(Meteor.userId(),i),Meteor.Router.to("postPage",o,i))})}}(t),i.readAsDataURL(t)}},"dragover #drop_zone":function(e){console.log("Dragover"),e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},"drop #drop_zone":function(e){console.log("Drop"),e.stopPropagation(),e.preventDefault(),files=e.dataTransfer.files;for(var t,n=0;t=files[n];n++)if(t.type.match("image.*")){var i=new FileReader;i.onload=function(e){return function(t){var n=document.createElement("li");n.innerHTML=['<img class="previewthumb" src="',t.target.result,'" title="',escape(e.name),'"/>'].join(""),document.getElementById("list").insertBefore(n,null)}}(t),i.readAsDataURL(t)}else{console.log("Else");var i=new FileReader;i.onload=function(e){return function(t){console.log(t.target.result);var n=document.createElement("li");n.innerHTML=["<div class='add-padding'><div class='cb-icon cb-icon-file'> <svg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='32.041px' height='31.966px' viewBox='0 0 32.041 31.966' enable-background='new 0 0 32.041 31.966' xml:space='preserve'> <path fill-rule='evenodd' clip-rule='evenodd' d='M30,7V6H12V2H2v8h10h18V7z M2,17v13h2h6h20V12H7H4H2V17z M31,32H13H7H1 c-0.55,0-1-0.45-1-1V1c0-0.55,0.45-1,1-1h12c0.55,0,1,0.45,1,1v3h17c0.549,0,1,0.45,1,1v26C32,31.55,31.549,32,31,32z'/></svg></div><div class='cb-icon-lbl file-name'>"+e.name+"</div></div>"].join(""),document.getElementById("list").insertBefore(n,null)}}(t),i.readAsDataURL(t)}},"change #filesToUpload":function(e){for(files=e.target.files,l=document.getElementById("list");l.hasChildNodes();)l.removeChild(l.lastChild);for(var t,n=0;t=files[n];n++)if(t.type.match("image.*")){var i=new FileReader;i.onload=function(e){return function(t){var n=document.createElement("li");n.innerHTML=['<img class="previewthumb" src="',t.target.result,'" title="',escape(e.name),'"/>'].join(""),document.getElementById("list").insertBefore(n,null)}}(t),i.readAsDataURL(t)}else{console.log("Else");var i=new FileReader;i.onload=function(e){return function(t){console.log(t.target.result);var n=document.createElement("li");n.innerHTML=["<div class='add-padding'><div class='cb-icon cb-icon-file'> <svg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='32.041px' height='31.966px' viewBox='0 0 32.041 31.966' enable-background='new 0 0 32.041 31.966' xml:space='preserve'> <path fill-rule='evenodd' clip-rule='evenodd' d='M30,7V6H12V2H2v8h10h18V7z M2,17v13h2h6h20V12H7H4H2V17z M31,32H13H7H1 c-0.55,0-1-0.45-1-1V1c0-0.55,0.45-1,1-1h12c0.55,0,1,0.45,1,1v3h17c0.549,0,1,0.45,1,1v26C32,31.55,31.549,32,31,32z'/></svg></div><div class='cb-icon-lbl file-name'>"+e.name+"</div></div>"].join(""),document.getElementById("list").insertBefore(n,null)}}(t),i.readAsDataURL(t)}}})}(),function(){function e(e){discussionFiles=e,discussionFiles.length>0&&($(".cb-discussionSubmit-form > .paperclip-attach-files > .paperclip-attach > .cb-paperclip-lbl").hide(),$(".cb-discussionSubmit-form > .paperclip-attach-files > .paperclip-attach > .cb-icon-attachment").hide(),$(".cb-discussionSubmit-form > .paperclip-attach-files > .paperclip-attach > .file-chooser-invisible").width(1),$(".cb-discussionSubmit-form > .paperclip-attach-files > .paperclip-attach > .file-chooser-invisible").height(1));for(var t,i=0;t=discussionFiles[i];i++)if(n(t.type)){var o=new FileReader;o.onload=function(e,t,n){return function(){$(".cb-discussionSubmit-form > .paperclip-attach-files > .paperclip-attach > .attachments-list").append('<li><span class="attachment-cancel-icon" id="file-'+n+'"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><circle fill-rule="evenodd" clip-rule="evenodd" cx="8" cy="8" r="8"/><g><rect x="7.001" y="4" transform="matrix(-0.7151 -0.699 0.699 -0.7151 8.1297 19.3133)" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="2" height="8"/><rect x="7" y="4" transform="matrix(-0.6989 0.7152 -0.7152 -0.6989 19.3134 7.869)" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="2" height="8"/></g></span><span class="attachment-list-filename">'+escape(e.name).replace(/%20/g,"_")+"</span></li>"),$(".cb-discussionSubmit-form > .paperclip-attach-files > .paperclip-attach > .attachments-list > li > #file-"+n).click(function(){var e=this.id.split("-");discussionDeletedFileIndices.push(parseInt(e[1])),$(this).parent().remove()})}}(t,discussionFiles,i),o.readAsDataURL(t)}else{console.log("Else");var o=new FileReader;o.onload=function(){return function(){}}(t),o.readAsDataURL(t)}}function t(){for(var e={name:$(".cb-discussionSubmit-form").find("[name=name]").val(),body:$(".cb-discussionSubmit-form").find(".wysiwyg").html(),postType:"discussion",bubbleId:Session.get("currentBubbleId"),children:[]},t=[],i=0;discussionFiles.length>i;i++)-1==discussionDeletedFileIndices.indexOf(i)&&n(discussionFiles[i].type)&&t.push(discussionFiles[i]);createPostWithAttachments(e,t)}function n(e){return console.log("File type: ",e),e.match("vnd.*")||e.match("csv.*")||e.match("pdf.*")||e.match("zip.*")||e.match("postscript.*")||e.match("msword.*")||e.match("plain.*")||e.match("image.*")?!0:!1}Template.discussionSubmit.created=function(){discussionFiles=[],discussionDeletedFileIndices=[],this.validateForm=function(){var e=0;$("#cb-form-container-discussion-create .required").each(function(){$(this).hasClass("wysiwyg")||""!==$(this).val()||void 0==$(this).attr("name")?$(this).hasClass("wysiwyg")&&""==$(this).html().trim().replace("<br>","").replace('<span class="wysiwyg-placeholder">Type here...</span>',"")&&e++:e++,0==e?($("#cb-form-container-discussion-create .cb-submit").prop("disabled",!1),$("#cb-form-container-discussion-create .cb-submit").removeClass("ready-false")):($("#cb-form-container-discussion-create .cb-submit").prop("disabled",!0),$("#cb-form-container-discussion-create .cb-submit").addClass("ready-false"))})}},Template.discussionSubmit.rendered=function(){this.validateForm()},Template.discussionSubmit.events({"keyup .required, propertychange .required, input .required, paste .required":function(e,t){t.validateForm()},"click .cb-discussionSubmit-form > .cb-submit-container > .cb-submit":function(e){e.preventDefault(),_gaq.push(["_trackEvent","Post","Create Discussion",$(e.target).find("[name=name]").val()]),t()},"change .cb-discussionSubmit-form > .paperclip-attach-files > .paperclip-attach > .file-chooser-invisible":function(t){console.log("Paperclip attach"),t.stopPropagation(),t.preventDefault(),e(t.target.files)}})}(),function(){Template.eventSubmit.created=function(){eventMainURL="/img/Event.jpg",eventRetinaURL="/img/Event.jpg",this.validateForm=function(){var e=0;$("#cb-form-container-event-create .required").each(function(){$(this).hasClass("wysiwyg")||""!==$(this).val()||void 0==$(this).attr("name")?$(this).hasClass("wysiwyg")&&""==$(this).html().trim().replace("<br>","").replace('<span class="wysiwyg-placeholder">Type here...</span>',"")&&e++:e++,0==e?($("#cb-form-container-event-create .cb-submit").prop("disabled",!1),$("#cb-form-container-event-create .cb-submit").removeClass("ready-false")):($("#cb-form-container-event-create .cb-submit").prop("disabled",!0),$("#cb-form-container-event-create .cb-submit").addClass("ready-false"))})}},Template.eventSubmit.events({"click .cb-eventSubmit-form > .cb-submit-container > .cb-submit":function(e){e.preventDefault(),_gaq.push(["_trackEvent","Post","Create Event",$(e.target).find("[name=name]").val()]);var t=$("#cb-form-container-event-create .date").val()+" "+$("#cb-form-container-event-create .time").val();console.log("Event photo: ",eventMainURL);var n={dateTime:moment(t).valueOf(),location:$(".cb-eventSubmit-form > .first > .event-location").val(),name:$(".cb-eventSubmit-form > .first > .event-name").val(),body:$(".cb-eventSubmit-form > .event-details").val(),postType:"event",bubbleId:Session.get("currentBubbleId"),attendees:[Meteor.userId()],eventPhoto:eventMainURL,retinaEventPhoto:eventRetinaURL};console.log("event attributes: ",n),createPost(n)},"dragover .cb-eventSubmit-form .attach-files > .drop-zone":function(e){console.log("Dragover"),e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},"change .cb-eventSubmit-form .attach-files > .drop-zone > .file-chooser-invisible":function(e){if(files=e.target.files,console.log("Event picture: ",files),files.length>1)error=new Meteor.Error(422,"Please choose only one image as the event image."),throwError(error.reason);else if(f=files[0],f.type.match("image.*")){var t=new FileReader,n=document.getElementById("event-main-canvas"),i=document.getElementById("event-retina-canvas"),o=n.getContext("2d"),s=i.getContext("2d"),r=new Image,a=68,l=46;t.onload=function(){return function(e){$(".attach-files > .drop-zone").hide(),$(".attach-files > .drop-zone > .file-chooser-invisible").width(1),$(".attach-files > .drop-zone > .file-chooser-invisible").height(1),$(".crop-container > .crop").attr("src",e.target.result).load(function(){r.src=e.target.result,eventCropArea=$(".crop-container > .crop").imgAreaSelect({instance:!0,aspectRatio:"34:23",imageHeight:r.height,imageWidth:r.width,x1:"10",y1:"10",x2:10+a,y2:10+l,parent:".cb-eventSubmit-form",handles:!0,onInit:function(e,t){o.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,340,230),s.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,680,460),eventMainURL=n.toDataURL(),eventRetinaURL=i.toDataURL(),"1"==Session.get("DisableCrop")&&(34/23>=r.width/r.height?(x1=0,y1=0,width=r.width,height=r.width*(23/34)):(y1=0,x1=0,height=r.height,width=r.height*(34/23)),o.drawImage(r,x1,y1,width,height,0,0,340,230),s.drawImage(r,x1,y1,width,height,0,0,680,460),eventMainURL=n.toDataURL(),eventRetinaURL=i.toDataURL(),eventCropArea.cancelSelection())},onSelectChange:function(e,t){0!=t.width?(o.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,340,230),console.log(t.y1),s.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,680,460),eventMainURL=n.toDataURL(),eventRetinaURL=i.toDataURL()):(eventCropArea.setSelection(10,10,10+a,10+l),eventCropArea.setOptions({show:!0}),eventCropArea.update())},onSelectEnd:function(e,t){(a>t.width||l>t.height)&&(t.x1>r.width-a||t.y1>r.height-l?a>t.x1?(eventCropArea.setSelection(0,t.y2-l,a,t.y2),eventCropArea.update()):l>t.y1?(eventCropArea.setSelection(t.x2-a,0,t.x2,l),eventCropArea.update()):(eventCropArea.setSelection(t.x2-a,t.y2-l,t.x2,t.y2),eventCropArea.update()):(eventCropArea.setSelection(t.x1,t.y1,t.x1+a,t.y1+l),eventCropArea.update()))}})})}}(f),t.readAsDataURL(f)}else error=new Meteor.Error(422,"Please choose a valid image."),throwError(error.reason)}}),Template.eventSubmit.events({"keyup .required, propertychange .required, input .required, paste .required":function(e,t){t.validateForm()}}),Template.eventSubmit.rendered=function(){this.validateForm(),$(".date-picker").glDatePicker({cssName:"flatwhite",allowMonthSelect:!1,allowYearSelect:!1}),$("[name=time]").change(function(){var e=$("[name=time]").val();if(e){var t=parseInt(e[0]);e.length>9||!t?$("[name=time]").val(""):(formatedTime=moment(e,"h:mm a").format("h:mm a"),$("[name=time]").val(formatedTime))}}),768>$(window).width()?Session.set("DisableCrop","1"):Session.set("DisableCrop","")}}(),function(){function e(e){files=e,$(".cb-fileSubmit-form > .attach-files > .drop-zone > .attachments-list").html("");for(var t,n=0;t=files[n];n++)if(t.type.match("image.*")){var i=new FileReader;i.onload=function(e){return function(t){$(".cb-fileSubmit-form > .attach-files > .drop-zone > .attachments-list").append('<li><img class="previewthumb" src="'+t.target.result+'" title="'+escape(e.name)+'"></li>')}}(t),i.readAsDataURL(t)}else{console.log("Else");var i=new FileReader;i.onload=function(e){return function(t){console.log(t.target.result),$(".cb-fileSubmit-form > .attach-files > .drop-zone > .attachments-list").append("<li><div class='add-padding'><div class='cb-icon cb-icon-file'> <svg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='32.041px' height='31.966px' viewBox='0 0 32.041 31.966' enable-background='new 0 0 32.041 31.966' xml:space='preserve'> <path fill-rule='evenodd' clip-rule='evenodd' d='M30,7V6H12V2H2v8h10h18V7z M2,17v13h2h6h20V12H7H4H2V17z M31,32H13H7H1 c-0.55,0-1-0.45-1-1V1c0-0.55,0.45-1,1-1h12c0.55,0,1,0.45,1,1v3h17c0.549,0,1,0.45,1,1v26C32,31.55,31.549,32,31,32z'/></svg></div><div class='cb-icon-lbl file-name'>"+e.name+"</div></div></li>")}}(t),i.readAsDataURL(t)}}Template.fileSubmit.events({"click .cb-fileSubmit-form > .cb-submit-container > .cb-submit":function(e){e.preventDefault(),console.log("Submitting files."),_gaq.push(["_trackEvent","Post","Create File",$(e.target).find("[name=name]").val()]);for(var t,n=0;t=files[n];n++){var i=new FileReader;i.onload=function(e){return function(t){console.log(e.type,e.size),createPost({name:escape(e.name).replace(/%20/g,"_"),file:t.target.result,fileType:e.type,fileSize:e.size,postType:"file",numDownloads:0,lastDownloadTime:(new Date).getTime(),bubbleId:Session.get("currentBubbleId")})}}(t),i.readAsDataURL(t)}files=[]},"dragover .cb-fileSubmit-form > .attach-files > .drop-zone":function(e){console.log("Dragover"),e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},"drop .cb-fileSubmit-form > .attach-files > .drop-zone":function(t){t.stopPropagation(),t.preventDefault(),e(t.dataTransfer.files)},"change .cb-fileSubmit-form > .attach-files > .drop-zone > .file-chooser-invisible":function(t){t.stopPropagation(),t.preventDefault(),e(t.target.files)}}),Template.fileSubmit.helpers({getFileUploadAttributes:function(){var e={fileArray:[]};return e}}),Template.fileSubmit.created=function(){files=[]}}(),function(){var e={selectedBubble:function(){var e=window.location.pathname,t=e.split("/"),n=t[2],i=Bubbles.findOne(n);return i}};Handlebars.registerHelper("systemBubble",e),Meteor.methods({systemBubble:e})}(),function(){Handlebars.registerHelper("systemCategory",{categories:[{body:"Student started groups; chartered or not, well-organized or not, virtual or real.",nameLong:"student organization",nameShort:"club"},{body:"Fraternities, sororities, and anything related to greek life at Emory.",nameLong:"greek organization",nameShort:"greek"},{body:"Groups related music, arts, theatre, nightlife, the weekend, spring break, etc.",nameLong:"arts and entertainment",nameShort:"art"},{body:"From varsity teams, club sports, and intramurals to jogging groups and kickabouts.",nameLong:"athletics and recreation",nameShort:"sport"},{body:"e.g., History department, BBA, Law School, Phi Sigma Tau, Stipe Scholarship, etc.",nameLong:"academic department",nameShort:"department"},{body:"e.g., Deans, OUE, Sustaniability Office, Admissions, faculty committees, etc.",nameLong:"faculty committee",nameShort:"faculty"},{body:"e.g., Library, EPD, Dining, Career Center, Student Health, Religious Life, LGBT, etc.",nameLong:"campus resource",nameShort:"resource"},{body:"e.g., Intro to Physics, Comparative Literature, Strategic Management, etc.",nameLong:"class/study group",nameShort:"class"},{body:"e.g., Harris Hall, FYE, Turman Fourth, Clairmont campus, etc.",nameLong:"residence hall",nameShort:"dorm"},{body:"For all your uncategorizable Bubble needs.",nameLong:"custom group",nameShort:"custom"}]})}(),function(){Handlebars.registerHelper("systemForm",{formParams:{bubble:{create:{validate:["title","category","body"],templateName:"formElementsBubbleCreate",isCollapsed:"collapse-false",objectNameDash:"bubble-create",wysiwygHeading:"Description",arrowVisible:"false",submit:function(){var e={category:$(event.target).find("[name=category]").val(),bubbleType:$(".cb-form").find("[name=bubbleType]").val(),description:$(".cb-form").find("[name=body]").html(),title:$(".cb-form").find("[name=title]").val(),retinaProfilePicture:$("#profileRetinaPhoto").attr("src"),retinaCoverPhoto:$("#coverRetinaPhoto").attr("src"),profilePicture:$("#profilePhoto").attr("src"),coverPhoto:$("#coverPhoto").attr("src")};Meteor.call("bubble",e,function(e,t){e?throwError(e.reason):Meteor.Router.to("bubblePage",t)})}},edit:{validate:["title","category","body"],templateName:"formElementsBubbleEdit",isCollapsed:"collapse-true",objectNameDash:"bubble-edit",wysiwygHeading:"Description",arrowVisible:"false",wysiwygBubble:"true",submit:function(){var e=Meteor.call("systemBubble.selectedBubble"),t={category:$(event.target).find("[name=category]").val(),title:$(event.target).find("[name=title]").val(),description:$(event.target).find("[name=body]").html(),lastUpdated:(new Date).getTime()};Bubbles.update(e,{$set:t},function(t){t?throwError(t.reason):(createBubbleEditUpdate(),Meteor.Router.to("bubblePage",e))})}}},discussion:{create:{validate:["name","body"],templateName:"formElementsDiscussionCreate",isCollapsed:"collapse-true",objectNameDash:"discussion-create",wysiwygHeading:"Discussion body",arrowVisible:"true",submit:function(){createPostWithAttachments({bubbleId:Meteor.call("systemBubble.selectedBubble"),body:$(event.target).find("[name=body]").html(),name:$(event.target).find("[name=name]").val(),postType:"discussion",children:[]},files)}}},file:{create:{validate:[],templateName:"formElementsFileCreate",isCollapsed:"collapse-true",objectNameDash:"file-create",arrowVisible:"true",fileArray:[],submit:function(){console.log(this.fileArray),_gaq.push(["_trackEvent","Post","Create File",$(event.target).find("[name=name]").val()]);for(var e,t=this.fileArray,n=0;e=t[n];n++){var i=new FileReader;i.onload=function(e){return function(t){console.log(e.type,e.size),createPost({name:escape(e.name),file:t.target.result,fileType:e.type,fileSize:e.size,postType:"file",numDownloads:0,lastDownloadTime:(new Date).getTime(),bubbleId:Session.get("currentBubbleId")})}}(e),i.readAsDataURL(e)}}}}}})}(),function(){Template.bubbleCover.helpers({hasBeenInvited:function(){return _.contains(this.users.invitees,Meteor.userId())},hasApplied:function(){return _.contains(this.users.applicants,Meteor.userId())},hasJoinedBubble:function(){return _.contains(this.users.members,Meteor.userId())||_.contains(this.users.admins,Meteor.userId())}}),Template.bubbleCover.events({"click .invite-accept":function(){Meteor.call("acceptInvitation",this._id)},"click .invite-deny":function(){Meteor.call("removeInvitee",this._id)},"click .join-apply":function(){_gaq.push(["_trackEvent","Bubble","Join Bubble",this.title]),Meteor.call("sendApplicantEmail",Meteor.userId(),this._id),Meteor.call("joinBubble",Session.get("currentBubbleId"))},"click .cancel-apply":function(){_gaq.push(["_trackEvent","Bubble","Cancel Application",this.title]),Meteor.call("cancelJoinBubble",Session.get("currentBubbleId"))}})}(),function(){Template.bubbleEdit.events({"click .select-bubble-type > .normal":function(e){e.preventDefault(),$("input[name=bubbleType]").val("normal"),selectedBubbleType="normal",$(".select-bubble-type > .super").removeClass("active-true"),$(".select-bubble-type > .normal").addClass("active-true")},"click .select-bubble-type > .super":function(e){e.preventDefault(),$("input[name=bubbleType]").val("super"),$(".select-bubble-type > .normal").removeClass("active-true"),$(".select-bubble-type > .super").addClass("active-true")},"click .bubble-edit > .cb-submit-container > .cb-submit":function(e){e.preventDefault();var t=Session.get("currentBubbleId"),n={title:$(".bubble-edit > .first > .title").val(),description:$(".cb-form > .wysiwyg_group > .wysiwyg").html(),category:$(".bubble-edit > .cb-form-row > .bubble-category > .category").val(),lastUpdated:(new Date).getTime(),bubbleType:$(".cb-form").find("[name=bubbleType]").val()};"undefined"!=typeof profileMainURL&&(n.profilePicture=profileMainURL),"undefined"!=typeof profileRetinaURL&&(n.retinaProfilePicture=profileRetinaURL),"undefined"!=typeof coverMainURL&&(n.coverPicture=coverMainURL),"undefined"!=typeof coverRetinaURL&&(n.retinaCoverPicture=coverRetinaURL),Bubbles.update(t,{$set:n},function(e){e?throwError(e.reason):(createBubbleEditUpdate(),Meteor.Router.to("bubblePage",t))})},"dragover .dropzone":function(e){console.log("Dragover"),e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},"change .cb-form > .attach-profile-photo > .drop-zone":function(e){if(e.stopPropagation(),e.preventDefault(),console.log("Dropzone profile photo change: ",e.target.files),files=e.target.files,files.length>1)error=new Meteor.Error(422,"Please choose only one image as the bubble image."),throwError(error.reason);else if(f=files[0],f.type.match("image.*")){var t=new FileReader,n=document.getElementById("profile-main-canvas"),i=document.getElementById("profile-retina-canvas"),o=n.getContext("2d"),s=i.getContext("2d"),r=new Image,a=67,l=67;t.onload=function(){return function(e){$(".bubble-edit > .attach-profile-photo > .drop-zone").hide(),$(".bubble-edit > .attach-profile-photo > .drop-zone > .file-chooser-invisible").width(1),$(".bubble-edit > .attach-profile-photo > .drop-zone > .file-chooser-invisible").height(1),$(".crop-profile > .crop").attr("src",e.target.result).load(function(){r.src=e.target.result,profileCropArea=$(".crop-profile > .crop").imgAreaSelect({instance:!0,aspectRatio:"1:1",imageHeight:r.height,imageWidth:r.width,x1:"10",y1:"10",x2:10+a,y2:10+l,parent:".cb-form",handles:!0,onInit:function(e,t){o.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,300,300),s.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,600,600),profileMainURL=n.toDataURL(),profileRetinaURL=i.toDataURL(),"1"==Session.get("DisableCrop")&&(r.width<=r.height?(x1=0,y1=(r.height-r.width)/2,widthHeight=r.width):(y1=0,x1=(r.width-r.height)/2,widthHeight=r.height),o.drawImage(r,x1,y1,widthHeight,widthHeight,0,0,300,300),s.drawImage(r,x1,y1,widthHeight,widthHeight,0,0,600,600),profileMainURL=n.toDataURL(),profileRetinaURL=i.toDataURL(),profileCropArea.cancelSelection())},onSelectChange:function(e,t){0!=t.width?(o.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,300,300),console.log(t.y1),s.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,600,600),profileMainURL=n.toDataURL(),profileRetinaURL=i.toDataURL()):(profileCropArea.setSelection(10,10,10+a,10+l),profileCropArea.setOptions({show:!0}),profileCropArea.update())},onSelectEnd:function(e,t){(a>t.width||l>t.height)&&(t.x1>r.width-a||t.y1>r.height-l?a>t.x1?(profileCropArea.setSelection(0,t.y2-l,a,t.y2),profileCropArea.update()):l>t.y1?(profileCropArea.setSelection(t.x2-a,0,t.x2,l),profileCropArea.update()):(profileCropArea.setSelection(t.x2-a,t.y2-l,t.x2,t.y2),profileCropArea.update()):(profileCropArea.setSelection(t.x1,t.y1,t.x1+a,t.y1+l),profileCropArea.update()))}})})}}(f),t.readAsDataURL(f)}},"change .cb-form > .attach-cover-photo > .drop-zone":function(e){if(e.stopPropagation(),e.preventDefault(),console.log("Dropzone cover photo change: ",e.target.files),files=e.target.files,files.length>1)error=new Meteor.Error(422,"Please choose only one image as the bubble image."),throwError(error.reason);
else if(f=files[0],f.type.match("image.*")){var t=new FileReader,n=document.getElementById("cover-main-canvas"),i=document.getElementById("cover-retina-canvas"),o=n.getContext("2d"),s=i.getContext("2d"),r=new Image,a=192,l=22;t.onload=function(){return function(e){$(".bubble-edit > .attach-cover-photo > .drop-zone").hide(),$(".bubble-edit > .attach-cover-photo > .drop-zone > .file-chooser-invisible").width(1),$(".bubble-edit > .attach-cover-photo > .drop-zone > .file-chooser-invisible").height(1),$(".crop-cover > .crop").attr("src",e.target.result).load(function(){r.src=e.target.result,coverCropArea=$(".crop-cover > .crop").imgAreaSelect({instance:!0,aspectRatio:"96:11",imageHeight:r.height,imageWidth:r.width,x1:"10",y1:"10",x2:10+a,y2:10+l,parent:".cb-form",handles:!0,onInit:function(e,t){o.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,960,110),s.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,1920,220),coverMainURL=n.toDataURL(),coverRetinaURL=i.toDataURL(),"1"==Session.get("DisableCrop")&&(96/11>=r.width/r.height?(x1=0,y1=0,width=r.width,height=r.width*(11/96)):(y1=0,x1=0,height=r.height,width=r.height*(96/11)),o.drawImage(r,x1,y1,width,height,0,0,960,110),s.drawImage(r,x1,y1,width,height,0,0,1920,220),coverMainURL=n.toDataURL(),coverRetinaURL=i.toDataURL(),coverCropArea.cancelSelection())},onSelectChange:function(e,t){0!=t.width?(o.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,960,110),console.log(t.y1),s.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,1920,220),coverMainURL=n.toDataURL(),coverRetinaURL=i.toDataURL()):(coverCropArea.setSelection(10,10,10+a,10+l),coverCropArea.setOptions({show:!0}),coverCropArea.update())},onSelectEnd:function(e,t){(a>t.width||l>t.height)&&(t.x1>r.width-a||t.y1>r.height-l?a>t.x1?(coverCropArea.setSelection(0,t.y2-l,a,t.y2),coverCropArea.update()):l>t.y1?(coverCropArea.setSelection(t.x2-a,0,t.x2,l),coverCropArea.update()):(coverCropArea.setSelection(t.x2-a,t.y2-l,t.x2,t.y2),coverCropArea.update()):(coverCropArea.setSelection(t.x1,t.y1,t.x1+a,t.y1+l),coverCropArea.update()))}})})}}(f),t.readAsDataURL(f)}},"click #delete_bubble":function(e){if(e.preventDefault(),confirm("Delete this bubble?")){var t=Session.get("currentBubbleId");Meteor.call("deleteBubble",t);var n=Bubbles.find({$or:[{"users.members":Meteor.userId()},{"users.admins":Meteor.userId()}]},{sort:{"users.members":-1,"users.admins":-1},limit:1}).fetch();n.length>0?Meteor.Router.to("/mybubbles/"+n[0]._id+"/home"):Meteor.Router.to("searchBubbles")}}}),Template.bubbleEdit.events({"keyup .required, propertychange .required, input .required, paste .required, mouseout li":function(e,t){t.validateForm()}}),Template.bubbleEdit.created=function(){discussionFiles=[],discussionDeletedFileIndices=[],this.validateForm=function(){var e=0;$("#cb-form-container-bubble-edit .required").each(function(){$(this).hasClass("wysiwyg")||""!==$(this).val()||void 0==$(this).attr("name")?$(this).hasClass("wysiwyg")&&""==$(this).html().trim().replace("<br>","").replace('<span class="wysiwyg-placeholder">Type here...</span>',"")&&e++:e++,0==e?($("#cb-form-container-bubble-edit .cb-submit").prop("disabled",!1),$("#cb-form-container-bubble-edit .cb-submit").removeClass("ready-false")):($("#cb-form-container-bubble-edit .cb-submit").prop("disabled",!0),$("#cb-form-container-bubble-edit .cb-submit").addClass("ready-false"))})}},Template.bubbleEdit.rendered=function(){768>$(window).width()?Session.set("DisableCrop","1"):Session.set("DisableCrop",""),this.validateForm(),$("#coverphoto_retina").hide(),$("#profilepicture_retina").hide(),$("#profilepicture_preview").hide(),$("#coverphoto_preview").hide();var e=Session.get("currentBubbleId");Bubbles.findOne({_id:e}),console.log("Edit Bubble:",this);var t=$("[name=category]").val();$("[name="+t+"]").addClass("active"),$(".categoryBox").click(function(){var e=$(this).attr("name");$("[name=category]").val(e),$(".categoryBox").removeClass("active"),$(this).addClass("active")})}}(),function(){Template.bubbleItem.helpers({isAdmin:function(){return _.contains(this.users.admins,Meteor.userId())}}),Template.bubbleItem.events({"click .addPost":function(){Session.set("currentBubbleId",this._id)}})}(),function(){Template.bubbleSectionSelector.helpers({isSelected:function(e){var t=window.location.pathname,n=t.split("/");return n[3]==e}})}(),function(){Template.bubbleSubmit.events({"click .bubble-create > .cb-submit-container > .cb-submit":function(e){if(e.preventDefault(),e.stopPropagation(),console.log("Bubble Submit"),profileMainURL)var t={category:$(".cb-form").find("[name=category]").val(),bubbleType:$(".cb-form").find("[name=bubbleType]").val(),description:$(".cb-form").find("[name=body]").html(),title:$(".cb-form").find("[name=title]").val(),retinaProfilePicture:profileRetinaURL,retinaCoverPhoto:coverRetinaURL,profilePicture:profileMainURL,coverPhoto:coverMainURL};Meteor.call("bubble",t,function(e,n){e?throwError(e.reason):(Meteor.call("addBubbleToIndex",n,t.title),Meteor.Router.to("bubbleMembersPage",n))})},"click .select-bubble-type > .normal":function(e){e.preventDefault(),$("input[name=bubbleType]").val("normal"),selectedBubbleType="normal",$(".select-bubble-type > .super").removeClass("active-true"),$(".select-bubble-type > .normal").addClass("active-true")},"click .select-bubble-type > .super":function(e){e.preventDefault(),$("input[name=bubbleType]").val("super"),$(".select-bubble-type > .normal").removeClass("active-true"),$(".select-bubble-type > .super").addClass("active-true")},"dragover .bubble-create > .attach-cover-photo > .drop-zone":function(e){console.log("cover Dragover"),e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},"drop .bubble-create > .attach-cover-photo > .drop-zone":function(e){console.log("cover drop"),e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},"change .bubble-create > .attach-cover-photo > .drop-zone > .file-chooser-invisible":function(e){if(e.stopPropagation(),e.preventDefault(),console.log("Dropzone cover photo change: ",e.target.files),files=e.target.files,files.length>1)error=new Meteor.Error(422,"Please choose only one image as the bubble image."),throwError(error.reason);else if(f=files[0],f.type.match("image.*")){var t=new FileReader,n=document.getElementById("cover-main-canvas"),i=document.getElementById("cover-retina-canvas"),o=n.getContext("2d"),s=i.getContext("2d"),r=new Image,a=192,l=22;t.onload=function(){return function(e){$(".bubble-create > .attach-cover-photo > .drop-zone").hide(),$(".bubble-create > .attach-cover-photo > .drop-zone > .file-chooser-invisible").width(1),$(".bubble-create > .attach-cover-photo > .drop-zone > .file-chooser-invisible").height(1),$(".crop-cover > .crop").attr("src",e.target.result).load(function(){r.src=e.target.result,coverCropArea=$(".crop-cover > .crop").imgAreaSelect({instance:!0,aspectRatio:"96:11",imageHeight:r.height,imageWidth:r.width,x1:"10",y1:"10",x2:10+a,y2:10+l,parent:".cb-form",handles:!0,onInit:function(e,t){o.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,960,110),s.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,1920,220),coverMainURL=n.toDataURL(),coverRetinaURL=i.toDataURL(),"1"==Session.get("DisableCrop")&&(96/11>=r.width/r.height?(x1=0,y1=0,width=r.width,height=r.width*(11/96)):(y1=0,x1=0,height=r.height,width=r.height*(96/11)),o.drawImage(r,x1,y1,width,height,0,0,960,110),s.drawImage(r,x1,y1,width,height,0,0,1920,220),coverMainURL=n.toDataURL(),coverRetinaURL=i.toDataURL(),coverCropArea.cancelSelection())},onSelectChange:function(e,t){0!=t.width?(o.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,960,110),console.log(t.y1),s.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,1920,220),coverMainURL=n.toDataURL(),coverRetinaURL=i.toDataURL()):(coverCropArea.setSelection(10,10,10+a,10+l),coverCropArea.setOptions({show:!0}),coverCropArea.update())},onSelectEnd:function(e,t){(a>t.width||l>t.height)&&(t.x1>r.width-a||t.y1>r.height-l?a>t.x1?(coverCropArea.setSelection(0,t.y2-l,a,t.y2),coverCropArea.update()):l>t.y1?(coverCropArea.setSelection(t.x2-a,0,t.x2,l),coverCropArea.update()):(coverCropArea.setSelection(t.x2-a,t.y2-l,t.x2,t.y2),coverCropArea.update()):(coverCropArea.setSelection(t.x1,t.y1,t.x1+a,t.y1+l),coverCropArea.update()))}})})}}(f),t.readAsDataURL(f)}},"dragover .bubble-create > .attach-profile-photo > .drop-zone":function(e){console.log("profile Dragover"),e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},"drop .bubble-create > .attach-profile-photo > .drop-zone":function(e){console.log("profile drop"),e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},"change .bubble-create > .attach-profile-photo > .drop-zone > .file-chooser-invisible":function(e){if(e.stopPropagation(),e.preventDefault(),console.log("Dropzone profile photo change: ",e.target.files),files=e.target.files,files.length>1)error=new Meteor.Error(422,"Please choose only one image as the bubble image."),throwError(error.reason);else if(f=files[0],f.type.match("image.*")){var t=new FileReader,n=document.getElementById("profile-main-canvas"),i=document.getElementById("profile-retina-canvas"),o=n.getContext("2d"),s=i.getContext("2d"),r=new Image,a=67,l=67;t.onload=function(){return function(e){$(".bubble-create > .attach-profile-photo > .drop-zone").hide(),$(".bubble-create > .attach-profile-photo > .drop-zone > .file-chooser-invisible").width(1),$(".bubble-create > .attach-profile-photo > .drop-zone > .file-chooser-invisible").height(1),$(".crop-profile > .crop").attr("src",e.target.result).load(function(){r.src=e.target.result,profileCropArea=$(".crop-profile > .crop").imgAreaSelect({instance:!0,aspectRatio:"1:1",imageHeight:r.height,imageWidth:r.width,x1:"10",y1:"10",x2:10+a,y2:10+l,parent:".cb-form",handles:!0,onInit:function(e,t){o.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,300,300),s.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,600,600),profileMainURL=n.toDataURL(),profileRetinaURL=i.toDataURL(),"1"==Session.get("DisableCrop")&&(r.width<=r.height?(x1=0,y1=(r.height-r.width)/2,widthHeight=r.width):(y1=0,x1=(r.width-r.height)/2,widthHeight=r.height),o.drawImage(r,x1,y1,widthHeight,widthHeight,0,0,300,300),s.drawImage(r,x1,y1,widthHeight,widthHeight,0,0,600,600),profileMainURL=n.toDataURL(),profileRetinaURL=i.toDataURL(),profileCropArea.cancelSelection())},onSelectChange:function(e,t){0!=t.width?(o.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,300,300),console.log(t.y1),s.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,600,600),profileMainURL=n.toDataURL(),profileRetinaURL=i.toDataURL()):(profileCropArea.setSelection(10,10,10+a,10+l),profileCropArea.setOptions({show:!0}),profileCropArea.update())},onSelectEnd:function(e,t){(a>t.width||l>t.height)&&(t.x1>r.width-a||t.y1>r.height-l?a>t.x1?(profileCropArea.setSelection(0,t.y2-l,a,t.y2),profileCropArea.update()):l>t.y1?(profileCropArea.setSelection(t.x2-a,0,t.x2,l),profileCropArea.update()):(profileCropArea.setSelection(t.x2-a,t.y2-l,t.x2,t.y2),profileCropArea.update()):(profileCropArea.setSelection(t.x1,t.y1,t.x1+a,t.y1+l),profileCropArea.update()))}})})}}(f),t.readAsDataURL(f)}},"click #club":function(e){e.stopPropagation(),category="club",$(".nav-tabs li").removeClass("active"),$("#club").addClass("active"),$("[name=category]").val("club")},"click #greek":function(e){e.stopPropagation(),category="greek",$(".nav-tabs li").removeClass("active"),$("#greek").addClass("active"),$("[name=category]").val("greek")},"click #art":function(e){e.stopPropagation(),category="art",$(".nav-tabs li").removeClass("active"),$("#art").addClass("active"),$("[name=category]").val("art")},"click #sport":function(e){e.stopPropagation(),category="sport",$(".nav-tabs li").removeClass("active"),$("#sport").addClass("active"),$("[name=category]").val("sport")},"click #major":function(e){e.stopPropagation(),category="major",$(".nav-tabs li").removeClass("active"),$("#major").addClass("active"),$("[name=category]").val("major")},"click #office":function(e){e.stopPropagation(),category="office",$(".nav-tabs li").removeClass("active"),$("#office").addClass("active"),$("[name=category]").val("office")},"click #service":function(e){e.stopPropagation(),category="service",$(".nav-tabs li").removeClass("active"),$("#service").addClass("active"),$("[name=category]").val("service")},"click #study":function(e){e.stopPropagation(),category="study",$(".nav-tabs li").removeClass("active"),$("#study").addClass("active"),$("[name=category]").val("study")},"click #dorm":function(e){e.stopPropagation(),category="dorm",$(".nav-tabs li").removeClass("active"),$("#dorm").addClass("active"),$("[name=category]").val("dorm")},"click #custom":function(e){e.stopPropagation(),category="custom",$(".nav-tabs li").removeClass("active"),$("#custom").addClass("active"),$("[name=category]").val("custom")}}),Template.bubbleSubmit.events({"keyup .required, propertychange .required, input .required, paste .required, mouseout li":function(e,t){t.validateForm()}}),Template.bubbleSubmit.created=function(){discussionFiles=[],discussionDeletedFileIndices=[],this.validateForm=function(){var e=0;$("#cb-form-container-bubble-create .required").each(function(){$(this).hasClass("wysiwyg")||""!==$(this).val()||void 0==$(this).attr("name")?$(this).hasClass("wysiwyg")&&""==$(this).html().trim().replace("<br>","").replace('<span class="wysiwyg-placeholder">Type here...</span>',"")&&e++:e++,0==e?($("#cb-form-container-bubble-create .cb-submit").prop("disabled",!1),$("#cb-form-container-bubble-create .cb-submit").removeClass("ready-false")):($("#cb-form-container-bubble-create .cb-submit").prop("disabled",!0),$("#cb-form-container-bubble-create .cb-submit").addClass("ready-false"))})}},Template.bubbleSubmit.rendered=function(){this.validateForm(),profileRetinaURL="/img/Bubble-Profile.jpg",profileMainURL="/img/Bubble-Profile.jpg",coverRetinaURL="/img/Bubble-Coverphoto.jpg",coverMainURL="/img/Bubble-Coverphoto.jpg";var e=$("[name=category]").val();$("[name="+e+"]").addClass("active"),$(".categoryBox").click(function(){var e=$(this).attr("name");$("[name=category]").val(e),$(".categoryBox").removeClass("active"),$(this).addClass("active")}),category=null,$("#profilepicture_retina").hide(),$("#coverphoto_retina").hide(),$("#profilepicture_preview").hide(),$("#coverphoto_preview").hide(),$("#tempbubbleprofile").hide(),$("#tempbubblecoverphoto").hide(),768>$(window).width()?Session.set("DisableCrop","1"):Session.set("DisableCrop","")}}(),function(){Template.commentItem.helpers({allowDelete:function(){var e=Posts.findOne(Session.get("currentPostId")),t=Bubbles.findOne(e.bubbleId);if(t){var n=t.users.admins;if(Meteor.userId()){var i=Meteor.userId();return i==e.userId||i==this.userId||_.contains(n,i)?!0:!1}}}}),Template.commentItem.events({"click .delete-comment":function(e){e.preventDefault(),confirm("Delete this comment?")&&Meteor.call("deleteComment",this._id)}})}(),function(){Template.commentSubmit.helpers({validateForm:function(e){return""==$(e.target).find("[name=body]").val()?!0:!1}}),Template.commentSubmit.events({"click .comment-form > .cb-submit-container > .cb-submit":function(e,t){e.preventDefault(),_gaq.push(["_trackEvent","Comment","Add",t.data._id]);var n={body:$(".comment-form").find("[name=body]").val(),postId:t.data._id};Meteor.call("comment",n,function(e){e&&throwError(e.reason)}),Meteor.subscribe("comments",t.data._id)}}),Template.commentSubmit.rendered=function(){function e(){var e=0;$("#cb-form-container-comment .required").each(function(){""===$(this).val()&&void 0!=$(this).attr("name")&&e++,0==e?($("#cb-form-container-comment .cb-submit").prop("disabled",!1),$("#cb-form-container-comment .cb-submit").removeClass("ready-false")):($("#cb-form-container-comment .cb-submit").prop("disabled",!0),$("#cb-form-container-comment .cb-submit").addClass("ready-false"))})}$(".comment-form > .cb-submit-container > .submit-comment").click(function(){setTimeout(function(){$(".cb-error").length||$("#main").animate({scrollTop:$("#main").prop("scrollHeight")},2e3)},500)}),$(".required").each(function(){var t=$(this);t.data("oldVal",t.val()),t.bind("propertychange keyup input paste",function(){t.data("oldVal")!=t.val()&&(t.data("oldVal",t.val()),e())})}),$("#cb-form-container-comment .cb-submit").prop("disabled",!0),$("#cb-form-container-comment .cb-submit").addClass("ready-false"),e()}}(),function(){Template.commentsList.helpers({comments:function(){return Comments.find({postId:this._id},{sort:{submitted:1}})}}),Template.commentsList.rendered=function(){$(".btn-add").click(function(){$("[name=body]").focus()})}}(),function(){Template.exploreCover.helpers({getExploreIcon:function(e){var t=e.exploreIcon;return"announcements"==t?Template["icon-official"]():"campus events"==t?Template["icon-events"]():"classifieds"==t?Template["icon-classifieds"]():"professor reviews"==t?Template["icon-professorreviews"]():"controversial topics"==t?Template["icon-controversial"]():"student deals"==t?Template["icon-deals"]():"nightlife"==t?Template["icon-nightlife"]():void 0},getExploreIconName:function(e){var t=e.exploreIcon;return"announcements"==t?"icon-official":"campus events"==t?"icon-events":"classifieds"==t?"icon-classifieds":"professor reviews"==t?"icon-professorreviews":"controversial topics"==t?"icon-controversial":"student deals"==t?"icon-deals":"nightlife"==t?"icon-nightlife":void 0},isExploreType:function(e){return this.exploreType==e?(console.log(e,this.exploreType==e),!0):(console.log(e,this.exploreType==e),!1)}})}(),function(){Template.exploreEdit.events({"submit form":function(e){e.preventDefault();var t=Session.get("currentBubbleId"),n={title:$(e.target).find("[name=title]").val(),description:$(e.target).find("[name=description]").val(),category:$(e.target).find("[name=category]").val(),coverPhoto:$(event.target).find("[id=coverphoto_preview]").attr("src"),retinaCoverPhoto:$(event.target).find("[id=coverphoto_retina]").attr("src"),profilePicture:$(event.target).find("[id=profilepicture_preview]").attr("src"),retinaProfilePicture:$(event.target).find("[id=profilepicture_retina]").attr("src"),lastUpdated:(new Date).getTime()};Bubbles.update(t,{$set:n},function(e){e?throwError(e.reason):(createBubbleEditUpdate(),Meteor.Router.to("bubblePage",t))})},"dragover .dropzone":function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},"drop #cover_dropzone":function(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.files;if(t.length>1)error=new Meteor.Error(422,"Please choose only one image as the bubble image."),throwError(error.reason);else if(f=t[0],f.type.match("image.*")){var n=new FileReader;n.onload=function(e){return function(t){var n=1280,i=150,o=2560,s=300;$("#cover_dropzone").hide(),$("#coverfilesToUpload").hide(),$("#coverphoto_upload").attr("src",t.target.result),$("#coverphoto_preview").attr("src",t.target.result),$("#coverphoto_upload").attr("title",escape(e.name)),$("#coverphoto_upload").show(),$(document).ready(function(){var e=document.createElement("canvas");e.getContext("2d");var t=document.createElement("canvas"),r=document.createElement("canvas"),a=t.getContext("2d"),l=r.getContext("2d");t.width=n,t.height=i,r.width=o,r.height=s;var c,u,d,p,h,f;d=640,p=75;var m=$("#coverphoto_upload")[0];$("<img/>").attr("src",$(m).attr("src")).load(function(){h=this.width,f=this.height,$("#coverphoto_upload").jrac({crop_width:d,crop_height:p,image_width:h,image_height:f,viewport_width:h,viewport_height:f,viewport_onload:function(){console.log("Viewport loaded."),$(".jrac_zoom_slider").hide(),$(".ui-resizable-handle").hide();var e=this;e.observator.register("jrac_crop_x",$(document),function(e,h,f){c=f,console.log("x, y: ",c,u),a.drawImage($("#coverphoto_upload")[0],c,u,d,p,0,0,n,i),l.drawImage($("#coverphoto_upload")[0],c,u,d,p,0,0,o,s);var m=t.toDataURL(),g=r.toDataURL();$("#coverphoto_preview").attr("src",m),$("#coverphoto_preview").attr("width",n/2),$("#coverphoto_preview").attr("height",i/2),$("#coverphoto_retina").attr("src",g)}),e.observator.register("jrac_crop_y",$(document),function(e,o,s){u=s,console.log("x, y: ",c,u),a.drawImage($("#coverphoto_upload")[0],c,u,d,p,0,0,n,i);var l=t.toDataURL(),h=r.toDataURL();$("#coverphoto_preview").attr("src",l),$("#coverphoto_preview").attr("width",n/2),$("#coverphoto_preview").attr("height",i/2),$("#coverphoto_retina").attr("src",h)})}})})})}}(f),n.readAsDataURL(f)}else error=new Meteor.Error(422,"Please choose a valid image."),throwError(error.reason)},"change #coverfilesToUpload":function(e){var t=e.target.files;if(t.length>1)error=new Meteor.Error(422,"Please choose only one image as the bubble image."),throwError(error.reason);else if(f=t[0],f.type.match("image.*")){var n=new FileReader;n.onload=function(e){return function(t){var n=1280,i=150,o=2560,s=300;$("#cover_dropzone").hide(),$("#coverfilesToUpload").hide(),$("#coverphoto_upload").attr("src",t.target.result),$("#coverphoto_preview").attr("src",t.target.result),$("#coverphoto_upload").attr("title",escape(e.name)),$("#coverphoto_upload").show(),$(document).ready(function(){var e=document.createElement("canvas");e.getContext("2d");var t=document.createElement("canvas"),r=document.createElement("canvas"),a=t.getContext("2d"),l=r.getContext("2d");t.width=n,t.height=i,r.width=o,r.height=s;var c,u,d,p,h,f;d=640,p=75;var m=$("#coverphoto_upload")[0];$("<img/>").attr("src",$(m).attr("src")).load(function(){h=this.width,f=this.height,$("#coverphoto_upload").jrac({crop_width:d,crop_height:p,image_width:h,image_height:f,viewport_width:h,viewport_height:f,viewport_onload:function(){console.log("Viewport loaded."),$(".jrac_zoom_slider").hide(),$(".ui-resizable-handle").hide();var e=this;e.observator.register("jrac_crop_x",$(document),function(e,h,f){c=f,console.log("x, y: ",c,u),a.drawImage($("#coverphoto_upload")[0],c,u,d,p,0,0,n,i),l.drawImage($("#coverphoto_upload")[0],c,u,d,p,0,0,o,s);var m=t.toDataURL(),g=r.toDataURL();$("#coverphoto_preview").attr("src",m),$("#coverphoto_preview").attr("width",n/2),$("#coverphoto_preview").attr("height",i/2),$("#coverphoto_retina").attr("src",g)}),e.observator.register("jrac_crop_y",$(document),function(e,o,s){u=s,console.log("x, y: ",c,u),a.drawImage($("#coverphoto_upload")[0],c,u,d,p,0,0,n,i);var l=t.toDataURL(),h=r.toDataURL();$("#coverphoto_preview").attr("src",l),$("#coverphoto_preview").attr("width",n/2),$("#coverphoto_preview").attr("height",i/2),$("#coverphoto_retina").attr("src",h)})}})})})}}(f),n.readAsDataURL(f)}else error=new Meteor.Error(422,"Please choose a valid image."),throwError(error.reason)},"drop #profile_dropzone":function(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.files;if(t.length>1)error=new Meteor.Error(422,"Please choose only one image as the bubble image."),throwError(error.reason);else if(f=t[0],f.type.match("image.*")){var n=new FileReader;n.onload=function(e){return function(t){var n=300,i=300,o=600,s=600;$("#profilepicture_dropzone").hide(),$("#profilepicture_upload").attr("src",t.target.result),$("#profilepicture_preview").attr("src",t.target.result),$("#profilepicture_upload").attr("title",escape(e.name)),$("#profilepicture_upload").show(),$(document).ready(function(){var e=document.createElement("canvas");e.getContext("2d");var t=document.createElement("canvas"),r=document.createElement("canvas"),a=t.getContext("2d"),l=r.getContext("2d");t.width=n,t.height=i,r.width=o,r.height=s;var c,u,d,p,h,f;d=150,p=150;var m=$("#profilepicture_upload")[0];$("<img/>").attr("src",$(m).attr("src")).load(function(){h=this.width,f=this.height,$("#profilepicture_upload").jrac({crop_width:d,crop_height:p,image_width:h,image_height:f,viewport_width:h,viewport_height:f,viewport_onload:function(){console.log("Viewport loaded."),$(".jrac_zoom_slider").hide(),$(".ui-resizable-handle").hide();var e=this;e.observator.register("jrac_crop_x",$(document),function(e,h,f){c=f,console.log("x, y: ",c,u),a.drawImage($("#profilepicture_upload")[0],c,u,d,p,0,0,n,i),l.drawImage($("#profilepicture_upload")[0],c,u,d,p,0,0,o,s);var m=t.toDataURL(),g=r.toDataURL();$("#profilepicture_preview").attr("src",m),$("#profilepicture_preview").attr("width",n/2),$("#profilepicture_preview").attr("height",i/2),$("#profilepicture_retina").attr("src",g)}),e.observator.register("jrac_crop_y",$(document),function(e,o,s){u=s,console.log("x, y: ",c,u),a.drawImage($("#profilepicture_upload")[0],c,u,d,p,0,0,n,i);var l=t.toDataURL(),h=r.toDataURL();$("#profilepicture_preview").attr("src",l),$("#profilepicture_preview").attr("width",n/2),$("#profilepicture_preview").attr("height",i/2),$("#profilepicture_retina").attr("src",h)})}})})})}}(f),n.readAsDataURL(f)}else error=new Meteor.Error(422,"Please choose a valid image."),throwError(error.reason)},"change #profilefilesToUpload":function(e){var t=e.target.files;if(t.length>1)error=new Meteor.Error(422,"Please choose only one image as the bubble image."),throwError(error.reason);else if(f=t[0],f.type.match("image.*")){var n=new FileReader;n.onload=function(e){return function(t){var n=300,i=300,o=600,s=600;$("#profilepicture_dropzone").hide(),$("#profilepicture_upload").attr("src",t.target.result),$("#profilepicture_preview").attr("src",t.target.result),$("#profilepicture_upload").attr("title",escape(e.name)),$("#profilepicture_upload").show(),$(document).ready(function(){var e=document.createElement("canvas");e.getContext("2d");var t=document.createElement("canvas"),r=document.createElement("canvas"),a=t.getContext("2d"),l=r.getContext("2d");t.width=n,t.height=i,r.width=o,r.height=s;var c,u,d,p,h,f;d=150,p=150;var m=$("#profilepicture_upload")[0];$("<img/>").attr("src",$(m).attr("src")).load(function(){h=this.width,f=this.height,$("#profilepicture_upload").jrac({crop_width:d,crop_height:p,image_width:h,image_height:f,viewport_width:h,viewport_height:f,viewport_onload:function(){console.log("Viewport loaded."),$(".jrac_zoom_slider").hide(),$(".ui-resizable-handle").hide();var e=this;e.observator.register("jrac_crop_x",$(document),function(e,h,f){c=f,console.log("x, y: ",c,u),a.drawImage($("#profilepicture_upload")[0],c,u,d,p,0,0,n,i),l.drawImage($("#profilepicture_upload")[0],c,u,d,p,0,0,o,s);var m=t.toDataURL(),g=r.toDataURL();$("#profilepicture_preview").attr("src",m),$("#profilepicture_preview").attr("width",n/2),$("#profilepicture_preview").attr("height",i/2),$("#profilepicture_retina").attr("src",g)}),e.observator.register("jrac_crop_y",$(document),function(e,o,s){u=s,console.log("x, y: ",c,u),a.drawImage($("#profilepicture_upload")[0],c,u,d,p,0,0,n,i);var l=t.toDataURL(),h=r.toDataURL();$("#profilepicture_preview").attr("src",l),$("#profilepicture_preview").attr("width",n/2),$("#profilepicture_preview").attr("height",i/2),$("#profilepicture_retina").attr("src",h)})}})})})}}(f),n.readAsDataURL(f)}else error=new Meteor.Error(422,"Please choose a valid image."),throwError(error.reason)},"click #delete_bubble":function(e){if(e.preventDefault(),confirm("Delete this bubble?")){var t=Session.get("currentBubbleId");Bubbles.remove(t);var n=Bubbles.find({$or:[{"users.members":Meteor.userId()},{"users.admins":Meteor.userId()}]},{sort:{"users.members":-1,"users.admins":-1},limit:1}).fetch();n.length>0?Meteor.Router.to("/mybubbles/"+n[0]._id+"/home"):Meteor.Router.to("searchBubbles")}}}),Template.exploreEdit.rendered=function(){$("#coverphoto_retina").hide(),$("#profilepicture_retina").hide(),$("#change_profilepicture").click(function(){$("#profilepicture_preview").hide(),$("#change_profilepicture").hide(),$("#profile_dropzone").show(),$("#profilefilesToUpload").show()}),$("#change_coverphoto").click(function(){$("#coverphoto_preview").hide(),$("#change_coverphoto").hide(),$("#cover_dropzone").show(),$("#coverfilesToUpload").show()});var e=Session.get("currentBubbleId"),t=Bubbles.findOne({_id:e});$(".dropzone").hide(),$("#coverfilesToUpload").hide(),$("#profilefilesToUpload").hide(),0==t.coverPhoto.length&&$("#coverphoto_preview").attr("src","/img/default_coverphoto.jpg"),0==t.profilePicture.length&&$("#profilepicture_preview").attr("src","/img/default_bubbleprofilepicture.jpg")}}(),function(){Template.explorePostPage.helpers({getPostAsBubbleCategory:function(){var e=Bubbles.findOne(this.postAsId);return e.category},postedAsUser:function(){return"user"==this.postAsType?!0:!1},postedAsBubble:function(){return"bubble"==this.postAsType?!0:!1},displayName:function(){if("user"==this.postAsType)return this.author;if("bubble"==this.postAsType){var e=Bubbles.findOne(this.postAsId);return e.title}},isFlagged:function(){return this.flagged?!0:!1},getAuthorProfilePicture:function(){var e=Meteor.users.findOne(this.userId);return e&&e.profilePicture},returnFalse:function(){return!1},notEvent:function(){return"event"!=this.postType?!0:!1},isEvent:function(){return"event"==this.postType?!0:!1},isDiscussion:function(){return"discussion"==this.postType?!0:!1},currentExplore:function(){return Explores.findOne(Session.get("currentExploreId"))}}),Template.explorePostPage.events({"click .btn-flag":function(){if(_gaq.push(["_trackEvent","Flagging","Flag",+this.name]),confirm("Flagging a post will report it to Bubble moderators as inappropriate. Are you sure you want to flag this post?")){var e={postId:this._id,bubbleId:this.bubbleId,invokerId:Meteor.userId(),invokerName:Meteor.user().username};Meteor.call("createFlag",e)}},"click .btn-delete":function(e){if(_gaq.push(["_trackEvent","Post","Delete Discussion",this.name]),e.preventDefault(),confirm("Delete this post?")){var t=Session.get("currentPostId");Posts.remove(t),Meteor.Router.to("explorePage",Session.get("currentExploreId"))}}}),Template.explorePostPage.rendered=function(){Meteor.subscribe("comments",this._id),Meteor.subscribe("allExplores"),Meteor.subscribe("singlePost",this._id)}}(),function(){Template.exploreSubmit.events({"submit form":function(e){e.preventDefault();var t={title:$(e.target).find("[name=title]").val(),exploreIcon:$(e.target).find("[name=exploreIcon]").val(),description:$(e.target).find("[name=description]").val(),exploreType:selectedExploreType,coverPhoto:$(e.target).find("[id=coverphoto_preview]").attr("src"),retinaCoverPhoto:$(e.target).find("[id=coverphoto_retina]").attr("src")};if(0==t.coverPhoto.length){var n=document.createElement("canvas"),i=document.createElement("canvas");n.width=1280,n.height=150,i.width=2560,i.height=300;var o=n.getContext("2d"),s=i.getContext("2d");o.drawImage($("#tempbubblecoverphoto")[0],0,0,1280,150,0,0,1280,150),s.drawImage($("#tempbubblecoverphoto")[0],0,0,1280,150,0,0,2560,300),t.coverPhoto=n.toDataURL(),t.retinaCoverPhoto=i.toDataURL()}Meteor.call("explore",t,function(e,t){if(e)throwError(e.reason);else{console.log(t);var n=Explores.findOne({_id:t});Meteor.Router.to("explorePage",n._id)}})},"dragover .dropzone":function(e){console.log("Dragover"),e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},"drop #cover_dropzone":function(e){if(console.log("Drop"),e.stopPropagation(),e.preventDefault(),files=e.dataTransfer.files,files.length>1)error=new Meteor.Error(422,"Please choose only one image as the bubble image."),throwError(error.reason);else if(f=files[0],f.type.match("image.*")){var t=new FileReader;t.onload=function(e){return function(t){var n=1280,i=150,o=2560,s=300;$("#cover_dropzone").hide(),$("#coverfilesToUpload").hide(),$("#coverphoto_upload").attr("src",t.target.result),$("#coverphoto_preview").attr("src",t.target.result),$("#coverphoto_upload").attr("title",escape(e.name)),$("#coverphoto_upload").show(),$(document).ready(function(){var e=document.createElement("canvas");e.getContext("2d");var t=document.createElement("canvas"),r=document.createElement("canvas"),a=t.getContext("2d"),l=r.getContext("2d");t.width=n,t.height=i,r.width=o,r.height=s;var c,u,d,p,h,f;d=640,p=75;var m=$("#coverphoto_upload")[0];$("<img/>").attr("src",$(m).attr("src")).load(function(){h=this.width,f=this.height,$("#coverphoto_upload").jrac({crop_width:d,crop_height:p,image_width:h,image_height:f,viewport_width:h,viewport_height:f,viewport_onload:function(){console.log("Viewport loaded."),$(".jrac_zoom_slider").hide(),$(".ui-resizable-handle").hide();
var e=this;e.observator.register("jrac_crop_x",$(document),function(e,h,f){c=f,console.log("x, y: ",c,u),a.drawImage($("#coverphoto_upload")[0],c,u,d,p,0,0,n,i),l.drawImage($("#coverphoto_upload")[0],c,u,d,p,0,0,o,s);var m=t.toDataURL(),g=r.toDataURL();$("#coverphoto_preview").attr("src",m),$("#coverphoto_preview").attr("width",n/2),$("#coverphoto_preview").attr("height",i/2),$("#coverphoto_retina").attr("src",g)}),e.observator.register("jrac_crop_y",$(document),function(e,o,s){u=s,console.log("x, y: ",c,u),a.drawImage($("#coverphoto_upload")[0],c,u,d,p,0,0,n,i);var l=t.toDataURL(),h=r.toDataURL();$("#coverphoto_preview").attr("src",l),$("#coverphoto_preview").attr("width",n/2),$("#coverphoto_preview").attr("height",i/2),$("#coverphoto_retina").attr("src",h)})}})})})}}(f),t.readAsDataURL(f)}else error=new Meteor.Error(422,"Please choose a valid image."),throwError(error.reason)},"change #coverfilesToUpload":function(e){var t=e.target.files;if(t.length>1)error=new Meteor.Error(422,"Please choose only one image as the bubble image."),throwError(error.reason);else if(f=t[0],f.type.match("image.*")){var n=new FileReader;n.onload=function(e){return function(t){var n=1280,i=150,o=2560,s=300;$("#cover_dropzone").hide(),$("#coverfilesToUpload").hide(),$("#coverphoto_upload").attr("src",t.target.result),$("#coverphoto_preview").attr("src",t.target.result),$("#coverphoto_upload").attr("title",escape(e.name)),$("#coverphoto_upload").show(),$(document).ready(function(){var e=document.createElement("canvas");e.getContext("2d");var t=document.createElement("canvas"),r=document.createElement("canvas"),a=t.getContext("2d"),l=r.getContext("2d");t.width=n,t.height=i,r.width=o,r.height=s;var c,u,d,p,h,f;d=640,p=75;var m=$("#coverphoto_upload")[0];$("<img/>").attr("src",$(m).attr("src")).load(function(){h=this.width,f=this.height,$("#coverphoto_upload").jrac({crop_width:d,crop_height:p,image_width:h,image_height:f,viewport_width:h,viewport_height:f,viewport_onload:function(){console.log("Viewport loaded."),$(".jrac_zoom_slider").hide(),$(".ui-resizable-handle").hide();var e=this;e.observator.register("jrac_crop_x",$(document),function(e,h,f){c=f,console.log("x, y: ",c,u),a.drawImage($("#coverphoto_upload")[0],c,u,d,p,0,0,n,i),l.drawImage($("#coverphoto_upload")[0],c,u,d,p,0,0,o,s);var m=t.toDataURL(),g=r.toDataURL();$("#coverphoto_preview").attr("src",m),$("#coverphoto_preview").attr("width",n/2),$("#coverphoto_preview").attr("height",i/2),$("#coverphoto_retina").attr("src",g)}),e.observator.register("jrac_crop_y",$(document),function(e,o,s){u=s,console.log("x, y: ",c,u),a.drawImage($("#coverphoto_upload")[0],c,u,d,p,0,0,n,i);var l=t.toDataURL(),h=r.toDataURL();$("#coverphoto_preview").attr("src",l),$("#coverphoto_preview").attr("width",n/2),$("#coverphoto_preview").attr("height",i/2),$("#coverphoto_retina").attr("src",h)})}})})})}}(f),n.readAsDataURL(f)}else error=new Meteor.Error(422,"Please choose a valid image."),throwError(error.reason)}}),Template.exploreSubmit.rendered=function(){$("#profilepicture_retina").hide(),$("#coverphoto_retina").hide(),$("#profilepicture_preview").hide(),$("#coverphoto_preview").hide(),$("#tempbubbleprofile").hide(),$("#tempbubblecoverphoto").hide()},Template.exploreSubmit.helpers({hasLevel4Permission:function(){return"4"==Meteor.user().userType&&"4"!=this.userType}})}(),function(){Template.flagItem.helpers({getPost:function(){return Posts.findOne(this.postId)},postLink:function(){return this.bubbleId!==void 0?"/mybubbles/"+this.bubbleId+"/posts/"+this._id:this.exploreId!==void 0?"/explore/"+this.exploreId+"/posts/"+this._id:void 0}})}(),function(){Template.flagsList.helpers({getUnsolvedFlags:function(){return Flags.find({solved:!1},{limit:unsolvedFlagsHandle.limit()})},getSolvedFlags:function(){return Flags.find({solved:!0},{limit:solvedFlagsHandle.limit()})}}),Template.flagsList.events({"click .resolve-flag":function(){confirm("Solve this flag?")&&(createPostUnflagUpdate(this),Meteor.call("resolveFlag",this))}})}(),function(){Template.header.created=function(){Session.set("sidebarOpen",!1)},Template.header.helpers({activeRouteClass:function(e){var t=window.location.pathname.split("/")[1];return t==e?"active":t==e?"active":void 0},getMyBubblesUrlPath:function(){var e=Bubbles.find({$or:[{"users.members":Meteor.userId()},{"users.admins":Meteor.userId()}]},{sort:{"users.members":-1,"users.admins":-1},limit:1}).fetch();return e.length>0?Session.get("currentBubbleId")?"/mybubbles/"+Session.get("currentBubbleId")+"/home":"/mybubbles/"+e[0]._id+"/home":"/mybubbles/search/bubbles"},checkUserType:function(e){return Meteor.user().userType==e}})}(),function(){Template.sidebar.helpers({sidebarOpen:function(){return Session.get("sidebarOpen")},subsectionPaneVisible:function(){var e=window.location.pathname.split("/")[1];return"mybubbles"==e||"explore"==e||"settings"==e?!0:!1},myBubblesLink:function(){var e=Bubbles.find({$or:[{"users.members":Meteor.userId()},{"users.admins":Meteor.userId()}]},{sort:{"users.members":-1,"users.admins":-1},limit:1}).fetch();return e.length>0?"/mybubbles/"+e[0]._id+"/home":"/mybubbles/create/bubble"},exploreLink:function(){var e=Explores.find({}).fetch();return e.length>0?"/explore/"+e[0]._id+"/home":"/explore/create"},dashboardLink:function(){return"/dashboard"},selectedSection:function(e){var t=window.location.pathname,n=t.split("/");return"dashboard"!=e?n[1]==e:""==n[1]||"dashboard"==n[1]?!0:!1},selectedSubsectionName:function(e){var t=window.location.pathname,n=t.split("/");return n[2]==e},selectedSubsection:function(){return Session.get("currentBubbleId")==this._id},userBubbles:function(){return Bubbles.find({$or:[{"users.members":Meteor.userId()},{"users.admins":Meteor.userId()}]},{sort:{"users.members":-1,"users.admins":-1,submitted:-1}})},publicExplores:function(){return Explores.find({}).fetch()},selectedExploreSubsection:function(e){var t=Session.get("currentExploreId");return t==e},getExploreIcon:function(e){var t=e.exploreIcon;return"announcements"==t?Template["icon-official"]():"campus events"==t?Template["icon-events"]():"classifieds"==t?Template["icon-classifieds"]():"professor reviews"==t?Template["icon-professorreviews"]():"controversial topics"==t?Template["icon-controversial"]():"student deals"==t?Template["icon-deals"]():"nightlife"==t?Template["icon-nightlife"]():void 0},getExploreIconName:function(e){var t=e.exploreIcon;return"announcements"==t?"icon-official":"campus events"==t?"icon-events":"classifieds"==t?"icon-classifieds":"professor reviews"==t?"icon-professorreviews":"controversial topics"==t?"icon-controversial":"student deals"==t?"icon-deals":"nightlife"==t?"icon-nightlife":void 0},hasLevel4Permission:function(){return"4"==Meteor.user().userType&&"4"!=this.userType}}),Template.sidebar.events({"click .btn-nav-subsection, click .add-bubble > .btn-heading":function(){Session.set("sidebarOpen",!1)},"click .sidebar-collapse-new":function(){var e=Session.get("sidebarOpen");0==e?Session.set("sidebarOpen",!0):Session.set("sidebarOpen",!1)},"click .set-loading":function(){Session.set("isLoading",!0)}}),Template.sidebar.rendered=function(){Meteor.subscribe("sidebarBubbles",Meteor.userId()),Meteor.subscribe("allExplores"),Meteor.subscribe("findUsersById",[Meteor.userId()]);var e=function(){$(window).width()>=768&&Session.set("sidebarOpen",!1)};$(".visible-toggle-parent").click(function(){$(this).hasClass("toggle-hide")?($(this).removeClass("toggle-hide"),$(this).addClass("toggle-show")):($(this).removeClass("toggle-show"),$(this).addClass("toggle-hide"))}),$("textarea").autoResize();var t=function(){$(".main-btns").height($(window).height()-$(".navbar").height()-$(".top-btns").height())};$(".sidebar-collapse").click(function(){$("#menu").width()==$(".sidebar").width()?($(".sidebar-arrow-right").show(),$(".sidebar-arrow-left").hide()):0==$("#menu").width()&&($(".sidebar-arrow-right").hide(),$(".sidebar-arrow-left").show())});var n=function(){768>$(window).width()?$("#menu").width()>0&&$("#menu").collapse("hide"):0==$("#menu").width()&&$("#menu").collapse("show")},i=function(){$("#main").css("height",$(window).height()-$(".navbar").height())};$("#menu a").click(function(){768>$(window).width()&&$("#menu").collapse("hide")});var o=function(){e(),t(),n(),i()};$(window).resize(function(){o()}),o()}}(),function(){Template.sidebarOld.helpers({getSidebarBubbles:function(){return Bubbles.find({$or:[{"users.members":Meteor.userId()},{"users.admins":Meteor.userId()}]},{sort:{"users.members":-1,"users.admins":-1,submitted:-1}})},getInvitations:function(){invitees=[Meteor.userId()];var e=Bubbles.find({"users.invitees":Meteor.userId()});return e},hasInvitations:function(){var e=Bubbles.find({"users.invitees":Meteor.userId()});return e.count()>0?!0:!1},getSearchUrl:function(){return Session.set("searchText",void 0),Bubbles.find({$or:[{"users.members":Meteor.userId()},{"users.admins":Meteor.userId()}]}).count()>0?"/mybubbles/search/all":"/mybubbles/search/bubbles"}}),Template.sidebarOld.events({"click .accept-invitation":function(){Bubbles.update({_id:this._id},{$addToSet:{"users.members":Meteor.userId()},$pull:{"users.invitees":Meteor.userId()}}),createNewMemberUpdate(Meteor.userId(),this._id),Meteor.call("setRead",Updates.findOne({userId:Meteor.userId(),bubbleId:this._id,updateType:"INVITATION"}))},"click .reject-invitation":function(){confirm("Reject this invitation?")&&Bubbles.update({_id:this._id},{$pull:{"users.invitees":Meteor.userId()}})}}),Template.sidebarOld.rendered=function(){$(".visible-toggle-parent").click(function(){$(this).hasClass("toggle-hide")?($(this).removeClass("toggle-hide"),$(this).addClass("toggle-show")):($(this).removeClass("toggle-show"),$(this).addClass("toggle-hide"))}),$("textarea").autoResize();var e=function(){$(".main-btns").height($(window).height()-$(".navbar").height()-$(".top-btns").height())};$(".sidebar-collapse").click(function(){$("#menu").width()==$(".sidebar").width()?($(".sidebar-arrow-right").show(),$(".sidebar-arrow-left").hide()):0==$("#menu").width()&&($(".sidebar-arrow-right").hide(),$(".sidebar-arrow-left").show())});var t=function(){768>$(window).width()?$("#menu").width()>0&&$("#menu").collapse("hide"):0==$("#menu").width()&&$("#menu").collapse("show")},n=function(){$("#main").css("height",$(window).height()-$(".navbar").height())};$("#menu a").click(function(){768>$(window).width()&&$("#menu").collapse("hide")});var i=function(){e(),t(),n()};$(window).resize(function(){i()}),i()}}(),function(){referenceDateTime=moment().add("hours",-4).valueOf(),Template.invitationsPage.helpers({getInvites:function(){var e=Meteor.userId(),t=Bubbles.find({"users.invitees":{$in:[e]}}).fetch();return t},numInvites:function(){var e=Meteor.userId(),t=Bubbles.find({"users.invitees":{$in:[e]}}).count();return t}}),Template.invitationsPage.rendered=function(){Meteor.subscribe("invitedBubbles",Meteor.userId())}}(),function(){Template.fileData.helpers({currentPost:function(){return post=Posts.findOne(Session.get("currentPostId"))}})}(),function(){Template.fileObject.helpers({isPDF:function(){return"application/pdf"==this.fileType?!0:!1}})}(),function(){Template.filePreview.helpers({isPDF:function(){return"application/pdf"==this.fileType?!0:!1},isImage:function(){return this.fileType.match("image.*")?!0:!1},isDoc:function(){return this.fileType.match("msword.*")?!0:!1}})}(),function(){Template.postAttachments.helpers({attachmentList:function(){var e=Session.get("currentPostId"),t=Posts.findOne({_id:e}),n=[];if(console.log(e),"discussion"==t.postType)for(var i=t.children,o=0;i.length>o;o++){var s=Posts.findOne({_id:i[o]});n.push(s)}return console.log(n),n}})}(),function(){Template.postAttributes.helpers({hasChildren:function(){return void 0!=this.children&&this.children.length>0?!0:!1},fileSizeWords:function(){if(this.fileSize!==void 0){this.fileSize;var e=this.fileSize/1e3,t=this.fileSize/1e6,n=this.fileSize/1e9;return n>=1?Math.round(100*n)/100+" gb":t>=1?Math.round(100*t)/100+" mb":Math.round(100*e)/100+" kb"}return-1},reverseAttendees:function(){return this.attendees.reverse()}})}(),function(){Template.postPage.created=function(){Session.set("isLoadingPost",!0),Session.set("isLoadingComments",!0)},Template.postPage.rendered=function(){var e=window.location.pathname,t=e.split("/"),n=t[2],i=t[4];Meteor.subscribe("singleBubble",n),Meteor.subscribe("singlePost",i,function(){Session.set("isLoadingPost",!1)}),Meteor.subscribe("comments",i,function(){Session.set("isLoadingComments",!1)})},Template.postPage.helpers({isFlagged:function(){return this.flagged?!0:!1},getAuthorProfilePicture:function(){var e=Meteor.users.findOne(this.userId);return e&&e.profilePicture},isLoading:function(){return Session.get("isLoadingPost")&&Session.get("isLoadingComments")?!0:!1},returnFalse:function(){return!1},notEvent:function(){return"event"!=this.postType?!0:!1},isEvent:function(){return"event"==this.postType?!0:!1},isDiscussion:function(){return"discussion"==this.postType?!0:!1},isFile:function(){return"file"==this.postType&&this.parent===void 0?!0:!1}}),Template.postPage.events({"click .btn-flag":function(){if(_gaq.push(["_trackEvent","Flagging","Flag",+this.name]),confirm("Flagging a post will report it to Bubble moderators as inappropriate. Are you sure you want to flag this post?")){var e={postId:this._id,bubbleId:this.bubbleId,invokerId:Meteor.userId(),invokerName:Meteor.user().username};Meteor.call("createFlag",e)}},"click .btn-delete":function(e){if(_gaq.push(["_trackEvent","Post","Delete Discussion",this.name]),e.preventDefault(),confirm("Delete this post?")){var t=Session.get("currentPostId");Posts.remove(t),Meteor.Router.to("bubblePage",Session.get("currentBubbleId"))}}})}(),function(){Template.searchAll.helpers({getSearchedFiles:function(){return Posts.find({_id:{$in:Session.get("selectedPostIdList")},postType:"file"},{limit:3})},getSearchedDiscussions:function(){return Posts.find({_id:{$in:Session.get("selectedPostIdList")},postType:"discussion"},{limit:3})},getSearchedEvents:function(){return Posts.find({_id:{$in:Session.get("selectedPostIdList")},postType:"event"},{limit:3})},getSearchedUsers:function(){return Meteor.users.find({_id:{$in:Session.get("selectedUserIdList")}},{limit:3})},getSearchedBubbles:function(){return Bubbles.find({_id:{$in:Session.get("selectedBubbleIdList")}},{limit:3})},typing:function(){return Session.get("typing")}}),Template.searchAll.rendered=function(){Session.set("searchCategory","all"),Session.set("currentBubbleId",""),$(window).width()>768&&($(".search-text").bind("keydown",function(){Session.set("typing","true")}),$(".search-text").bind("propertychange keyup input paste",function(){Meteor.clearTimeout(mto),mto=Meteor.setTimeout(function(){Meteor.call("search_users",$(".search-text").val(),function(e,t){e?console.log(e):Session.set("selectedUserIdList",t)}),Meteor.call("search_bubbles",$(".search-text").val(),function(e,t){e?console.log(e):(Session.set("typing","false"),Session.set("selectedBubbleIdList",t))}),Meteor.call("search_files",$(".search-text").val(),function(e,t){e?console.log(e):(Session.set("typing","false"),tmp=t,console.log("@files: "+t),Meteor.call("search_events",$(".search-text").val(),function(e,t){e?console.log(e):(Session.set("typing","false"),tmp=tmp.concat(t),console.log("@events: "+t),Meteor.call("search_discussions",$(".search-text").val(),function(e,t){e?console.log(e):(Session.set("typing","false"),tmp=tmp.concat(t),console.log("@discussions: "+tmp),Session.set("typing","false"),Session.set("selectedPostIdList",tmp))}))}))})},500)})),$(".search-btn").bind("click",function(){Meteor.clearTimeout(mto),mto=Meteor.setTimeout(function(){Meteor.call("search_users",$(".search-text").val(),function(e,t){e?console.log(e):Session.set("selectedUserIdList",t)}),Meteor.call("search_bubbles",$(".search-text").val(),function(e,t){e?console.log(e):(Session.set("typing","false"),Session.set("selectedBubbleIdList",t))}),Meteor.call("search_files",$(".search-text").val(),function(e,t){e?console.log(e):(Session.set("typing","false"),tmp=t,console.log("@files: "+t),Meteor.call("search_events",$(".search-text").val(),function(e,t){e?console.log(e):(Session.set("typing","false"),tmp=tmp.concat(t),console.log("@events: "+t),Meteor.call("search_discussions",$(".search-text").val(),function(e,t){e?console.log(e):(Session.set("typing","false"),tmp=tmp.concat(t),console.log("@discussions: "+tmp),Session.set("typing","false"),Session.set("selectedPostIdList",tmp))}))}))})},500)})},Template.searchAll.created=function(){mto="",Session.set("typing","false"),Session.set("selectedPostIdList",[]),Session.set("selectedBubbleIdList",[]),Session.set("selectedUserIdList",[])}}(),function(){Template.searchBubbles.helpers({getSearchedBubbles:function(){return Bubbles.find({_id:{$in:Session.get("selectedBubbleIdList")}},{limit:10})},typing:function(){return Session.get("typing")}}),Template.searchBubbles.created=function(){mto="",Session.set("typing","false"),Session.set("selectedBubbleIdList",[])},Template.searchBubbles.rendered=function(){Session.set("searchCategory","bubbles"),$(window).width()>768&&($(".search-text").bind("keydown",function(){Session.set("typing","true")}),$(".search-text").bind("propertychange keyup input paste",function(){Meteor.clearTimeout(mto),mto=Meteor.setTimeout(function(){Meteor.call("search_bubbles",$(".search-text").val(),function(e,t){e?console.log(e):(Session.set("typing","false"),Session.set("selectedBubbleIdList",t))})},500)})),$(".search-btn").bind("click",function(){Meteor.clearTimeout(mto),mto=Meteor.setTimeout(function(){Meteor.call("search_bubbles",$(".search-text").val(),function(e,t){e?console.log(e):(Session.set("typing","false"),Session.set("selectedBubbleIdList",t))})},500)})},Template.searchBubbles.events({})}(),function(){Template.searchDiscussions.helpers({getSearchedDiscussions:function(){return Posts.find({_id:{$in:Session.get("selectedPostIdList")}},{limit:10})},typing:function(){return Session.get("typing")}}),Template.searchDiscussions.rendered=function(){Session.set("searchCategory","discussions"),$(window).width()>768&&($(".search-text").bind("keydown",function(){Session.set("typing","true")}),$(".search-text").bind("propertychange keyup input paste",function(){Meteor.clearTimeout(mto),mto=Meteor.setTimeout(function(){Meteor.call("search_discussions",$(".search-text").val(),function(e,t){e?console.log(e):(Session.set("typing","false"),Session.set("selectedPostIdList",t))})},500)})),$(".search-btn").bind("click",function(){Meteor.clearTimeout(mto),mto=Meteor.setTimeout(function(){Meteor.call("search_discussions",$(".search-text").val(),function(e,t){e?console.log(e):(Session.set("typing","false"),Session.set("selectedPostIdList",t))})},500)})},Template.searchDiscussions.created=function(){mto="",Session.set("typing","false"),Session.set("selectedPostIdList",[])},Template.searchDiscussions.events({"click .search-btn":function(){Meteor.call("search_discussions",$(".search-text").val(),function(e,t){e?console.log(e):(Session.set("typing","false"),Session.set("selectedPostIdList",t))})}})}(),function(){Template.searchEvents.helpers({getSearchedEvents:function(){return Posts.find({_id:{$in:Session.get("selectedPostIdList")}},{limit:10})},typing:function(){return Session.get("typing")}}),Template.searchEvents.rendered=function(){Session.set("searchCategory","events"),$(window).width()>768&&($(".search-text").bind("keydown",function(){Session.set("typing","true")}),$(".search-text").bind("propertychange keyup input paste",function(){Meteor.clearTimeout(mto),mto=Meteor.setTimeout(function(){Meteor.call("search_events",$(".search-text").val(),function(e,t){e?console.log(e):(Session.set("typing","false"),Session.set("selectedPostIdList",t))})},500)})),$(".search-btn").bind("click",function(){Meteor.clearTimeout(mto),mto=Meteor.setTimeout(function(){Meteor.call("search_events",$(".search-text").val(),function(e,t){e?console.log(e):(Session.set("typing","false"),Session.set("selectedPostIdList",t))})},500)})},Template.searchEvents.created=function(){mto="",Session.set("typing","false"),Session.set("selectedPostIdList",[])},Template.searchEvents.events({})}(),function(){Template.searchFiles.helpers({getSearchedFiles:function(){return Posts.find({_id:{$in:Session.get("selectedPostIdList")}},{limit:10})},typing:function(){return Session.get("typing")}}),Template.searchFiles.rendered=function(){Session.set("searchCategory","files"),$(window).width()>768&&($(".search-text").bind("keydown",function(){Session.set("typing","true")}),$(".search-text").bind("propertychange keyup input paste",function(){Meteor.clearTimeout(mto),mto=Meteor.setTimeout(function(){Meteor.call("search_files",$(".search-text").val(),function(e,t){e?console.log(e):(Session.set("typing","false"),Session.set("selectedPostIdList",t))})},500)})),$(".search-btn").bind("click",function(){Meteor.clearTimeout(mto),mto=Meteor.setTimeout(function(){Meteor.call("search_files",$(".search-text").val(),function(e,t){e?console.log(e):(Session.set("typing","false"),Session.set("selectedPostIdList",t))})},500)})},Template.searchFiles.created=function(){mto="",Session.set("typing","false"),Session.set("selectedPostIdList",[])},Template.searchFiles.events({})}(),function(){Template.searchPage.helpers({isActive:function(e){return e==Session.get("searchCategory")?"active":!1}}),Template.searchPage.events({"click .search-btn":function(e){e.preventDefault(),e.stopPropagation(),Session.get("searchText")||Session.set("searchText"," ");var t=$(".search-text").val();""==t?Session.set("searchText",void 0):Session.set("searchText",t)}}),Template.searchPage.rendered=function(){Session.get("searchText")||Session.set("searchText"," "),Meteor.subscribe("findUsersById",Session.get("selectedUserIdList")),Meteor.subscribe("findPostsById",Session.get("selectedPostIdList")),Meteor.subscribe("findBubblesById",Session.get("selectedBubbleIdList"))}}(),function(){Template.searchUsers.created=function(){mto="",Session.set("typing","false"),Session.set("selectedUserIdList",[])},Template.searchUsers.events({}),Template.searchUsers.rendered=function(){Session.set("searchCategory","users"),$(window).width()>768&&($(".search-text").bind("keydown",function(){Session.set("typing","true")}),$(".search-text").bind("propertychange keyup input paste",function(){Meteor.clearTimeout(mto),mto=Meteor.setTimeout(function(){Meteor.call("search_users",$(".search-text").val(),function(e,t){e?console.log(e):(Session.set("typing","false"),Session.set("selectedUserIdList",t))})},500)})),$(".search-btn").bind("click",function(){Meteor.clearTimeout(mto),mto=Meteor.setTimeout(function(){Meteor.call("search_users",$(".search-text").val(),function(e,t){e?console.log(e):(Session.set("typing","false"),Session.set("selectedUserIdList",t))})},500)})},Template.searchUsers.helpers({typing:function(){return Session.get("typing")},getSearchedUsers:function(){return Meteor.users.find({_id:{$in:Session.get("selectedUserIdList")}},{limit:10})}})}(),function(){Template.updateItem.helpers({getPost:function(){return Posts.findOne(this.postId)},getNewCommentsCount:function(){return Updates.find({postId:this.postId,updateType:"replied",userId:Meteor.userId(),read:!1}).count()},getBubble:function(){return Bubbles.findOne(this.bubbleId)},getContentTitle:function(){if("joined bubble"==this.updateType||"member promoted"==this.updateType||"member demoted"==this.updateType||"new applicant"==this.updateType)return"Member List";if("new attendee"!=this.updateType&&"replied"!=this.updateType&&"posted"!=this.updateType&&"edited post"!=this.updateType)return"removed from bubble"==this.updateType||"application rejected"==this.updateType?"Bubble List":"Dismiss Update";var e=Posts.findOne(this.postId);return e?e.name:void 0},getDisplayInfo:function(){if("new attendee"!=this.updateType&&"edited post"!=this.updateType&&"replied"!=this.updateType&&"posted"!=this.updateType){var e={};return e.name=this.invokerName,e.postType="member",e}var e=Posts.findOne(this.postId);return e?e:void 0},getProfilePicture:function(){var e=Meteor.users.findOne(this.invokerId);return e&&e.profilePicture}}),Template.updateItem.events({"click .update-item":function(){Meteor.Router.to(this.url,this.bubbleId,this._id),Meteor.call("setRead",this)}})}(),function(){Template.updatesDropdown.rendered=function(){mainUpdatesHandle=Meteor.subscribeWithPagination("updates",Meteor.userId(),1)},Template.updatesDropdown.helpers({updates:function(){return Updates.find({userId:Meteor.userId()})},updateCount:function(){return Updates.find({userId:Meteor.userId(),read:!1}).count()},getBubble:function(e){return Bubbles.findOne(e)},compressUpdates:function(){var e=Updates.find({userId:Meteor.userId(),read:!1}).fetch();if(e.length>0){_.each(e,function(t){e=_.reject(e,function(e){return t.bubbleId==e.bubbleId&&t.userId==e.userId&&t.invokerId==e.invokerId&&t.updateType==e.updateType&&t.postId==e.postId}),_.contains(e,t)||e.push(t)}),_.each(e,function(t){var n=_.reject(e,function(e){return"replied"!=e.updateType});if(n.length>0&&(e=_.reject(e,function(e){return t.postId==e.postId&&t.updateType==e.updateType&&"replied"==t.updateType}),!_.contains(e,t))){if(singleTypeUpdates=_.reject(n,function(e){return t.postId!=e.postId}),singleTypeUpdates.length>0){var i=_.pluck(singleTypeUpdates,"invokerName"),o=i.join(),s=13;if(o.length>s){o=o.substring(0,s);var r=o.split(",");i[0].length>s?r[0]=i[0]:r.pop();var a=i.length-r.length;o=r.join(),1==a?o=o+" and "+a+" other":a>1&&(o=o+" and "+a+" others")}else o=o.replace(/,([^,]*)$/," and $1");t.invokerName=o}e.push(t)}});var t=["new applicant","new attendee","member promoted","member demoted","joined bubble"];return _.each(t,function(t){var n=_.reject(e,function(e){return e.updateType!=t});if(n.length>0){var i=_.pluck(n,"invokerName"),o=i.join(),s=13;if(o.length>s){o=o.substring(0,s);var r=o.split(",");i[0].length>s?r[0]=i[0]:r.pop();var a=i.length-r.length;o=r.join(),o=1==a?o+" and "+a+" other":o+" and "+a+" others"}else o=o.replace(/,([^,]*)$/," and $1");var l=_.find(e,function(e){return e.invokerName=o,e.updateType==t});e=_.reject(e,function(e){return e.updateType==t}),l&&e.push(l)}}),e=_.sortBy(e,function(e){return e.submitted}),_.toArray(_.groupBy(e,"bubbleId"))}},compressedCount:function(){var e=Updates.find({userId:Meteor.userId(),read:!1}).fetch();if(e.length>0){_.each(e,function(t){e=_.reject(e,function(e){return t.bubbleId==e.bubbleId&&t.userId==e.userId&&t.invokerId==e.invokerId&&t.updateType==e.updateType&&t.postId==e.postId}),_.contains(e,t)||e.push(t)}),_.each(e,function(t){var n=_.reject(e,function(e){return"replied"!=e.updateType});if(n.length>0&&(e=_.reject(e,function(e){return t.postId==e.postId&&t.updateType==e.updateType&&"replied"==t.updateType}),!_.contains(e,t))){if(singleTypeUpdates=_.reject(n,function(e){return t.postId!=e.postId}),singleTypeUpdates.length>0){var i=_.pluck(singleTypeUpdates,"invokerName"),o=i.join(),s=13;if(o.length>s){o=o.substring(0,s);var r=o.split(",");i[0].length>s?r[0]=i[0]:r.pop();var a=i.length-r.length;o=r.join(),1==a?o=o+" and "+a+" other":a>1&&(o=o+" and "+a+" others")}else o=o.replace(/,([^,]*)$/," and $1");t.invokerName=o}e.push(t)}});var t=["new applicant","new attendee","member promoted","member demoted","joined bubble"];return _.each(t,function(t){var n=_.reject(e,function(e){return e.updateType!=t});if(n.length>0){var i=_.pluck(n,"invokerName"),o=i.join(),s=13;if(o.length>s){o=o.substring(0,s);var r=o.split(",");i[0].length>s?r[0]=i[0]:r.pop();var a=i.length-r.length;o=r.join(),o=1==a?o+" and "+a+" other":o+" and "+a+" others"}else o=o.replace(/,([^,]*)$/," and $1");var l=_.find(e,function(e){return e.invokerName=o,e.updateType==t});e=_.reject(e,function(e){return e.updateType==t}),l&&e.push(l)}}),e=_.sortBy(e,function(e){return e.submitted}),e.length}},"click .set-loading":function(){console.log("SET LOADING"),Session.set("isLoading",!0)}}),Template.update.events({"click a":function(){Meteor.call("setRead",this)}}),Template.update.helpers({updateTypeIs:function(e){return e==this.updateType},getContent:function(){if("replied"==this.updateType||"new attendee"==this.updateType||"new applicant"==this.updateType){var e=this.content,t=this.invokerName.split("and");return t.length>1&&(e=e.replace("is","are")),this.invokerName+e}return this.content}}),Template.updateBubble.helpers({getBubble:function(e){return e&&e.length>0?Bubbles.findOne(e[0].bubbleId):void 0}})}(),function(){Template.updatesList.helpers({getNumUpdates:function(){return Session.get("numUpdates")}})}(),function(){Template.userProfileEdit.helpers({getProfile:function(){return Meteor.users.findOne({_id:Session.get("selectedUserId")})},getEmail:function(){return this.emails?this.emails[0].address:void 0},hasPermission:function(){var e=Session.get("selectedUserId"),t=Meteor.user();return"4"==Meteor.user().userType||t._id==e?!0:!1},hasLevel4Permission:function(){return"4"==Meteor.user().userType&&"4"!=this.userType},checkUserType:function(e){return this.userType==e&&"selected"}}),Template.userProfileEdit.events({"submit form":function(e){e.preventDefault();var t=Session.get("selectedUserId"),n={profilePicture:$(e.target).find("[id=userprofilepicture_preview]").attr("src"),retinaProfilePicture:$(e.target).find("[id=userprofilepicture_retina]").attr("src"),emails:[{address:$(e.target).find("[name=email]").val(),verified:!1}],phone:"",lastUpdated:(new Date).getTime(),userType:$(e.target).find("[name=userType]").val()};console.log("Properties to be saved: ",n),Meteor.users.update(t,{$set:n},function(e){e?throwError(e.reason):Meteor.Router.to("userProfile",t)})},"dragover .dropzone":function(e){console.log("Dragover"),e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},"drop .dropzone":function(e){if(console.log("Drop"),e.stopPropagation(),e.preventDefault(),files=e.dataTransfer.files,files.length>1)error=new Meteor.Error(422,"Please choose only one image as the bubble image."),throwError(error.reason);else if(f=files[0],f.type.match("image.*")){var t=new FileReader;t.onload=function(e){return function(t){var n=160,i=160,o=320,s=320;$("#userprofilepicture_dropzone").hide(),$("#userprofilepicture_upload").attr("src",t.target.result),$("#userprofilepicture_preview").attr("src",t.target.result),$("#userprofilepicture_upload").attr("title",escape(e.name)),$("#userprofilepicture_upload").show(),$(document).ready(function(){var e=document.createElement("canvas");e.getContext("2d");var t=document.createElement("canvas"),r=document.createElement("canvas"),a=t.getContext("2d"),l=r.getContext("2d");t.width=n,t.height=i,r.width=o,r.height=s;var c,u,d,p,h,f;d=150,p=150;var m=$("#userprofilepicture_upload")[0];$("<img/>").attr("src",$(m).attr("src")).load(function(){h=this.width,f=this.height,$("#userprofilepicture_upload").jrac({crop_width:d,crop_height:p,image_width:h,image_height:f,viewport_width:h,viewport_height:f,viewport_onload:function(){console.log("Viewport loaded."),$(".jrac_zoom_slider").hide(),$(".ui-resizable-handle").hide();var e=this;e.observator.register("jrac_crop_x",$(document),function(e,h,f){c=f,a.drawImage($("#userprofilepicture_upload")[0],c,u,d,p,0,0,n,i),l.drawImage($("#userprofilepicture_upload")[0],c,u,d,p,0,0,o,s);var m=t.toDataURL(),g=r.toDataURL();$("#userprofilepicture_preview").attr("src",m),$("#userprofilepicture_preview").attr("width",n/2),$("#userprofilepicture_preview").attr("height",i/2),$("#userprofilepicture_retina").attr("src",g)}),e.observator.register("jrac_crop_y",$(document),function(e,o,s){u=s,a.drawImage($("#userprofilepicture_upload")[0],c,u,d,p,0,0,n,i);var l=t.toDataURL(),h=r.toDataURL();$("#userprofilepicture_preview").attr("src",l),$("#userprofilepicture_preview").attr("width",n/2),$("#userprofilepicture_preview").attr("height",i/2),$("#userprofilepicture_retina").attr("src",h)})}})})})}}(f),t.readAsDataURL(f)}else error=new Meteor.Error(422,"Please choose a valid image."),throwError(error.reason)},"change #filesToUpload":function(e){if(files=e.target.files,files.length>1)error=new Meteor.Error(422,"Please choose only one image as the bubble image."),throwError(error.reason);
else if(f=files[0],f.type.match("image.*")){var t=new FileReader;t.onload=function(e){return function(t){var n=160,i=160,o=320,s=320;$("#userprofilepicture_dropzone").hide(),$("#userprofilepicture_upload").attr("src",t.target.result),$("#userprofilepicture_preview").attr("src",t.target.result),$("#userprofilepicture_upload").attr("title",escape(e.name)),$("#userprofilepicture_upload").show(),$(document).ready(function(){var e=document.createElement("canvas");e.getContext("2d");var t=document.createElement("canvas"),r=document.createElement("canvas"),a=t.getContext("2d"),l=r.getContext("2d");t.width=n,t.height=i,r.width=o,r.height=s;var c,u,d,p,h,f;d=150,p=150;var m=$("#userprofilepicture_upload")[0];$("<img/>").attr("src",$(m).attr("src")).load(function(){h=this.width,f=this.height,$("#userprofilepicture_upload").jrac({crop_width:d,crop_height:p,image_width:h,image_height:f,viewport_width:h,viewport_height:f,viewport_onload:function(){console.log("Viewport loaded."),$(".jrac_zoom_slider").hide(),$(".ui-resizable-handle").hide();var e=this;e.observator.register("jrac_crop_x",$(document),function(e,h,f){c=f,a.drawImage($("#userprofilepicture_upload")[0],c,u,d,p,0,0,n,i),l.drawImage($("#userprofilepicture_upload")[0],c,u,d,p,0,0,o,s);var m=t.toDataURL(),g=r.toDataURL();$("#userprofilepicture_preview").attr("src",m),$("#userprofilepicture_preview").attr("width",n/2),$("#userprofilepicture_preview").attr("height",i/2),$("#userprofilepicture_retina").attr("src",g)}),e.observator.register("jrac_crop_y",$(document),function(e,o,s){u=s,a.drawImage($("#userprofilepicture_upload")[0],c,u,d,p,0,0,n,i);var l=t.toDataURL(),h=r.toDataURL();$("#userprofilepicture_preview").attr("src",l),$("#userprofilepicture_preview").attr("width",n/2),$("#userprofilepicture_preview").attr("height",i/2),$("#userprofilepicture_retina").attr("src",h)})}})})})}}(f),t.readAsDataURL(f)}else error=new Meteor.Error(422,"Please choose a valid image."),throwError(error.reason)}}),Template.userProfileEdit.rendered=function(){$("#userprofilepicture_retina").hide(),$("#change_profile_picture").click(function(){$("#userprofilepicture_preview").hide(),$("#change_profile_picture").hide(),$(".dropzone").show(),$("#filesToUpload").show()});var e=Meteor.users.findOne({_id:Session.get("selectedUserId")});e.profilePicture?($(".dropzone").hide(),$("#filesToUpload").hide()):($("#userprofilepicture_preview").attr("src","/img/default_userprofile.png"),$(".dropzone").hide(),$("#filesToUpload").hide())}}(),function(){Template.userProfile.helpers({getUser:function(){return Meteor.users.findOne({_id:Session.get("selectedUserId")})},getUserId:function(){return Session.get("selectedUserId")},hasLevel4Permission:function(){return"4"==Meteor.user().userType&&"4"!=this.userType},getBubblesAdminList:function(){return Bubbles.find({"users.admins":this._id})},getBubblesMemberList:function(){return Bubbles.find({"users.members":this._id})},getBubbleAdminsCount:function(){var e=Bubbles.find({"users.admins":this._id});return e.count()},numBubbles:function(){var e=this._id,t=Bubbles.find({$or:[{"users.admins":{$in:[e]}},{"users.members":{$in:[e]}}]}).count();return t},numAdmins:function(){var e=this._id,t=Bubbles.find({"users.admins":{$in:[e]}}).count();return t},numMembers:function(){var e=this._id,t=Bubbles.find({"users.members":{$in:[e]}}).count();return t},numPosts:function(){var e=this._id,t=Posts.find({userId:e}).count();return t},getEmail:function(){return this.emails[0].address},getProfilePicture:function(){var e=Meteor.users.findOne({_id:Session.get("selectedUserId")});return e.profilePicture},hasPermission:function(){var e=Session.get("selectedUserId");return"4"==Meteor.user().userType||Meteor.userId()==e?!0:!1},getUserType:function(){return Meteor.users.findOne({_id:Session.get("selectedUserId")}).userType}}),Template.userProfile.rendered=function(){Meteor.subscribe("singleUser",Session.get("selectedUserId")),768>$(window).width()?Session.set("DisableCrop","1"):Session.set("DisableCrop","")},Template.userProfile.events({"click #btn1":function(){Meteor.call("sendWelcomeEmail",Meteor.userId())},"click .removeCropTool":function(){cropArea.cancelSelection()},"submit form":function(e){e.preventDefault();var t=Session.get("selectedUserId"),n={emails:[{address:$(e.target).find("[name=email]").val(),verified:!1}],phone:"",lastUpdated:(new Date).getTime(),userType:$(e.target).find("[name=userType]").val()};"undefined"!=typeof mainURL&&0!=mainURL.length&&(n.profilePicture=mainURL,n.retinaProfilePicture=retinaURL),console.log("Properties to be saved: ",n),Meteor.users.update(t,{$set:n},function(e){e?throwError(e.reason):Meteor.Router.to("userProfile",t)})},"dragover .dropzone":function(e){console.log("Dragover"),e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},"change #filesToUpload":function(e){if(files=e.target.files,files.length>1)error=new Meteor.Error(422,"Please choose only one image as the bubble image."),throwError(error.reason);else if(f=files[0],f.type.match("image.*")){var t=new FileReader,n=document.getElementById("main-canvas"),i=document.getElementById("retina-canvas"),o=n.getContext("2d"),s=i.getContext("2d"),r=new Image,a=67,l=67;t.onload=function(){return function(e){$("#drop_zone").hide(),$(".crop").attr("src",e.target.result).load(function(){r.src=e.target.result,cropArea=$(".crop").imgAreaSelect({instance:!0,aspectRatio:"1:1",imageHeight:r.height,imageWidth:r.width,x1:"10",y1:"10",x2:10+a,y2:10+l,parent:".cb-form-container",handles:!0,onInit:function(e,t){console.log("Width: "+r.width+" | Height: "+r.height),o.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,160,160),s.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,320,320),mainURL=n.toDataURL(),retinaURL=i.toDataURL(),$(".profile-pic-preview").attr("src",mainURL),"1"==Session.get("DisableCrop")&&(r.width<=r.height?(x1=0,y1=(r.height-r.width)/2,widthHeight=r.width):(y1=0,x1=(r.width-r.height)/2,widthHeight=r.height),o.drawImage(r,x1,y1,widthHeight,widthHeight,0,0,160,160),s.drawImage(r,x1,y1,widthHeight,widthHeight,0,0,320,320),mainURL=n.toDataURL(),retinaURL=i.toDataURL(),cropArea.cancelSelection())},onSelectChange:function(e,t){0!=t.width?(o.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,160,160),console.log("Y: "+t.y1+" , "+t.y2+" | X: "+t.x1+" , "+t.x2),s.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,320,320),mainURL=n.toDataURL(),retinaURL=i.toDataURL(),$(".profile-pic-preview").attr("src",mainURL)):(cropArea.setSelection(10,10,10+a,10+l),cropArea.setOptions({show:!0}),cropArea.update())},onSelectEnd:function(e,t){(a>t.width||l>t.height)&&(t.x1>r.width-a||t.y1>r.height-l?a>t.x1?(cropArea.setSelection(0,t.y2-l,a,t.y2),cropArea.update()):l>t.y1?(cropArea.setSelection(t.x2-a,0,t.x2,l),cropArea.update()):(cropArea.setSelection(t.x2-a,t.y2-l,t.x2,t.y2),cropArea.update()):(cropArea.setSelection(t.x1,t.y1,t.x1+a,t.y1+l),cropArea.update()))}})})}}(f),t.readAsDataURL(f)}}})}(),function(){Template.browserCheck.rendered=function(){var e=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t="undefined"!=typeof InstallTrigger,n=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,i=!!window.chrome&&!e;!1||document.documentMode,t||n||i?Meteor.Router.to("/dashboard"):Meteor.Router.to("/browser_unsupported")}}(),function(){Template.googleAnalytics.rendered=function(){new GA("UA-26105700-1")},GA=function(e){var t=window._gaq||[],n="//www.google-analytics.com/plugins/ga/inpage_linkid.js";t.push(["_require","inpage_linkid",n]),t.push(["_setAccount",e]),t.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()}}(),function(){Template.bubblevisor.rendered=function(){$("#bubbles").hide(),$("#users").hide();var e=function(e){var t,e=$(e).get(0),n=e.getContext("2d"),i={init:function(n){t=n,t.screenSize(e.width,e.height),t.screenPadding(80),i.initMouseHandling()},redraw:function(){n.fillStyle="white",n.fillRect(0,0,e.width,e.height),t.eachEdge(function(e,t,i){"member"==e.data.type?n.strokeStyle="rgba(0,0,0, .333)":"admin"==e.data.type?n.strokeStyle="rgba(255,0,0, .333)":"applicant"==e.data.type?n.strokeStyle="rgba(0,255,0, .333)":"invitee"==e.data.type&&(n.strokeStyle="rgba(0,0,255, .333)"),n.lineWidth=1,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(i.x,i.y),n.stroke()}),t.eachNode(function(e,t){var i=10;if("bubble"==e.data.type)n.fillStyle="blue",n.beginPath(),n.arc(t.x,t.y,i,0,2*Math.PI,!1),n.fill(),n.lineWidth=1,n.strokeStyle="#000000",n.stroke();else if("user"==e.data.type){n.fillStyle="green";var o=10;n.fillRect(t.x-o/2,t.y-o/2,o,o)}n.font="10px Arial",n.fillStyle="black",n.fillText(e.name,t.x+i+5,t.y)})},initMouseHandling:function(){var n=null,i={clicked:function(o){var s=$(e).offset();return _mouseP=arbor.Point(o.pageX-s.left,o.pageY-s.top),n=t.nearest(_mouseP),n&&null!==n.node&&(n.node.fixed=!0),$(e).bind("mousemove",i.dragged),$(window).bind("mouseup",i.dropped),!1},dragged:function(i){var o=$(e).offset(),s=arbor.Point(i.pageX-o.left,i.pageY-o.top);if(n&&null!==n.node){var r=t.fromScreen(s);n.node.p=r}return!1},dropped:function(){return null!==n&&void 0!==n.node?(null!==n.node&&(n.node.fixed=!1),n.node.tempMass=1e3,n=null,$(e).unbind("mousemove",i.dragged),$(window).unbind("mouseup",i.dropped),_mouseP=null,!1):void 0}};$(e).mousedown(i.clicked)}};return i};$(document).ready(function(){var t=arbor.ParticleSystem(1e3,600,.5);t.parameters({gravity:!0}),t.renderer=e("#viewport");for(var n=Template.bubblevisor.bubbles(),i=0;n.length>i;i++){console.log(i);var o=n[i].title;t.addNode(o,{type:"bubble"});for(var s=0;n[i].users.members.length>s;s++){var r=n[i].users.members[s],a=Meteor.users.findOne({_id:r}),l=a.username;t.addNode(l,{type:"user"}),t.addEdge(o,l,{type:"member"})}for(var s=0;n[i].users.admins.length>s;s++){var c=n[i].users.admins[s],u=Meteor.users.findOne({_id:c}),l=u.username;t.addNode(l,{type:"user"}),t.addEdge(o,l,{type:"admin"})}for(var s=0;n[i].users.applicants.length>s;s++){var d=n[i].users.applicants[s],p=Meteor.users.findOne({_id:d}),l=p.username;t.addNode(l,{type:"user"}),t.addEdge(o,l,{type:"applicant"})}for(var s=0;n[i].users.invitees.length>s;s++){var h=n[i].users.invitees[s];invitee=Meteor.users.findOne({_id:h});var l=invitee.username;t.addNode(l,{type:"user"}),t.addEdge(o,l,{type:"invitee"})}}})},Template.bubblevisor.bubbles=function(){return Bubbles.find().fetch()},Template.bubblevisor.users=function(){return Meteor.users.find().fetch()}}(),function(){Template.dashboard.helpers({getFiveExplorePosts:function(){for(var e=Posts.find({exploreId:{$ne:void 0}},{limit:5,sort:{submitted:-1}}).fetch(),t=[],n=0;e.length>n;n++){var i=e[n].postAsId;(Bubbles.find({_id:i}).count()>0||Meteor.users.find({_id:i}).count()>0)&&t.push(e[n]._id)}return Posts.find({_id:{$in:t}},{limit:5,sort:{submitted:-1}})},numBubbles:function(){var e=Meteor.userId(),t=Bubbles.find({$or:[{"users.admins":{$in:[e]}},{"users.members":{$in:[e]}}]}).count();return t},numInvites:function(){var e=Meteor.userId(),t=Bubbles.find({"users.invitees":{$in:[e]}}).count();return t},numUpdates:function(){var e=Updates.find({userId:Meteor.userId(),read:!1}).fetch();return e.length>0?(_.each(e,function(t){e=_.reject(e,function(e){return t.bubbleId==e.bubbleId&&t.userId==e.userId&&t.invokerId==e.invokerId&&t.updateType==e.updateType&&t.postId==e.postId}),_.contains(e,t)||e.push(t)}),_.each(e,function(t){var n=_.reject(e,function(e){return"replied"!=e.updateType});if(n.length>0&&(e=_.reject(e,function(e){return t.postId==e.postId&&t.updateType==e.updateType&&"replied"==t.updateType}),!_.contains(e,t))){if(singleTypeUpdates=_.reject(n,function(e){return t.postId!=e.postId}),singleTypeUpdates.length>0){var i=_.pluck(singleTypeUpdates,"invokerName"),o=i.join(),s=13;if(o.length>s){o=o.substring(0,s);var r=o.split(",");i[0].length>s?r[0]=i[0]:r.pop();var a=i.length-r.length;o=r.join(),1==a?o=o+" and "+a+" other":a>1&&(o=o+" and "+a+" others")}else o=o.replace(/,([^,]*)$/," and $1");t.invokerName=o}e.push(t)}}),_.each(e,function(t){if(1==t.collapsible){var n=t.updateType,i=_.reject(e,function(e){return e.updateType!=n});if(i.length>0){var o=_.pluck(i,"invokerName"),s=o.join(),r=13;if(s.length>r){s=s.substring(0,r);var a=s.split(",");o[0].length>r?a[0]=o[0]:a.pop();var l=o.length-a.length;s=a.join(),s=1==l?s+" and "+l+" other":s+" and "+l+" others"}else s=s.replace(/,([^,]*)$/," and $1");t.invokerName=s,e=_.reject(e,function(e){return e.updateType==n}),firstUpdate&&e.push(firstUpdate)}}}),Session.set("numUpdates",e.length),e.length):0},numUpdatesMinusThree:function(){var e=Updates.find({userId:Meteor.userId(),read:!1}).fetch();return e.length>0?(_.each(e,function(t){e=_.reject(e,function(e){return t.bubbleId==e.bubbleId&&t.userId==e.userId&&t.invokerId==e.invokerId&&t.updateType==e.updateType&&t.postId==e.postId}),_.contains(e,t)||e.push(t)}),_.each(e,function(t){var n=_.reject(e,function(e){return"replied"!=e.updateType});if(n.length>0&&(e=_.reject(e,function(e){return t.postId==e.postId&&t.updateType==e.updateType&&"replied"==t.updateType}),!_.contains(e,t))){if(singleTypeUpdates=_.reject(n,function(e){return t.postId!=e.postId}),singleTypeUpdates.length>0){var i=_.pluck(singleTypeUpdates,"invokerName"),o=i.join(),s=13;if(o.length>s){o=o.substring(0,s);var r=o.split(",");i[0].length>s?r[0]=i[0]:r.pop();var a=i.length-r.length;o=r.join(),1==a?o=o+" and "+a+" other":a>1&&(o=o+" and "+a+" others")}else o=o.replace(/,([^,]*)$/," and $1");t.invokerName=o}e.push(t)}}),_.each(e,function(t){if(1==t.collapsible){var n=t.updateType,i=_.reject(e,function(e){return e.updateType!=n});if(i.length>0){var o=_.pluck(i,"invokerName"),s=o.join(),r=13;if(s.length>r){s=s.substring(0,r);var a=s.split(",");o[0].length>r?a[0]=o[0]:a.pop();var l=o.length-a.length;s=a.join(),s=1==l?s+" and "+l+" other":s+" and "+l+" others"}else s=s.replace(/,([^,]*)$/," and $1");t.invokerName=s,e=_.reject(e,function(e){return e.updateType==n}),firstUpdate&&e.push(firstUpdate)}}}),e.length-Session.get("numUpdates")):void 0},showMoreUpdates:function(e){return e>Session.get("numUpdates")?!0:!1},numComments:function(){var e=Meteor.userId(),t=Comments.find({userId:e}).count();return t},numPosts:function(){var e=Meteor.userId(),t=Posts.find({userId:e}).count();return t},numFiles:function(){var e=Meteor.userId(),t=Files.find({userId:e}).count();return t},numEvents:function(){return Meteor.userId(),Posts.find({attendees:{$in:[Meteor.userId()]}}).count()},getUpdates:function(){var e=Updates.find({userId:Meteor.userId(),read:!1}).fetch();return e.length>0?(_.each(e,function(t){e=_.reject(e,function(e){return t.bubbleId==e.bubbleId&&t.userId==e.userId&&t.invokerId==e.invokerId&&t.updateType==e.updateType&&t.postId==e.postId}),_.contains(e,t)||e.push(t)}),_.each(e,function(t){var n=_.reject(e,function(e){return"replied"!=e.updateType});if(n.length>0&&(e=_.reject(e,function(e){return t.postId==e.postId&&t.updateType==e.updateType&&"replied"==t.updateType}),!_.contains(e,t))){if(singleTypeUpdates=_.reject(n,function(e){return t.postId!=e.postId}),singleTypeUpdates.length>0){var i=_.pluck(singleTypeUpdates,"invokerName"),o=i.join(),s=13;if(o.length>s){o=o.substring(0,s);var r=o.split(",");i[0].length>s?r[0]=i[0]:r.pop();var a=i.length-r.length;o=r.join(),1==a?o=o+" and "+a+" other":a>1&&(o=o+" and "+a+" others")}else o=o.replace(/,([^,]*)$/," and $1");t.invokerName=o}e.push(t)}}),_.each(e,function(t){if(1==t.collapsible){var n=t.updateType,i=_.reject(e,function(e){return e.updateType!=n});if(i.length>0){var o=_.pluck(i,"invokerName"),s=o.join(),r=13;if(s.length>r){s=s.substring(0,r);var a=s.split(",");o[0].length>r?a[0]=o[0]:a.pop();var l=o.length-a.length;s=a.join(),s=1==l?s+" and "+l+" other":s+" and "+l+" others"}else s=s.replace(/,([^,]*)$/," and $1");t.invokerName=s,e=_.reject(e,function(e){return e.updateType==n}),firstUpdate&&e.push(firstUpdate)}}}),e=_.sortBy(e,function(e){return e.submitted}),Session.get("numUpdates")>0?_.first(e.reverse(),Session.get("numUpdates")):e.reverse()):void 0}}),Template.dashboard.events({"click .clear-updates":function(){var e=Updates.find({userId:Meteor.userId(),read:!1}).fetch();_.each(e,function(e){Meteor.call("setRead",e)})},"click #dashboard-icon-2a":function(){location.href="https://play.google.com/store/apps/details?id=io.cordova.emorybubble"},"click #dashboard-icon-2b":function(){location.href="https://itunes.apple.com/us/app/emory-bubble/id538091098"},"click .dashboard-more-updates":function(){Session.set("numUpdates",0),console.log(Session.get("numUpdates"))}}),Template.dashboard.rendered=function(){Meteor.subscribe("fiveExplorePosts"),Meteor.subscribe("updatedPosts",Meteor.userId()),$(".carousel").carousel(),$(".dashboard-more-updates").click(function(){$(".threeUpdtes").addClass("visible-0"),$(".allUpdates").removeClass("visible-0"),$(".dashboard-more-updates").addClass("visible-0"),$(".dashboard-updates").css("height",75*Session.get("numUpdates")+"px")})}}(),function(){Template.exploreAll.rendered=function(){Meteor.subscribe("allExplores");var e=Meteor.users.findOne({_id:Meteor.userId()}).userType;if(Explores.find().count()>0){var t=Explores.findOne().fetch();Meteor.Router.to("/explore/"+t._id+"/home")}else"4"==e&&Meteor.Router.to("/explore/create")}}(),function(){Template.loggedOut.rendered=function(){setTimeout(function(){Meteor.Router.to("welcomePage")},6e4)}}(),function(){Template.loginPage.helpers({isSignup:function(){return Session.get("signup")?Session.get("signup"):"none"},getSignupText:function(){return"block"!=Session.get("signup")?"Create Account":"Cancel"},getSubmitText:function(){return"block"!=Session.get("signup")?"Log In":"Sign Up"}}),Template.loginPage.events({"submit form":function(e){if(e.preventDefault(),"block"==Session.get("signup")){var t=$(e.target).find("[name=username]").val(),n=$(e.target).find("[name=password]").val(),i=$(e.target).find("[name=email]").val(),o=document.createElement("canvas"),s=document.createElement("canvas");o.width=160,o.height=160,s.width=320,s.height=320;var r=o.getContext("2d"),a=s.getContext("2d");$("#tempprofile").show(),$("#tempprofile").hide(),console.log($("#tempprofile")[0]),r.drawImage($("#tempprofile")[0],0,0,160,160),a.drawImage($("#tempprofile")[0],0,0,320,320);var l=o.toDataURL(),c=s.toDataURL();$("#profilePicture").hide(),$("#retinaProfilePicture").hide(),$("#profilePicture").attr("src",l),$("#retinaProfilePicture").attr("src",c),t&&n&&i?(Accounts.createUser({username:t,email:i,password:n}),Meteor.loginWithPassword(t,n,function(e){if(e);else{var t={profilePicture:l,retinaProfilePicture:c},n=Meteor.userId();Meteor.users.update(n,{$set:t},function(e){console.log(e)}),Meteor.Router.to("dashboard")}})):alert("Enter valid credentials")}else{var t=$(e.target).find("[name=username]").val(),n=$(e.target).find("[name=password]").val();t&&n?Meteor.loginWithPassword(t,n,function(e){e||Meteor.Router.to("dashboard")}):alert("Enter valid credentials")}},"click .signup":function(e){e.preventDefault(),"block"!=Session.get("signup")?Session.set("signup","block"):Session.set("signup","none")},"change #username":function(e){var t=e.target.value,n=t[0].toLowerCase(),i='<img src="/img/letterprofiles/'+n+'.jpg" id="tempprofile">';$("form").append(i),$("#tempprofile").hide()}}),Template.loginPage.rendered=function(){if($("#tempprofile").hide(),$("#profilePicture").hide(),$("#retinaProfilePicture").hide(),Session.get("secret")&&null!=Session.get("secret")){var e=Session.get("secret");setTimeout(function(){var t=Meteor.users.findOne({secret:e}),n=t.username;Meteor.loginWithPassword(n,e,function(e){e?console.log(e):(Session.set("secret",null),Meteor.Router.to("searchBubbles"))})},1e3)}}}(),function(){Template.logoutDropdown.helpers({getUsername:function(){return Meteor.user().name}}),Template.logoutDropdown.events({"click .signout":function(){Meteor.logout(function(){Meteor.Router.to("loggedOut")})},"click .support":function(){window.open("http://support.emorybubble.com","_blank")},"click .view-profile":function(){Meteor.Router.to("userProfile",Meteor.userId())}})}(),function(){Template.secretLogin.rendered=function(){url_params=window.location.pathname.split("/");var e=url_params[2],t=url_params[3];console.log("Secret login: ",e,t),Meteor.loginWithPassword(e,t,function(t){if(t);else{var n="/resetpass/"+e;$.ajax({url:n,success:function(){console.log("Password reset")}});var i=Meteor.users.findOne({username:e});i.neverLoggedIn!==void 0?1==i.neverLoggedIn?(console.log("User has never logged in before."),Meteor.Router.to("/onboarding")):(console.log("Seen this user before."),Meteor.Router.to("/dashboard")):(console.log("Neverlogged in not defined ... User has never logged in before."),Meteor.Router.to("/onboarding"))}})}}(),function(){Template.welcomePage.rendered=function(){window.location="/landing/index.html"}}(),function(){Template.onboarding.helpers({getCurrentName:function(){return Meteor.user().name}}),Template.onboarding.events({"click #accept-terms":function(){$("#cb-form-container-onboarding .cb-submit").removeClass("ready-false"),$("#cb-form-container-onboarding .cb-submit").prop("disabled",!1),$("#accept-terms").addClass("selected")},"click .removeCropTool":function(){cropArea.cancelSelection()},"submit form":function(e){e.preventDefault();var t=Meteor.userId(),n={lastUpdated:(new Date).getTime(),neverLoggedIn:!1};"undefined"!=typeof mainURL&&0!=mainURL.length&&(n.profilePicture=mainURL,n.retinaProfilePicture=retinaURL),Meteor.users.update(t,{$set:n},function(e){e?throwError(e.reason):Meteor.Router.to("dashboard")}),Meteor.call("sendWelcomeEmail",Meteor.userId())},"dragover .dropzone":function(e){console.log("Dragover"),e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},"change #filesToUpload":function(e){if(files=e.target.files,files.length>1)error=new Meteor.Error(422,"Please choose only one image as the bubble image."),throwError(error.reason);else if(f=files[0],f.type.match("image.*")){var t=new FileReader,n=document.getElementById("main-canvas"),i=document.getElementById("retina-canvas"),o=n.getContext("2d"),s=i.getContext("2d"),r=new Image,a=67,l=67;t.onload=function(){return function(e){$("#drop_zone").hide(),$(".crop").attr("src",e.target.result).load(function(){r.src=e.target.result,cropArea=$(".crop").imgAreaSelect({instance:!0,aspectRatio:"1:1",imageHeight:r.height,imageWidth:r.width,x1:"10",y1:"10",x2:10+a,y2:10+l,parent:".cb-form-container",handles:!0,onInit:function(e,t){o.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,160,160),s.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,320,320),mainURL=n.toDataURL(),retinaURL=i.toDataURL(),$(".profile-pic-preview").attr("src",mainURL),"1"==Session.get("DisableCrop")&&(r.width<=r.height?(x1=0,y1=(r.height-r.width)/2,widthHeight=r.width):(y1=0,x1=(r.width-r.height)/2,widthHeight=r.height),o.drawImage(r,x1,y1,widthHeight,widthHeight,0,0,160,160),s.drawImage(r,x1,y1,widthHeight,widthHeight,0,0,320,320),mainURL=n.toDataURL(),retinaURL=i.toDataURL(),cropArea.cancelSelection())},onSelectChange:function(e,t){0!=t.width?(o.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,160,160),console.log(t.y1),s.drawImage(r,t.x1,t.y1,t.width,t.height,0,0,320,320),mainURL=n.toDataURL(),retinaURL=i.toDataURL(),$(".profile-pic-preview").attr("src",mainURL)):(cropArea.setSelection(10,10,10+a,10+l),cropArea.setOptions({show:!0}),cropArea.update())},onSelectEnd:function(e,t){(a>t.width||l>t.height)&&(t.x1>r.width-a||t.y1>r.height-l?a>t.x1?(cropArea.setSelection(0,t.y2-l,a,t.y2),cropArea.update()):l>t.y1?(cropArea.setSelection(t.x2-a,0,t.x2,l),cropArea.update()):(cropArea.setSelection(t.x2-a,t.y2-l,t.x2,t.y2),cropArea.update()):(cropArea.setSelection(t.x1,t.y1,t.x1+a,t.y1+l),cropArea.update()))}})})}}(f),t.readAsDataURL(f)}}}),Template.onboarding.rendered=function(){uid=Meteor.userId(),e=Meteor.users.findOne({_id:uid}),t="/img/letterprofiles/"+e.username.substring(0,1).toLowerCase()+".jpg",n="/img/letterprofiles/"+e.username.substring(0,1).toLowerCase()+".jpg",$("#cb-form-container-onboarding").hide();var e=Meteor.users.findOne({_id:Meteor.userId()});console.log("neverLoggedIn: ",e),0==e.neverLoggedIn?Meteor.Router.to("/dashboard"):($("#cb-form-container-onboarding").show(),$(".cb-form-onboarding").show()),$("#cb-form-container-onboarding .cb-submit").addClass("ready-false"),$("#cb-form-container-onboarding .cb-submit").prop("disabled",!0),Meteor.subscribe("authenticatedUser",Session.get("secret")),Meteor.subscribe("singleUser",Meteor.userId());var t,n;768>$(window).width()?Session.set("DisableCrop","1"):Session.set("DisableCrop","");var i=function(){$("#main").css("height",$(window).height())};$(window).resize(function(){i()}),i()},Template.onboarding.created=function(){Meteor.subscribe("singleUser",Meteor.userId())}}(),function(){Template.userlog.helpers({getUserlogs:function(){if(!Session.get("selectedUsername")){var e=_.groupBy(Userlogs.find().fetch(),"userId");return Session.set("selectedUserIdList",Object.keys(e)),_.toArray(_.groupBy(Userlogs.find().fetch(),"userId"))}var t=Meteor.users.find({username:RegExp(Session.get("selectedUsername"),"i")}).fetch();if(t.length>0){var n=_.pluck(t,"_id");return _.toArray(_.groupBy(Userlogs.find({userId:{$in:n}}).fetch()))}return[]},groupByPage:function(){return _.toArray(_.groupBy(this,"page"))},getPageCount:function(){return this.length},getPageName:function(){return this[0].page},getUsername:function(){var e=Meteor.users.findOne(this[0].userId);return e?e.username:void 0},getUsersWithMultipleLogin:function(){return _.toArray(_.groupBy(Userlogs.find({login:!0}).fetch(),"userId"))},getLoginCount:function(){return this.length},countUsersWithMultipleLogin:function(){return Userlogs.find({login:!0}).count()}}),Template.userlog.rendered=function(){$(".search-text").bind("propertychange keyup input paste",function(){var e=$(".search-text").val();""==e?Session.set("selectedUsername",void 0):Session.set("selectedUsername",e)})}}(),function(){Accounts.ui.config({passwordSignupFields:"USERNAME_AND_EMAIL"})}(),function(){Errors=new Meteor.Collection(null),throwError=function(e){Errors.insert({message:e,seen:!1}),console.log(e)},clearErrors=function(){Errors.remove({seen:!0})}}(),function(){Handlebars.registerHelper("pluralize",function(e,t,n){return void 0==n&&(n=""),"person"==t?1===e?"1 "+n+" "+"person":e+" "+n+" "+"people":1===e?"1 "+n+" "+t:e+" "+n+" "+t+"s"});var e=function(e){var t={bubbleId:Session.get("currentBubbleId"),postType:e};if("event"==e){t.dateTime={$gt:moment().add("hours",-4).valueOf()};var n={dateTime:1}}else if("file"==e)var n={lastDownloadTime:-1};else var n={lastCommentTime:-1};return Posts.find(t,{limit:3,sort:n}).fetch()};Handlebars.registerHelper("siteLoading",function(){var e=Session.get("siteLoading");return"false"==e?!1:!0}),Handlebars.registerHelper("isLoading",function(){return Session.get("isLoading")?!0:!1}),Handlebars.registerHelper("getUserTypeName",function(e){return userTypes[e]}),Handlebars.registerHelper("getSelectedUserProfilePic",function(e){var t=Meteor.users.findOne(e);return t&&t.profilePicture}),Handlebars.registerHelper("getSelectedUserName",function(e){var t=Meteor.users.findOne(e);return t&&t.username}),Handlebars.registerHelper("getSelectedName",function(e){var t=Meteor.users.findOne(e);return t&&t.name}),Handlebars.registerHelper("postProperties",{discussion:{posts:function(){return e("discussion")},postType:"discussion",word1:"active"},event:{posts:function(){return e("event")},postType:"event",word1:"upcoming"},file:{posts:function(){var t=e("file");return _.each(t,function(e){e.numDownloads&&e.lastDownloadTime||(e.lastDownloadTime||(e.lastDownloadTime=(new Date).getTime()),e.numDownloads||(e.numDownloads=0),Posts.update({_id:e._id},{$set:{lastDownloadTime:e.lastDownloadTime,numDownloads:e.numDownloads}}))}),t},postType:"file",word1:"latest"}}),Handlebars.registerHelper("matchPostType",function(e){return this.postType==e}),Handlebars.registerHelper("matchObjectType",function(e){return"post"==e?this.postType!==void 0?!0:!1:"bubble"==e?this.category!==void 0?!0:!1:"user"==e?this.userType!==void 0?!0:!1:!1}),Handlebars.registerHelper("matchSectionType",function(){}),Handlebars.registerHelper("getCurrentBubble",function(){return Bubbles.findOne(Session.get("currentBubbleId"))}),Handlebars.registerHelper("getCurrentPost",function(){return Posts.findOne(Session.get("currentPostId"))}),Handlebars.registerHelper("isAdmin",function(){var e=Bubbles.findOne(Session.get("currentBubbleId"));return e?"3"==Meteor.user().userType||_.contains(e.users.admins,Meteor.userId()):-1}),Handlebars.registerHelper("belongsToBubble",function(){var e=Bubbles.findOne(Session.get("currentBubbleId"));return e&&(_.contains(e.users.admins,Meteor.userId())||_.contains(e.users.members,Meteor.userId()))?!0:"3"==Meteor.user().userType||!1}),Handlebars.registerHelper("hasAppliedToBubble",function(){return _.contains(this.users.applicants,Meteor.userId())}),Handlebars.registerHelper("isInvitedToBubble",function(){return this.users?_.contains(this.users.invitees,Meteor.userId()):-1}),Handlebars.registerHelper("ownsPost",function(){var e=Bubbles.findOne(this.bubbleId);return e?(userList=e.users.admins,userList.push(this.userId),"3"==Meteor.user().userType||_.contains(userList,Meteor.userId())):void 0}),Handlebars.registerHelper("submittedText",function(e){return moment(""+new Date(e)).fromNow().toUpperCase()}),Handlebars.registerHelper("timestampToMonthShort",function(e){return moment(""+new Date(e)).format("MMM")}),Handlebars.registerHelper("timestampToDayLong",function(e){return moment(""+new Date(e)).format("DD")}),Handlebars.registerHelper("timestampToDateLong",function(e){return moment(""+new Date(e)).format("dddd, MMMM D, YYYY")}),Handlebars.registerHelper("timestampToTime",function(e){return moment(""+new Date(e)).format("h:mma")}),Handlebars.registerHelper("timestampToFromNow",function(e){return moment(""+new Date(e)).fromNow()}),Handlebars.registerHelper("numOfAttendees",function(){return this.attendees!==void 0?this.attendees.length:-1}),Handlebars.registerHelper("numOfMembers",function(){return this.users!==void 0?this.users.members.length+this.users.admins.length:-1}),Handlebars.registerHelper("toUpperCase",function(e){return e?e.toUpperCase():void 0}),Handlebars.registerHelper("getUsername",function(e){var t=Meteor.users.findOne({_id:""+e});return t?t.username:void 0}),Handlebars.registerHelper("chosen",function(){return Session.get(Session.get("currentBubbleId")+(""+this))==""+this?!0:void 0}),Handlebars.registerHelper("hasNoErrors",function(){return 0==Errors.find().count()?!0:!1}),Handlebars.registerHelper("getBubbleUsersCount",function(){var e=Bubbles.findOne(Session.get("currentBubbleId")),t=e.users.admins.concat(e.users.members);return t.length}),Handlebars.registerHelper("getLongCategory",function(){var e=this.category,t=_.find(categories,function(t){return e==t.name_short});return t?t.name_long:void 0}),Handlebars.registerHelper("convertSpacesToDashes",function(e){return e.replace(" ","-")}),Handlebars.registerHelper("decodeURI",function(e){return decodeURI(e)}),Handlebars.registerHelper("getTextAfterDot",function(e){return e?e.substr(e.lastIndexOf(".")+1,e.length):-1}),Handlebars.registerHelper("getTextAfterSlash",function(e){if(e){var t=e.split("/");return t[1]}return!1}),Handlebars.registerHelper("isOnboarding",function(){var e=window.location.pathname.split("/")[1];return"onboarding"==e?!0:!1}),Handlebars.registerHelper("isLoggedIn",function(){return Meteor.user()?!0:void 0}),Handlebars.registerHelper("isLoggedIn2",function(){var e=window.location.pathname.split("/")[1];return Meteor.user()||"login"==e||"loggedOut"==e?!0:void 0}),Handlebars.registerHelper("hasBubble",function(){return Bubbles.find({$or:[{"users.members":Meteor.userId()},{"users.admins":Meteor.userId()}]}).count()>0?!0:!1}),Handlebars.registerHelper("isUser",function(e){return""+e==Meteor.userId()
}),Handlebars.registerHelper("hasSearchText",function(){return void 0!=Session.get("searchText")?!0:void 0}),Handlebars.registerHelper("hasLevel2Permissions",function(){return Meteor.user()&&"2"==Meteor.user().userType}),Handlebars.registerHelper("hasLevel2And3Permissions",function(){return Meteor.user()&&("2"==Meteor.user().userType||"3"==Meteor.user().userType)}),Handlebars.registerHelper("hasLevel3Permissions",function(){return Meteor.user()&&"3"==Meteor.user().userType}),Handlebars.registerHelper("hasEditPermissions",function(){var e=Bubbles.findOne(Session.get("currentBubbleId"));if("super"==e.bubbleType){if("2"==Meteor.user().userType||"3"==Meteor.user().userType)return!0}else{var t=Posts.findOne(Session.get("currentPostId"));if(_.contains(e.users.admins,Meteor.userId())||Meteor.userId()==t.userId)return!0}return!1}),Handlebars.registerHelper("isSuperBubble",function(){return"super"==Bubbles.findOne(Session.get("currentBubbleId")).bubbleType}),Handlebars.registerHelper("compressedUpdates",function(e,t){var n=Updates.find({userId:Meteor.userId(),bubbleId:e,read:!1}).fetch();return n.length>0?(_.each(n,function(e){n=_.reject(n,function(t){return e.bubbleId==t.bubbleId&&e.userId==t.userId&&e.invokerId==t.invokerId&&e.updateType==t.updateType&&e.postId==t.postId}),_.contains(n,e)||n.push(e)}),_.each(n,function(e){var t=_.reject(n,function(e){return"replied"!=e.updateType});if(t.length>0&&(n=_.reject(n,function(t){return e.postId==t.postId&&e.updateType==t.updateType&&"replied"==e.updateType}),!_.contains(n,e))){if(singleTypeUpdates=_.reject(t,function(t){return e.postId!=t.postId}),singleTypeUpdates.length>0){var i=_.pluck(singleTypeUpdates,"invokerName"),o=i.join(),s=13;if(o.length>s){o=o.substring(0,s);var r=o.split(",");i[0].length>s?r[0]=i[0]:r.pop();var a=i.length-r.length;o=r.join(),1==a?o=o+" and "+a+" other":a>1&&(o=o+" and "+a+" others")}else o=o.replace(/,([^,]*)$/," and $1");e.invokerName=o}n.push(e)}}),_.each(n,function(e){if(1==e.collapsible){var t=e.updateType,i=_.reject(n,function(e){return e.updateType!=t});if(i.length>0){var o=_.pluck(i,"invokerName"),s=o.join(),r=13;if(s.length>r){s=s.substring(0,r);var a=s.split(",");o[0].length>r?a[0]=o[0]:a.pop();var l=o.length-a.length;s=a.join(),s=1==l?s+" and "+l+" other":s+" and "+l+" others"}else s=s.replace(/,([^,]*)$/," and $1");e.invokerName=s,n=_.reject(n,function(e){return e.updateType==t}),firstUpdate&&n.push(firstUpdate)}}}),n=_.sortBy(n,function(e){return e.submitted}),t>0?_.first(n.reverse(),t):n.reverse()):void 0}),Handlebars.registerHelper("compressedUpdatesCount",function(e){var t;return t=e?Updates.find({userId:Meteor.userId(),bubbleId:e,read:!1}).fetch():Updates.find({userId:Meteor.userId(),bubbleId:Session.get("currentBubbleId"),read:!1}).fetch(),t.length>0?(_.each(t,function(e){t=_.reject(t,function(t){return e.bubbleId==t.bubbleId&&e.userId==t.userId&&e.invokerId==t.invokerId&&e.updateType==t.updateType&&e.postId==t.postId}),_.contains(t,e)||t.push(e)}),_.each(t,function(e){var n=_.reject(t,function(e){return"replied"!=e.updateType});if(n.length>0&&(t=_.reject(t,function(t){return e.postId==t.postId&&e.updateType==t.updateType&&"replied"==e.updateType}),!_.contains(t,e))){if(singleTypeUpdates=_.reject(n,function(t){return e.postId!=t.postId}),singleTypeUpdates.length>0){var i=_.pluck(singleTypeUpdates,"invokerName"),o=i.join(),s=13;if(o.length>s){o=o.substring(0,s);var r=o.split(",");i[0].length>s?r[0]=i[0]:r.pop();var a=i.length-r.length;o=r.join(),1==a?o=o+" and "+a+" other":a>1&&(o=o+" and "+a+" others")}else o=o.replace(/,([^,]*)$/," and $1");e.invokerName=o}t.push(e)}}),_.each(t,function(e){if(1==e.collapsible){var n=e.updateType,i=_.reject(t,function(e){return e.updateType!=n});if(i.length>0){var o=_.pluck(i,"invokerName"),s=o.join(),r=13;if(s.length>r){s=s.substring(0,r);var a=s.split(",");o[0].length>r?a[0]=o[0]:a.pop();var l=o.length-a.length;s=a.join(),s=1==l?s+" and "+l+" other":s+" and "+l+" others"}else s=s.replace(/,([^,]*)$/," and $1");e.invokerName=s,t=_.reject(t,function(e){return e.updateType==n}),firstUpdate&&t.push(firstUpdate)}}}),t.length):void 0}),Handlebars.registerHelper("codeComment",function(){return""})}(),function(){Meteor.Router.add({"/login":"loginPage","/welcome":"welcomePage","/loggedOut":"loggedOut","/testauth/:_username/:_secret":{to:"secretLogin",and:function(e,t){Session.set("userSecret",t),Session.set("usernameSecret",e)}},"/onboarding":"onboarding","/browser_unsupported":{to:"browserUnsupported"},"/mybubbles/:_id/home":{to:"bubblePage",and:function(e){var t=Session.get("currentBubbleId");Session.set("currentBubbleId",e);var n=Session.get("currentBubbleId");n!=t&&Session.set("bubbleLoading","true")}},"/mybubbles/:_id/event":{to:"bubbleEventPage",and:function(e){Session.set("currentBubbleId",e)}},"/mybubbles/:_id/discussion":{to:"bubbleDiscussionPage",and:function(e){Session.set("currentBubbleId",e)}},"/mybubbles/:_id/file":{to:"bubbleFilePage",and:function(e){Session.set("currentBubbleId",e)}},"/mybubbles/:_id/public":{to:"bubblePublicPage",and:function(e){Session.set("currentBubbleId",e)}},"/mybubbles/:_id/edit":{to:"bubbleEdit",and:function(e){Session.set("currentBubbleId",e)}},"/mybubbles/:_id/members":{to:"bubbleMembersPage",and:function(e){Session.set("currentBubbleId",e)}},"/mybubbles/:_bId/posts/:_pId":{to:"postPage",and:function(e,t){Session.set("currentBubbleId",e),Session.set("currentPostId",t),Meteor.subscribe("singlePost",t)}},"/mybubbles/:_bId/posts/:_pId/edit/discussion":{to:"discussionEdit",and:function(e,t){Session.set("currentBubbleId",e),Session.set("currentPostId",t),Meteor.subscribe("singlePost",t)}},"/mybubbles/:_bId/posts/:_pId/edit/event":{to:"eventEdit",and:function(e,t){Session.set("currentBubbleId",e),Session.set("currentPostId",t),Meteor.subscribe("singlePost",t)}},"/mybubbles/:_bId/posts/:_pId/edit/file":{to:"fileobjectEdit",and:function(e,t){Session.set("currentBubbleId",e),Session.set("currentPostId",t),Meteor.subscribe("singlePost",t)}},"/mybubbles/:_id/create/discussion":{to:"discussionSubmit",and:function(e){Session.set("currentBubbleId",e),Session.set("currentPostId",null)}},"/mybubbles/:_id/create/event":{to:"eventSubmit",and:function(e){Session.set("currentBubbleId",e)}},"/mybubbles/:_id/create/file":{to:"fileSubmit",and:function(e){Session.set("currentBubbleId",e)}},"/mybubbles/create/bubble":"bubbleSubmit","/settings/invites":"invitationsPage","/settings/about":"about","/settings/userprofile/:id":{to:"userProfile",and:function(e){Session.set("selectedUserId",e)}},"/editprofile/:id":{to:"userProfileEdit",and:function(e){Session.set("selectedUserId",e)}},"/authenticateduser/:secret":{to:"loginPage",and:function(e){Session.set("secret",e)}},"/search/all":"searchAll","/search/users":"searchUsers","/search/bubbles":"searchBubbles","/search/discussions":"searchDiscussions","/search/events":"searchEvents","/search/files":"searchFiles","/explore/create":"exploreSubmit","/explore/:id/home":{to:"explorePage",and:function(e){Session.set("currentExploreId",e)}},"/explore/:_expId/posts/:_pId":{to:"explorePostPage",and:function(e,t){Session.set("currentExploreId",e),Session.set("currentPostId",t),Meteor.subscribe("comments",t),Meteor.subscribe("singlePost",t)}},"/explore":"exploreAll","/flags/all":"flagsList","/analytics":"userlog","/dashboard":"dashboard","/":"/","/bubblevisor":{to:"bubblevisor"},"*":"404NotFound"}),Meteor.Router.filters({clearErrors:function(e){return clearErrors(),e},checkLoginStatus:function(e){if(Meteor.userId()){var t=!1,n=Userlogs.find(),i=_.toArray(n.collection.docs);if(i.length>0){var o=i[i.length-1].submitted;moment((new Date).getTime()).diff(moment(o),"minutes",!0)>=5&&(t=!0)}else t=!0;return Meteor.call("createLog",e,t),e}return Meteor.loggingIn()?"loading":"welcomePage"},belongToBubble:function(e){if(window.location.pathname.match("mybubbles")&&Meteor.user()&&"3"!=Meteor.user().userType){var t=Bubbles.findOne(Session.get("currentBubbleId"));if(t&&!_.contains(t.users.admins,Meteor.userId())&&!_.contains(t.users.members,Meteor.userId()))return"bubblePublicPage"}return e},routeWhenLogin:function(){return"dashboard"},hasSuperBubblePermissions:function(e){return"super"==Bubbles.findOne(Session.get("currentBubbleId")).bubbleType?!Meteor.user()||"2"!=Meteor.user().userType&&"3"!=Meteor.user().userType?(Meteor.Router.to("bubblePage",Session.get("currentBubbleId")),"bubblePage"):e:e},increaseViewCount:function(e){return Meteor.call("incViewCount",Session.get("currentPostId")),e},level3Permissions:function(e){return Meteor.user()&&"3"==Meteor.user().userType?e:"/"},setNumUpdatesTo3:function(e){return Session.set("numUpdates",3),e},browserSupported:function(e){var t=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,n="undefined"!=typeof InstallTrigger,i=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,o=!!window.chrome&&!t;return!1||document.documentMode,$(window).width()>764?n||i||o?e:"/browser_unsupported":e}}),Meteor.Router.filter("belongToBubble",{except:["searchAll","searchUsers","searchBubbles","searchDiscussions","searchEvents","searchFiles","bubbleSubmit"]}),Meteor.Router.filter("level3Permissions",{only:["flagsList","userlog"]}),Meteor.Router.filter("clearErrors"),Meteor.Router.filter("checkLoginStatus",{except:["secretLogin","loggedOut","loginPage","welcomePage","browserCheck","browserUnsupported"]}),Meteor.Router.filter("browserSupported",{except:["browserUnsupported"]}),Meteor.Router.filter("routeWhenLogin",{only:["/"]}),Meteor.Router.filter("hasSuperBubblePermissions",{only:["discussionSubmit","eventSubmit","fileSubmit","discussionEdit","eventEdit","fileobjectEdit"]}),Meteor.Router.filter("increaseViewCount",{only:["postPage","discussionEdit","eventEdit","fileobjectEdit"]}),Meteor.Router.filter("setNumUpdatesTo3",{only:["dashboard","bubblePage"]})}(),function(){categories=[{name_long:"student organization",name_short:"club"},{name_long:"athletics and recreation",name_short:"sport"},{name_long:"greek organization",name_short:"greek"},{name_long:"class/study group",name_short:"class"},{name_long:"academic department",name_short:"department"},{name_long:"faculty committee",name_short:"faculty"},{name_long:"campus resource",name_short:"resource"},{name_long:"residence hall",name_short:"dorm"},{name_long:"arts and entertainment",name_short:"art"},{name_long:"custom group",name_short:"custom"}],userTypes={1:"user",2:"super user",3:"campus moderator",4:"campus bubble"},exploreTypes=[{name_long:"events",name_short:"event"},{name_long:"discussions",name_short:"discussion"}],exploreProfileIcons=[{name_long:"announcements",name_short:"announcements"},{name_long:"campus events",name_short:"campus events"},{name_long:"classifieds",name_short:"classifieds"},{name_long:"professor reviews",name_short:"professor reviews"},{name_long:"controversial topics",name_short:"controversial topics"},{name_long:"student deals",name_short:"student deals"},{name_long:"nightlife",name_short:"nightlife"}]}(),function(){Bubbles=new Meteor.Collection("bubbles"),Bubbles.allow({update:isConnectedToBubble,remove:ownsBubble});var e=Bubbles.find({},{fields:{title:1,_id:1}});e.forEach(function(e){Meteor.call("addBubbleToIndex",e._id,e.title)}),Meteor.methods({bubble:function(e){var t=Meteor.user(),n=Bubbles.findOne({title:e.title});if(!t)throw new Meteor.Error(401,"You need to login to post new stories");if(!e.title)throw new Meteor.Error(422,"Please fill in a headline");if(e.title&&n)throw new Meteor.Error(302,"This bubble has already been created",n._id);var i=_.extend(_.pick(e,"title","description","category","coverPhoto","retinaCoverPhoto","profilePicture","retinaProfilePicture","bubbleType"),{submitted:(new Date).getTime(),lastUpdated:(new Date).getTime(),users:{applicants:[],invitees:[],members:[],admins:[t._id]}});return bubbleId=Bubbles.insert(i)},deleteBubble:function(e){Updates.update({bubbleId:e},{$set:{read:!0}}),createDeleteBubbleUpdate(e),Bubbles.remove(e)},addInvitee:function(e,t){t&&e&&Bubbles.update({_id:e},{$addToSet:{"users.invitees":{$each:t}}})},removeInvitee:function(e){Bubbles.update({_id:e},{$pull:{"users.invitees":Meteor.userId()}})},acceptInvitation:function(e){Bubbles.update({_id:e},{$addToSet:{"users.members":Meteor.userId()},$pull:{"users.invitees":Meteor.userId()}}),createNewMemberUpdate(Meteor.userId())},joinBubble:function(e){Bubbles.update({_id:e},{$addToSet:{"users.applicants":Meteor.userId()}}),createNewApplicantUpdate(e)},cancelJoinBubble:function(e){Bubbles.update({_id:e},{$pull:{"users.applicants":Meteor.userId()}}),Updates.update({bubbleId:e,updateType:"new applicant"},{$set:{read:!0}})}})}(),function(){Comments=new Meteor.Collection("comments"),Comments.allow({update:ownsComment,remove:ownsComment}),Meteor.methods({comment:function(e){var t=Meteor.user();if(Posts.findOne(e.postId),!t)throw new Meteor.Error(401,"Please sign in to make comment");if(!e.body)throw new Meteor.Error(422,"Please type a message before submitting your comment");if(!e.postId)throw new Meteor.Error(422,"Please comment on a post");return currentTime=(new Date).getTime(),comment=_.extend(_.pick(e,"postId","body"),{userId:t._id,author:t.name,submitted:currentTime}),Posts.update(comment.postId,{$set:{lastCommentTime:currentTime},$inc:{commentsCount:1}}),comment._id=Comments.insert(comment),createCommentUpdate(comment),comment._id},deleteComment:function(e){var t=Comments.findOne(e);Comments.remove(e),Posts.update({_id:t.postId},{$inc:{commentsCount:-1}}),Updates.update({commentId:e},{$set:{read:!0}})}})}(),function(){Explores=new Meteor.Collection("explores"),Explores.allow({update:ownsExplore,remove:exploreAdmin}),Meteor.methods({explore:function(e){var t=Meteor.user(),n=Explores.findOne({title:e.title});if(!t)throw new Meteor.Error(401,"You need to login to post new stories");if(!e.title)throw new Meteor.Error(422,"Please fill in a headline");if(e.title&&n)throw new Meteor.Error(302,"This explore has already been created",n._id);var i=_.extend(_.pick(e,"title","description","exploreType","coverPhoto","retinaCoverPhoto","exploreProfileIconName","exploreIcon"),{submitted:(new Date).getTime(),lastUpdated:(new Date).getTime()});return exploreId=Explores.insert(i)}})}(),function(){Flags=new Meteor.Collection("flags"),Meteor.methods({createFlag:function(e){Meteor.user();var t=_.extend(_.pick(e,"postId","commentId","bubbleId","invokerId","invokerName"),{submitted:(new Date).getTime(),solved:!1});return console.log(t),Flags.insert(t),Posts.update({_id:t.postId},{$set:{flagged:!0}}),createPostFlagUpdate(t),Meteor.call("sendFlagEmail",t),t},resolveFlag:function(e){Flags.update({_id:e._id},{$set:{solved:!0}}),Posts.update({_id:e.postId},{$set:{flagged:!1}})}})}(),function(){Posts=new Meteor.Collection("posts"),Posts.allow({update:ownsPost,remove:ownsPost}),Posts.deny({update:function(e,t,n){return _.without(n,"author","exploreId","postAsType","postAsId","name","body","dateTime","location","file","fileType","fileSize","lastCommentTime","lastUpdated","eventPhoto","retinaEventPhoto","numDownloads","children","flagged","lastDownloadTime").length>0}});var e=Posts.find({postType:"event"},{fields:{name:1,_id:1}});e.forEach(function(e){Meteor.call("addEventToIndex",e._id,e.name)});var t=Posts.find({postType:"discussion"},{fields:{name:1,_id:1}});t.forEach(function(e){Meteor.call("addDiscussionToIndex",e._id,e.name)});var n=Posts.find({postType:"file",bubbleId:{$exists:!0}},{fields:{name:1,_id:1}});n.forEach(function(e){Meteor.call("addFileToIndex",e._id,e.name)}),Meteor.methods({post:function(e){var t=Meteor.user();if(e.bubbleId!==void 0)var n=Posts.findOne({name:e.name,bubbleId:e.bubbleId});else var n=Posts.findOne({name:e.name,exploreId:e.exploreId});if(!t)throw new Meteor.Error(401,"You need to login to post new stories");if(!("discussion"!=e.postType||e.name&&e.body))throw new Meteor.Error(422,"Please fill in all fields");if(!("event"!=e.postType||e.name&&e.body&&e.location&&e.dateTime))throw new Meteor.Error(422,"Please fill in all fields");if(!("file"!=e.postType||e.name&&e.file))throw new Meteor.Error(422,"Please fill in all fields");if(e.title&&n)throw new Meteor.Error(302,"This post has already been created",n._id);e.attendees||(e.attendees=[]);var i=_.extend(_.pick(e,"postAsType","postAsId","postType","name","body","file","fileType","fileSize","dateTime","location","bubbleId","exploreId","attendees","eventPhoto","numDownloads","parent","children","lastDownloadTime"),{userId:t._id,author:t.name,submitted:(new Date).getTime(),lastUpdated:(new Date).getTime(),lastCommentTime:(new Date).getTime(),commentsCount:0,flagged:!1,viewList:[t._id],viewCount:1});return i._id=Posts.insert(i),createPostUpdate(i),"file"==e.postType?Meteor.call("addFileToIndex",i._id,e.name):"discussion"==e.postType?Meteor.call("addDiscussionToIndex",i._id,e.name):"event"==e.postType&&Meteor.call("addEventToIndex",i._id,e.name),i},deletePost:function(e){Updates.update({postId:e},{$set:{read:!0}});var t=Posts.findOne(e);Posts.remove(e),Meteor.userId()!=t.userId&&createPostDeletedUpdate(t.userId,e)},incViewCount:function(e){var t=Meteor.user();if(!t)throw new Meteor.Error(401,"You need to login");Posts.update({_id:e,viewList:{$nin:[Meteor.userId()]}},{$addToSet:{viewList:Meteor.userId()},$inc:{viewCount:1}})},tagBubble:function(e,t){var n=Meteor.user(),i=Bubble.findOne({bubbleId:t});if(!n)throw new Meteor.Error(401,"You need to login to add a Bubble to this post");Posts.update({_id:e},{$addToSet:{bubble:i._id}})},attendEvent:function(e,t){post=Posts.findOne(e),_.contains(post.attendees,t)?Posts.update({_id:e},{$pull:{attendees:t}}):(Posts.update({_id:e},{$addToSet:{attendees:t}}),createNewAttendeeUpdate(e))},getNumOfEvents:function(e,t){return Posts.find({bubbleId:e,postType:t}).count()}}),createPost=function(e){Meteor.call("post",e,function(t,n){t?throwError(t.reason):e.bubbleId!==void 0?Meteor.Router.to("postPage",n.bubbleId,n._id):Meteor.Router.to("explorePostPage",n.exploreId,n._id)})},createPostWithAttachments=function(e,t){Meteor.call("post",e,function(n,i){if(n)throwError(n.reason);else{for(var o,s=0;o=t[s];s++){var r=new FileReader;r.onload=function(t){return function(n){var o={name:escape(t.name),file:n.target.result,fileType:t.type,postType:"file",numDownloads:0,lastDownloadTime:(new Date).getTime(),author:e.author,parent:i._id};e.bubbleId!==void 0?o.bubbleId=e.bubbleId:o.exploreId=e.exploreId;var s=i._id;Meteor.call("post",o,function(e,t){if(e)throwError(e.reason);else{var n=Posts.findOne({_id:s}),i=n.children;null==i&&(i=[]),i.push(t._id),console.log(i);var o={children:i};console.log("Attaching: ",s,o),Posts.update(s,{$set:o},function(e){e&&throwError(e.reason)})}})}}(o),r.readAsDataURL(o)}e.bubbleId!==void 0?Meteor.Router.to("postPage",i.bubbleId,i._id):Meteor.Router.to("explorePostPage",i.exploreId,i._id)}})},updatePostWithAttachments=function(e,t,n){for(var i=Posts.findOne({_id:e}),o=[],s=0;i.children.length>s;s++)-1==t.children.indexOf(i.children[s])?Posts.remove({_id:i.children[s]}):o.push(i.children[s]);console.log("New children after pruning: ",o),Posts.update(i._id,{$set:{children:o}},function(e){e&&throwError(e.reason)});for(var r,s=0;r=n[s];s++){var a=new FileReader;a.onload=function(e){return function(n){var o={name:escape(e.name),file:n.target.result,fileType:e.type,postType:"file",numDownloads:0,lastDownloadTime:(new Date).getTime(),parent:i._id};console.log("Updating: ",t),t.bubbleId!==void 0?o.bubbleId=t.bubbleId:o.exploreId=t.exploreId;var s=i._id;Meteor.call("post",o,function(e,n){if(e)throwError(e.reason);else{var i=Posts.findOne({_id:s}),o=i.children;null==o&&(o=[]),o.push(n._id),console.log("Newborns: ",o);var r={children:o,body:t.body,name:t.name};Posts.update(s,{$set:r},function(e){e?(console.log("Error: ",e),throwError(e.reason)):console.log("Successfully updated")})}})}}(r),a.readAsDataURL(r)}0==n.length&&(i.bubbleId!==void 0?Posts.update(i._id,{$set:t},function(e){e?(console.log("Error: ",e),throwError(e.reason)):(console.log("Successfully updated"),Meteor.Router.to("postPage",i.bubbleId,i._id))}):i.exploreId!==void 0&&Posts.update(i._id,{$set:t},function(e){e?(console.log("Error: ",e),throwError(e.reason)):(console.log("Successfully updated"),Meteor.Router.to("postPage",i.exploreId,i._id))}))}}(),function(){Updates=new Meteor.Collection("updates"),Updates.allow({update:ownsUpdate,remove:ownsUpdate}),Meteor.methods({update:function(e){console.log("this ran"),Meteor.user();var t=_.extend(_.pick(e,"userId","postId","commentId","bubbleId","invokerId","invokerName","updateType","content","url"),{submitted:(new Date).getTime(),read:!1,emailed:!1}),n=Updates.insert(t);return n},setRead:function(e){return updateList=Updates.find({userId:e.userId,read:!1,updateType:e.updateType,bubbleId:e.bubbleId,postId:e.postId}).fetch(),updateList.length>0&&_.each(updateList,function(e){Updates.update({_id:e._id,read:!1},{$set:{read:!0}})}),!0}}),getEveryone=function(e){return e.users.admins.concat(e.users.members)},createCommentUpdate=function(e){var t=Posts.findOne(e.postId);if(t.bubbleId!==void 0){var n=Bubbles.findOne(t.bubbleId),i=getEveryone(n),o=i.indexOf(e.userId);i.splice(o,1),_.each(i,function(i){Meteor.call("update",{userId:i,postId:t._id,commentId:e._id,bubbleId:t.bubbleId,invokerId:e.userId,invokerName:e.author,updateType:"replied",url:"/mybubbles/"+n._id+"/posts/"+t._id,content:" commented on "+t.name})})}},createPostUpdate=function(e){if(e.bubbleId!==void 0){var t=Bubbles.findOne(e.bubbleId),n=getEveryone(t),i=n.indexOf(e.userId);n.splice(i,1),_.each(n,function(n){Meteor.call("update",{userId:n,postId:e._id,bubbleId:t._id,invokerId:e.userId,invokerName:e.author,updateType:"posted",url:"/mybubbles/"+t._id+"/posts/"+e._id,content:e.author+" created a new "+e.postType+" in "+t.title})})}},createEditEventUpdate=function(e,t){var n=Updates.find({read:!1,postId:t,updateType:"edited post"}).fetch();_.each(n,function(e){Meteor.call("setRead",e)});var i=Posts.findOne(t);if(i.bubbleId!==void 0){var o=Bubbles.findOne(i.bubbleId),s=i.attendees;s=_.reject(s,function(t){return t==e}),_.each(s,function(e){var t=Meteor.users.findOne({_id:e});Meteor.call("update",{userId:t._id,postId:i._id,bubbleId:o._id,invokerId:Meteor.userId(),invokerName:Meteor.user().username,updateType:"edited post",url:"/mybubbles/"+o._id+"/posts/"+i._id,content:Meteor.user().username+" edited "+i.name})})}},createRemoveMemberUpdate=function(e){var t=Bubbles.findOne(Session.get("currentBubbleId")),n=Updates.find({read:!1,bubbleId:t._id,$or:[{userId:e},{invokerId:e,updateType:"entered bubble"},{invokerId:e,updateType:"joined bubble"}]}).fetch();_.each(n,function(e){Meteor.call("setRead",e)}),Meteor.call("update",{userId:e,bubbleId:t._id,invokerId:Meteor.userId(),invokerName:Meteor.user().username,updateType:"removed from bubble",url:"/searchAll",content:"You have been removed from "+t.title})},createRejectApplicationUpdate=function(e){var t=Bubbles.findOne(Session.get("currentBubbleId"));Meteor.call("update",{userId:e,bubbleId:t._id,invokerId:Meteor.userId(),invokerName:Meteor.user().username,updateType:"application rejected",url:"/searchAll",content:t.title+" rejected your application"})},createDeleteEventUpdate=function(e){var t=Bubbles.findOne(e.bubbleId);newApplicantList=Updates.find({read:!1,postId:e.postId}).fetch(),_.each(newApplicantList,function(e){Meteor.call("setRead",e)});var n=e.attendees,i=n.indexOf(Meteor.user().username);n.splice(i,1),_.each(n,function(n){var i=Meteor.users.findOne({username:n});Meteor.call("update",{userId:i._id,postId:e._id,bubbleId:t._id,invokerId:Meteor.userId(),invokerName:Meteor.user().username,updateType:"event cancelled",url:"/mybubbles/"+t._id+"/home",content:Meteor.user().username+" canceled the event "+e.name})})},createInvitationUpdate=function(e){var t=Bubbles.findOne(Session.get("currentBubbleId"));_.each(e,function(e){Meteor.call("update",{userId:e,bubbleId:t._id,invokerId:Meteor.userId(),invokerName:Meteor.user().username,updateType:"invitation",url:"/settings/invites",content:Meteor.user().username+" invited you to "+t.title})})},createNewAttendeeUpdate=function(e){var t=Posts.findOne(e);if(t.bubbleId!==void 0){var n=Bubbles.findOne(t.bubbleId),i=Updates.find({read:!1,userId:Meteor.userId(),bubbleId:n._id,updateType:"new attendee"}).fetch();_.each(i,function(e){Meteor.call("setRead",e)});var o=t.attendees,s=o.indexOf(Meteor.userId());o.splice(s,1),_.each(o,function(i){var o=Meteor.users.findOne(i);Meteor.call("update",{userId:o._id,postId:e,bubbleId:n._id,invokerId:Meteor.userId(),invokerName:Meteor.user().username,updateType:"new attendee",url:"/mybubbles/"+n._id+"/members",content:" is attending "+t.name})})}},createNewMemberUpdate=function(e,t){var n;n=t?Bubbles.findOne(t):Bubbles.findOne(Session.get("currentBubbleId"));var i=Updates.find({read:!1,bubbleId:n._id,$or:[{userId:e},{invokerId:e}]}).fetch();_.each(i,function(e){Meteor.call("setRead",e)});var o=getEveryone(n),s=o.indexOf(Meteor.userId());o.splice(s,1),s=o.indexOf(e),o.splice(s,1);var r=Meteor.users.findOne(e);Meteor.call("update",{userId:r._id,bubbleId:n._id,invokerId:r._id,invokerName:r.username,updateType:"entered bubble",url:"/mybubbles/"+n._id+"/members",content:"Congratulations! You Are now part of "+n.title}),_.each(o,function(t){Meteor.call("update",{userId:t,bubbleId:n._id,invokerId:e,invokerName:r.username,updateType:"joined bubble",url:"/mybubbles/"+n._id+"/members",content:r.username+" joined "+n.title})})},createBubbleEditUpdate=function(){var e=Bubbles.findOne(Session.get("currentBubbleId")),t=getEveryone(e),n=t.indexOf(Meteor.userId());t.splice(n,1),_.each(t,function(t){Meteor.call("update",{userId:t,bubbleId:e._id,invokerId:Meteor.userId(),invokerName:Meteor.user().username,updateType:"edited bubble",url:"/mybubbles/"+e._id+"/home",content:Meteor.user().username+" edited the bubble "+e.title})})},createMemberPromoteUpdate=function(e){var t=Bubbles.findOne(Session.get("currentBubbleId")),n=Updates.find({read:!1,userId:e,bubbleId:t._id,updateType:"member demoted"}).fetch();_.each(n,function(e){Meteor.call("setRead",e)}),Meteor.call("update",{userId:e,bubbleId:Session.get("currentBubbleId"),invokerId:Meteor.userId(),invokerName:Meteor.user().username,updateType:"member promoted",url:"/mybubbles/"+t._id+"/members",content:Meteor.user().username+" promoted you to admin of the bubble "+t.title})},createAdminDemoteUpdate=function(e){var t=Bubbles.findOne(Session.get("currentBubbleId")),n=Updates.find({read:!1,userId:e,bubbleId:t._id,updateType:"member promoted"}).fetch();_.each(n,function(e){Meteor.call("setRead",e)}),Meteor.call("update",{userId:e,bubbleId:Session.get("currentBubbleId"),invokerId:Meteor.userId(),invokerName:Meteor.user().username,updateType:"member demoted",url:"/mybubbles/"+t._id+"/members",content:Meteor.user().username+" demoted you to member of the bubble "+t.title})},createNewApplicantUpdate=function(e){var t=Bubbles.findOne(e),n=Updates.find({read:!1,invokerId:Meteor.userId(),bubbleId:t._id,updateType:"new applicant"}).fetch();_.each(n,function(e){Meteor.call("setRead",e)}),_.each(t.users.admins,function(e){Meteor.call("update",{userId:e,bubbleId:t._id,invokerId:Meteor.userId(),invokerName:Meteor.user().username,updateType:"new applicant",url:"/mybubbles/"+t._id+"/members",content:" applied to be a member of the bubble "+t.title})})},createPostFlagUpdate=function(e){var t=Posts.findOne(e.postId),n=Updates.find({read:!1,postId:t._id,updateType:"post unflagged"}).fetch();_.each(n,function(e){Meteor.call("setRead",e)});var i=Meteor.users.find({userType:"superuser"}).fetch();_.each(i,function(n){n._id!=Meteor.userId()&&Meteor.call("update",{userId:n._id,bubbleId:e.bubbleId,postId:e.postId,invokerId:Meteor.userId(),invokerName:Meteor.user().username,updateType:"post flagged",url:"/mybubbles/"+e.bubbleId+"/posts/"+e.postId,content:t.name+" has been flagged"})})},createPostUnflagUpdate=function(e){var t=Posts.findOne(e.postId),n=Updates.find({read:!1,postId:t._id,updateType:"post flagged"}).fetch();_.each(n,function(e){Meteor.call("setRead",e)});var i=Meteor.users.find({userType:"2"}).fetch();_.each(i,function(n){n._id!=Meteor.userId()&&Meteor.call("update",{userId:n._id,bubbleId:e.bubbleId,postId:e.postId,invokerId:Meteor.userId(),invokerName:Meteor.user().username,updateType:"post unflagged",url:"/mybubbles/"+e.bubbleId+"/posts/"+e.postId,content:t.name+" has been unflagged"})})},createDeleteBubbleUpdate=function(e){var t=Bubbles.findOne(e),n=t.users.admins,i=n.concat(t.users.members);_.each(i,function(e){Meteor.call("update",{userId:e,bubbleId:t._id,invokerId:Meteor.userId(),invokerName:Meteor.user().username,updateType:"bubble deleted",url:"/searchAll",content:t.title+" has been deleted"})})},createPostDeletedUpdate=function(e){var t=Posts.findOne(e),n=Bubbles.findOne(t.bubbleId);Meteor.call("update",{userId:t.userId,bubbleId:n._id,invokerId:Meteor.userId(),invokerName:Meteor.user().username,updateType:"post deleted",url:"/mybubbles/"+n._id+"/home",content:t.name+" has been deleted by "+Meteor.user().username})}}(),function(){Userlogs=new Meteor.Collection("userlogs"),Meteor.methods({createLog:function(e,t){var n={submitted:(new Date).getTime(),userId:Meteor.userId(),page:e,login:t};return n._id=Userlogs.insert(n),n}})}(),function(){Meteor.users.allow({update:ownsProfile}),Meteor.users.deny({update:function(e,t,n){return _.without(n,"emails","phone","ppid","profilePicture","retinaProfilePicture","lastUpdated","userType","secret","neverLoggedIn").length>0}}),Meteor.isServer&&Accounts.onCreateUser(function(e,t){return"campusbubble"==t.username?(t.profilePicture="/img/letterprofiles/c.jpg",t.name="Campus Bubble",t.userType="4"):"emorybubble"==t.username?(t.profilePicture="/img/letterprofiles/e.jpg",t.name="Emory Bubble",t.userType="1"):t.userType="1",t})}(),function(){Template.generateForm.helpers({formElements:function(e){return Template[e]()}}),Template.generateForm.events({"submit form":function(e){e.preventDefault(),this.submit()}})}(),function(){Deps.autorun(function(){})}();